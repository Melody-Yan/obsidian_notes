var sn=Object.defineProperty;var Zr=Object.getOwnPropertyDescriptor;var ei=Object.getOwnPropertyNames;var ti=Object.prototype.hasOwnProperty;var ni=(e,t)=>{for(var n in t)sn(e,n,{get:t[n],enumerable:!0})},ri=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ei(t))!ti.call(e,i)&&i!==n&&sn(e,i,{get:()=>t[i],enumerable:!(r=Zr(t,i))||r.enumerable});return e};var ii=e=>ri(sn({},"__esModule",{value:!0}),e);var wo={};ni(wo,{default:()=>st});module.exports=ii(wo);var ie=require("obsidian");var We=require("obsidian"),de,Pe,Wn=0,xe;function Hn(e){xe=e}function dt(){return de}function Vt(){return Pe}function Bt(){var r,i;if(xe.showCountsActive!=!0)return;Pe=[],xe.app.metadataCache.iterateReferences((o,s)=>{let a=(0,We.parseLinktext)(s.link);if(a!=null&&a.path){let l=xe.app.metadataCache.getFirstLinkpathDest(a.path,"/"),f=l?"":a.path;Pe.push({reference:{displayText:s.displayText,link:s.link,position:s.position},resolvedFile:l,ghostLink:f,sourceFile:xe.app.metadataCache.getFirstLinkpathDest(o,"/"),excludedFile:!1})}});let e=Object.entries(app.metadataCache.metadataCache).filter(o=>{var s,a;return(a=(s=o[1])==null?void 0:s.frontmatter)==null?void 0:a["snw-index-exclude"]}),t=Object.entries(app.metadataCache.fileCache).filter(o=>e.find(s=>s[0]===o[1].hash));for(let o=0;o<Pe.length;o++)if(Pe[o].excludedFile=!1,(i=(r=Pe[o])==null?void 0:r.resolvedFile)!=null&&i.path){let s=Pe[o].resolvedFile.path;for(let a=0;a<t.length;a++)if(s==t[a][0]){Pe[o].excludedFile=!0;break}}de=Pe.reduce((o,s)=>{let a="",l="";return a=s.reference.link,s!=null&&s.resolvedFile?l=s.resolvedFile.path.replace(s.resolvedFile.name,"")+s.reference.link:l=s.ghostLink,a===l&&(l=null),o[a]||(o[a]=[]),o[a].push(s),l!=null&&(o[l]||(o[l]=[]),o[l].push(s)),o},{}),window.snwAPI.references=de,Wn=Date.now()}var ln=new Map;function me(e){if(xe.showCountsActive!=!0)return;if(ln.has(e.path)){let i=ln.get(e.path);if(Wn<i.createDate&&i.createDate+xe.settings.cacheUpdateInMilliseconds>Date.now())return i}let t={},n=xe.app.metadataCache.getFileCache(e);if(!n)return t;de||Bt();let r=Object.values(xe.app.metadataCache.metadataCache).reduce((i,o)=>{let s=o.headings;return s&&s.forEach(a=>{i.push(a.heading)}),i},[]);if(n!=null&&n.blocks){let i=e.path.replace(".md","");t.blocks=Object.values(n.blocks).map(o=>({key:i+"#^"+o.id,pos:o.position,page:e.basename,type:"block",references:de[i+"#^"+o.id]||[]}))}return n!=null&&n.headings&&(t.headings=n.headings.map(i=>({original:"#".repeat(i.level)+" "+i.heading,key:`${e.path.replace(".md","")}#${(0,We.stripHeading)(i.heading)}`,headerMatch:i.heading,headerMatch2:e.basename+"#"+i.heading,pos:i.position,page:e.basename,type:"heading",references:de[`${e.path.replace(".md","")}#${(0,We.stripHeading)(i.heading)}`]||de[`${e.basename}$#${(0,We.stripHeading)(i.heading)}`]||[]}))),n!=null&&n.links&&(t.links=n.links.map(i=>({key:i.link,original:i.original,type:"link",pos:i.position,page:e.basename,references:de[i.link]||[]})),t.links&&(t.links=t.links.map(i=>{if(i.key.includes("#")&&!i.key.includes("#^")){let o=r.filter(s=>(0,We.stripHeading)(s)===i.key.split("#")[1])[0];i.original=o||void 0}return i}))),n!=null&&n.embeds&&(t.embeds=n.embeds.map(i=>({key:i.link,page:e.basename,type:"embed",pos:i.position,references:de[i.link]||[]})),t.embeds&&(t.embeds=t.embeds.map(i=>{if(i.key.includes("#")&&!i.key.includes("#^")&&t.headings){let o=r.filter(s=>s.includes(i.key.split("#")[1]))[0];i.original=o||void 0}return(i.key.startsWith("#^")||i.key.startsWith("#"))&&(i.key=`${e.basename}${i.key}`,i.references=de[i.key]||[]),i}))),t.cacheMetaData=n,t.createDate=Date.now(),ln.set(e.path,t),t}var Se=require("@codemirror/view"),Nr=require("obsidian");var R="top",B="bottom",V="right",W="left",jt="auto",De=[R,B,V,W],Ee="start",He="end",Vn="clippingParents",_t="viewport",Qe="popper",Bn="reference",pn=De.reduce(function(e,t){return e.concat([t+"-"+Ee,t+"-"+He])},[]),Ut=[].concat(De,[jt]).reduce(function(e,t){return e.concat([t,t+"-"+Ee,t+"-"+He])},[]),oi="beforeRead",ai="read",si="afterRead",li="beforeMain",pi="main",ci="afterMain",ui="beforeWrite",fi="write",di="afterWrite",jn=[oi,ai,si,li,pi,ci,ui,fi,di];function _(e){return e?(e.nodeName||"").toLowerCase():null}function M(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function ee(e){var t=M(e).Element;return e instanceof t||e instanceof Element}function j(e){var t=M(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Ze(e){if(typeof ShadowRoot=="undefined")return!1;var t=M(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function mi(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var r=t.styles[n]||{},i=t.attributes[n]||{},o=t.elements[n];!j(o)||!_(o)||(Object.assign(o.style,r),Object.keys(i).forEach(function(s){var a=i[s];a===!1?o.removeAttribute(s):o.setAttribute(s,a===!0?"":a)}))})}function gi(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(r){var i=t.elements[r],o=t.attributes[r]||{},s=Object.keys(t.styles.hasOwnProperty(r)?t.styles[r]:n[r]),a=s.reduce(function(l,f){return l[f]="",l},{});!j(i)||!_(i)||(Object.assign(i.style,a),Object.keys(o).forEach(function(l){i.removeAttribute(l)}))})}}var mt={name:"applyStyles",enabled:!0,phase:"write",fn:mi,effect:gi,requires:["computeStyles"]};function U(e){return e.split("-")[0]}var ae=Math.max,Ve=Math.min,Ce=Math.round;function et(){var e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function gt(){return!/^((?!chrome|android).)*safari/i.test(et())}function te(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var r=e.getBoundingClientRect(),i=1,o=1;t&&j(e)&&(i=e.offsetWidth>0&&Ce(r.width)/e.offsetWidth||1,o=e.offsetHeight>0&&Ce(r.height)/e.offsetHeight||1);var s=ee(e)?M(e):window,a=s.visualViewport,l=!gt()&&n,f=(r.left+(l&&a?a.offsetLeft:0))/i,c=(r.top+(l&&a?a.offsetTop:0))/o,d=r.width/i,y=r.height/o;return{width:d,height:y,top:c,right:f+d,bottom:c+y,left:f,x:f,y:c}}function Be(e){var t=te(e),n=e.offsetWidth,r=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-r)<=1&&(r=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:r}}function ht(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Ze(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function z(e){return M(e).getComputedStyle(e)}function cn(e){return["table","td","th"].indexOf(_(e))>=0}function q(e){return((ee(e)?e.ownerDocument:e.document)||window.document).documentElement}function ke(e){return _(e)==="html"?e:e.assignedSlot||e.parentNode||(Ze(e)?e.host:null)||q(e)}function _n(e){return!j(e)||z(e).position==="fixed"?null:e.offsetParent}function hi(e){var t=/firefox/i.test(et()),n=/Trident/i.test(et());if(n&&j(e)){var r=z(e);if(r.position==="fixed")return null}var i=ke(e);for(Ze(i)&&(i=i.host);j(i)&&["html","body"].indexOf(_(i))<0;){var o=z(i);if(o.transform!=="none"||o.perspective!=="none"||o.contain==="paint"||["transform","perspective"].indexOf(o.willChange)!==-1||t&&o.willChange==="filter"||t&&o.filter&&o.filter!=="none")return i;i=i.parentNode}return null}function se(e){for(var t=M(e),n=_n(e);n&&cn(n)&&z(n).position==="static";)n=_n(n);return n&&(_(n)==="html"||_(n)==="body"&&z(n).position==="static")?t:n||hi(e)||t}function je(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function _e(e,t,n){return ae(e,Ve(t,n))}function Un(e,t,n){var r=_e(e,t,n);return r>n?n:r}function vt(){return{top:0,right:0,bottom:0,left:0}}function wt(e){return Object.assign({},vt(),e)}function bt(e,t){return t.reduce(function(n,r){return n[r]=e,n},{})}var vi=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,wt(typeof t!="number"?t:bt(t,De))};function wi(e){var t,n=e.state,r=e.name,i=e.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=U(n.placement),l=je(a),f=[W,V].indexOf(a)>=0,c=f?"height":"width";if(!(!o||!s)){var d=vi(i.padding,n),y=Be(o),m=l==="y"?R:W,v=l==="y"?B:V,g=n.rects.reference[c]+n.rects.reference[l]-s[l]-n.rects.popper[c],h=s[l]-n.rects.reference[l],P=se(o),C=P?l==="y"?P.clientHeight||0:P.clientWidth||0:0,x=g/2-h/2,p=d[m],k=C-y[c]-d[v],w=C/2-y[c]/2+x,O=_e(p,w,k),N=l;n.modifiersData[r]=(t={},t[N]=O,t.centerOffset=O-w,t)}}function bi(e){var t=e.state,n=e.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=t.elements.popper.querySelector(i),!i)||ht(t.elements.popper,i)&&(t.elements.arrow=i))}var $n={name:"arrow",enabled:!0,phase:"main",fn:wi,effect:bi,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ne(e){return e.split("-")[1]}var yi={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Pi(e){var t=e.x,n=e.y,r=window,i=r.devicePixelRatio||1;return{x:Ce(t*i)/i||0,y:Ce(n*i)/i||0}}function qn(e){var t,n=e.popper,r=e.popperRect,i=e.placement,o=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,f=e.adaptive,c=e.roundOffsets,d=e.isFixed,y=s.x,m=y===void 0?0:y,v=s.y,g=v===void 0?0:v,h=typeof c=="function"?c({x:m,y:g}):{x:m,y:g};m=h.x,g=h.y;var P=s.hasOwnProperty("x"),C=s.hasOwnProperty("y"),x=W,p=R,k=window;if(f){var w=se(n),O="clientHeight",N="clientWidth";if(w===M(n)&&(w=q(n),z(w).position!=="static"&&a==="absolute"&&(O="scrollHeight",N="scrollWidth")),w=w,i===R||(i===W||i===V)&&o===He){p=B;var F=d&&w===k&&k.visualViewport?k.visualViewport.height:w[O];g-=F-r.height,g*=l?1:-1}if(i===W||(i===R||i===B)&&o===He){x=V;var A=d&&w===k&&k.visualViewport?k.visualViewport.width:w[N];m-=A-r.width,m*=l?1:-1}}var I=Object.assign({position:a},f&&yi),D=c===!0?Pi({x:m,y:g}):{x:m,y:g};if(m=D.x,g=D.y,l){var L;return Object.assign({},I,(L={},L[p]=C?"0":"",L[x]=P?"0":"",L.transform=(k.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",L))}return Object.assign({},I,(t={},t[p]=C?g+"px":"",t[x]=P?m+"px":"",t.transform="",t))}function xi(e){var t=e.state,n=e.options,r=n.gpuAcceleration,i=r===void 0?!0:r,o=n.adaptive,s=o===void 0?!0:o,a=n.roundOffsets,l=a===void 0?!0:a;if(!1)var f;var c={placement:U(t.placement),variation:ne(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:i,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,qn(Object.assign({},c,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,qn(Object.assign({},c,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Gn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:xi,data:{}};var $t={passive:!0};function Ei(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,o=i===void 0?!0:i,s=r.resize,a=s===void 0?!0:s,l=M(t.elements.popper),f=[].concat(t.scrollParents.reference,t.scrollParents.popper);return o&&f.forEach(function(c){c.addEventListener("scroll",n.update,$t)}),a&&l.addEventListener("resize",n.update,$t),function(){o&&f.forEach(function(c){c.removeEventListener("scroll",n.update,$t)}),a&&l.removeEventListener("resize",n.update,$t)}}var Yn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ei,data:{}};var Ci={left:"right",right:"left",bottom:"top",top:"bottom"};function tt(e){return e.replace(/left|right|bottom|top/g,function(t){return Ci[t]})}var ki={start:"end",end:"start"};function qt(e){return e.replace(/start|end/g,function(t){return ki[t]})}function Ue(e){var t=M(e),n=t.pageXOffset,r=t.pageYOffset;return{scrollLeft:n,scrollTop:r}}function $e(e){return te(q(e)).left+Ue(e).scrollLeft}function un(e,t){var n=M(e),r=q(e),i=n.visualViewport,o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;var f=gt();(f||!f&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a+$e(e),y:l}}function fn(e){var t,n=q(e),r=Ue(e),i=(t=e.ownerDocument)==null?void 0:t.body,o=ae(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=ae(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+$e(e),l=-r.scrollTop;return z(i||n).direction==="rtl"&&(a+=ae(n.clientWidth,i?i.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function qe(e){var t=z(e),n=t.overflow,r=t.overflowX,i=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Gt(e){return["html","body","#document"].indexOf(_(e))>=0?e.ownerDocument.body:j(e)&&qe(e)?e:Gt(ke(e))}function Le(e,t){var n;t===void 0&&(t=[]);var r=Gt(e),i=r===((n=e.ownerDocument)==null?void 0:n.body),o=M(r),s=i?[o].concat(o.visualViewport||[],qe(r)?r:[]):r,a=t.concat(s);return i?a:a.concat(Le(ke(s)))}function nt(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function Ti(e,t){var n=te(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Xn(e,t,n){return t===_t?nt(un(e,n)):ee(t)?Ti(t,n):nt(fn(q(e)))}function Si(e){var t=Le(ke(e)),n=["absolute","fixed"].indexOf(z(e).position)>=0,r=n&&j(e)?se(e):e;return ee(r)?t.filter(function(i){return ee(i)&&ht(i,r)&&_(i)!=="body"}):[]}function dn(e,t,n,r){var i=t==="clippingParents"?Si(e):[].concat(t),o=[].concat(i,[n]),s=o[0],a=o.reduce(function(l,f){var c=Xn(e,f,r);return l.top=ae(c.top,l.top),l.right=Ve(c.right,l.right),l.bottom=Ve(c.bottom,l.bottom),l.left=ae(c.left,l.left),l},Xn(e,s,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function yt(e){var t=e.reference,n=e.element,r=e.placement,i=r?U(r):null,o=r?ne(r):null,s=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(i){case R:l={x:s,y:t.y-n.height};break;case B:l={x:s,y:t.y+t.height};break;case V:l={x:t.x+t.width,y:a};break;case W:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var f=i?je(i):null;if(f!=null){var c=f==="y"?"height":"width";switch(o){case Ee:l[f]=l[f]-(t[c]/2-n[c]/2);break;case He:l[f]=l[f]+(t[c]/2-n[c]/2);break;default:}}return l}function le(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=r===void 0?e.placement:r,o=n.strategy,s=o===void 0?e.strategy:o,a=n.boundary,l=a===void 0?Vn:a,f=n.rootBoundary,c=f===void 0?_t:f,d=n.elementContext,y=d===void 0?Qe:d,m=n.altBoundary,v=m===void 0?!1:m,g=n.padding,h=g===void 0?0:g,P=wt(typeof h!="number"?h:bt(h,De)),C=y===Qe?Bn:Qe,x=e.rects.popper,p=e.elements[v?C:y],k=dn(ee(p)?p:p.contextElement||q(e.elements.popper),l,c,s),w=te(e.elements.reference),O=yt({reference:w,element:x,strategy:"absolute",placement:i}),N=nt(Object.assign({},x,O)),F=y===Qe?N:w,A={top:k.top-F.top+P.top,bottom:F.bottom-k.bottom+P.bottom,left:k.left-F.left+P.left,right:F.right-k.right+P.right},I=e.modifiersData.offset;if(y===Qe&&I){var D=I[i];Object.keys(A).forEach(function(L){var K=[V,B].indexOf(L)>=0?1:-1,J=[R,B].indexOf(L)>=0?"y":"x";A[L]+=D[J]*K})}return A}function mn(e,t){t===void 0&&(t={});var n=t,r=n.placement,i=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,f=l===void 0?Ut:l,c=ne(r),d=c?a?pn:pn.filter(function(v){return ne(v)===c}):De,y=d.filter(function(v){return f.indexOf(v)>=0});y.length===0&&(y=d);var m=y.reduce(function(v,g){return v[g]=le(e,{placement:g,boundary:i,rootBoundary:o,padding:s})[U(g)],v},{});return Object.keys(m).sort(function(v,g){return m[v]-m[g]})}function Ii(e){if(U(e)===jt)return[];var t=tt(e);return[qt(e),t,qt(t)]}function Oi(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,f=n.padding,c=n.boundary,d=n.rootBoundary,y=n.altBoundary,m=n.flipVariations,v=m===void 0?!0:m,g=n.allowedAutoPlacements,h=t.options.placement,P=U(h),C=P===h,x=l||(C||!v?[tt(h)]:Ii(h)),p=[h].concat(x).reduce(function(ve,oe){return ve.concat(U(oe)===jt?mn(t,{placement:oe,boundary:c,rootBoundary:d,padding:f,flipVariations:v,allowedAutoPlacements:g}):oe)},[]),k=t.rects.reference,w=t.rects.popper,O=new Map,N=!0,F=p[0],A=0;A<p.length;A++){var I=p[A],D=U(I),L=ne(I)===Ee,K=[R,B].indexOf(D)>=0,J=K?"width":"height",G=le(t,{placement:I,boundary:c,rootBoundary:d,altBoundary:y,padding:f}),Y=K?L?V:W:L?B:R;k[J]>w[J]&&(Y=tt(Y));var $=tt(Y),ce=[];if(o&&ce.push(G[D]<=0),a&&ce.push(G[Y]<=0,G[$]<=0),ce.every(function(ve){return ve})){F=I,N=!1;break}O.set(I,ce)}if(N)for(var ue=v?3:1,Ae=function(oe){var we=p.find(function(Ye){var be=O.get(Ye);if(be)return be.slice(0,oe).every(function(Xe){return Xe})});if(we)return F=we,"break"},fe=ue;fe>0;fe--){var Re=Ae(fe);if(Re==="break")break}t.placement!==F&&(t.modifiersData[r]._skip=!0,t.placement=F,t.reset=!0)}}var zn={name:"flip",enabled:!0,phase:"main",fn:Oi,requiresIfExists:["offset"],data:{_skip:!1}};function Kn(e,t,n){return n===void 0&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function Jn(e){return[R,V,B,W].some(function(t){return e[t]>=0})}function Di(e){var t=e.state,n=e.name,r=t.rects.reference,i=t.rects.popper,o=t.modifiersData.preventOverflow,s=le(t,{elementContext:"reference"}),a=le(t,{altBoundary:!0}),l=Kn(s,r),f=Kn(a,i,o),c=Jn(l),d=Jn(f);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:f,isReferenceHidden:c,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":c,"data-popper-escaped":d})}var Qn={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Di};function Li(e,t,n){var r=U(e),i=[W,R].indexOf(r)>=0?-1:1,o=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*i,[W,V].indexOf(r)>=0?{x:a,y:s}:{x:s,y:a}}function Mi(e){var t=e.state,n=e.options,r=e.name,i=n.offset,o=i===void 0?[0,0]:i,s=Ut.reduce(function(c,d){return c[d]=Li(d,t.rects,o),c},{}),a=s[t.placement],l=a.x,f=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=f),t.modifiersData[r]=s}var Zn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Mi};function Ai(e){var t=e.state,n=e.name;t.modifiersData[n]=yt({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var er={name:"popperOffsets",enabled:!0,phase:"read",fn:Ai,data:{}};function gn(e){return e==="x"?"y":"x"}function Ri(e){var t=e.state,n=e.options,r=e.name,i=n.mainAxis,o=i===void 0?!0:i,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,f=n.rootBoundary,c=n.altBoundary,d=n.padding,y=n.tether,m=y===void 0?!0:y,v=n.tetherOffset,g=v===void 0?0:v,h=le(t,{boundary:l,rootBoundary:f,padding:d,altBoundary:c}),P=U(t.placement),C=ne(t.placement),x=!C,p=je(P),k=gn(p),w=t.modifiersData.popperOffsets,O=t.rects.reference,N=t.rects.popper,F=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,A=typeof F=="number"?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),I=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,D={x:0,y:0};if(w){if(o){var L,K=p==="y"?R:W,J=p==="y"?B:V,G=p==="y"?"height":"width",Y=w[p],$=Y+h[K],ce=Y-h[J],ue=m?-N[G]/2:0,Ae=C===Ee?O[G]:N[G],fe=C===Ee?-N[G]:-O[G],Re=t.elements.arrow,ve=m&&Re?Be(Re):{width:0,height:0},oe=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:vt(),we=oe[K],Ye=oe[J],be=_e(0,O[G],ve[G]),Xe=x?O[G]/2-ue-be-we-A.mainAxis:Ae-be-we-A.mainAxis,Ie=x?-O[G]/2+ue+be+Ye+A.mainAxis:fe+be+Ye+A.mainAxis,ze=t.elements.arrow&&se(t.elements.arrow),It=ze?p==="y"?ze.clientTop||0:ze.clientLeft||0:0,lt=(L=I==null?void 0:I[p])!=null?L:0,Ot=Y+Xe-lt-It,Dt=Y+Ie-lt,pt=_e(m?Ve($,Ot):$,Y,m?ae(ce,Dt):ce);w[p]=pt,D[p]=pt-Y}if(a){var ct,Lt=p==="x"?R:W,Mt=p==="x"?B:V,ye=w[k],Oe=k==="y"?"height":"width",ut=ye+h[Lt],Ne=ye-h[Mt],ft=[R,W].indexOf(P)!==-1,At=(ct=I==null?void 0:I[k])!=null?ct:0,Rt=ft?ut:ye-O[Oe]-N[Oe]-At+A.altAxis,Nt=ft?ye+O[Oe]+N[Oe]-At-A.altAxis:Ne,Ft=m&&ft?Un(Rt,ye,Nt):_e(m?Rt:ut,ye,m?Nt:Ne);w[k]=Ft,D[k]=Ft-ye}t.modifiersData[r]=D}}var tr={name:"preventOverflow",enabled:!0,phase:"main",fn:Ri,requiresIfExists:["offset"]};function hn(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function vn(e){return e===M(e)||!j(e)?Ue(e):hn(e)}function Ni(e){var t=e.getBoundingClientRect(),n=Ce(t.width)/e.offsetWidth||1,r=Ce(t.height)/e.offsetHeight||1;return n!==1||r!==1}function wn(e,t,n){n===void 0&&(n=!1);var r=j(t),i=j(t)&&Ni(t),o=q(t),s=te(e,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((_(t)!=="body"||qe(o))&&(a=vn(t)),j(t)?(l=te(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):o&&(l.x=$e(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Fi(e){var t=new Map,n=new Set,r=[];e.forEach(function(o){t.set(o.name,o)});function i(o){n.add(o.name);var s=[].concat(o.requires||[],o.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&i(l)}}),r.push(o)}return e.forEach(function(o){n.has(o.name)||i(o)}),r}function bn(e){var t=Fi(e);return jn.reduce(function(n,r){return n.concat(t.filter(function(i){return i.phase===r}))},[])}function yn(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Pn(e){var t=e.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(t).map(function(n){return t[n]})}var nr={placement:"bottom",modifiers:[],strategy:"absolute"};function rr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function ir(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,r=n===void 0?[]:n,i=t.defaultOptions,o=i===void 0?nr:i;return function(a,l,f){f===void 0&&(f=o);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},nr,o),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],y=!1,m={state:c,setOptions:function(P){var C=typeof P=="function"?P(c.options):P;g(),c.options=Object.assign({},o,c.options,C),c.scrollParents={reference:ee(a)?Le(a):a.contextElement?Le(a.contextElement):[],popper:Le(l)};var x=bn(Pn([].concat(r,c.options.modifiers)));if(c.orderedModifiers=x.filter(function(I){return I.enabled}),!1){var p;if(getBasePlacement(c.options.placement)===auto)var k;var w,O,N,F,A}return v(),m.update()},forceUpdate:function(){if(!y){var P=c.elements,C=P.reference,x=P.popper;if(rr(C,x)){c.rects={reference:wn(C,se(x),c.options.strategy==="fixed"),popper:Be(x)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(I){return c.modifiersData[I.name]=Object.assign({},I.data)});for(var p=0,k=0;k<c.orderedModifiers.length;k++){if(c.reset===!0){c.reset=!1,k=-1;continue}var w=c.orderedModifiers[k],O=w.fn,N=w.options,F=N===void 0?{}:N,A=w.name;typeof O=="function"&&(c=O({state:c,options:F,name:A,instance:m})||c)}}}},update:yn(function(){return new Promise(function(h){m.forceUpdate(),h(c)})}),destroy:function(){g(),y=!0}};if(!rr(a,l))return m;m.setOptions(f).then(function(h){!y&&f.onFirstUpdate&&f.onFirstUpdate(h)});function v(){c.orderedModifiers.forEach(function(h){var P=h.name,C=h.options,x=C===void 0?{}:C,p=h.effect;if(typeof p=="function"){var k=p({state:c,name:P,instance:m,options:x}),w=function(){};d.push(k||w)}})}function g(){d.forEach(function(h){return h()}),d=[]}return m}}var Wi=[Yn,er,Gn,mt,Zn,zn,tr,$n,Qn],xn=ir({defaultModifiers:Wi});var Hi="tippy-box",mr="tippy-content",Vi="tippy-backdrop",gr="tippy-arrow",hr="tippy-svg-arrow",Ge={passive:!0,capture:!0},vr=function(){return document.body};function En(e,t,n){if(Array.isArray(e)){var r=e[t];return r==null?Array.isArray(n)?n[t]:n:r}return e}function In(e,t){var n={}.toString.call(e);return n.indexOf("[object")===0&&n.indexOf(t+"]")>-1}function wr(e,t){return typeof e=="function"?e.apply(void 0,t):e}function or(e,t){if(t===0)return e;var n;return function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}}function Bi(e){return e.split(/\s+/).filter(Boolean)}function rt(e){return[].concat(e)}function ar(e,t){e.indexOf(t)===-1&&e.push(t)}function ji(e){return e.filter(function(t,n){return e.indexOf(t)===n})}function _i(e){return e.split("-")[0]}function zt(e){return[].slice.call(e)}function sr(e){return Object.keys(e).reduce(function(t,n){return e[n]!==void 0&&(t[n]=e[n]),t},{})}function Pt(){return document.createElement("div")}function Kt(e){return["Element","Fragment"].some(function(t){return In(e,t)})}function Ui(e){return In(e,"NodeList")}function $i(e){return In(e,"MouseEvent")}function br(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function qi(e){return Kt(e)?[e]:Ui(e)?zt(e):Array.isArray(e)?e:zt(document.querySelectorAll(e))}function Cn(e,t){e.forEach(function(n){n&&(n.style.transitionDuration=t+"ms")})}function lr(e,t){e.forEach(function(n){n&&n.setAttribute("data-state",t)})}function Gi(e){var t,n=rt(e),r=n[0];return r!=null&&(t=r.ownerDocument)!=null&&t.body?r.ownerDocument:document}function Yi(e,t){var n=t.clientX,r=t.clientY;return e.every(function(i){var o=i.popperRect,s=i.popperState,a=i.props,l=a.interactiveBorder,f=_i(s.placement),c=s.modifiersData.offset;if(!c)return!0;var d=f==="bottom"?c.top.y:0,y=f==="top"?c.bottom.y:0,m=f==="right"?c.left.x:0,v=f==="left"?c.right.x:0,g=o.top-r+d>l,h=r-o.bottom-y>l,P=o.left-n+m>l,C=n-o.right-v>l;return g||h||P||C})}function kn(e,t,n){var r=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){e[r](i,n)})}function pr(e,t){for(var n=t;n;){var r;if(e.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var ge={isTouch:!1},cr=0;function Xi(){ge.isTouch||(ge.isTouch=!0,window.performance&&document.addEventListener("mousemove",yr))}function yr(){var e=performance.now();e-cr<20&&(ge.isTouch=!1,document.removeEventListener("mousemove",yr)),cr=e}function zi(){var e=document.activeElement;if(br(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function Ki(){document.addEventListener("touchstart",Xi,Ge),window.addEventListener("blur",zi)}var Ji=typeof window!="undefined"&&typeof document!="undefined",Qi=Ji?!!window.msCrypto:!1;var Zi={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},eo={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},pe=Object.assign({appendTo:vr,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},Zi,eo),to=Object.keys(pe),no=function(t){var n=Object.keys(t);n.forEach(function(r){pe[r]=t[r]})};function Pr(e){var t=e.plugins||[],n=t.reduce(function(r,i){var o=i.name,s=i.defaultValue;if(o){var a;r[o]=e[o]!==void 0?e[o]:(a=pe[o])!=null?a:s}return r},{});return Object.assign({},e,n)}function ro(e,t){var n=t?Object.keys(Pr(Object.assign({},pe,{plugins:t}))):to,r=n.reduce(function(i,o){var s=(e.getAttribute("data-tippy-"+o)||"").trim();if(!s)return i;if(o==="content")i[o]=s;else try{i[o]=JSON.parse(s)}catch(a){i[o]=s}return i},{});return r}function ur(e,t){var n=Object.assign({},t,{content:wr(t.content,[e])},t.ignoreAttributes?{}:ro(e,t.plugins));return n.aria=Object.assign({},pe.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?t.interactive:n.aria.expanded,content:n.aria.content==="auto"?t.interactive?null:"describedby":n.aria.content},n}var io=function(){return"innerHTML"};function Tn(e,t){e[io()]=t}function fr(e){var t=Pt();return e===!0?t.className=gr:(t.className=hr,Kt(e)?t.appendChild(e):Tn(t,e)),t}function dr(e,t){Kt(t.content)?(Tn(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?Tn(e,t.content):e.textContent=t.content)}function Sn(e){var t=e.firstElementChild,n=zt(t.children);return{box:t,content:n.find(function(r){return r.classList.contains(mr)}),arrow:n.find(function(r){return r.classList.contains(gr)||r.classList.contains(hr)}),backdrop:n.find(function(r){return r.classList.contains(Vi)})}}function xr(e){var t=Pt(),n=Pt();n.className=Hi,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=Pt();r.className=mr,r.setAttribute("data-state","hidden"),dr(r,e.props),t.appendChild(n),n.appendChild(r),i(e.props,e.props);function i(o,s){var a=Sn(t),l=a.box,f=a.content,c=a.arrow;s.theme?l.setAttribute("data-theme",s.theme):l.removeAttribute("data-theme"),typeof s.animation=="string"?l.setAttribute("data-animation",s.animation):l.removeAttribute("data-animation"),s.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof s.maxWidth=="number"?s.maxWidth+"px":s.maxWidth,s.role?l.setAttribute("role",s.role):l.removeAttribute("role"),(o.content!==s.content||o.allowHTML!==s.allowHTML)&&dr(f,e.props),s.arrow?c?o.arrow!==s.arrow&&(l.removeChild(c),l.appendChild(fr(s.arrow))):l.appendChild(fr(s.arrow)):c&&l.removeChild(c)}return{popper:t,onUpdate:i}}xr.$$tippy=!0;var oo=1,Yt=[],Xt=[];function ao(e,t){var n=ur(e,Object.assign({},pe,Pr(sr(t)))),r,i,o,s=!1,a=!1,l=!1,f=!1,c,d,y,m=[],v=or(Ot,n.interactiveDebounce),g,h=oo++,P=null,C=ji(n.plugins),x={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},p={id:h,reference:e,popper:Pt(),popperInstance:P,props:n,state:x,plugins:C,clearDelayTimeouts:Rt,setProps:Nt,setContent:Ft,show:Yr,hide:Xr,hideWithInteractivity:zr,enable:ft,disable:At,unmount:Kr,destroy:Jr};if(!n.render)return p;var k=n.render(p),w=k.popper,O=k.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+p.id,p.popper=w,e._tippy=p,w._tippy=p;var N=C.map(function(u){return u.fn(p)}),F=e.hasAttribute("aria-expanded");return ze(),ue(),Y(),$("onCreate",[p]),n.showOnCreate&&ut(),w.addEventListener("mouseenter",function(){p.props.interactive&&p.state.isVisible&&p.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){p.props.interactive&&p.props.trigger.indexOf("mouseenter")>=0&&K().addEventListener("mousemove",v)}),p;function A(){var u=p.props.touch;return Array.isArray(u)?u:[u,0]}function I(){return A()[0]==="hold"}function D(){var u;return!!((u=p.props.render)!=null&&u.$$tippy)}function L(){return g||e}function K(){var u=L().parentNode;return u?Gi(u):document}function J(){return Sn(w)}function G(u){return p.state.isMounted&&!p.state.isVisible||ge.isTouch||c&&c.type==="focus"?0:En(p.props.delay,u?0:1,pe.delay)}function Y(u){u===void 0&&(u=!1),w.style.pointerEvents=p.props.interactive&&!u?"":"none",w.style.zIndex=""+p.props.zIndex}function $(u,b,E){if(E===void 0&&(E=!0),N.forEach(function(T){T[u]&&T[u].apply(T,b)}),E){var S;(S=p.props)[u].apply(S,b)}}function ce(){var u=p.props.aria;if(u.content){var b="aria-"+u.content,E=w.id,S=rt(p.props.triggerTarget||e);S.forEach(function(T){var X=T.getAttribute(b);if(p.state.isVisible)T.setAttribute(b,X?X+" "+E:E);else{var Z=X&&X.replace(E,"").trim();Z?T.setAttribute(b,Z):T.removeAttribute(b)}})}}function ue(){if(!(F||!p.props.aria.expanded)){var u=rt(p.props.triggerTarget||e);u.forEach(function(b){p.props.interactive?b.setAttribute("aria-expanded",p.state.isVisible&&b===L()?"true":"false"):b.removeAttribute("aria-expanded")})}}function Ae(){K().removeEventListener("mousemove",v),Yt=Yt.filter(function(u){return u!==v})}function fe(u){if(!(ge.isTouch&&(l||u.type==="mousedown"))){var b=u.composedPath&&u.composedPath()[0]||u.target;if(!(p.props.interactive&&pr(w,b))){if(rt(p.props.triggerTarget||e).some(function(E){return pr(E,b)})){if(ge.isTouch||p.state.isVisible&&p.props.trigger.indexOf("click")>=0)return}else $("onClickOutside",[p,u]);p.props.hideOnClick===!0&&(p.clearDelayTimeouts(),p.hide(),a=!0,setTimeout(function(){a=!1}),p.state.isMounted||we())}}}function Re(){l=!0}function ve(){l=!1}function oe(){var u=K();u.addEventListener("mousedown",fe,!0),u.addEventListener("touchend",fe,Ge),u.addEventListener("touchstart",ve,Ge),u.addEventListener("touchmove",Re,Ge)}function we(){var u=K();u.removeEventListener("mousedown",fe,!0),u.removeEventListener("touchend",fe,Ge),u.removeEventListener("touchstart",ve,Ge),u.removeEventListener("touchmove",Re,Ge)}function Ye(u,b){Xe(u,function(){!p.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&b()})}function be(u,b){Xe(u,b)}function Xe(u,b){var E=J().box;function S(T){T.target===E&&(kn(E,"remove",S),b())}if(u===0)return b();kn(E,"remove",d),kn(E,"add",S),d=S}function Ie(u,b,E){E===void 0&&(E=!1);var S=rt(p.props.triggerTarget||e);S.forEach(function(T){T.addEventListener(u,b,E),m.push({node:T,eventType:u,handler:b,options:E})})}function ze(){I()&&(Ie("touchstart",lt,{passive:!0}),Ie("touchend",Dt,{passive:!0})),Bi(p.props.trigger).forEach(function(u){if(u!=="manual")switch(Ie(u,lt),u){case"mouseenter":Ie("mouseleave",Dt);break;case"focus":Ie(Qi?"focusout":"blur",pt);break;case"focusin":Ie("focusout",pt);break}})}function It(){m.forEach(function(u){var b=u.node,E=u.eventType,S=u.handler,T=u.options;b.removeEventListener(E,S,T)}),m=[]}function lt(u){var b,E=!1;if(!(!p.state.isEnabled||ct(u)||a)){var S=((b=c)==null?void 0:b.type)==="focus";c=u,g=u.currentTarget,ue(),!p.state.isVisible&&$i(u)&&Yt.forEach(function(T){return T(u)}),u.type==="click"&&(p.props.trigger.indexOf("mouseenter")<0||s)&&p.props.hideOnClick!==!1&&p.state.isVisible?E=!0:ut(u),u.type==="click"&&(s=!E),E&&!S&&Ne(u)}}function Ot(u){var b=u.target,E=L().contains(b)||w.contains(b);if(!(u.type==="mousemove"&&E)){var S=Oe().concat(w).map(function(T){var X,Z=T._tippy,Ke=(X=Z.popperInstance)==null?void 0:X.state;return Ke?{popperRect:T.getBoundingClientRect(),popperState:Ke,props:n}:null}).filter(Boolean);Yi(S,u)&&(Ae(),Ne(u))}}function Dt(u){var b=ct(u)||p.props.trigger.indexOf("click")>=0&&s;if(!b){if(p.props.interactive){p.hideWithInteractivity(u);return}Ne(u)}}function pt(u){p.props.trigger.indexOf("focusin")<0&&u.target!==L()||p.props.interactive&&u.relatedTarget&&w.contains(u.relatedTarget)||Ne(u)}function ct(u){return ge.isTouch?I()!==u.type.indexOf("touch")>=0:!1}function Lt(){Mt();var u=p.props,b=u.popperOptions,E=u.placement,S=u.offset,T=u.getReferenceClientRect,X=u.moveTransition,Z=D()?Sn(w).arrow:null,Ke=T?{getBoundingClientRect:T,contextElement:T.contextElement||L()}:e,Fn={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Wt){var Je=Wt.state;if(D()){var Qr=J(),an=Qr.box;["placement","reference-hidden","escaped"].forEach(function(Ht){Ht==="placement"?an.setAttribute("data-placement",Je.placement):Je.attributes.popper["data-popper-"+Ht]?an.setAttribute("data-"+Ht,""):an.removeAttribute("data-"+Ht)}),Je.attributes.popper={}}}},Fe=[{name:"offset",options:{offset:S}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!X}},Fn];D()&&Z&&Fe.push({name:"arrow",options:{element:Z,padding:3}}),Fe.push.apply(Fe,(b==null?void 0:b.modifiers)||[]),p.popperInstance=xn(Ke,w,Object.assign({},b,{placement:E,onFirstUpdate:y,modifiers:Fe}))}function Mt(){p.popperInstance&&(p.popperInstance.destroy(),p.popperInstance=null)}function ye(){var u=p.props.appendTo,b,E=L();p.props.interactive&&u===vr||u==="parent"?b=E.parentNode:b=wr(u,[E]),b.contains(w)||b.appendChild(w),p.state.isMounted=!0,Lt()}function Oe(){return zt(w.querySelectorAll("[data-tippy-root]"))}function ut(u){p.clearDelayTimeouts(),u&&$("onTrigger",[p,u]),oe();var b=G(!0),E=A(),S=E[0],T=E[1];ge.isTouch&&S==="hold"&&T&&(b=T),b?r=setTimeout(function(){p.show()},b):p.show()}function Ne(u){if(p.clearDelayTimeouts(),$("onUntrigger",[p,u]),!p.state.isVisible){we();return}if(!(p.props.trigger.indexOf("mouseenter")>=0&&p.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(u.type)>=0&&s)){var b=G(!1);b?i=setTimeout(function(){p.state.isVisible&&p.hide()},b):o=requestAnimationFrame(function(){p.hide()})}}function ft(){p.state.isEnabled=!0}function At(){p.hide(),p.state.isEnabled=!1}function Rt(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(o)}function Nt(u){if(!p.state.isDestroyed){$("onBeforeUpdate",[p,u]),It();var b=p.props,E=ur(e,Object.assign({},b,sr(u),{ignoreAttributes:!0}));p.props=E,ze(),b.interactiveDebounce!==E.interactiveDebounce&&(Ae(),v=or(Ot,E.interactiveDebounce)),b.triggerTarget&&!E.triggerTarget?rt(b.triggerTarget).forEach(function(S){S.removeAttribute("aria-expanded")}):E.triggerTarget&&e.removeAttribute("aria-expanded"),ue(),Y(),O&&O(b,E),p.popperInstance&&(Lt(),Oe().forEach(function(S){requestAnimationFrame(S._tippy.popperInstance.forceUpdate)})),$("onAfterUpdate",[p,u])}}function Ft(u){p.setProps({content:u})}function Yr(){var u=p.state.isVisible,b=p.state.isDestroyed,E=!p.state.isEnabled,S=ge.isTouch&&!p.props.touch,T=En(p.props.duration,0,pe.duration);if(!(u||b||E||S)&&!L().hasAttribute("disabled")&&($("onShow",[p],!1),p.props.onShow(p)!==!1)){if(p.state.isVisible=!0,D()&&(w.style.visibility="visible"),Y(),oe(),p.state.isMounted||(w.style.transition="none"),D()){var X=J(),Z=X.box,Ke=X.content;Cn([Z,Ke],0)}y=function(){var Fe;if(!(!p.state.isVisible||f)){if(f=!0,w.offsetHeight,w.style.transition=p.props.moveTransition,D()&&p.props.animation){var on=J(),Wt=on.box,Je=on.content;Cn([Wt,Je],T),lr([Wt,Je],"visible")}ce(),ue(),ar(Xt,p),(Fe=p.popperInstance)==null||Fe.forceUpdate(),$("onMount",[p]),p.props.animation&&D()&&be(T,function(){p.state.isShown=!0,$("onShown",[p])})}},ye()}}function Xr(){var u=!p.state.isVisible,b=p.state.isDestroyed,E=!p.state.isEnabled,S=En(p.props.duration,1,pe.duration);if(!(u||b||E)&&($("onHide",[p],!1),p.props.onHide(p)!==!1)){if(p.state.isVisible=!1,p.state.isShown=!1,f=!1,s=!1,D()&&(w.style.visibility="hidden"),Ae(),we(),Y(!0),D()){var T=J(),X=T.box,Z=T.content;p.props.animation&&(Cn([X,Z],S),lr([X,Z],"hidden"))}ce(),ue(),p.props.animation?D()&&Ye(S,p.unmount):p.unmount()}}function zr(u){K().addEventListener("mousemove",v),ar(Yt,v),v(u)}function Kr(){p.state.isVisible&&p.hide(),p.state.isMounted&&(Mt(),Oe().forEach(function(u){u._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),Xt=Xt.filter(function(u){return u!==p}),p.state.isMounted=!1,$("onHidden",[p]))}function Jr(){p.state.isDestroyed||(p.clearDelayTimeouts(),p.unmount(),It(),delete e._tippy,p.state.isDestroyed=!0,$("onDestroy",[p]))}}function xt(e,t){t===void 0&&(t={});var n=pe.plugins.concat(t.plugins||[]);Ki();var r=Object.assign({},t,{plugins:n}),i=qi(e);if(!1)var o,s;var a=i.reduce(function(l,f){var c=f&&ao(f,r);return c&&l.push(c),l},[]);return Kt(e)?a[0]:a}xt.defaultProps=pe;xt.setDefaultProps=no;xt.currentInput=ge;var Er=function(t){var n=t===void 0?{}:t,r=n.exclude,i=n.duration;Xt.forEach(function(o){var s=!1;if(r&&(s=br(r)?o.reference===r:o.popper===r.popper),!s){var a=o.props.duration;o.setProps({duration:i}),o.hide(),o.state.isDestroyed||o.setProps({duration:a})}})},Pp=Object.assign({},mt,{effect:function(t){var n=t.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});xt.setDefaultProps({render:xr});var Jt=xt;var Ct=require("obsidian");var so=(e,t)=>{let n=getComputedStyle(e),r=n.position==="absolute",i=t?/(auto|scroll|hidden)/:/(auto|scroll)/;if(n.position==="fixed")return document.body;for(let o=e;o=o.parentElement;)if(n=getComputedStyle(o),!(r&&n.position==="static")&&i.test(n.overflow+n.overflowY+n.overflowX))return o;return document.body},Qt=e=>{let t=e.querySelectorAll(".search-result-file-matched-text");for(let n of Array.from(t))if(n instanceof HTMLElement){let r=so(n,!0);r&&(r.scrollTop=n.offsetTop-r.offsetTop-r.offsetHeight/2)}};var Or=require("obsidian");var Cr=require("obsidian"),Zt;function kr(e){Zt=e}var Tr=async e=>{let t=createDiv();t.addClass("snw-ref-item-info"),t.addClass("search-result-file-match"),t.setAttribute("snw-data-line-number",e.reference.position.start.line.toString()),t.setAttribute("snw-data-file-name",e.sourceFile.path.replace(".md","")),t.setAttribute("data-href",e.sourceFile.path.replace(".md",""));let n=await lo(e);return t.appendChild(n),t},lo=async e=>{let t=await Zt.app.vault.cachedRead(e.sourceFile),n=Zt.app.metadataCache.getFileCache(e.sourceFile),r=0,i=0;for(let f=0;f<n.sections.length;f++){let c=n.sections[f];if(c.position.start.offset<=e.reference.position.start.offset&&c.position.end.offset>=e.reference.position.end.offset){r=c.position.start.offset,i=c.position.end.offset;break}}let o=t.substring(r,i),s=createDiv();s.setAttribute("uic","uic"),await Cr.MarkdownRenderer.renderMarkdown(o,s,e.sourceFile.path,Zt);let a=s.querySelectorAll("*");return Array.from(a).find(f=>f.textContent==e.reference.displayText).addClass("search-result-file-matched-text"),s};var Sr=require("obsidian"),Ir=async(e,t,n,r,i,o,s)=>{let a=createDiv();a.addClass(o?"snw-ref-title-popover":"snw-ref-title-side-pane"),a.addClass("tree-item-self"),a.addClass("is-clickable"),a.setAttribute("snw-ref-title-type",e),a.setAttribute("snw-ref-title-key",t),a.setAttribute("snw-data-file-name",n),a.setAttribute("snw-data-line-number",i.toString());let l=createDiv({cls:"snw-ref-title-popover-label"});if(l.innerText=t,a.append(l),o){let f=createSpan();f.addClass("snw-ref-title-popover-icon"),(0,Sr.setIcon)(f,"more-horizontal");let c=createSpan();c.appendChild(f),c.addClass("snw-ref-title-popover-open-sidepane-icon"),c.setAttribute("snw-ref-title-type",e),c.setAttribute("snw-ref-title-key",t),c.setAttribute("snw-data-file-name",n),c.setAttribute("snw-data-line-number",i.toString()),a.appendChild(c),setTimeout(async()=>{c&&(c.onclick=async d=>{d.stopPropagation(),Er({duration:0});let y=d.target.closest(".snw-ref-title-popover-open-sidepane-icon"),m=y.getAttribute("snw-ref-title-type"),v=y.getAttribute("snw-ref-title-key"),g=y.getAttribute("snw-data-file-name"),h=y.getAttribute("snw-data-line-number");s.activateView(m,v,g,Number(h))})},300)}return a};var Et;function Dr(e){Et=e}var On=async(e,t,n,r,i)=>{let o=await po(e,t,n),s=createDiv();s.append(await Ir(e,t,n,o.refCount,r,i,Et));let a=createDiv({cls:"snw-ref-area"});return a.append(o.response),s.append(a),s},po=async(e,t,n)=>{let r=0,i=null;if(e==="File"){let f=Vt().filter(c=>{var d;return c!=null&&c.resolvedFile?((d=c==null?void 0:c.resolvedFile)==null?void 0:d.path)===n:!1});r=f.length,i=f}else{let l=dt()[t];l===void 0&&(l=dt()[n+"#^"+t]);let f=await co(l);r=f.length,i=f}let o=Array.from(new Set(i.map(l=>l.sourceFile.path))).map(l=>i.find(f=>f.sourceFile.path===l)),s=createDiv(),a=o.length;Et.settings.maxFileCountToDisplay!=1e3&&a>=Et.settings.maxFileCountToDisplay&&(a=Et.settings.maxFileCountToDisplay);for(let l=0;l<a;l++){let f=o[l],c=createDiv();c.addClass("snw-ref-item-container"),c.addClass("tree-item"),s.appendChild(c);let d=createDiv();d.addClass("snw-ref-item-file"),d.addClass("tree-item-self"),d.addClass("search-result-file-title"),d.addClass("is-clickable"),d.setAttribute("snw-data-line-number","-1"),d.setAttribute("snw-data-file-name",f.sourceFile.path.replace(".md","")),d.setAttribute("data-href",f.sourceFile.path),d.setAttribute("href",f.sourceFile.path);let y=createDiv();y.addClass("snw-ref-item-file-icon"),y.addClass("tree-item-icon"),y.addClass("collapse-icon"),(0,Or.setIcon)(y,"file-box");let m=createDiv();m.addClass("snw-ref-item-file-label"),m.addClass("tree-item-inner"),m.innerText=f.sourceFile.basename,d.append(y),d.append(m),c.appendChild(d);let v=createDiv();v.addClass("snw-ref-item-collection-items"),v.addClass("search-result-file-matches"),c.appendChild(v);for(let g of i)f.sourceFile.path===g.sourceFile.path&&v.appendChild(await Tr(g))}return{response:s,refCount:r}},co=async e=>e.sort((t,n)=>t.sourceFile.basename.localeCompare(n.sourceFile.basename)||Number(t.reference.position.start.line)-Number(n.reference.position.start.line));var it=null;function Lr(e){it=e,kr(e)}var en=async e=>{let{refType:t,key:n,filePath:r,lineNu:i}=await uo(e),o=createDiv();o.addClass("snw-popover-container"),o.addClass("search-result-container"),o.appendChild(await On(t,n,r,i,!0)),e.setContent(o),setTimeout(async()=>{await Ar(!1,o)},500),Qt(o)},Mr=async(e,t,n,r)=>{let i=createDiv();return i.addClass("snw-sidepane-container"),i.addClass("search-result-container"),i.append(await On(e,t,n,r,!1)),setTimeout(async()=>{await Ar(!1,i)},500),i},Ar=async(e,t)=>{t.querySelectorAll(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-side-pane, .snw-ref-title-popover").forEach(r=>{r.getAttribute("snw-has-handler")||(r.setAttribute("snw-has-handler","true"),r.addEventListener("click",async i=>{var c,d;i.preventDefault();let o=i.target.closest(".snw-ref-item-file, .snw-ref-item-info, .snw-ref-title-side-pane, .snw-ref-title-popover"),s=Number(o.getAttribute("snw-data-line-number")),a=o.getAttribute("snw-data-file-name"),l=app.metadataCache.getFirstLinkpathDest(a,a);it.app.workspace.getLeaf(Ct.Keymap.isModEvent(i)).openFile(l);let f=o.getAttribute("snw-ref-title-key");if(f){if(f.contains("#^")){let y=Object.entries((c=it.app.metadataCache.getFileCache(l))==null?void 0:c.blocks);if(y){let m=f.match(/#\^(.+)$/g)[0].replace("#^","").toLowerCase();s=y.find(g=>g[0]===m)[1].position.start.line}}else if(f.contains("#")){let y=(d=it.app.metadataCache.getFileCache(l))==null?void 0:d.headings;if(y){let m=f.match(/#(.+)/g)[0].replace("#","");s=y.find(g=>g.heading===m).position.start.line}}}s>0&&setTimeout(()=>{try{it.app.workspace.getActiveViewOfType(Ct.MarkdownView).setEphemeralState({line:s})}catch(y){}},400)}),it.app.internalPlugins.plugins["page-preview"].enabled===!0&&r.addEventListener("mouseover",i=>{i.preventDefault();let o=app.internalPlugins.plugins["page-preview"].instance.overrides["obsidian42-strange-new-worlds"]!=!1;if(o===!1||o===!0&&Ct.Keymap.isModifier(i,"Mod")){let s=i.target,a={scroll:Number(s.getAttribute("snw-data-line-number"))},l=s.getAttribute("snw-data-file-name");l&&app.workspace.trigger("link-hover",{},s,l,"",a)}}))})},uo=async e=>{let t=e.reference,n=t.getAttribute("data-snw-type"),r=t.getAttribute("data-snw-key"),i=t.getAttribute("data-snw-filepath"),o=Number(t.getAttribute("snw-data-line-number"));return{refType:n,key:r,filePath:i,lineNu:o}};var Dn=require("obsidian"),Q;function Rr(e){Q=e}function Te(e,t,n,r,i,o){var a,l;(a=Q==null?void 0:Q.snwAPI.enableDebugging)!=null&&a.HtmlDecorationElements&&Q.snwAPI.console("htmlDecorations.htmlDecorationForReferencesElement(count, referenceType, key, filePath)",Q,e,t,n,r);let s=createDiv({cls:"snw-reference snw-"+t});return s.innerText=e.toString(),s.setAttribute("data-snw-type",t),s.setAttribute("data-snw-key",n),s.setAttribute("data-snw-filepath",r),s.setAttribute("snw-data-line-number",o.toString()),i&&s.addClass(i),(Dn.Platform.isDesktop||Dn.Platform.isDesktopApp)&&(s.onclick=async f=>tn(f.target)),(l=Q==null?void 0:Q.snwAPI.enableDebugging)!=null&&l.HtmlDecorationElements&&Q.snwAPI.console("returned element",s),Jt(s,{interactive:!0,appendTo:()=>document.body,allowHTML:!0,zIndex:9999,placement:"auto-end",onShow(f){setTimeout(async()=>{await en(f)},1)}}),s}var tn=async e=>{var o;let t=e.getAttribute("data-snw-type"),n=e.getAttribute("data-snw-key"),r=e.getAttribute("data-snw-filepath"),i=e.getAttribute("snw-data-line-number");(o=Q.snwAPI.enableDebugging)!=null&&o.HtmlDecorationElements&&Q.snwAPI.console("htmlDecorations.processHtmlDecorationReferenceEvent: target, key, refType, filePath",e,n,t,r),Q.activateView(t,n,r,Number(i))};var ot;function Fr(e){ot=e}var Wr=Se.ViewPlugin.fromClass(class{constructor(e){this.view=e;this.decorations=Se.Decoration.none;this.regxPattern="";ot.settings.enableRenderingBlockIdInLivePreview&&(this.regxPattern="(\\s\\^)(\\S+)$"),ot.settings.enableRenderingEmbedsInLivePreview&&(this.regxPattern+=(this.regxPattern!=""?"|":"")+"!\\[\\[(.*?)\\]\\]"),ot.settings.enableRenderingLinksInLivePreview&&(this.regxPattern+=(this.regxPattern!=""?"|":"")+"\\[\\[(.*?)\\]\\]"),ot.settings.enableRenderingHeadersInLivePreview&&(this.regxPattern+=(this.regxPattern!=""?"|":"")+"^#+\\s.+"),this.regxPattern!==""&&(this.decorator=new Se.MatchDecorator({regexp:new RegExp(this.regxPattern,"g"),decorate:(t,n,r,i,o)=>{var f,c,d,y,m,v;let s=o.state.field(Nr.editorInfoField),a=i[0].charAt(0),l=me(s.file);if(((c=(f=l==null?void 0:l.cacheMetaData)==null?void 0:f.frontmatter)==null?void 0:c["snw-file-exclude"])!=!0){let g=[];if(a===" "&&((d=l==null?void 0:l.blocks)==null?void 0:d.length)>0)g.push({key:s.file.path.replace(".md","")+i[0].replace(" ^","#^"),transformedCachedItem:l.blocks,refType:"block",from:r,to:r});else if(a==="!"&&((y=l==null?void 0:l.embeds)==null?void 0:y.length)>0)g.push({key:i[0].replace("![[","").replace("]]",""),transformedCachedItem:l.embeds,refType:"embed",from:r,to:r});else if(a==="["&&((m=l==null?void 0:l.links)==null?void 0:m.length)>0)g.push({key:i[0].replace("[[","").replace("]]",""),transformedCachedItem:l.links,refType:"link",from:r,to:r});else if(a==="#"&&((v=l==null?void 0:l.headings)==null?void 0:v.length)>0){g.push({key:i[0].replace(/^#+/,"").substring(1),transformedCachedItem:l.headings,refType:"heading",from:r,to:r});let h=i[0].match(/\[\[(.*?)\]\]|!\[\[(.*?)\]\]/g);if(h)for(let P of h)g.push({key:P.replace("![[","").replace("[[","").replace("]]",""),transformedCachedItem:P.startsWith("!")?l.embeds:l.links,refType:"link",from:r-i[0].length+(i[0].indexOf(P)+P.length),to:r-i[0].length+(i[0].indexOf(P)+P.length)})}for(let h of g.sort((P,C)=>P.to-C.to))if(h.key!=""){let P=fo(h.refType,h.key,h.transformedCachedItem,s.file.path);P!=null&&t(h.from,h.to,Se.Decoration.widget({widget:P,side:1}))}}}}),this.regxPattern!=""&&(this.decorations=this.decorator.createDeco(e)))}update(e){this.regxPattern!=""&&(e.docChanged||e.viewportChanged)&&(this.decorations=this.decorator.updateDeco(e,this.decorations))}},{decorations:e=>e.decorations}),fo=(e,t,n,r)=>{var i,o;(e==="embed"||e==="link")&&t.contains("|")&&(t=t.substring(0,t.search(/\|/)));for(let s=0;s<n.length;s++){let a=n[s],l=a.key;if(e==="heading"&&(l=a.headerMatch,t=t.replace(/^\s+|\s+$/g,"")),l===t)return((i=a==null?void 0:a.references[0])==null?void 0:i.excludedFile)!=!0&&((o=a==null?void 0:a.references[0])!=null&&o.resolvedFile)&&(a==null?void 0:a.references.length)>=ot.settings.minimumRefCountThreshold?new Ln(a.references.length,a.type,a.key,a.references[0].resolvedFile.path.replace(".md",""),null,a.pos.start.line):null}},Ln=class extends Se.WidgetType{constructor(n,r,i,o,s,a){super();this.referenceCount=n,this.referenceType=r,this.key=i,this.filePath=o,this.addCssClass=s,this.lineNu=a}toDOM(){return Te(this.referenceCount,this.referenceType,this.key,this.filePath,this.addCssClass,this.lineNu)}destroy(){}ignoreEvent(){return!1}};var Hr=require("obsidian");var re;function Vr(e){re=e}function An(e,t){var i,o;if(re.snwAPI.enableDebugging.PreviewRendering&&re.snwAPI.console("markdownPreviewProcessor(HTMLElement, MarkdownPostProcessorContext,ctx.getSectionInfo",e,t,t.getSectionInfo(e)),t.remainingNestLevel===4||((i=t==null?void 0:t.frontmatter)==null?void 0:i["snw-file-exclude"])===!0||e.hasAttribute("uic"))return;let n=re.app.vault.fileMap[t.sourcePath];if(n===void 0)return;let r=re.app.metadataCache.getFileCache(n);if(!((o=r==null?void 0:r.frontmatter)!=null&&o["kanban-plugin"]))try{t.addChild(new Mn(e,t.getSectionInfo(e),n))}catch(s){}}var Mn=class extends Hr.MarkdownRenderChild{constructor(n,r,i){super(n);this.containerEl=n,this.sectionInfo=r,this.currentFile=i,re.snwAPI.enableDebugging.PreviewRendering&&re.snwAPI.console("snwChildComponent(HTMLElement, MarkdownPostProcessorContext,currentfile",n,r,i)}onload(){this.processMarkdown()}processMarkdown(){var i,o,s,a,l,f,c,d,y,m;let n=re.settings.minimumRefCountThreshold,r=me(this.currentFile);if(((o=(i=r==null?void 0:r.cacheMetaData)==null?void 0:i.frontmatter)==null?void 0:o["snw-file-exclude"])!==!0&&(r!=null&&r.blocks||r.embeds||r.headings||r.links)){if(re.settings.enableRenderingBlockIdInMarkdown&&(r!=null&&r.blocks)){let v=!1;try{v=ctx.containerEl.closest(".snw-embed-preview").nextSibling.classList.contains("snw-reference")}catch(g){}for(let g of r.blocks)if(((s=g.references[0])==null?void 0:s.excludedFile)!=!0&&g.references.length>=n&&g.pos.start.line>=((a=this.sectionInfo)==null?void 0:a.lineStart)&&g.pos.end.line<=((l=this.sectionInfo)==null?void 0:l.lineEnd)&&!v){let h=Te(g.references.length,"block",g.key,(c=(f=g.references[0])==null?void 0:f.resolvedFile)==null?void 0:c.path.replace(".md",""),"",g.pos.start.line),P=this.containerEl.querySelector("p"),C=g.pos.start.line-this.sectionInfo.lineStart;P||(P=this.containerEl.querySelector(`li[data-line="${C}"]`)),P||(P=this.containerEl.querySelector(`ol[data-line="${C}"]`));try{P.hasClass("snw-block-preview")||(h.addClass("snw-block-preview"),P.append(h))}catch(x){}}}if(re.settings.enableRenderingEmbedsInMarkdown&&(r!=null&&r.embeds)&&this.containerEl.querySelectorAll(".internal-embed:not(.snw-embed-preview)").forEach(v=>{var h,P,C;let g=v.getAttribute("src");for(let x of r.embeds)if(((h=x.references[0])==null?void 0:h.excludedFile)!=!0&&x.references.length>=n&&g.endsWith(x.key)){let p=Te(x.references.length,"embed",x.key,(C=(P=x.references[0])==null?void 0:P.resolvedFile)==null?void 0:C.path.replace(".md",""),"",x.pos.start.line);p.addClass("snw-embed-preview"),v.after(p);break}}),re.settings.enableRenderingHeadersInMarkdown){let v=this.containerEl.querySelector("[data-heading]");if(r!=null&&r.headings&&v){let g=v.getAttribute("data-heading");for(let h of r.headings)if(((d=h.references[0])==null?void 0:d.excludedFile)!=!0&&h.references.length>=n&&h.headerMatch===g){let P=Te(h.references.length,"heading",h.key,(m=(y=h.references[0])==null?void 0:y.resolvedFile)==null?void 0:m.path.replace(".md",""),"",h.pos.start.line);P.addClass("snw-heading-preview"),this.containerEl.querySelector("h1,h2,h3,h4,h5,h6").insertAdjacentElement("beforeend",P);break}}}re.settings.enableRenderingLinksInMarkdown&&(r!=null&&r.links)&&this.containerEl.querySelectorAll("a.internal-link:not(.snw-link-preview)").forEach(v=>{var h,P,C;let g=v.getAttribute("data-href");for(let x of r.links)if(((h=x.references[0])==null?void 0:h.excludedFile)!=!0&&x.references.length>=n&&(x.key===g||(x==null?void 0:x.original)!=null&&(x!=null&&x.original.contains(g)))){let p=Te(x.references.length,"link",x.key,(C=(P=x.references[0])==null?void 0:P.resolvedFile)==null?void 0:C.path.replace(".md",""),"",x.pos.start.line);p.addClass("snw-link-preview"),v.after(p);break}})}}};var kt=require("@codemirror/view"),Br=require("obsidian");var at;function jr(e){at=e}var mo=class extends kt.GutterMarker{constructor(t,n,r,i,o){super();this.referenceCount=t,this.referenceType=n,this.key=r,this.filePath=i,this.addCssClass=o}toDOM(){return Te(this.referenceCount,this.referenceType,this.key,this.filePath,this.addCssClass,0)}},go=new class extends kt.GutterMarker{toDOM(){return document.createTextNode("\xF8\xF8\xF8")}},ho=(0,kt.gutter)({class:"snw-gutter-ref",lineMarker(e,t){var o,s,a,l;at.snwAPI.enableDebugging.GutterEmbedCounter&&at.snwAPI.console("ReferenceGutterExtension(EditorView, BlockInfo)",e,t);let n=e.state.field(Br.editorInfoField);if(!n.file)return;let r=me(n.file);if(((s=(o=r==null?void 0:r.cacheMetaData)==null?void 0:o.frontmatter)==null?void 0:s["snw-file-exclude"])===!0)return;let i=(a=n.app.metadataCache.getFileCache(n.file))==null?void 0:a.embeds;if((i==null?void 0:i.length)>=at.settings.minimumRefCountThreshold){let f=e.state.doc.lineAt(t.from).number;for(let c of i)if(c.position.start.line+1===f){for(let d of r.embeds)if(((l=d==null?void 0:d.references[0])==null?void 0:l.excludedFile)!=!0&&(d==null?void 0:d.references.length)>0&&(d==null?void 0:d.pos.start.line)+1===f&&e.state.doc.lineAt(t.from).text.trim()===`![[${d.key}]]`)return at.snwAPI.enableDebugging.GutterEmbedCounter&&at.snwAPI.console("ReferenceGutterExtension New gutter",d.references.length,"embed",d.key,d.key,"snw-embed-special"),new mo(d.references.length,"embed",d.key,d.references[0].resolvedFile.path.replace(".md",""),"snw-embed-special")}}},initialSpacer:()=>go}),_r=ho;var Rn=require("obsidian");var he;function Ur(e){he=e}function Nn(){var e;(e=he.snwAPI.enableDebugging)!=null&&e.LinkCountInHeader&&he.snwAPI.console("headerImageCount.setHeaderWithReferenceCounts(thePlugin)",st),he.app.workspace.iterateAllLeaves(t=>{t.view.getViewType()==="markdown"&&vo(t.view)})}function vo(e){var l,f,c,d,y;(l=he.snwAPI.enableDebugging)!=null&&l.LinkCountInHeader&&he.snwAPI.console("headerImageCount.processHeader(ThePlugin, MarkdownView)",he,e);let t=Vt();if(t==null)return;let n=t.filter(m=>{var v;return m!=null&&m.resolvedFile?((v=m==null?void 0:m.resolvedFile)==null?void 0:v.path)===e.file.path:!1}),r=n.length,i=me(e.file);if(((c=(f=i==null?void 0:i.cacheMetaData)==null?void 0:f.frontmatter)==null?void 0:c["snw-file-exclude"])===!0&&(r=0),((d=n[0])==null?void 0:d.excludedFile)===!0&&(r=0),r<he.settings.minimumRefCountThreshold){e.contentEl.querySelector(".snw-header-count-wrapper")&&e.contentEl.querySelector(".snw-header-count-wrapper").remove();return}let o=e.contentEl.querySelector(".snw-header-count");if(o&&o.getAttribute("data-snw-key")===e.file.basename){o.innerText=" "+n.length.toString()+" ";return}let s=e.contentEl;e.contentEl.querySelector(".snw-header-count-wrapper")&&e.contentEl.querySelector(".snw-header-count-wrapper").remove();let a=s.querySelector(".snw-header-count-wrapper");a?o=s.querySelector(".snw-header-count"):(a=createDiv({cls:"snw-header-count-wrapper"}),o=createDiv({cls:"snw-header-count"}),a.appendChild(o),s.prepend(a)),o.innerText=" "+n.length.toString()+" ",(Rn.Platform.isDesktop||Rn.Platform.isDesktopApp)&&(o.onclick=m=>{m.stopPropagation(),tn(a)}),a.setAttribute("data-snw-key",e.file.basename),a.setAttribute("data-snw-type","File"),a.setAttribute("data-snw-filepath",e.file.path),a.onclick=m=>{m.stopPropagation(),tn(m.target)},Jt(a,{interactive:!0,appendTo:()=>document.body,allowHTML:!0,zIndex:9999,placement:"auto-end",onShow(m){setTimeout(async()=>{await en(m)},1)}}),(y=he.snwAPI.enableDebugging)!=null&&y.LinkCountInHeader&&he.snwAPI.console("snwTitleRefCountDisplayCountEl",o)}var $r=require("obsidian");var Me="Strange New Worlds",nn=class extends $r.ItemView{constructor(n,r){super(n);this.thePlugin=r}getViewType(){return Me}getDisplayText(){return Me}getIcon(){return"file-digit"}async onOpen(){let n=this.containerEl,r=n.createSpan({cls:"snw-sidepane-loading"}),i=createDiv({cls:"snw-sidepane-loading-banner"});i.innerText="Discovering Strange New Worlds...",r.appendChild(i);let o=createDiv({cls:"snw-sidepane-loading-subtext"});o.innerText="Click a reference counter in the main document for information to appear here.",r.appendChild(o),n.empty(),n.appendChild(r)}async updateView(){let n=this.thePlugin.lastSelectedReferenceType,r=this.thePlugin.lastSelectedReferenceKey,i=this.thePlugin.lastSelectedReferenceFilePath,o=this.thePlugin.lastSelectedLineNumber;this.thePlugin.snwAPI.enableDebugging.SidePane&&(this.thePlugin.snwAPI.console("sidepane.open() refType, key, filePath",n,r,i),this.thePlugin.snwAPI.console("sidepane.open() getReferencesCache()",dt())),this.containerEl.replaceChildren(await Mr(n,r,i,o)),Qt(this.containerEl)}async onClose(){}};var H=require("obsidian"),qr={enableOnStartupDesktop:!0,enableOnStartupMobile:!0,minimumRefCountThreshold:1,maxFileCountToDisplay:100,displayIncomingFilesheader:!0,displayInlineReferencesLivePreview:!0,displayInlineReferencesMarkdown:!0,displayEmbedReferencesInGutter:!0,displayEmbedReferencesInGutterMobile:!1,cacheUpdateInMilliseconds:500,enableRenderingBlockIdInMarkdown:!0,enableRenderingLinksInMarkdown:!0,enableRenderingHeadersInMarkdown:!0,enableRenderingEmbedsInMarkdown:!0,enableRenderingBlockIdInLivePreview:!0,enableRenderingLinksInLivePreview:!0,enableRenderingHeadersInLivePreview:!0,enableRenderingEmbedsInLivePreview:!0},rn=class extends H.PluginSettingTab{constructor(n,r){super(n,r);this.thePlugin=r}display(){let{containerEl:n}=this;n.empty(),n.createEl("h2",{text:this.thePlugin.appName}),n.createEl("h2",{text:"Thresholds"}),new H.Setting(n).setName("Minimal required count to show counter").setDesc(`This setting defines how many references there needs to be for the reference count box to appear. May require reloading open files.
				 Currently set to: ${this.thePlugin.settings.minimumRefCountThreshold} references.`).addSlider(r=>r.setLimits(1,1e3,1).setValue(this.thePlugin.settings.minimumRefCountThreshold).onChange(async i=>{this.thePlugin.settings.minimumRefCountThreshold=i,await this.thePlugin.saveSettings()}).setDynamicTooltip()),new H.Setting(n).setName("Maximum file references to show").setDesc(`This setting defines the max amount of files with their references are displayed in the popup or sidebar.  Set to 1000 for no maximum.
				 Currently set to: ${this.thePlugin.settings.maxFileCountToDisplay} references.`).addSlider(r=>r.setLimits(1,1e3,1).setValue(this.thePlugin.settings.maxFileCountToDisplay).onChange(async i=>{this.thePlugin.settings.maxFileCountToDisplay=i,await this.thePlugin.saveSettings()}).setDynamicTooltip()),n.createEl("h2",{text:"Enable on startup"}),new H.Setting(n).setName("Enable upon startup (Desktop)").setDesc("If disabled, SNW will not show block counters from startup until enabled from the command palette.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableOnStartupDesktop),r.onChange(async i=>{this.thePlugin.settings.enableOnStartupDesktop=i,await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Enable startup (Mobile)").setDesc("If disabled, SNW will not show block counters from startup until enabled from the command palette.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableOnStartupMobile),r.onChange(async i=>{this.thePlugin.settings.enableOnStartupMobile=i,await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"View Modes"}),new H.Setting(n).setName("Incoming Links Header Count").setDesc("In header of a document, show number of incoming link to that file.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayIncomingFilesheader),r.onChange(async i=>{this.thePlugin.settings.displayIncomingFilesheader=i,this.thePlugin.toggleStateHeaderCount(),await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Show SNW indicators in Live Preview Editor").setDesc("While using Live Preview, Display inline of the text of documents all reference counts for links, blocks and embeds.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayInlineReferencesLivePreview),r.onChange(async i=>{this.thePlugin.settings.displayInlineReferencesLivePreview=i,this.thePlugin.toggleStateSNWLivePreview(),await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Show SNW indicators in Reading view ").setDesc("While in Reading View of a document, display inline of the text of documents all reference counts for links, blocks and embeds.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayInlineReferencesMarkdown),r.onChange(async i=>{this.thePlugin.settings.displayInlineReferencesMarkdown=i,this.thePlugin.toggleStateSNWMarkdownPreview(),await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Embed references in Gutter in Live Preview Mode (Desktop)").setDesc(`Displays a count of references in the gutter while in live preview. This is done only in a
					  special scenario. It has to do with the way Obsidian renders embeds, example: ![[link]] when  
					  they are on its own line. Strange New Worlds cannot embed the count in this scenario, so a hint is 
					  displayed in the gutter. It is a hack, but at least we get some information.`).addToggle(r=>{r.setValue(this.thePlugin.settings.displayEmbedReferencesInGutter),r.onChange(async i=>{this.thePlugin.settings.displayEmbedReferencesInGutter=i,this.thePlugin.toggleStateSNWGutters(),await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Embed references in Gutter in Live Preview Mode (Mobile)").setDesc("This is off by default on mobile since the gutter takes up some space in the left margin.").addToggle(r=>{r.setValue(this.thePlugin.settings.displayEmbedReferencesInGutterMobile),r.onChange(async i=>{this.thePlugin.settings.displayEmbedReferencesInGutterMobile=i,this.thePlugin.toggleStateSNWGutters(),await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"Enable Reference Types in Reading mode"}),n.createEl("sup",{text:"(requires reopening documents to take effect)"}),new H.Setting(n).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingBlockIdInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingBlockIdInMarkdown=i,await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingEmbedsInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingEmbedsInMarkdown=i,await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingLinksInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingLinksInMarkdown=i,await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingHeadersInMarkdown),r.onChange(async i=>{this.thePlugin.settings.enableRenderingHeadersInMarkdown=i,await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"Enable Reference Types in Live Preview Mode"}),n.createEl("sup",{text:"(requires reopening documents to take effect)"}),new H.Setting(n).setName("Block ID").setDesc("Identifies block ID's, for example text blocks that end with a ^ and unique ID for that text block.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingBlockIdInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingBlockIdInLivePreview=i,await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Embeds").setDesc("Identifies embedded links, that is links that start with an explanation mark. For example: ![[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingEmbedsInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingEmbedsInLivePreview=i,await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Links").setDesc("Identifies links in a document. For example: [[PageName]].").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingLinksInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingLinksInLivePreview=i,await this.thePlugin.saveSettings()})}),new H.Setting(n).setName("Headers").setDesc("Identifies headers, that is lines of text that start with a hash mark or multiple hash marks. For example: # Heading 1.").addToggle(r=>{r.setValue(this.thePlugin.settings.enableRenderingHeadersInLivePreview),r.onChange(async i=>{this.thePlugin.settings.enableRenderingHeadersInLivePreview=i,await this.thePlugin.saveSettings()})}),n.createEl("h2",{text:"Cache Tuning"}),new H.Setting(n).setName("How often should the SNW Cache update").setDesc(`By default SNW will updates its internal cache every half a second (500 milliseconds) when there is some change in the vault.
					  Increase the time to slighlty improve performance on less performant devices or decrease it to improve refresh of vault information.
					  Currently set to: ${this.thePlugin.settings.cacheUpdateInMilliseconds} milliseconds. (Requires Obsidian Restart)`).addSlider(r=>r.setLimits(500,3e4,100).setValue(this.thePlugin.settings.cacheUpdateInMilliseconds).onChange(async i=>{this.thePlugin.settings.cacheUpdateInMilliseconds=i,await this.thePlugin.saveSettings()}).setDynamicTooltip())}};var Tt=class{constructor(t){this.enableDebugging={CM6Extension:!1,PreviewRendering:!1,LinkCountInHeader:!1,GutterEmbedCounter:!1,HtmlDecorationElements:!1,SidePane:!1};this.console=(t,...n)=>{console.log("SNW: "+t,n)};this.getMetaInfoByCurrentFile=async()=>this.getMetaInfoByFileName(app.workspace.getActiveFile().path);this.getMetaInfoByFileName=async t=>{let n=app.metadataCache.getFirstLinkpathDest(t,"/");return{TFile:n,metadataCache:app.metadataCache.getFileCache(n),SnwTransformedCache:me(n)}};this.plugin=t}};var Gr=require("obsidian"),St=class{constructor(t){this.snwCommands=[{id:"SNW-ToggleActiveState",icon:"dot-network",name:"Toggle active state of SNW plugin on/off",showInRibbon:!0,callback:async()=>{this.thePlugin.showCountsActive=!this.thePlugin.showCountsActive;let t="SNW toggled "+(this.thePlugin.showCountsActive?`ON

`:`OFF

`);t+="Tabs may require reloading for this change to take effect.",new Gr.Notice(t),this.thePlugin.toggleStateHeaderCount(),this.thePlugin.toggleStateSNWMarkdownPreview(),this.thePlugin.toggleStateSNWLivePreview(),this.thePlugin.toggleStateSNWGutters()}}];this.thePlugin=t,this.snwCommands.forEach(async n=>{this.thePlugin.addCommand({id:n.id,name:n.name,icon:n.icon,callback:async()=>{await n.callback()}})})}};var st=class extends ie.Plugin{constructor(){super(...arguments);this.appName=this.manifest.name;this.appID=this.manifest.id;this.markdownPostProcessor=null;this.editorExtensions=[]}async onload(){console.log("loading "+this.appName),Hn(this),Dr(this),Rr(this),jr(this),Ur(this),Vr(this),Fr(this),Lr(this),this.snwAPI=new Tt(this),globalThis.snwAPI=this.snwAPI,await this.loadSettings(),this.addSettingTab(new rn(this.app,this)),ie.Platform.isMobile||ie.Platform.isMobileApp?this.showCountsActive=this.settings.enableOnStartupMobile:this.showCountsActive=this.settings.enableOnStartupDesktop,this.commands=new St(this),this.registerView(Me,r=>new nn(r,this));let n=(0,ie.debounce)(()=>{Bt()},1e3,!0);this.registerEvent(this.app.metadataCache.on("resolve",n)),this.app.workspace.registerHoverLinkSource(this.appID,{display:this.appName,defaultMod:!0}),this.snwAPI.settings=this.settings,this.registerEditorExtension(this.editorExtensions),this.toggleStateHeaderCount(),this.toggleStateSNWMarkdownPreview(),this.toggleStateSNWLivePreview(),this.toggleStateSNWGutters(),this.app.workspace.onLayoutReady(async()=>{var i;(i=this.app.workspace.getLeavesOfType(Me))!=null&&i.length||await this.app.workspace.getRightLeaf(!1).setViewState({type:Me,active:!1});let r=this.app.metadataCache.on("resolved",async()=>{Bt(),this.app.metadataCache.offref(r)})})}async layoutChangeEvent(){Nn()}async activateView(n,r,i,o){this.lastSelectedReferenceKey=r,this.lastSelectedReferenceType=n,this.lastSelectedReferenceFilePath=i,this.lastSelectedLineNumber=o,await this.app.workspace.getLeavesOfType(Me)[0].view.updateView(),this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(Me)[0])}toggleStateHeaderCount(){this.settings.displayIncomingFilesheader&&this.showCountsActive?this.app.workspace.on("layout-change",this.layoutChangeEvent):this.app.workspace.off("layout-change",this.layoutChangeEvent)}toggleStateSNWMarkdownPreview(){this.settings.displayInlineReferencesMarkdown&&this.showCountsActive&&this.markdownPostProcessor===null?this.markdownPostProcessor=this.registerMarkdownPostProcessor((n,r)=>An(n,r)):(ie.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessor),this.markdownPostProcessor=null)}toggleStateSNWLivePreview(){let n=this.settings.displayInlineReferencesLivePreview;n===!0&&(n=this.showCountsActive),this.updateCMExtensionState("inline-ref",n,Wr)}toggleStateSNWGutters(){let n=ie.Platform.isMobile||ie.Platform.isMobileApp?this.settings.displayEmbedReferencesInGutterMobile:this.settings.displayEmbedReferencesInGutter;n===!0&&(n=this.showCountsActive),this.updateCMExtensionState("gutter",n,_r)}updateCMExtensionState(n,r,i){if(r==!0)this.editorExtensions.push(i),this.editorExtensions[this.editorExtensions.length-1].snwID=n;else for(let o=0;o<this.editorExtensions.length;o++)if(this.editorExtensions[o].snwID===n){this.editorExtensions.splice(o,1);break}this.app.workspace.updateOptions()}async loadSettings(){this.settings=Object.assign({},qr,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}onunload(){console.log("unloading "+this.appName);try{ie.MarkdownPreviewRenderer.unregisterPostProcessor(this.markdownPostProcessor),this.app.workspace.unregisterHoverLinkSource(this.appID)}catch(n){}}};
