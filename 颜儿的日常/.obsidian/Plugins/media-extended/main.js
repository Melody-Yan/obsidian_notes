/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

"use strict";var Qa=Object.create;var xr=Object.defineProperty,$a=Object.defineProperties,qa=Object.getOwnPropertyDescriptor,Ja=Object.getOwnPropertyDescriptors,Za=Object.getOwnPropertyNames,Kn=Object.getOwnPropertySymbols,Hn=Object.getPrototypeOf,Gn=Object.prototype.hasOwnProperty,eo=Object.prototype.propertyIsEnumerable,to=Reflect.get;var Wn=(I,g,r)=>g in I?xr(I,g,{enumerable:!0,configurable:!0,writable:!0,value:r}):I[g]=r,rr=(I,g)=>{for(var r in g||={})Gn.call(g,r)&&Wn(I,r,g[r]);if(Kn)for(var r of Kn(g))eo.call(g,r)&&Wn(I,r,g[r]);return I},Ur=(I,g)=>$a(I,Ja(g));var fr=(I,g)=>()=>(g||I((g={exports:{}}).exports,g),g.exports),ro=(I,g)=>{for(var r in g)xr(I,r,{get:g[r],enumerable:!0})},Vn=(I,g,r,o)=>{if(g&&typeof g=="object"||typeof g=="function")for(let l of Za(g))!Gn.call(I,l)&&l!==r&&xr(I,l,{get:()=>g[l],enumerable:!(o=qa(g,l))||o.enumerable});return I};var dr=(I,g,r)=>(r=I!=null?Qa(Hn(I)):{},Vn(g||!I||!I.__esModule?xr(r,"default",{value:I,enumerable:!0}):r,I)),no=I=>Vn(xr({},"__esModule",{value:!0}),I);var hn=(I,g,r)=>to(Hn(I),r,g);var Ut=(I,g,r)=>new Promise((o,l)=>{var u=T=>{try{y(r.next(T))}catch(E){l(E)}},m=T=>{try{y(r.throw(T))}catch(E){l(E)}},y=T=>T.done?o(T.value):Promise.resolve(T.value).then(u,m);y((r=r.apply(I,g)).next())});var jr=fr(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});function Yn(I,g){if(g)return I;throw new Error("Unhandled discriminated union member: "+JSON.stringify(I))}zr.assertNever=Yn;zr.default=Yn});var ii=fr((Es,ni)=>{"use strict";ni.exports=I=>encodeURIComponent(I).replace(/[!'()*]/g,g=>`%${g.charCodeAt(0).toString(16).toUpperCase()}`)});var ui=fr((_s,li)=>{"use strict";var si="%[a-f0-9]{2}",ai=new RegExp("("+si+")|([^%]+?)","gi"),oi=new RegExp("("+si+")+","gi");function gn(I,g){try{return[decodeURIComponent(I.join(""))]}catch{}if(I.length===1)return I;g=g||1;var r=I.slice(0,g),o=I.slice(g);return Array.prototype.concat.call([],gn(r),gn(o))}function oo(I){try{return decodeURIComponent(I)}catch{for(var g=I.match(ai)||[],r=1;r<g.length;r++)I=gn(g,r).join(""),g=I.match(ai)||[];return I}}function so(I){for(var g={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=oi.exec(I);r;){try{g[r[0]]=decodeURIComponent(r[0])}catch{var o=oo(r[0]);o!==r[0]&&(g[r[0]]=o)}r=oi.exec(I)}g["%C2"]="\uFFFD";for(var l=Object.keys(g),u=0;u<l.length;u++){var m=l[u];I=I.replace(new RegExp(m,"g"),g[m])}return I}li.exports=function(I){if(typeof I!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof I+"`");try{return I=I.replace(/\+/g," "),decodeURIComponent(I)}catch{return so(I)}}});var ci=fr((Ts,fi)=>{"use strict";fi.exports=(I,g)=>{if(!(typeof I=="string"&&typeof g=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(g==="")return[I];let r=I.indexOf(g);return r===-1?[I]:[I.slice(0,r),I.slice(r+g.length)]}});var mi=fr((bs,di)=>{"use strict";di.exports=function(I,g){for(var r={},o=Object.keys(I),l=Array.isArray(g),u=0;u<o.length;u++){var m=o[u],y=I[m];(l?g.indexOf(m)!==-1:g(m,y,I))&&(r[m]=y)}return r}});var $r=fr(cr=>{"use strict";var lo=ii(),uo=ui(),gi=ci(),fo=mi(),co=I=>I==null,vn=Symbol("encodeFragmentIdentifier");function mo(I){switch(I.arrayFormat){case"index":return g=>(r,o)=>{let l=r.length;return o===void 0||I.skipNull&&o===null||I.skipEmptyString&&o===""?r:o===null?[...r,[er(g,I),"[",l,"]"].join("")]:[...r,[er(g,I),"[",er(l,I),"]=",er(o,I)].join("")]};case"bracket":return g=>(r,o)=>o===void 0||I.skipNull&&o===null||I.skipEmptyString&&o===""?r:o===null?[...r,[er(g,I),"[]"].join("")]:[...r,[er(g,I),"[]=",er(o,I)].join("")];case"colon-list-separator":return g=>(r,o)=>o===void 0||I.skipNull&&o===null||I.skipEmptyString&&o===""?r:o===null?[...r,[er(g,I),":list="].join("")]:[...r,[er(g,I),":list=",er(o,I)].join("")];case"comma":case"separator":case"bracket-separator":{let g=I.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(o,l)=>l===void 0||I.skipNull&&l===null||I.skipEmptyString&&l===""?o:(l=l===null?"":l,o.length===0?[[er(r,I),g,er(l,I)].join("")]:[[o,er(l,I)].join(I.arrayFormatSeparator)])}default:return g=>(r,o)=>o===void 0||I.skipNull&&o===null||I.skipEmptyString&&o===""?r:o===null?[...r,er(g,I)]:[...r,[er(g,I),"=",er(o,I)].join("")]}}function ho(I){let g;switch(I.arrayFormat){case"index":return(r,o,l)=>{if(g=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!g){l[r]=o;return}l[r]===void 0&&(l[r]={}),l[r][g[1]]=o};case"bracket":return(r,o,l)=>{if(g=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!g){l[r]=o;return}if(l[r]===void 0){l[r]=[o];return}l[r]=[].concat(l[r],o)};case"colon-list-separator":return(r,o,l)=>{if(g=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!g){l[r]=o;return}if(l[r]===void 0){l[r]=[o];return}l[r]=[].concat(l[r],o)};case"comma":case"separator":return(r,o,l)=>{let u=typeof o=="string"&&o.includes(I.arrayFormatSeparator),m=typeof o=="string"&&!u&&Sr(o,I).includes(I.arrayFormatSeparator);o=m?Sr(o,I):o;let y=u||m?o.split(I.arrayFormatSeparator).map(T=>Sr(T,I)):o===null?o:Sr(o,I);l[r]=y};case"bracket-separator":return(r,o,l)=>{let u=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!u){l[r]=o&&Sr(o,I);return}let m=o===null?[]:o.split(I.arrayFormatSeparator).map(y=>Sr(y,I));if(l[r]===void 0){l[r]=m;return}l[r]=[].concat(l[r],m)};default:return(r,o,l)=>{if(l[r]===void 0){l[r]=o;return}l[r]=[].concat(l[r],o)}}}function vi(I){if(typeof I!="string"||I.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function er(I,g){return g.encode?g.strict?lo(I):encodeURIComponent(I):I}function Sr(I,g){return g.decode?uo(I):I}function pi(I){return Array.isArray(I)?I.sort():typeof I=="object"?pi(Object.keys(I)).sort((g,r)=>Number(g)-Number(r)).map(g=>I[g]):I}function yi(I){let g=I.indexOf("#");return g!==-1&&(I=I.slice(0,g)),I}function go(I){let g="",r=I.indexOf("#");return r!==-1&&(g=I.slice(r)),g}function Ei(I){I=yi(I);let g=I.indexOf("?");return g===-1?"":I.slice(g+1)}function hi(I,g){return g.parseNumbers&&!Number.isNaN(Number(I))&&typeof I=="string"&&I.trim()!==""?I=Number(I):g.parseBooleans&&I!==null&&(I.toLowerCase()==="true"||I.toLowerCase()==="false")&&(I=I.toLowerCase()==="true"),I}function _i(I,g){g=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},g),vi(g.arrayFormatSeparator);let r=ho(g),o=Object.create(null);if(typeof I!="string"||(I=I.trim().replace(/^[?#&]/,""),!I))return o;for(let l of I.split("&")){if(l==="")continue;let[u,m]=gi(g.decode?l.replace(/\+/g," "):l,"=");m=m===void 0?null:["comma","separator","bracket-separator"].includes(g.arrayFormat)?m:Sr(m,g),r(Sr(u,g),m,o)}for(let l of Object.keys(o)){let u=o[l];if(typeof u=="object"&&u!==null)for(let m of Object.keys(u))u[m]=hi(u[m],g);else o[l]=hi(u,g)}return g.sort===!1?o:(g.sort===!0?Object.keys(o).sort():Object.keys(o).sort(g.sort)).reduce((l,u)=>{let m=o[u];return Boolean(m)&&typeof m=="object"&&!Array.isArray(m)?l[u]=pi(m):l[u]=m,l},Object.create(null))}cr.extract=Ei;cr.parse=_i;cr.stringify=(I,g)=>{if(!I)return"";g=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},g),vi(g.arrayFormatSeparator);let r=m=>g.skipNull&&co(I[m])||g.skipEmptyString&&I[m]==="",o=mo(g),l={};for(let m of Object.keys(I))r(m)||(l[m]=I[m]);let u=Object.keys(l);return g.sort!==!1&&u.sort(g.sort),u.map(m=>{let y=I[m];return y===void 0?"":y===null?er(m,g):Array.isArray(y)?y.length===0&&g.arrayFormat==="bracket-separator"?er(m,g)+"[]":y.reduce(o(m),[]).join("&"):er(m,g)+"="+er(y,g)}).filter(m=>m.length>0).join("&")};cr.parseUrl=(I,g)=>{g=Object.assign({decode:!0},g);let[r,o]=gi(I,"#");return Object.assign({url:r.split("?")[0]||"",query:_i(Ei(I),g)},g&&g.parseFragmentIdentifier&&o?{fragmentIdentifier:Sr(o,g)}:{})};cr.stringifyUrl=(I,g)=>{g=Object.assign({encode:!0,strict:!0,[vn]:!0},g);let r=yi(I.url).split("?")[0]||"",o=cr.extract(I.url),l=cr.parse(o,{sort:!1}),u=Object.assign(l,I.query),m=cr.stringify(u,g);m&&(m=`?${m}`);let y=go(I.url);return I.fragmentIdentifier&&(y=`#${g[vn]?er(I.fragmentIdentifier,g):I.fragmentIdentifier}`),`${r}${m}${y}`};cr.pick=(I,g,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[vn]:!1},r);let{url:o,query:l,fragmentIdentifier:u}=cr.parseUrl(I,r);return cr.stringifyUrl({url:o,query:fo(l,g),fragmentIdentifier:u},r)};cr.exclude=(I,g,r)=>{let o=Array.isArray(g)?l=>!g.includes(l):(l,u)=>!g(l,u);return cr.pick(I,o,r)}});var bi=fr((As,Ti)=>{"use strict";Ti.exports=function(g,r){if(r=r.split(":")[0],g=+g,!g)return!1;switch(r){case"http":case"ws":return g!==80;case"https":case"wss":return g!==443;case"ftp":return g!==21;case"gopher":return g!==70;case"file":return!1}return g!==0}});var Mi=fr(pn=>{"use strict";var vo=Object.prototype.hasOwnProperty,po;function Si(I){try{return decodeURIComponent(I.replace(/\+/g," "))}catch{return null}}function Ai(I){try{return encodeURIComponent(I)}catch{return null}}function yo(I){for(var g=/([^=?#&]+)=?([^&]*)/g,r={},o;o=g.exec(I);){var l=Si(o[1]),u=Si(o[2]);l===null||u===null||l in r||(r[l]=u)}return r}function Eo(I,g){g=g||"";var r=[],o,l;typeof g!="string"&&(g="?");for(l in I)if(vo.call(I,l)){if(o=I[l],!o&&(o===null||o===po||isNaN(o))&&(o=""),l=Ai(l),o=Ai(o),l===null||o===null)continue;r.push(l+"="+o)}return r.length?g+r.join("&"):""}pn.stringify=Eo;pn.parse=yo});var Ni=fr((Ps,Li)=>{"use strict";var Ri=bi(),qr=Mi(),_o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Ci=/[\n\r\t]/g,To=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Ii=/:\d+$/,bo=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,So=/^[a-zA-Z]:/;function En(I){return(I||"").toString().replace(_o,"")}var yn=[["#","hash"],["?","query"],function(g,r){return yr(r.protocol)?g.replace(/\\/g,"/"):g},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Pi={hash:1,query:1};function Oi(I){var g;typeof window<"u"?g=window:typeof global<"u"?g=global:typeof self<"u"?g=self:g={};var r=g.location||{};I=I||r;var o={},l=typeof I,u;if(I.protocol==="blob:")o=new Er(unescape(I.pathname),{});else if(l==="string"){o=new Er(I,{});for(u in Pi)delete o[u]}else if(l==="object"){for(u in I)u in Pi||(o[u]=I[u]);o.slashes===void 0&&(o.slashes=To.test(I.href))}return o}function yr(I){return I==="file:"||I==="ftp:"||I==="http:"||I==="https:"||I==="ws:"||I==="wss:"}function Di(I,g){I=En(I),I=I.replace(Ci,""),g=g||{};var r=bo.exec(I),o=r[1]?r[1].toLowerCase():"",l=!!r[2],u=!!r[3],m=0,y;return l?u?(y=r[2]+r[3]+r[4],m=r[2].length+r[3].length):(y=r[2]+r[4],m=r[2].length):u?(y=r[3]+r[4],m=r[3].length):y=r[4],o==="file:"?m>=2&&(y=y.slice(2)):yr(o)?y=r[4]:o?l&&(y=y.slice(2)):m>=2&&yr(g.protocol)&&(y=r[4]),{protocol:o,slashes:l||yr(o),slashesCount:m,rest:y}}function Ao(I,g){if(I==="")return g;for(var r=(g||"/").split("/").slice(0,-1).concat(I.split("/")),o=r.length,l=r[o-1],u=!1,m=0;o--;)r[o]==="."?r.splice(o,1):r[o]===".."?(r.splice(o,1),m++):m&&(o===0&&(u=!0),r.splice(o,1),m--);return u&&r.unshift(""),(l==="."||l==="..")&&r.push(""),r.join("/")}function Er(I,g,r){if(I=En(I),I=I.replace(Ci,""),!(this instanceof Er))return new Er(I,g,r);var o,l,u,m,y,T,E=yn.slice(),t=typeof g,e=this,n=0;for(t!=="object"&&t!=="string"&&(r=g,g=null),r&&typeof r!="function"&&(r=qr.parse),g=Oi(g),l=Di(I||"",g),o=!l.protocol&&!l.slashes,e.slashes=l.slashes||o&&g.slashes,e.protocol=l.protocol||g.protocol||"",I=l.rest,(l.protocol==="file:"&&(l.slashesCount!==2||So.test(I))||!l.slashes&&(l.protocol||l.slashesCount<2||!yr(e.protocol)))&&(E[3]=[/(.*)/,"pathname"]);n<E.length;n++){if(m=E[n],typeof m=="function"){I=m(I,e);continue}u=m[0],T=m[1],u!==u?e[T]=I:typeof u=="string"?(y=u==="@"?I.lastIndexOf(u):I.indexOf(u),~y&&(typeof m[2]=="number"?(e[T]=I.slice(0,y),I=I.slice(y+m[2])):(e[T]=I.slice(y),I=I.slice(0,y)))):(y=u.exec(I))&&(e[T]=y[1],I=I.slice(0,y.index)),e[T]=e[T]||o&&m[3]&&g[T]||"",m[4]&&(e[T]=e[T].toLowerCase())}r&&(e.query=r(e.query)),o&&g.slashes&&e.pathname.charAt(0)!=="/"&&(e.pathname!==""||g.pathname!=="")&&(e.pathname=Ao(e.pathname,g.pathname)),e.pathname.charAt(0)!=="/"&&yr(e.protocol)&&(e.pathname="/"+e.pathname),Ri(e.port,e.protocol)||(e.host=e.hostname,e.port=""),e.username=e.password="",e.auth&&(y=e.auth.indexOf(":"),~y?(e.username=e.auth.slice(0,y),e.username=encodeURIComponent(decodeURIComponent(e.username)),e.password=e.auth.slice(y+1),e.password=encodeURIComponent(decodeURIComponent(e.password))):e.username=encodeURIComponent(decodeURIComponent(e.auth)),e.auth=e.password?e.username+":"+e.password:e.username),e.origin=e.protocol!=="file:"&&yr(e.protocol)&&e.host?e.protocol+"//"+e.host:"null",e.href=e.toString()}function Mo(I,g,r){var o=this;switch(I){case"query":typeof g=="string"&&g.length&&(g=(r||qr.parse)(g)),o[I]=g;break;case"port":o[I]=g,Ri(g,o.protocol)?g&&(o.host=o.hostname+":"+g):(o.host=o.hostname,o[I]="");break;case"hostname":o[I]=g,o.port&&(g+=":"+o.port),o.host=g;break;case"host":o[I]=g,Ii.test(g)?(g=g.split(":"),o.port=g.pop(),o.hostname=g.join(":")):(o.hostname=g,o.port="");break;case"protocol":o.protocol=g.toLowerCase(),o.slashes=!r;break;case"pathname":case"hash":if(g){var l=I==="pathname"?"/":"#";o[I]=g.charAt(0)!==l?l+g:g}else o[I]=g;break;case"username":case"password":o[I]=encodeURIComponent(g);break;case"auth":var u=g.indexOf(":");~u?(o.username=g.slice(0,u),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=g.slice(u+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(g))}for(var m=0;m<yn.length;m++){var y=yn[m];y[4]&&(o[y[1]]=o[y[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin=o.protocol!=="file:"&&yr(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o}function Po(I){(!I||typeof I!="function")&&(I=qr.stringify);var g,r=this,o=r.host,l=r.protocol;l&&l.charAt(l.length-1)!==":"&&(l+=":");var u=l+(r.protocol&&r.slashes||yr(r.protocol)?"//":"");return r.username?(u+=r.username,r.password&&(u+=":"+r.password),u+="@"):r.password?(u+=":"+r.password,u+="@"):r.protocol!=="file:"&&yr(r.protocol)&&!o&&r.pathname!=="/"&&(u+="@"),(o[o.length-1]===":"||Ii.test(r.hostname)&&!r.port)&&(o+=":"),u+=o+r.pathname,g=typeof r.query=="object"?I(r.query):r.query,g&&(u+=g.charAt(0)!=="?"?"?"+g:g),r.hash&&(u+=r.hash),u}Er.prototype={set:Mo,toString:Po};Er.extractProtocol=Di;Er.location=Oi;Er.trimLeft=En;Er.qs=qr;Li.exports=Er});var Bi=fr(mr=>{"use strict";var Co=mr&&mr.__awaiter||function(I,g,r,o){function l(u){return u instanceof r?u:new r(function(m){m(u)})}return new(r||(r=Promise))(function(u,m){function y(t){try{E(o.next(t))}catch(e){m(e)}}function T(t){try{E(o.throw(t))}catch(e){m(e)}}function E(t){t.done?u(t.value):l(t.value).then(y,T)}E((o=o.apply(I,g||[])).next())})},Io=mr&&mr.__generator||function(I,g){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,l,u,m;return m={next:y(0),throw:y(1),return:y(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function y(E){return function(t){return T([E,t])}}function T(E){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,l&&(u=E[0]&2?l.return:E[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,E[1])).done)return u;switch(l=0,u&&(E=[E[0]&2,u.value]),E[0]){case 0:case 1:u=E;break;case 4:return r.label++,{value:E[1],done:!1};case 5:r.label++,l=E[1],E=[0];continue;case 7:E=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(E[0]===6||E[0]===2)){r=0;continue}if(E[0]===3&&(!u||E[1]>u[0]&&E[1]<u[3])){r.label=E[1];break}if(E[0]===6&&r.label<u[1]){r.label=u[1],u=E;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(E);break}u[2]&&r.ops.pop(),r.trys.pop();continue}E=g.call(I,r)}catch(t){E=[6,t],l=0}finally{o=u=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}};Object.defineProperty(mr,"__esModule",{value:!0});mr.moduleName=void 0;mr.moduleName="toWebVTT";var wi=function(I,g){return new Promise(function(r,o){var l=new FileReader,u=function(y){var T=y.target.result;l.removeEventListener("loadend",u),r(g!=="string"?new Uint8Array(T):T)},m=function(){l.removeEventListener("error",m),o(new Error(mr.moduleName+": Error while reading the Blob object"))};l.addEventListener("loadend",u),l.addEventListener("error",m),g!=="string"?l.readAsArrayBuffer(I):l.readAsText(I)})},Oo=function(I){return URL.createObjectURL(new Blob([I],{type:"text/vtt"}))},Fi=function(I){return I.replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").concat(`\r
\r
`)},Do=function(I){return Co(void 0,void 0,void 0,function(){var g,r,l,o,l,u;return Io(this,function(m){switch(m.label){case 0:if(!FileReader)throw new Error(mr.moduleName+": No FileReader constructor found");if(!TextDecoder)throw new Error(mr.moduleName+": No TextDecoder constructor found");if(!(I instanceof Blob))throw new Error(mr.moduleName+": Expecting resource to be a Blob but something else found.");r=`WEBVTT FILE\r
\r
`,m.label=1;case 1:return m.trys.push([1,3,,5]),[4,wi(I,"string")];case 2:return l=m.sent(),g=r.concat(Fi(l)),[3,5];case 3:return o=m.sent(),[4,wi(I,"buffer")];case 4:return l=m.sent(),u=new TextDecoder("utf-8").decode(l),g=r.concat(Fi(u)),[3,5];case 5:return[2,Promise.resolve(Oo(g))]}})})};mr.default=Do});var Hi=fr((tn,An)=>{(function(g,r){typeof tn=="object"&&typeof An=="object"?An.exports=r():typeof define=="function"&&define.amd?define([],r):typeof tn=="object"?tn.dashjs=r():g.dashjs=r()})(window,function(){return function(I){var g={};function r(o){if(g[o])return g[o].exports;var l=g[o]={i:o,l:!1,exports:{}};return I[o].call(l.exports,l,l.exports,r),l.l=!0,l.exports}return r.m=I,r.c=g,r.d=function(o,l,u){r.o(o,l)||Object.defineProperty(o,l,{enumerable:!0,get:u})},r.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},r.t=function(o,l){if(l&1&&(o=r(o)),l&8||l&4&&typeof o=="object"&&o&&o.__esModule)return o;var u=Object.create(null);if(r.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:o}),l&2&&typeof o!="string")for(var m in o)r.d(u,m,function(y){return o[y]}.bind(null,m));return u},r.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(l,"a",l),l},r.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},r.p="/dist/",r(r.s="./index.js")}({"./externals/base64.js":function(I,g,r){var o={};o.encode=function(u){for(var m=[],y=0;y<u.length;++y){var T=u.charCodeAt(y);T<128?m.push(T):T<2048?(m.push(192|T>>6),m.push(128|63&T)):T<65536?(m.push(224|T>>12),m.push(128|63&T>>6),m.push(128|63&T)):(m.push(240|T>>18),m.push(128|63&T>>12),m.push(128|63&T>>6),m.push(128|63&T))}return m},o.decode=function(u){for(var m=[],y=0;y<u.length;){var T=u[y++];T<128||(T<224?(T=(31&T)<<6,T|=63&u[y++]):T<240?(T=(15&T)<<12,T|=(63&u[y++])<<6,T|=63&u[y++]):(T=(7&T)<<18,T|=(63&u[y++])<<12,T|=(63&u[y++])<<6,T|=63&u[y++])),m.push(String.fromCharCode(T))}return m.join("")};var l={};(function(u){var m=function(e){for(var n=0,i=[],d=0|e.length/3;0<d--;){var P=(e[n]<<16)+(e[n+1]<<8)+e[n+2];n+=3,i.push(u.charAt(63&P>>18)),i.push(u.charAt(63&P>>12)),i.push(u.charAt(63&P>>6)),i.push(u.charAt(63&P))}if(e.length-n==2){var P=(e[n]<<16)+(e[n+1]<<8);i.push(u.charAt(63&P>>18)),i.push(u.charAt(63&P>>12)),i.push(u.charAt(63&P>>6)),i.push("=")}else if(e.length-n==1){var P=e[n]<<16;i.push(u.charAt(63&P>>18)),i.push(u.charAt(63&P>>12)),i.push("==")}return i.join("")},y=function(){for(var t=[],e=0;e<u.length;++e)t[u.charCodeAt(e)]=e;return t["=".charCodeAt(0)]=0,t}(),T=function(e){for(var n=0,i=[],d=0|e.length/4;0<d--;){var P=(y[e.charCodeAt(n)]<<18)+(y[e.charCodeAt(n+1)]<<12)+(y[e.charCodeAt(n+2)]<<6)+y[e.charCodeAt(n+3)];i.push(255&P>>16),i.push(255&P>>8),i.push(255&P),n+=4}return i&&(e.charAt(n-2)=="="?(i.pop(),i.pop()):e.charAt(n-1)=="="&&i.pop()),i},E={};E.encode=function(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e},E.decode=function(t){for(var e=0;e<s.length;++e)a[e]=String.fromCharCode(a[e]);return a.join("")},l.decodeArray=function(t){var e=T(t);return new Uint8Array(e)},l.encodeASCII=function(t){var e=E.encode(t);return m(e)},l.decodeASCII=function(t){var e=T(t);return E.decode(e)},l.encode=function(t){var e=o.encode(t);return m(e)},l.decode=function(t){var e=T(t);return o.decode(e)}})("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),g.decode=l.decode,g.decodeArray=l.decodeArray,g.encode=l.encode,g.encodeASCII=l.encodeASCII},"./externals/cea608-parser.js":function(I,g,r){(function(o){"use strict";var l={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},u=function(p){var C=p;return l.hasOwnProperty(p)&&(C=l[p]),String.fromCharCode(C)},m=15,y=32,T={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},E={17:2,18:4,21:6,22:8,23:10,19:13,20:15},t={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},e={25:2,26:4,29:6,30:8,31:10,27:13,28:15},n=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],i={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(p){this.time=p},log:function(p,C){var x=this.verboseFilter[p];this.verboseLevel>=x&&console.log(this.time+" ["+p+"] "+C)}},d=function(p){for(var C=[],x=0;x<p.length;x++)C.push(p[x].toString(16));return C},P=function(p,C,x,V,H){this.foreground=p||"white",this.underline=C||!1,this.italics=x||!1,this.background=V||"black",this.flash=H||!1};P.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(p){for(var C=["foreground","underline","italics","background","flash"],x=0;x<C.length;x++){var V=C[x];p.hasOwnProperty(V)&&(this[V]=p[V])}},isDefault:function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},equals:function(p){return this.foreground===p.foreground&&this.underline===p.underline&&this.italics===p.italics&&this.background===p.background&&this.flash===p.flash},copy:function(p){this.foreground=p.foreground,this.underline=p.underline,this.italics=p.italics,this.background=p.background,this.flash=p.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var b=function(p,C,x,V,H,te){this.uchar=p||" ",this.penState=new P(C,x,V,H,te)};b.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(p,C){this.uchar=p,this.penState.copy(C)},setPenState:function(p){this.penState.copy(p)},equals:function(p){return this.uchar===p.uchar&&this.penState.equals(p.penState)},copy:function(p){this.uchar=p.uchar,this.penState.copy(p.penState)},isEmpty:function(){return this.uchar===" "&&this.penState.isDefault()}};var A=function(){this.chars=[];for(var p=0;p<y;p++)this.chars.push(new b);this.pos=0,this.currPenState=new P};A.prototype={equals:function(p){for(var C=!0,x=0;x<y;x++)if(!this.chars[x].equals(p.chars[x])){C=!1;break}return C},copy:function(p){for(var C=0;C<y;C++)this.chars[C].copy(p.chars[C])},isEmpty:function(){for(var p=!0,C=0;C<y;C++)if(!this.chars[C].isEmpty()){p=!1;break}return p},setCursor:function(p){this.pos!==p&&(this.pos=p),this.pos<0?(i.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>y&&(i.log("ERROR","Too large cursor position "+this.pos),this.pos=y)},moveCursor:function(p){var C=this.pos+p;if(p>1)for(var x=this.pos+1;x<C+1;x++)this.chars[x].setPenState(this.currPenState);this.setCursor(C)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(p){p>=144&&this.backSpace();var C=u(p);if(this.pos>=y){i.log("ERROR","Cannot insert "+p.toString(16)+" ("+C+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(C,this.currPenState),this.moveCursor(1)},clearFromPos:function(p){var C;for(C=p;C<y;C++)this.chars[C].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var p=[],C=!0,x=0;x<y;x++){var V=this.chars[x].uchar;V!==" "&&(C=!1),p.push(V)}return C?"":p.join("")},setPenStyles:function(p){this.currPenState.setStyles(p);var C=this.chars[this.pos];C.setPenState(this.currPenState)}};var _=function(){this.rows=[];for(var p=0;p<m;p++)this.rows.push(new A);this.currRow=m-1,this.nrRollUpRows=null,this.reset()};_.prototype={reset:function(){for(var p=0;p<m;p++)this.rows[p].clear();this.currRow=m-1},equals:function(p){for(var C=!0,x=0;x<m;x++)if(!this.rows[x].equals(p.rows[x])){C=!1;break}return C},copy:function(p){for(var C=0;C<m;C++)this.rows[C].copy(p.rows[C])},isEmpty:function(){for(var p=!0,C=0;C<m;C++)if(!this.rows[C].isEmpty()){p=!1;break}return p},backSpace:function(){var p=this.rows[this.currRow];p.backSpace()},clearToEndOfRow:function(){var p=this.rows[this.currRow];p.clearToEndOfRow()},insertChar:function(p){var C=this.rows[this.currRow];C.insertChar(p)},setPen:function(p){var C=this.rows[this.currRow];C.setPenStyles(p)},moveCursor:function(p){var C=this.rows[this.currRow];C.moveCursor(p)},setCursor:function(p){i.log("INFO","setCursor: "+p);var C=this.rows[this.currRow];C.setCursor(p)},setPAC:function(p){i.log("INFO","pacData = "+JSON.stringify(p));var C=p.row-1;this.nrRollUpRows&&C<this.nrRollUpRows-1&&(C=this.nrRollUpRows-1),this.currRow=C;var x=this.rows[this.currRow];if(p.indent!==null){var V=p.indent,H=Math.max(V-1,0);x.setCursor(p.indent),p.color=x.chars[H].penState.foreground}var te={foreground:p.color,underline:p.underline,italics:p.italics,background:"black",flash:!1};this.setPen(te)},setBkgData:function(p){i.log("INFO","bkgData = "+JSON.stringify(p)),this.backSpace(),this.setPen(p),this.insertChar(32)},setRollUpRows:function(p){this.nrRollUpRows=p},rollUp:function(){if(this.nrRollUpRows===null){i.log("DEBUG","roll_up but nrRollUpRows not set yet");return}i.log("TEXT",this.getDisplayText());var p=this.currRow+1-this.nrRollUpRows,C=this.rows.splice(p,1)[0];C.clear(),this.rows.splice(this.currRow,0,C),i.log("INFO","Rolling up")},getDisplayText:function(p){p=p||!1;for(var C=[],x="",V=-1,H=0;H<m;H++){var te=this.rows[H].getTextString();te&&(V=H+1,p?C.push("Row "+V+': "'+te+'"'):C.push(te.trim()))}return C.length>0&&(p?x="["+C.join(" | ")+"]":x=C.join(`
`)),x},getTextAndFormat:function(){return this.rows}};var h=function(p,C){this.chNr=p,this.outputFilter=C,this.mode=null,this.verbose=0,this.displayedMemory=new _,this.nonDisplayedMemory=new _,this.lastOutputScreen=new _,this.currRollUpRow=this.displayedMemory.rows[m-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};h.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[m-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(p){this.outputFilter=p},setPAC:function(p){this.writeScreen.setPAC(p)},setBkgData:function(p){this.writeScreen.setBkgData(p)},setMode:function(p){p!==this.mode&&(this.mode=p,i.log("INFO","MODE="+p),this.mode=="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=p)},insertChars:function(p){for(var C=0;C<p.length;C++)this.writeScreen.insertChar(p[C]);var x=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";i.log("INFO",x+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(i.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){i.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){i.log("INFO","BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){i.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(p){i.log("INFO","RU("+p+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(p)},cc_FON:function(){i.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){i.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){i.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){i.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){i.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){i.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){i.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(i.log("INFO","EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var p=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=p,this.writeScreen=this.nonDisplayedMemory,i.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(p){i.log("INFO","TO("+p+") - Tab Offset"),this.writeScreen.moveCursor(p)},cc_MIDROW:function(p){var C={flash:!1};if(C.underline=p%2===1,C.italics=p>=46,C.italics)C.foreground="white";else{var x=Math.floor(p/2)-16,V=["white","green","blue","cyan","red","yellow","magenta"];C.foreground=V[x]}i.log("INFO","MIDROW: "+JSON.stringify(C)),this.writeScreen.setPen(C)},outputDataUpdate:function(){var p=i.time;p!==null&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(p,this.displayedMemory),this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=p:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,p,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:p),this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(p){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,p,this.displayedMemory),this.cueStartTime=p))}};var f=function(p,C,x){this.field=p||1,this.outputs=[C,x],this.channels=[new h(1,C),new h(2,x)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};f.prototype={getHandler:function(p){return this.channels[p].getHandler()},setHandler:function(p,C){this.channels[p].setHandler(C)},addData:function(p,C){var x,V,H,te=!1;this.lastTime=p,i.setTime(p);for(var w=0;w<C.length;w+=2){if(V=C[w]&127,H=C[w+1]&127,V>=16&&V<=31&&V===this.lastCmdA&&H===this.lastCmdB){this.lastCmdA=null,this.lastCmdB=null,i.log("DEBUG","Repeated command ("+d([V,H])+") is dropped");continue}if(V===0&&H===0){this.dataCounters.padding+=2;continue}else i.log("DATA","["+d([C[w],C[w+1]])+"] -> ("+d([V,H])+")");if(x=this.parseCmd(V,H),x||(x=this.parseMidrow(V,H)),x||(x=this.parsePAC(V,H)),x||(x=this.parseBackgroundAttributes(V,H)),!x&&(te=this.parseChars(V,H),te))if(this.currChNr&&this.currChNr>=0){var F=this.channels[this.currChNr-1];F.insertChars(te)}else i.log("WARNING","No channel found yet. TEXT-MODE?");x?this.dataCounters.cmd+=2:te?this.dataCounters.char+=2:(this.dataCounters.other+=2,i.log("WARNING","Couldn't parse cleaned data "+d([V,H])+" orig: "+d([C[w],C[w+1]])))}},parseCmd:function(p,C){var x=null,V=(p===20||p===21||p===28||p===29)&&32<=C&&C<=47,H=(p===23||p===31)&&33<=C&&C<=35;if(!(V||H))return!1;p===20||p===21||p===23?x=1:x=2;var te=this.channels[x-1];return p===20||p===21||p===28||p===29?C===32?te.cc_RCL():C===33?te.cc_BS():C===34?te.cc_AOF():C===35?te.cc_AON():C===36?te.cc_DER():C===37?te.cc_RU(2):C===38?te.cc_RU(3):C===39?te.cc_RU(4):C===40?te.cc_FON():C===41?te.cc_RDC():C===42?te.cc_TR():C===43?te.cc_RTD():C===44?te.cc_EDM():C===45?te.cc_CR():C===46?te.cc_ENM():C===47&&te.cc_EOC():te.cc_TO(C-32),this.lastCmdA=p,this.lastCmdB=C,this.currChNr=x,!0},parseMidrow:function(p,C){var x=null;if((p===17||p===25)&&32<=C&&C<=47){if(p===17?x=1:x=2,x!==this.currChNr)return i.log("ERROR","Mismatch channel in midrow parsing"),!1;var V=this.channels[x-1];return V.insertChars([32]),V.cc_MIDROW(C),i.log("DEBUG","MIDROW ("+d([p,C])+")"),this.lastCmdA=p,this.lastCmdB=C,!0}return!1},parsePAC:function(p,C){var x=null,V=null,H=(17<=p&&p<=23||25<=p&&p<=31)&&64<=C&&C<=127,te=(p===16||p===24)&&64<=C&&C<=95;if(!(H||te))return!1;x=p<=23?1:2,64<=C&&C<=95?V=x===1?T[p]:t[p]:V=x===1?E[p]:e[p];var w=this.interpretPAC(V,C),F=this.channels[x-1];return F.setPAC(w),this.lastCmdA=p,this.lastCmdB=C,this.currChNr=x,!0},interpretPAC:function(p,C){var x=C,V={color:null,italics:!1,indent:null,underline:!1,row:p};return C>95?x=C-96:x=C-64,V.underline=(x&1)===1,x<=13?V.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(x/2)]:x<=15?(V.italics=!0,V.color="white"):V.indent=Math.floor((x-16)/2)*4,V},parseChars:function(p,C){var x=null,V=null,H=null,te=null;if(p>=25?(x=2,H=p-8):(x=1,H=p),17<=H&&H<=19){var w=C;H===17?w=C+80:H===18?w=C+112:w=C+144,i.log("INFO","Special char '"+u(w)+"' in channel "+x),V=[w],this.lastCmdA=p,this.lastCmdB=C}else 32<=p&&p<=127&&(V=C===0?[p]:[p,C],this.lastCmdA=null,this.lastCmdB=null);if(V){var F=d(V);i.log("DEBUG","Char codes =  "+F.join(","))}return V},parseBackgroundAttributes:function(p,C){var x,V,H,te,w=(p===16||p===24)&&32<=C&&C<=47,F=(p===23||p===31)&&45<=C&&C<=47;return w||F?(x={},p===16||p===24?(V=Math.floor((C-32)/2),x.background=n[V],C%2===1&&(x.background=x.background+"_semi")):C===45?x.background="transparent":(x.foreground="black",C===47&&(x.underline=!0)),H=p<24?1:2,te=this.channels[H-1],te.setBkgData(x),this.lastCmdA=p,this.lastCmdB=C,!0):!1},reset:function(){for(var p=0;p<this.channels.length;p++)this.channels[p]&&this.channels[p].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(p){for(var C=0;C<this.channels.length;C++)this.channels[C]&&this.channels[C].cueSplitAtTime(p)}};var v=function(p,C,x){for(var V=0,H=C,te=0,w=[],F=function(se,G,ee,J){if(se!==4||G<8)return null;var ie=ee.getUint8(J),ue=ee.getUint16(J+1),ae=ee.getUint32(J+3),oe=ee.getUint8(J+7);return ie==181&&ue==49&&ae==1195456820&&oe==3};H<C+x;){if(V=p.getUint32(H),te=p.getUint8(H+4)&31,te===6)for(var M=H+5,U=-1;M<H+4+V-1;){U=0;for(var j=255;j===255;)j=p.getUint8(M),U+=j,M++;var X=0;for(j=255;j===255;)j=p.getUint8(M),X+=j,M++;F(U,X,p,M)&&w.push([M,X]),M+=X}H+=V+4}return w},c=function(p,C){var x=C[0],V=[[],[]];x+=8;var H=p.getUint8(x)&31;x+=2;for(var te=0;te<H;te++){var w=p.getUint8(x),F=w&4,M=w&3;x++;var U=p.getUint8(x);x++;var j=p.getUint8(x);x++,F&&(U&127)+(j&127)!==0&&(M===0?(V[0].push(U),V[0].push(j)):M===1&&(V[1].push(U),V[1].push(j)))}return V};o.logger=i,o.PenState=P,o.CaptionScreen=_,o.Cea608Parser=f,o.findCea608Nalus=v,o.extractCea608DataFromRange=c})(g)},"./externals/xml2json.js":function(I,g,r){"use strict";r.r(g);function o(l){"use strict";var u="1.2.0";l=l||{},m();function m(){l.escapeMode===void 0&&(l.escapeMode=!0),l.attributePrefix===void 0&&(l.attributePrefix="_"),l.arrayAccessForm=l.arrayAccessForm||"none",l.emptyNodeForm=l.emptyNodeForm||"text",l.enableToStringFunc===void 0&&(l.enableToStringFunc=!0),l.arrayAccessFormPaths=l.arrayAccessFormPaths||[],l.skipEmptyTextNodesForObj===void 0&&(l.skipEmptyTextNodesForObj=!0),l.stripWhitespaces===void 0&&(l.stripWhitespaces=!0),l.datetimeAccessFormPaths=l.datetimeAccessFormPaths||[],l.useDoubleQuotes===void 0&&(l.useDoubleQuotes=!1),l.xmlElementsFilter=l.xmlElementsFilter||[],l.jsonPropertiesFilter=l.jsonPropertiesFilter||[],l.keepCData===void 0&&(l.keepCData=!1),l.ignoreRoot===void 0&&(l.ignoreRoot=!1)}var y={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};function T(){}function E(F){var M=F.localName;return M==null&&(M=F.baseName),(M==null||M=="")&&(M=F.nodeName),M}function t(F){return F.prefix}function e(F){return typeof F=="string"?F.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):F}function n(F){return F.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&amp;/g,"&")}function i(F,M,U,j){for(var X=0;X<F.length;X++){var Y=F[X];if(typeof Y=="string"){if(Y==j)break}else if(Y instanceof RegExp){if(Y.test(j))break}else if(typeof Y=="function"&&Y(M,U,j))break}return X!=F.length}function d(F,M,U){switch(l.arrayAccessForm){case"property":F[M]instanceof Array?F[M+"_asArray"]=F[M]:F[M+"_asArray"]=[F[M]];break}!(F[M]instanceof Array)&&l.arrayAccessFormPaths.length>0&&i(l.arrayAccessFormPaths,F,M,U)&&(F[M]=[F[M]])}function P(F){var M=F.split(/[-T:+Z]/g),U=new Date(M[0],M[1]-1,M[2]),j=M[5].split(".");if(U.setHours(M[3],M[4],j[0]),j.length>1&&U.setMilliseconds(j[1]),M[6]&&M[7]){var X=M[6]*60+Number(M[7]),Y=/\d\d-\d\d:\d\d$/.test(F)?"-":"+";X=0+(Y=="-"?-1*X:X),U.setMinutes(U.getMinutes()-X-U.getTimezoneOffset())}else F.indexOf("Z",F.length-1)!==-1&&(U=new Date(Date.UTC(U.getFullYear(),U.getMonth(),U.getDate(),U.getHours(),U.getMinutes(),U.getSeconds(),U.getMilliseconds())));return U}function b(F,M,U){if(l.datetimeAccessFormPaths.length>0){var j=U.split(".#")[0];return i(l.datetimeAccessFormPaths,F,M,j)?P(F):F}else return F}function A(F,M,U,j){return M==y.ELEMENT_NODE&&l.xmlElementsFilter.length>0?i(l.xmlElementsFilter,F,U,j):!0}function _(F,M){if(F.nodeType==y.DOCUMENT_NODE){for(var U=new Object,j=F.childNodes,X=0;X<j.length;X++){var Y=j[X];if(Y.nodeType==y.ELEMENT_NODE)if(l.ignoreRoot)U=_(Y);else{U={};var se=E(Y);U[se]=_(Y)}}return U}else if(F.nodeType==y.ELEMENT_NODE){var U=new Object;U.__cnt=0;for(var G=[],j=F.childNodes,X=0;X<j.length;X++){var Y=j[X],se=E(Y);if(Y.nodeType!=y.COMMENT_NODE){var ee=M+"."+se;if(A(U,Y.nodeType,se,ee))if(U.__cnt++,U[se]==null){var J=_(Y,ee);if(se!="#text"||/[^\s]/.test(J)){var ie={};ie[se]=J,G.push(ie)}U[se]=J,d(U,se,ee)}else{U[se]!=null&&(U[se]instanceof Array||(U[se]=[U[se]],d(U,se,ee)));var J=_(Y,ee);if(se!="#text"||/[^\s]/.test(J)){var ie={};ie[se]=J,G.push(ie)}U[se][U[se].length]=J}}}U.__children=G;for(var ue=E(F),ae=0;ae<F.attributes.length;ae++){var oe=F.attributes[ae];U.__cnt++;for(var Z=oe.value,ge=0,le=l.matchers.length;ge<le;ge++){var z=l.matchers[ge];z.test(oe,ue)&&(Z=z.converter(oe.value))}U[l.attributePrefix+oe.name]=Z}var K=t(F);return K!=null&&K!=""&&(U.__cnt++,U.__prefix=K),U["#text"]!=null&&(U.__text=U["#text"],U.__text instanceof Array&&(U.__text=U.__text.join(`
`)),l.stripWhitespaces&&(U.__text=U.__text.trim()),delete U["#text"],l.arrayAccessForm=="property"&&delete U["#text_asArray"],U.__text=b(U.__text,se,M+"."+se)),U["#cdata-section"]!=null&&(U.__cdata=U["#cdata-section"],delete U["#cdata-section"],l.arrayAccessForm=="property"&&delete U["#cdata-section_asArray"]),U.__cnt==0&&l.emptyNodeForm=="text"?U="":U.__cnt==1&&U.__text!=null?U=U.__text:U.__cnt==1&&U.__cdata!=null&&!l.keepCData?U=U.__cdata:U.__cnt>1&&U.__text!=null&&l.skipEmptyTextNodesForObj&&(l.stripWhitespaces&&U.__text==""||U.__text.trim()=="")&&delete U.__text,delete U.__cnt,l.enableToStringFunc&&(U.__text!=null||U.__cdata!=null)&&(U.toString=function(){return(this.__text!=null?this.__text:"")+(this.__cdata!=null?this.__cdata:"")}),U}else if(F.nodeType==y.TEXT_NODE||F.nodeType==y.CDATA_SECTION_NODE)return F.nodeValue}function h(F,M,U,j){var X="<"+(F!=null&&F.__prefix!=null?F.__prefix+":":"")+M;if(U!=null)for(var Y=0;Y<U.length;Y++){var se=U[Y],G=F[se];l.escapeMode&&(G=e(G)),X+=" "+se.substr(l.attributePrefix.length)+"=",l.useDoubleQuotes?X+='"'+G+'"':X+="'"+G+"'"}return j?X+="/>":X+=">",X}function f(F,M){return"</"+(F.__prefix!=null?F.__prefix+":":"")+M+">"}function v(F,M){return F.indexOf(M,F.length-M.length)!==-1}function c(F,M){return!!(l.arrayAccessForm=="property"&&v(M.toString(),"_asArray")||M.toString().indexOf(l.attributePrefix)==0||M.toString().indexOf("__")==0||F[M]instanceof Function)}function S(F){var M=0;if(F instanceof Object)for(var U in F)c(F,U)||M++;return M}function p(F,M,U){return l.jsonPropertiesFilter.length==0||U==""||i(l.jsonPropertiesFilter,F,M,U)}function C(F){var M=[];if(F instanceof Object)for(var U in F)U.toString().indexOf("__")==-1&&U.toString().indexOf(l.attributePrefix)==0&&M.push(U);return M}function x(F){var M="";return F.__cdata!=null&&(M+="<![CDATA["+F.__cdata+"]]>"),F.__text!=null&&(l.escapeMode?M+=e(F.__text):M+=F.__text),M}function V(F){var M="";return F instanceof Object?M+=x(F):F!=null&&(l.escapeMode?M+=e(F):M+=F),M}function H(F,M){return F===""?M:F+"."+M}function te(F,M,U,j){var X="";if(F.length==0)X+=h(F,M,U,!0);else for(var Y=0;Y<F.length;Y++)X+=h(F[Y],M,C(F[Y]),!1),X+=w(F[Y],H(j,M)),X+=f(F[Y],M);return X}function w(F,M){var U="",j=S(F);if(j>0){for(var X in F)if(!(c(F,X)||M!=""&&!p(F,X,H(M,X)))){var Y=F[X],se=C(Y);if(Y==null||Y==null)U+=h(Y,X,se,!0);else if(Y instanceof Object)if(Y instanceof Array)U+=te(Y,X,se,M);else if(Y instanceof Date)U+=h(Y,X,se,!1),U+=Y.toISOString(),U+=f(Y,X);else{var G=S(Y);G>0||Y.__text!=null||Y.__cdata!=null?(U+=h(Y,X,se,!1),U+=w(Y,H(M,X)),U+=f(Y,X)):U+=h(Y,X,se,!0)}else U+=h(Y,X,se,!1),U+=V(Y),U+=f(Y,X)}}return U+=V(F),U}this.parseXmlString=function(F){var M=window.ActiveXObject||"ActiveXObject"in window;if(F===void 0)return null;var U;if(window.DOMParser){var j=new window.DOMParser,X=null;try{U=j.parseFromString(F,"text/xml"),U.getElementsByTagNameNS("*","parsererror").length>0&&(U=null)}catch{U=null}}else F.indexOf("<?")==0&&(F=F.substr(F.indexOf("?>")+2)),U=new ActiveXObject("Microsoft.XMLDOM"),U.async="false",U.loadXML(F);return U},this.asArray=function(F){return F===void 0||F==null?[]:F instanceof Array?F:[F]},this.toXmlDateTime=function(F){return F instanceof Date?F.toISOString():typeof F=="number"?new Date(F).toISOString():null},this.asDateTime=function(F){return typeof F=="string"?P(F):F},this.xml2json=function(F){return _(F)},this.xml_str2json=function(F){var M=this.parseXmlString(F);return M!=null?this.xml2json(M):null},this.json2xml_str=function(F){return w(F,"")},this.json2xml=function(F){var M=this.json2xml_str(F);return this.parseXmlString(M)},this.getVersion=function(){return u}}g.default=o},"./index.js":function(I,g,r){"use strict";r.r(g);var o=r("./index_mediaplayerOnly.js");r.d(g,"MediaPlayer",function(){return o.MediaPlayer});var l=r("./src/streaming/utils/Capabilities.js");r.d(g,"supportsMediaSource",function(){return l.supportsMediaSource});var u=r("./src/streaming/metrics/MetricsReporting.js");r.d(g,"MetricsReporting",function(){return u.default});var m=r("./src/streaming/protection/Protection.js");r.d(g,"Protection",function(){return m.default});var y=r("./src/streaming/MediaPlayerFactory.js");r.d(g,"MediaPlayerFactory",function(){return y.default});var T=r("./src/core/Debug.js");r.d(g,"Debug",function(){return T.default}),dashjs.Protection=m.default,dashjs.MetricsReporting=u.default,dashjs.MediaPlayerFactory=y.default,dashjs.Debug=T.default,dashjs.supportsMediaSource=l.supportsMediaSource,g.default=dashjs},"./index_mediaplayerOnly.js":function(I,g,r){"use strict";r.r(g),function(o){var l=r("./src/streaming/MediaPlayer.js");r.d(g,"MediaPlayer",function(){return l.default});var u=r("./src/core/FactoryMaker.js");r.d(g,"FactoryMaker",function(){return u.default});var m=r("./src/core/Debug.js");r.d(g,"Debug",function(){return m.default});var y=r("./src/core/Version.js"),T=r("./node_modules/es6-promise/auto.js"),E=r.n(T),t=typeof window<"u"&&window||o,e=t.dashjs;e||(e=t.dashjs={}),e.MediaPlayer=l.default,e.FactoryMaker=u.default,e.Debug=m.default,e.Version=Object(y.getVersionString)(),g.default=e}.call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/base64-js/index.js":function(I,g,r){"use strict";g.byteLength=t,g.toByteArray=n,g.fromByteArray=P;for(var o=[],l=[],u=typeof Uint8Array<"u"?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0,T=m.length;y<T;++y)o[y]=m[y],l[m.charCodeAt(y)]=y;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63;function E(b){var A=b.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=b.indexOf("=");_===-1&&(_=A);var h=_===A?0:4-_%4;return[_,h]}function t(b){var A=E(b),_=A[0],h=A[1];return(_+h)*3/4-h}function e(b,A,_){return(A+_)*3/4-_}function n(b){var A,_=E(b),h=_[0],f=_[1],v=new u(e(b,h,f)),c=0,S=f>0?h-4:h,p;for(p=0;p<S;p+=4)A=l[b.charCodeAt(p)]<<18|l[b.charCodeAt(p+1)]<<12|l[b.charCodeAt(p+2)]<<6|l[b.charCodeAt(p+3)],v[c++]=A>>16&255,v[c++]=A>>8&255,v[c++]=A&255;return f===2&&(A=l[b.charCodeAt(p)]<<2|l[b.charCodeAt(p+1)]>>4,v[c++]=A&255),f===1&&(A=l[b.charCodeAt(p)]<<10|l[b.charCodeAt(p+1)]<<4|l[b.charCodeAt(p+2)]>>2,v[c++]=A>>8&255,v[c++]=A&255),v}function i(b){return o[b>>18&63]+o[b>>12&63]+o[b>>6&63]+o[b&63]}function d(b,A,_){for(var h,f=[],v=A;v<_;v+=3)h=(b[v]<<16&16711680)+(b[v+1]<<8&65280)+(b[v+2]&255),f.push(i(h));return f.join("")}function P(b){for(var A,_=b.length,h=_%3,f=[],v=16383,c=0,S=_-h;c<S;c+=v)f.push(d(b,c,c+v>S?S:c+v));return h===1?(A=b[_-1],f.push(o[A>>2]+o[A<<4&63]+"==")):h===2&&(A=(b[_-2]<<8)+b[_-1],f.push(o[A>>10]+o[A>>4&63]+o[A<<2&63]+"=")),f.join("")}},"./node_modules/bcp-47-match/index.js":function(I,g,r){"use strict";g.basicFilter=m(o,!0),g.extendedFilter=m(l,!0),g.lookup=m(u);function o(T,E){return E==="*"||T===E||T.indexOf(E+"-")>-1}function l(T,E){var t=T.split("-"),e=E.split("-"),n=0,i=0;if(e[i]!=="*"&&t[n]!==e[i])return!1;for(n++,i++;i<e.length;){if(e[i]==="*"){i++;continue}if(!t[n])return!1;if(t[n]===e[i]){n++,i++;continue}if(t[n].length===1)return!1;n++}return!0}function u(T,E){for(var t=E,e;;){if(t==="*"||T===t)return!0;if(e=t.lastIndexOf("-"),e<0)return!1;t.charAt(e-2)==="-"&&(e-=2),t=t.slice(0,e)}}function m(T,E){return t;function t(e,n){for(var i=y(e,"tag"),d=y(n??"*","range"),P=[],b=-1,A,_,h;++b<d.length;)if(A=d[b].toLowerCase(),!(!E&&A==="*")){for(_=-1,h=[];++_<i.length;)if(T(i[_].toLowerCase(),A)){if(!E)return i[_];P.push(i[_])}else h.push(i[_]);i=h}return E?P:void 0}}function y(T,E){var t=T&&typeof T=="string"?[T]:T;if(!t||typeof t!="object"||!("length"in t))throw new Error("Invalid "+E+" `"+t+"`, expected non-empty string");return t}},"./node_modules/bcp-47-normalize/index.js":function(I,g,r){"use strict";I.exports=r("./node_modules/bcp-47-normalize/lib/index.js")},"./node_modules/bcp-47-normalize/lib/defaults.json":function(I){I.exports=JSON.parse('["mni-beng-in","mni-mtei-in","sat-deva-in","sat-olck-in","shi-latn-ma","shi-tfng-ma","vai-latn-lr","vai-vaii-lr","yue-hans-cn","yue-hant-hk","az-arab-ir","az-cyrl-az","az-latn-az","bm-nkoo-ml","bs-cyrl-ba","bs-latn-ba","en-dsrt-us","ff-adlm-gn","ff-latn-sn","ha-arab-ng","hi-latn-in","iu-latn-ca","ks-arab-in","ks-deva-in","mn-mong-cn","ms-arab-my","pa-arab-pk","pa-guru-in","sd-arab-pk","sd-deva-in","sr-cyrl-rs","sr-latn-rs","su-latn-id","uz-arab-af","uz-cyrl-uz","uz-latn-uz","zh-hans-cn","zh-hant-tw","mni-beng","sat-olck","shi-tfng","vai-vaii","yue-hant","az-latn","bs-latn","ff-latn","jbo-001","ks-arab","pa-guru","prg-001","sd-arab","sr-cyrl","su-latn","uz-latn","zh-hans","agq-cm","ar-001","arn-cl","asa-tz","ast-es","bas-cm","bem-zm","bez-tz","bgn-pk","blt-vn","brx-in","bss-cm","byn-er","cad-us","cch-ng","ccp-bd","ceb-ph","cgg-ug","chr-us","cic-us","ckb-iq","dav-ke","dje-ne","doi-in","dsb-de","dua-cm","dyo-sn","ebu-ke","eo-001","ewo-cm","fil-ph","fur-it","gaa-gh","gez-et","gsw-ch","guz-ke","haw-us","hsb-de","ia-001","ife-tg","io-001","jgo-cm","jmc-tz","kab-dz","kaj-ng","kam-ke","kcg-ng","kde-tz","kea-cv","ken-cm","khq-ml","kkj-cm","kln-ke","kok-in","kpe-lr","ksb-tz","ksf-cm","ksh-de","lag-tz","lkt-us","lrc-ir","luo-ke","luy-ke","mai-in","mas-ke","mer-ke","mfe-mu","mgh-mz","mgo-cm","moh-ca","mua-cm","mus-us","myv-ru","mzn-ir","naq-na","nds-de","nmg-cm","nnh-cm","nqo-gn","nso-za","nus-ss","nyn-ug","osa-us","pcm-ng","quc-gt","rof-tz","rwk-tz","sah-ru","saq-ke","sbp-tz","scn-it","sdh-ir","seh-mz","ses-ml","sid-et","sma-se","smj-se","smn-fi","sms-fi","ssy-er","syr-iq","szl-pl","teo-ug","tig-er","trv-tw","trw-pk","twq-ne","tzm-ma","vo-001","vun-tz","wae-ch","wal-et","wbp-au","xog-ug","yav-cm","yi-001","zgh-ma","aa-et","af-za","ak-gh","am-et","an-es","as-in","ba-ru","be-by","bg-bg","bm-ml","bn-bd","bo-cn","br-fr","ca-es","ce-ru","co-fr","cs-cz","cu-ru","cv-ru","cy-gb","da-dk","de-de","dv-mv","dz-bt","ee-gh","el-gr","en-us","es-es","et-ee","eu-es","fa-ir","fi-fi","fo-fo","fr-fr","fy-nl","ga-ie","gd-gb","gl-es","gn-py","gu-in","gv-im","ha-ng","he-il","hi-in","hr-hr","hu-hu","hy-am","id-id","ig-ng","ii-cn","is-is","it-it","iu-ca","ja-jp","jv-id","ka-ge","ki-ke","kk-kz","kl-gl","km-kh","kn-in","ko-kr","ku-tr","kw-gb","ky-kg","lb-lu","lg-ug","ln-cd","lo-la","lt-lt","lu-cd","lv-lv","mg-mg","mi-nz","mk-mk","ml-in","mn-mn","mr-in","ms-my","mt-mt","my-mm","nb-no","nd-zw","ne-np","nl-nl","nn-no","nr-za","nv-us","ny-mw","oc-fr","om-et","or-in","os-ge","pl-pl","ps-af","pt-br","qu-pe","rm-ch","rn-bi","ro-ro","ru-ru","rw-rw","sa-in","sc-it","se-no","sg-cf","si-lk","sk-sk","sl-si","sn-zw","so-so","sq-al","ss-za","st-za","sv-se","sw-tz","ta-in","te-in","tg-tj","th-th","ti-et","tk-tm","tn-za","to-to","tr-tr","ts-za","tt-ru","ug-cn","uk-ua","ur-pk","ve-za","vi-vn","wa-be","wo-sn","xh-za","yo-ng","zu-za"]')},"./node_modules/bcp-47-normalize/lib/fields.json":function(I){I.exports=JSON.parse('[{"from":{"field":"script","value":"qaai"},"to":{"field":"script","value":"zinh"}},{"from":{"field":"region","value":"bu"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"ct"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"dd"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"dy"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"fx"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"hv"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"jt"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"mi"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"nh"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"nq"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"pu"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"pz"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"qu"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"rh"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"tp"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"uk"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"vd"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"wk"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"yd"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"zr"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"230"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"280"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"736"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"886"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"958"},"to":{"field":"region","value":"aa"}},{"from":{"field":"region","value":"020"},"to":{"field":"region","value":"ad"}},{"from":{"field":"region","value":"784"},"to":{"field":"region","value":"ae"}},{"from":{"field":"region","value":"004"},"to":{"field":"region","value":"af"}},{"from":{"field":"region","value":"028"},"to":{"field":"region","value":"ag"}},{"from":{"field":"region","value":"660"},"to":{"field":"region","value":"ai"}},{"from":{"field":"region","value":"008"},"to":{"field":"region","value":"al"}},{"from":{"field":"region","value":"051"},"to":{"field":"region","value":"am"}},{"from":{"field":"region","value":"024"},"to":{"field":"region","value":"ao"}},{"from":{"field":"region","value":"010"},"to":{"field":"region","value":"aq"}},{"from":{"field":"region","value":"032"},"to":{"field":"region","value":"ar"}},{"from":{"field":"region","value":"016"},"to":{"field":"region","value":"as"}},{"from":{"field":"region","value":"040"},"to":{"field":"region","value":"at"}},{"from":{"field":"region","value":"036"},"to":{"field":"region","value":"au"}},{"from":{"field":"region","value":"533"},"to":{"field":"region","value":"aw"}},{"from":{"field":"region","value":"248"},"to":{"field":"region","value":"ax"}},{"from":{"field":"region","value":"031"},"to":{"field":"region","value":"az"}},{"from":{"field":"region","value":"070"},"to":{"field":"region","value":"ba"}},{"from":{"field":"region","value":"052"},"to":{"field":"region","value":"bb"}},{"from":{"field":"region","value":"050"},"to":{"field":"region","value":"bd"}},{"from":{"field":"region","value":"056"},"to":{"field":"region","value":"be"}},{"from":{"field":"region","value":"854"},"to":{"field":"region","value":"bf"}},{"from":{"field":"region","value":"100"},"to":{"field":"region","value":"bg"}},{"from":{"field":"region","value":"048"},"to":{"field":"region","value":"bh"}},{"from":{"field":"region","value":"108"},"to":{"field":"region","value":"bi"}},{"from":{"field":"region","value":"204"},"to":{"field":"region","value":"bj"}},{"from":{"field":"region","value":"652"},"to":{"field":"region","value":"bl"}},{"from":{"field":"region","value":"060"},"to":{"field":"region","value":"bm"}},{"from":{"field":"region","value":"096"},"to":{"field":"region","value":"bn"}},{"from":{"field":"region","value":"068"},"to":{"field":"region","value":"bo"}},{"from":{"field":"region","value":"535"},"to":{"field":"region","value":"bq"}},{"from":{"field":"region","value":"076"},"to":{"field":"region","value":"br"}},{"from":{"field":"region","value":"044"},"to":{"field":"region","value":"bs"}},{"from":{"field":"region","value":"064"},"to":{"field":"region","value":"bt"}},{"from":{"field":"region","value":"104"},"to":{"field":"region","value":"mm"}},{"from":{"field":"region","value":"074"},"to":{"field":"region","value":"bv"}},{"from":{"field":"region","value":"072"},"to":{"field":"region","value":"bw"}},{"from":{"field":"region","value":"112"},"to":{"field":"region","value":"by"}},{"from":{"field":"region","value":"084"},"to":{"field":"region","value":"bz"}},{"from":{"field":"region","value":"124"},"to":{"field":"region","value":"ca"}},{"from":{"field":"region","value":"166"},"to":{"field":"region","value":"cc"}},{"from":{"field":"region","value":"180"},"to":{"field":"region","value":"cd"}},{"from":{"field":"region","value":"140"},"to":{"field":"region","value":"cf"}},{"from":{"field":"region","value":"178"},"to":{"field":"region","value":"cg"}},{"from":{"field":"region","value":"756"},"to":{"field":"region","value":"ch"}},{"from":{"field":"region","value":"384"},"to":{"field":"region","value":"ci"}},{"from":{"field":"region","value":"184"},"to":{"field":"region","value":"ck"}},{"from":{"field":"region","value":"152"},"to":{"field":"region","value":"cl"}},{"from":{"field":"region","value":"120"},"to":{"field":"region","value":"cm"}},{"from":{"field":"region","value":"156"},"to":{"field":"region","value":"cn"}},{"from":{"field":"region","value":"170"},"to":{"field":"region","value":"co"}},{"from":{"field":"region","value":"188"},"to":{"field":"region","value":"cr"}},{"from":{"field":"region","value":"192"},"to":{"field":"region","value":"cu"}},{"from":{"field":"region","value":"132"},"to":{"field":"region","value":"cv"}},{"from":{"field":"region","value":"531"},"to":{"field":"region","value":"cw"}},{"from":{"field":"region","value":"162"},"to":{"field":"region","value":"cx"}},{"from":{"field":"region","value":"196"},"to":{"field":"region","value":"cy"}},{"from":{"field":"region","value":"203"},"to":{"field":"region","value":"cz"}},{"from":{"field":"region","value":"278"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"276"},"to":{"field":"region","value":"de"}},{"from":{"field":"region","value":"262"},"to":{"field":"region","value":"dj"}},{"from":{"field":"region","value":"208"},"to":{"field":"region","value":"dk"}},{"from":{"field":"region","value":"212"},"to":{"field":"region","value":"dm"}},{"from":{"field":"region","value":"214"},"to":{"field":"region","value":"do"}},{"from":{"field":"region","value":"012"},"to":{"field":"region","value":"dz"}},{"from":{"field":"region","value":"218"},"to":{"field":"region","value":"ec"}},{"from":{"field":"region","value":"233"},"to":{"field":"region","value":"ee"}},{"from":{"field":"region","value":"818"},"to":{"field":"region","value":"eg"}},{"from":{"field":"region","value":"732"},"to":{"field":"region","value":"eh"}},{"from":{"field":"region","value":"232"},"to":{"field":"region","value":"er"}},{"from":{"field":"region","value":"724"},"to":{"field":"region","value":"es"}},{"from":{"field":"region","value":"231"},"to":{"field":"region","value":"et"}},{"from":{"field":"region","value":"246"},"to":{"field":"region","value":"fi"}},{"from":{"field":"region","value":"242"},"to":{"field":"region","value":"fj"}},{"from":{"field":"region","value":"238"},"to":{"field":"region","value":"fk"}},{"from":{"field":"region","value":"583"},"to":{"field":"region","value":"fm"}},{"from":{"field":"region","value":"234"},"to":{"field":"region","value":"fo"}},{"from":{"field":"region","value":"250"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"249"},"to":{"field":"region","value":"fr"}},{"from":{"field":"region","value":"266"},"to":{"field":"region","value":"ga"}},{"from":{"field":"region","value":"826"},"to":{"field":"region","value":"gb"}},{"from":{"field":"region","value":"308"},"to":{"field":"region","value":"gd"}},{"from":{"field":"region","value":"268"},"to":{"field":"region","value":"ge"}},{"from":{"field":"region","value":"254"},"to":{"field":"region","value":"gf"}},{"from":{"field":"region","value":"831"},"to":{"field":"region","value":"gg"}},{"from":{"field":"region","value":"288"},"to":{"field":"region","value":"gh"}},{"from":{"field":"region","value":"292"},"to":{"field":"region","value":"gi"}},{"from":{"field":"region","value":"304"},"to":{"field":"region","value":"gl"}},{"from":{"field":"region","value":"270"},"to":{"field":"region","value":"gm"}},{"from":{"field":"region","value":"324"},"to":{"field":"region","value":"gn"}},{"from":{"field":"region","value":"312"},"to":{"field":"region","value":"gp"}},{"from":{"field":"region","value":"226"},"to":{"field":"region","value":"gq"}},{"from":{"field":"region","value":"300"},"to":{"field":"region","value":"gr"}},{"from":{"field":"region","value":"239"},"to":{"field":"region","value":"gs"}},{"from":{"field":"region","value":"320"},"to":{"field":"region","value":"gt"}},{"from":{"field":"region","value":"316"},"to":{"field":"region","value":"gu"}},{"from":{"field":"region","value":"624"},"to":{"field":"region","value":"gw"}},{"from":{"field":"region","value":"328"},"to":{"field":"region","value":"gy"}},{"from":{"field":"region","value":"344"},"to":{"field":"region","value":"hk"}},{"from":{"field":"region","value":"334"},"to":{"field":"region","value":"hm"}},{"from":{"field":"region","value":"340"},"to":{"field":"region","value":"hn"}},{"from":{"field":"region","value":"191"},"to":{"field":"region","value":"hr"}},{"from":{"field":"region","value":"332"},"to":{"field":"region","value":"ht"}},{"from":{"field":"region","value":"348"},"to":{"field":"region","value":"hu"}},{"from":{"field":"region","value":"360"},"to":{"field":"region","value":"id"}},{"from":{"field":"region","value":"372"},"to":{"field":"region","value":"ie"}},{"from":{"field":"region","value":"376"},"to":{"field":"region","value":"il"}},{"from":{"field":"region","value":"833"},"to":{"field":"region","value":"im"}},{"from":{"field":"region","value":"356"},"to":{"field":"region","value":"in"}},{"from":{"field":"region","value":"086"},"to":{"field":"region","value":"io"}},{"from":{"field":"region","value":"368"},"to":{"field":"region","value":"iq"}},{"from":{"field":"region","value":"364"},"to":{"field":"region","value":"ir"}},{"from":{"field":"region","value":"352"},"to":{"field":"region","value":"is"}},{"from":{"field":"region","value":"380"},"to":{"field":"region","value":"it"}},{"from":{"field":"region","value":"832"},"to":{"field":"region","value":"je"}},{"from":{"field":"region","value":"388"},"to":{"field":"region","value":"jm"}},{"from":{"field":"region","value":"400"},"to":{"field":"region","value":"jo"}},{"from":{"field":"region","value":"392"},"to":{"field":"region","value":"jp"}},{"from":{"field":"region","value":"404"},"to":{"field":"region","value":"ke"}},{"from":{"field":"region","value":"417"},"to":{"field":"region","value":"kg"}},{"from":{"field":"region","value":"116"},"to":{"field":"region","value":"kh"}},{"from":{"field":"region","value":"296"},"to":{"field":"region","value":"ki"}},{"from":{"field":"region","value":"174"},"to":{"field":"region","value":"km"}},{"from":{"field":"region","value":"659"},"to":{"field":"region","value":"kn"}},{"from":{"field":"region","value":"408"},"to":{"field":"region","value":"kp"}},{"from":{"field":"region","value":"410"},"to":{"field":"region","value":"kr"}},{"from":{"field":"region","value":"414"},"to":{"field":"region","value":"kw"}},{"from":{"field":"region","value":"136"},"to":{"field":"region","value":"ky"}},{"from":{"field":"region","value":"398"},"to":{"field":"region","value":"kz"}},{"from":{"field":"region","value":"418"},"to":{"field":"region","value":"la"}},{"from":{"field":"region","value":"422"},"to":{"field":"region","value":"lb"}},{"from":{"field":"region","value":"662"},"to":{"field":"region","value":"lc"}},{"from":{"field":"region","value":"438"},"to":{"field":"region","value":"li"}},{"from":{"field":"region","value":"144"},"to":{"field":"region","value":"lk"}},{"from":{"field":"region","value":"430"},"to":{"field":"region","value":"lr"}},{"from":{"field":"region","value":"426"},"to":{"field":"region","value":"ls"}},{"from":{"field":"region","value":"440"},"to":{"field":"region","value":"lt"}},{"from":{"field":"region","value":"442"},"to":{"field":"region","value":"lu"}},{"from":{"field":"region","value":"428"},"to":{"field":"region","value":"lv"}},{"from":{"field":"region","value":"434"},"to":{"field":"region","value":"ly"}},{"from":{"field":"region","value":"504"},"to":{"field":"region","value":"ma"}},{"from":{"field":"region","value":"492"},"to":{"field":"region","value":"mc"}},{"from":{"field":"region","value":"498"},"to":{"field":"region","value":"md"}},{"from":{"field":"region","value":"499"},"to":{"field":"region","value":"me"}},{"from":{"field":"region","value":"663"},"to":{"field":"region","value":"mf"}},{"from":{"field":"region","value":"450"},"to":{"field":"region","value":"mg"}},{"from":{"field":"region","value":"584"},"to":{"field":"region","value":"mh"}},{"from":{"field":"region","value":"807"},"to":{"field":"region","value":"mk"}},{"from":{"field":"region","value":"466"},"to":{"field":"region","value":"ml"}},{"from":{"field":"region","value":"496"},"to":{"field":"region","value":"mn"}},{"from":{"field":"region","value":"446"},"to":{"field":"region","value":"mo"}},{"from":{"field":"region","value":"580"},"to":{"field":"region","value":"mp"}},{"from":{"field":"region","value":"474"},"to":{"field":"region","value":"mq"}},{"from":{"field":"region","value":"478"},"to":{"field":"region","value":"mr"}},{"from":{"field":"region","value":"500"},"to":{"field":"region","value":"ms"}},{"from":{"field":"region","value":"470"},"to":{"field":"region","value":"mt"}},{"from":{"field":"region","value":"480"},"to":{"field":"region","value":"mu"}},{"from":{"field":"region","value":"462"},"to":{"field":"region","value":"mv"}},{"from":{"field":"region","value":"454"},"to":{"field":"region","value":"mw"}},{"from":{"field":"region","value":"484"},"to":{"field":"region","value":"mx"}},{"from":{"field":"region","value":"458"},"to":{"field":"region","value":"my"}},{"from":{"field":"region","value":"508"},"to":{"field":"region","value":"mz"}},{"from":{"field":"region","value":"516"},"to":{"field":"region","value":"na"}},{"from":{"field":"region","value":"540"},"to":{"field":"region","value":"nc"}},{"from":{"field":"region","value":"562"},"to":{"field":"region","value":"ne"}},{"from":{"field":"region","value":"574"},"to":{"field":"region","value":"nf"}},{"from":{"field":"region","value":"566"},"to":{"field":"region","value":"ng"}},{"from":{"field":"region","value":"558"},"to":{"field":"region","value":"ni"}},{"from":{"field":"region","value":"528"},"to":{"field":"region","value":"nl"}},{"from":{"field":"region","value":"578"},"to":{"field":"region","value":"no"}},{"from":{"field":"region","value":"524"},"to":{"field":"region","value":"np"}},{"from":{"field":"region","value":"520"},"to":{"field":"region","value":"nr"}},{"from":{"field":"region","value":"570"},"to":{"field":"region","value":"nu"}},{"from":{"field":"region","value":"554"},"to":{"field":"region","value":"nz"}},{"from":{"field":"region","value":"512"},"to":{"field":"region","value":"om"}},{"from":{"field":"region","value":"591"},"to":{"field":"region","value":"pa"}},{"from":{"field":"region","value":"604"},"to":{"field":"region","value":"pe"}},{"from":{"field":"region","value":"258"},"to":{"field":"region","value":"pf"}},{"from":{"field":"region","value":"598"},"to":{"field":"region","value":"pg"}},{"from":{"field":"region","value":"608"},"to":{"field":"region","value":"ph"}},{"from":{"field":"region","value":"586"},"to":{"field":"region","value":"pk"}},{"from":{"field":"region","value":"616"},"to":{"field":"region","value":"pl"}},{"from":{"field":"region","value":"666"},"to":{"field":"region","value":"pm"}},{"from":{"field":"region","value":"612"},"to":{"field":"region","value":"pn"}},{"from":{"field":"region","value":"630"},"to":{"field":"region","value":"pr"}},{"from":{"field":"region","value":"275"},"to":{"field":"region","value":"ps"}},{"from":{"field":"region","value":"620"},"to":{"field":"region","value":"pt"}},{"from":{"field":"region","value":"585"},"to":{"field":"region","value":"pw"}},{"from":{"field":"region","value":"600"},"to":{"field":"region","value":"py"}},{"from":{"field":"region","value":"634"},"to":{"field":"region","value":"qa"}},{"from":{"field":"region","value":"959"},"to":{"field":"region","value":"qm"}},{"from":{"field":"region","value":"960"},"to":{"field":"region","value":"qn"}},{"from":{"field":"region","value":"962"},"to":{"field":"region","value":"qp"}},{"from":{"field":"region","value":"963"},"to":{"field":"region","value":"qq"}},{"from":{"field":"region","value":"964"},"to":{"field":"region","value":"qr"}},{"from":{"field":"region","value":"965"},"to":{"field":"region","value":"qs"}},{"from":{"field":"region","value":"966"},"to":{"field":"region","value":"qt"}},{"from":{"field":"region","value":"967"},"to":{"field":"region","value":"eu"}},{"from":{"field":"region","value":"968"},"to":{"field":"region","value":"qv"}},{"from":{"field":"region","value":"969"},"to":{"field":"region","value":"qw"}},{"from":{"field":"region","value":"970"},"to":{"field":"region","value":"qx"}},{"from":{"field":"region","value":"971"},"to":{"field":"region","value":"qy"}},{"from":{"field":"region","value":"972"},"to":{"field":"region","value":"qz"}},{"from":{"field":"region","value":"638"},"to":{"field":"region","value":"re"}},{"from":{"field":"region","value":"642"},"to":{"field":"region","value":"ro"}},{"from":{"field":"region","value":"688"},"to":{"field":"region","value":"rs"}},{"from":{"field":"region","value":"643"},"to":{"field":"region","value":"ru"}},{"from":{"field":"region","value":"646"},"to":{"field":"region","value":"rw"}},{"from":{"field":"region","value":"682"},"to":{"field":"region","value":"sa"}},{"from":{"field":"region","value":"090"},"to":{"field":"region","value":"sb"}},{"from":{"field":"region","value":"690"},"to":{"field":"region","value":"sc"}},{"from":{"field":"region","value":"729"},"to":{"field":"region","value":"sd"}},{"from":{"field":"region","value":"752"},"to":{"field":"region","value":"se"}},{"from":{"field":"region","value":"702"},"to":{"field":"region","value":"sg"}},{"from":{"field":"region","value":"654"},"to":{"field":"region","value":"sh"}},{"from":{"field":"region","value":"705"},"to":{"field":"region","value":"si"}},{"from":{"field":"region","value":"744"},"to":{"field":"region","value":"sj"}},{"from":{"field":"region","value":"703"},"to":{"field":"region","value":"sk"}},{"from":{"field":"region","value":"694"},"to":{"field":"region","value":"sl"}},{"from":{"field":"region","value":"674"},"to":{"field":"region","value":"sm"}},{"from":{"field":"region","value":"686"},"to":{"field":"region","value":"sn"}},{"from":{"field":"region","value":"706"},"to":{"field":"region","value":"so"}},{"from":{"field":"region","value":"740"},"to":{"field":"region","value":"sr"}},{"from":{"field":"region","value":"728"},"to":{"field":"region","value":"ss"}},{"from":{"field":"region","value":"678"},"to":{"field":"region","value":"st"}},{"from":{"field":"region","value":"222"},"to":{"field":"region","value":"sv"}},{"from":{"field":"region","value":"534"},"to":{"field":"region","value":"sx"}},{"from":{"field":"region","value":"760"},"to":{"field":"region","value":"sy"}},{"from":{"field":"region","value":"748"},"to":{"field":"region","value":"sz"}},{"from":{"field":"region","value":"796"},"to":{"field":"region","value":"tc"}},{"from":{"field":"region","value":"148"},"to":{"field":"region","value":"td"}},{"from":{"field":"region","value":"260"},"to":{"field":"region","value":"tf"}},{"from":{"field":"region","value":"768"},"to":{"field":"region","value":"tg"}},{"from":{"field":"region","value":"764"},"to":{"field":"region","value":"th"}},{"from":{"field":"region","value":"762"},"to":{"field":"region","value":"tj"}},{"from":{"field":"region","value":"772"},"to":{"field":"region","value":"tk"}},{"from":{"field":"region","value":"626"},"to":{"field":"region","value":"tl"}},{"from":{"field":"region","value":"795"},"to":{"field":"region","value":"tm"}},{"from":{"field":"region","value":"788"},"to":{"field":"region","value":"tn"}},{"from":{"field":"region","value":"776"},"to":{"field":"region","value":"to"}},{"from":{"field":"region","value":"792"},"to":{"field":"region","value":"tr"}},{"from":{"field":"region","value":"780"},"to":{"field":"region","value":"tt"}},{"from":{"field":"region","value":"798"},"to":{"field":"region","value":"tv"}},{"from":{"field":"region","value":"158"},"to":{"field":"region","value":"tw"}},{"from":{"field":"region","value":"834"},"to":{"field":"region","value":"tz"}},{"from":{"field":"region","value":"804"},"to":{"field":"region","value":"ua"}},{"from":{"field":"region","value":"800"},"to":{"field":"region","value":"ug"}},{"from":{"field":"region","value":"581"},"to":{"field":"region","value":"um"}},{"from":{"field":"region","value":"840"},"to":{"field":"region","value":"us"}},{"from":{"field":"region","value":"858"},"to":{"field":"region","value":"uy"}},{"from":{"field":"region","value":"860"},"to":{"field":"region","value":"uz"}},{"from":{"field":"region","value":"336"},"to":{"field":"region","value":"va"}},{"from":{"field":"region","value":"670"},"to":{"field":"region","value":"vc"}},{"from":{"field":"region","value":"862"},"to":{"field":"region","value":"ve"}},{"from":{"field":"region","value":"092"},"to":{"field":"region","value":"vg"}},{"from":{"field":"region","value":"850"},"to":{"field":"region","value":"vi"}},{"from":{"field":"region","value":"704"},"to":{"field":"region","value":"vn"}},{"from":{"field":"region","value":"548"},"to":{"field":"region","value":"vu"}},{"from":{"field":"region","value":"876"},"to":{"field":"region","value":"wf"}},{"from":{"field":"region","value":"882"},"to":{"field":"region","value":"ws"}},{"from":{"field":"region","value":"973"},"to":{"field":"region","value":"xa"}},{"from":{"field":"region","value":"974"},"to":{"field":"region","value":"xb"}},{"from":{"field":"region","value":"975"},"to":{"field":"region","value":"xc"}},{"from":{"field":"region","value":"976"},"to":{"field":"region","value":"xd"}},{"from":{"field":"region","value":"977"},"to":{"field":"region","value":"xe"}},{"from":{"field":"region","value":"978"},"to":{"field":"region","value":"xf"}},{"from":{"field":"region","value":"979"},"to":{"field":"region","value":"xg"}},{"from":{"field":"region","value":"980"},"to":{"field":"region","value":"xh"}},{"from":{"field":"region","value":"981"},"to":{"field":"region","value":"xi"}},{"from":{"field":"region","value":"982"},"to":{"field":"region","value":"xj"}},{"from":{"field":"region","value":"983"},"to":{"field":"region","value":"xk"}},{"from":{"field":"region","value":"984"},"to":{"field":"region","value":"xl"}},{"from":{"field":"region","value":"985"},"to":{"field":"region","value":"xm"}},{"from":{"field":"region","value":"986"},"to":{"field":"region","value":"xn"}},{"from":{"field":"region","value":"987"},"to":{"field":"region","value":"xo"}},{"from":{"field":"region","value":"988"},"to":{"field":"region","value":"xp"}},{"from":{"field":"region","value":"989"},"to":{"field":"region","value":"xq"}},{"from":{"field":"region","value":"990"},"to":{"field":"region","value":"xr"}},{"from":{"field":"region","value":"991"},"to":{"field":"region","value":"xs"}},{"from":{"field":"region","value":"992"},"to":{"field":"region","value":"xt"}},{"from":{"field":"region","value":"993"},"to":{"field":"region","value":"xu"}},{"from":{"field":"region","value":"994"},"to":{"field":"region","value":"xv"}},{"from":{"field":"region","value":"995"},"to":{"field":"region","value":"xw"}},{"from":{"field":"region","value":"996"},"to":{"field":"region","value":"xx"}},{"from":{"field":"region","value":"997"},"to":{"field":"region","value":"xy"}},{"from":{"field":"region","value":"998"},"to":{"field":"region","value":"xz"}},{"from":{"field":"region","value":"720"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"887"},"to":{"field":"region","value":"ye"}},{"from":{"field":"region","value":"175"},"to":{"field":"region","value":"yt"}},{"from":{"field":"region","value":"710"},"to":{"field":"region","value":"za"}},{"from":{"field":"region","value":"894"},"to":{"field":"region","value":"zm"}},{"from":{"field":"region","value":"716"},"to":{"field":"region","value":"zw"}},{"from":{"field":"region","value":"999"},"to":{"field":"region","value":"zz"}},{"from":{"field":"variants","value":"aaland"},"to":{"field":"region","value":"ax"}},{"from":{"field":"variants","value":"polytoni"},"to":{"field":"variants","value":"polyton"}},{"from":{"field":"variants","value":"heploc"},"to":{"field":"variants","value":"alalc97"}},{"from":{"field":"variants","value":"arevela"},"to":{"field":"language","value":"hy"}},{"from":{"field":"variants","value":"arevmda"},"to":{"field":"language","value":"hyw"}}]')},"./node_modules/bcp-47-normalize/lib/index.js":function(I,g,r){"use strict";var o=r("./node_modules/bcp-47/index.js"),l=r("./node_modules/bcp-47-match/index.js"),u=r("./node_modules/bcp-47-normalize/lib/matches.json"),m=r("./node_modules/bcp-47-normalize/lib/fields.json"),y=r("./node_modules/bcp-47-normalize/lib/defaults.json"),T=r("./node_modules/bcp-47-normalize/lib/many.json");I.exports=n;var E={}.hasOwnProperty,t=new Intl.Collator,e={variants:[],extensions:[],privateuse:[],irregular:null,regular:null};function n(A,_){var h=_||{},f=o.parse(String(A||"").toLowerCase(),h),v=o.stringify(f),c=-1,S;if(!v)return v;for(;++c<u.length;)l.extendedFilter(v,u[c].from).length&&(i(f,u[c].from,u[c].to),v=o.stringify(f));for(c=-1;++c<m.length;)d(f,m[c].from.field,m[c].from.value)&&P(f,m[c].to.field,m[c].to.value);for(v=o.stringify(Object.assign({},f,e)),c=-1;++c<y.length;)v===y[c]&&(i(f,y[c],y[c].split("-").slice(0,-1).join("-")),v=o.stringify(Object.assign({},f,e)));if(f.extensions.sort(b),h.warning)for(S in T)E.call(T[S],f[S])&&h.warning("Deprecated "+S+" `"+f[S]+"`, expected one of `"+T[S][f[S]].join("`, `")+"`",null,7);return f.script&&(f.script=f.script.charAt(0).toUpperCase()+f.script.slice(1)),f.region&&(f.region=f.region.toUpperCase()),o.stringify(f)}function i(A,_,h){var f=o.parse(_),v=o.parse(h),c=[],S;for(S in f)f[S]&&f[S].length&&d(A,S,f[S])&&c.push(S);for(S in v)v[S]&&v[S].length&&(c.indexOf(S)>-1||!A[S]||!A[S].length)&&P(A,S,v[S])}function d(A,_,h){var f=!1,v,c,S,p;if(h){if(v=A[_],c=v,v&&typeof v=="object")for(c=[],S=-1;++S<v.length;)p=v[S],h.indexOf(p)<0?c.push(p):f=!0;else v===h&&(c=null,f=!0);A[_]=c}return f}function P(A,_,h){var f=A[_],v,c,S;if(f&&typeof f=="object")for(v=[].concat(h),c=-1;++c<v.length;)S=v[c],f.indexOf(S)<0&&f.push(S);else A[_]=h}function b(A,_){return t.compare(A.singleton,_.singleton)}},"./node_modules/bcp-47-normalize/lib/many.json":function(I){I.exports=JSON.parse('{"region":{"172":["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],"200":["cz","sk"],"530":["cw","sx","bq"],"532":["cw","sx","bq"],"536":["sa","iq"],"582":["fm","mh","mp","pw"],"810":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"830":["je","gg"],"890":["rs","me","si","hr","mk","ba"],"891":["rs","me"],"an":["cw","sx","bq"],"cs":["rs","me"],"fq":["aq","tf"],"nt":["sa","iq"],"pc":["fm","mh","mp","pw"],"su":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yu":["rs","me"],"062":["034","143"],"ant":["cw","sx","bq"],"scg":["rs","me"],"ntz":["sa","iq"],"sun":["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],"yug":["rs","me"]}}')},"./node_modules/bcp-47-normalize/lib/matches.json":function(I){I.exports=JSON.parse('[{"from":"in","to":"id"},{"from":"iw","to":"he"},{"from":"ji","to":"yi"},{"from":"jw","to":"jv"},{"from":"mo","to":"ro"},{"from":"scc","to":"sr"},{"from":"scr","to":"hr"},{"from":"aam","to":"aas"},{"from":"adp","to":"dz"},{"from":"aue","to":"ktz"},{"from":"ayx","to":"nun"},{"from":"bgm","to":"bcg"},{"from":"bjd","to":"drl"},{"from":"ccq","to":"rki"},{"from":"cjr","to":"mom"},{"from":"cka","to":"cmr"},{"from":"cmk","to":"xch"},{"from":"coy","to":"pij"},{"from":"cqu","to":"quh"},{"from":"drh","to":"mn"},{"from":"drw","to":"fa-af"},{"from":"gav","to":"dev"},{"from":"gfx","to":"vaj"},{"from":"ggn","to":"gvr"},{"from":"gti","to":"nyc"},{"from":"guv","to":"duz"},{"from":"hrr","to":"jal"},{"from":"ibi","to":"opa"},{"from":"ilw","to":"gal"},{"from":"jeg","to":"oyb"},{"from":"kgc","to":"tdf"},{"from":"kgh","to":"kml"},{"from":"koj","to":"kwv"},{"from":"krm","to":"bmf"},{"from":"ktr","to":"dtp"},{"from":"kvs","to":"gdj"},{"from":"kwq","to":"yam"},{"from":"kxe","to":"tvd"},{"from":"kzj","to":"dtp"},{"from":"kzt","to":"dtp"},{"from":"lii","to":"raq"},{"from":"lmm","to":"rmx"},{"from":"meg","to":"cir"},{"from":"mst","to":"mry"},{"from":"mwj","to":"vaj"},{"from":"myt","to":"mry"},{"from":"nad","to":"xny"},{"from":"ncp","to":"kdz"},{"from":"nnx","to":"ngv"},{"from":"nts","to":"pij"},{"from":"oun","to":"vaj"},{"from":"pcr","to":"adx"},{"from":"pmc","to":"huw"},{"from":"pmu","to":"phr"},{"from":"ppa","to":"bfy"},{"from":"ppr","to":"lcq"},{"from":"pry","to":"prt"},{"from":"puz","to":"pub"},{"from":"sca","to":"hle"},{"from":"skk","to":"oyb"},{"from":"tdu","to":"dtp"},{"from":"thc","to":"tpo"},{"from":"thx","to":"oyb"},{"from":"tie","to":"ras"},{"from":"tkk","to":"twm"},{"from":"tlw","to":"weo"},{"from":"tmp","to":"tyj"},{"from":"tne","to":"kak"},{"from":"tnf","to":"fa-af"},{"from":"tsf","to":"taj"},{"from":"uok","to":"ema"},{"from":"xba","to":"cax"},{"from":"xia","to":"acn"},{"from":"xkh","to":"waw"},{"from":"xsj","to":"suj"},{"from":"ybd","to":"rki"},{"from":"yma","to":"lrr"},{"from":"ymt","to":"mtm"},{"from":"yos","to":"zom"},{"from":"yuu","to":"yug"},{"from":"asd","to":"snz"},{"from":"dit","to":"dif"},{"from":"llo","to":"ngt"},{"from":"myd","to":"aog"},{"from":"nns","to":"nbr"},{"from":"sgn-br","to":"bzs"},{"from":"sgn-co","to":"csn"},{"from":"sgn-de","to":"gsg"},{"from":"sgn-dk","to":"dsl"},{"from":"sgn-fr","to":"fsl"},{"from":"sgn-gb","to":"bfi"},{"from":"sgn-gr","to":"gss"},{"from":"sgn-ie","to":"isg"},{"from":"sgn-it","to":"ise"},{"from":"sgn-jp","to":"jsl"},{"from":"sgn-mx","to":"mfs"},{"from":"sgn-ni","to":"ncs"},{"from":"sgn-nl","to":"dse"},{"from":"sgn-no","to":"nsi"},{"from":"sgn-pt","to":"psr"},{"from":"sgn-se","to":"swl"},{"from":"sgn-us","to":"ase"},{"from":"sgn-za","to":"sfs"},{"from":"no-bokmal","to":"nb"},{"from":"no-nynorsk","to":"nn"},{"from":"aa-saaho","to":"ssy"},{"from":"sh","to":"sr-latn"},{"from":"cnr","to":"sr-me"},{"from":"no","to":"nb"},{"from":"tl","to":"fil"},{"from":"az-az","to":"az-latn-az"},{"from":"bs-ba","to":"bs-latn-ba"},{"from":"ha-latn-gh","to":"ha-gh"},{"from":"ha-latn-ne","to":"ha-ne"},{"from":"ha-latn-ng","to":"ha-ng"},{"from":"kk-cyrl-kz","to":"kk-kz"},{"from":"ky-cyrl-kg","to":"ky-kg"},{"from":"ks-arab-in","to":"ks-in"},{"from":"mn-cyrl-mn","to":"mn-mn"},{"from":"ms-latn-bn","to":"ms-bn"},{"from":"ms-latn-my","to":"ms-my"},{"from":"ms-latn-sg","to":"ms-sg"},{"from":"pa-in","to":"pa-guru-in"},{"from":"pa-pk","to":"pa-arab-pk"},{"from":"shi-ma","to":"shi-tfng-ma"},{"from":"sr-ba","to":"sr-cyrl-ba"},{"from":"sr-me","to":"sr-latn-me"},{"from":"sr-rs","to":"sr-cyrl-rs"},{"from":"sr-xk","to":"sr-cyrl-xk"},{"from":"tzm-latn-ma","to":"tzm-ma"},{"from":"ug-arab-cn","to":"ug-cn"},{"from":"uz-af","to":"uz-arab-af"},{"from":"uz-uz","to":"uz-latn-uz"},{"from":"vai-lr","to":"vai-vaii-lr"},{"from":"yue-cn","to":"yue-hans-cn"},{"from":"yue-hk","to":"yue-hant-hk"},{"from":"zh-cn","to":"zh-hans-cn"},{"from":"zh-hk","to":"zh-hant-hk"},{"from":"zh-mo","to":"zh-hant-mo"},{"from":"zh-sg","to":"zh-hans-sg"},{"from":"zh-tw","to":"zh-hant-tw"},{"from":"aju","to":"jrb"},{"from":"als","to":"sq"},{"from":"arb","to":"ar"},{"from":"ayr","to":"ay"},{"from":"azj","to":"az"},{"from":"bcc","to":"bal"},{"from":"bcl","to":"bik"},{"from":"bxk","to":"luy"},{"from":"bxr","to":"bua"},{"from":"cld","to":"syr"},{"from":"cmn","to":"zh"},{"from":"cwd","to":"cr"},{"from":"dgo","to":"doi"},{"from":"dhd","to":"mwr"},{"from":"dik","to":"din"},{"from":"diq","to":"zza"},{"from":"lbk","to":"bnc"},{"from":"ekk","to":"et"},{"from":"emk","to":"man"},{"from":"esk","to":"ik"},{"from":"fat","to":"ak"},{"from":"fuc","to":"ff"},{"from":"gaz","to":"om"},{"from":"gbo","to":"grb"},{"from":"gno","to":"gon"},{"from":"gug","to":"gn"},{"from":"gya","to":"gba"},{"from":"hdn","to":"hai"},{"from":"hea","to":"hmn"},{"from":"ike","to":"iu"},{"from":"kmr","to":"ku"},{"from":"knc","to":"kr"},{"from":"kng","to":"kg"},{"from":"knn","to":"kok"},{"from":"kpv","to":"kv"},{"from":"lvs","to":"lv"},{"from":"mhr","to":"chm"},{"from":"mup","to":"raj"},{"from":"khk","to":"mn"},{"from":"npi","to":"ne"},{"from":"ojg","to":"oj"},{"from":"ory","to":"or"},{"from":"pbu","to":"ps"},{"from":"pes","to":"fa"},{"from":"plt","to":"mg"},{"from":"pnb","to":"lah"},{"from":"quz","to":"qu"},{"from":"rmy","to":"rom"},{"from":"spy","to":"kln"},{"from":"src","to":"sc"},{"from":"swh","to":"sw"},{"from":"ttq","to":"tmh"},{"from":"tw","to":"ak"},{"from":"umu","to":"del"},{"from":"uzn","to":"uz"},{"from":"xpe","to":"kpe"},{"from":"xsl","to":"den"},{"from":"ydd","to":"yi"},{"from":"zai","to":"zap"},{"from":"zsm","to":"ms"},{"from":"zyb","to":"za"},{"from":"him","to":"srx"},{"from":"mnk","to":"man"},{"from":"bh","to":"bho"},{"from":"prs","to":"fa-af"},{"from":"swc","to":"sw-cd"},{"from":"aar","to":"aa"},{"from":"abk","to":"ab"},{"from":"ave","to":"ae"},{"from":"afr","to":"af"},{"from":"aka","to":"ak"},{"from":"amh","to":"am"},{"from":"arg","to":"an"},{"from":"ara","to":"ar"},{"from":"asm","to":"as"},{"from":"ava","to":"av"},{"from":"aym","to":"ay"},{"from":"aze","to":"az"},{"from":"bak","to":"ba"},{"from":"bel","to":"be"},{"from":"bul","to":"bg"},{"from":"bih","to":"bho"},{"from":"bis","to":"bi"},{"from":"bam","to":"bm"},{"from":"ben","to":"bn"},{"from":"bod","to":"bo"},{"from":"bre","to":"br"},{"from":"bos","to":"bs"},{"from":"cat","to":"ca"},{"from":"che","to":"ce"},{"from":"cha","to":"ch"},{"from":"cos","to":"co"},{"from":"cre","to":"cr"},{"from":"ces","to":"cs"},{"from":"chu","to":"cu"},{"from":"chv","to":"cv"},{"from":"cym","to":"cy"},{"from":"dan","to":"da"},{"from":"deu","to":"de"},{"from":"div","to":"dv"},{"from":"dzo","to":"dz"},{"from":"ewe","to":"ee"},{"from":"ell","to":"el"},{"from":"eng","to":"en"},{"from":"epo","to":"eo"},{"from":"spa","to":"es"},{"from":"est","to":"et"},{"from":"eus","to":"eu"},{"from":"fas","to":"fa"},{"from":"ful","to":"ff"},{"from":"fin","to":"fi"},{"from":"fij","to":"fj"},{"from":"fao","to":"fo"},{"from":"fra","to":"fr"},{"from":"fry","to":"fy"},{"from":"gle","to":"ga"},{"from":"gla","to":"gd"},{"from":"glg","to":"gl"},{"from":"grn","to":"gn"},{"from":"guj","to":"gu"},{"from":"glv","to":"gv"},{"from":"hau","to":"ha"},{"from":"heb","to":"he"},{"from":"hin","to":"hi"},{"from":"hmo","to":"ho"},{"from":"hrv","to":"hr"},{"from":"hat","to":"ht"},{"from":"hun","to":"hu"},{"from":"hye","to":"hy"},{"from":"her","to":"hz"},{"from":"ina","to":"ia"},{"from":"ind","to":"id"},{"from":"ile","to":"ie"},{"from":"ibo","to":"ig"},{"from":"iii","to":"ii"},{"from":"ipk","to":"ik"},{"from":"ido","to":"io"},{"from":"isl","to":"is"},{"from":"ita","to":"it"},{"from":"iku","to":"iu"},{"from":"jpn","to":"ja"},{"from":"jav","to":"jv"},{"from":"kat","to":"ka"},{"from":"kon","to":"kg"},{"from":"kik","to":"ki"},{"from":"kua","to":"kj"},{"from":"kaz","to":"kk"},{"from":"kal","to":"kl"},{"from":"khm","to":"km"},{"from":"kan","to":"kn"},{"from":"kor","to":"ko"},{"from":"kau","to":"kr"},{"from":"kas","to":"ks"},{"from":"kur","to":"ku"},{"from":"kom","to":"kv"},{"from":"cor","to":"kw"},{"from":"kir","to":"ky"},{"from":"lat","to":"la"},{"from":"ltz","to":"lb"},{"from":"lug","to":"lg"},{"from":"lim","to":"li"},{"from":"lin","to":"ln"},{"from":"lao","to":"lo"},{"from":"lit","to":"lt"},{"from":"lub","to":"lu"},{"from":"lav","to":"lv"},{"from":"mlg","to":"mg"},{"from":"mah","to":"mh"},{"from":"mri","to":"mi"},{"from":"mkd","to":"mk"},{"from":"mal","to":"ml"},{"from":"mon","to":"mn"},{"from":"mol","to":"ro"},{"from":"mar","to":"mr"},{"from":"msa","to":"ms"},{"from":"mlt","to":"mt"},{"from":"mya","to":"my"},{"from":"nau","to":"na"},{"from":"nob","to":"nb"},{"from":"nde","to":"nd"},{"from":"nep","to":"ne"},{"from":"ndo","to":"ng"},{"from":"nld","to":"nl"},{"from":"nno","to":"nn"},{"from":"nor","to":"nb"},{"from":"nbl","to":"nr"},{"from":"nav","to":"nv"},{"from":"nya","to":"ny"},{"from":"oci","to":"oc"},{"from":"oji","to":"oj"},{"from":"orm","to":"om"},{"from":"ori","to":"or"},{"from":"oss","to":"os"},{"from":"pan","to":"pa"},{"from":"pli","to":"pi"},{"from":"pol","to":"pl"},{"from":"pus","to":"ps"},{"from":"por","to":"pt"},{"from":"que","to":"qu"},{"from":"roh","to":"rm"},{"from":"run","to":"rn"},{"from":"ron","to":"ro"},{"from":"rus","to":"ru"},{"from":"kin","to":"rw"},{"from":"san","to":"sa"},{"from":"srd","to":"sc"},{"from":"snd","to":"sd"},{"from":"sme","to":"se"},{"from":"sag","to":"sg"},{"from":"hbs","to":"sr-latn"},{"from":"sin","to":"si"},{"from":"slk","to":"sk"},{"from":"slv","to":"sl"},{"from":"smo","to":"sm"},{"from":"sna","to":"sn"},{"from":"som","to":"so"},{"from":"sqi","to":"sq"},{"from":"srp","to":"sr"},{"from":"ssw","to":"ss"},{"from":"sot","to":"st"},{"from":"sun","to":"su"},{"from":"swe","to":"sv"},{"from":"swa","to":"sw"},{"from":"tam","to":"ta"},{"from":"tel","to":"te"},{"from":"tgk","to":"tg"},{"from":"tha","to":"th"},{"from":"tir","to":"ti"},{"from":"tuk","to":"tk"},{"from":"tgl","to":"fil"},{"from":"tsn","to":"tn"},{"from":"ton","to":"to"},{"from":"tur","to":"tr"},{"from":"tso","to":"ts"},{"from":"tat","to":"tt"},{"from":"twi","to":"ak"},{"from":"tah","to":"ty"},{"from":"uig","to":"ug"},{"from":"ukr","to":"uk"},{"from":"urd","to":"ur"},{"from":"uzb","to":"uz"},{"from":"ven","to":"ve"},{"from":"vie","to":"vi"},{"from":"vol","to":"vo"},{"from":"wln","to":"wa"},{"from":"wol","to":"wo"},{"from":"xho","to":"xh"},{"from":"yid","to":"yi"},{"from":"yor","to":"yo"},{"from":"zha","to":"za"},{"from":"zho","to":"zh"},{"from":"zul","to":"zu"},{"from":"alb","to":"sq"},{"from":"arm","to":"hy"},{"from":"baq","to":"eu"},{"from":"bur","to":"my"},{"from":"chi","to":"zh"},{"from":"cze","to":"cs"},{"from":"dut","to":"nl"},{"from":"fre","to":"fr"},{"from":"geo","to":"ka"},{"from":"ger","to":"de"},{"from":"gre","to":"el"},{"from":"ice","to":"is"},{"from":"mac","to":"mk"},{"from":"mao","to":"mi"},{"from":"may","to":"ms"},{"from":"per","to":"fa"},{"from":"rum","to":"ro"},{"from":"slo","to":"sk"},{"from":"tib","to":"bo"},{"from":"wel","to":"cy"}]')},"./node_modules/bcp-47/index.js":function(I,g,r){"use strict";g.parse=r("./node_modules/bcp-47/lib/parse.js"),g.stringify=r("./node_modules/bcp-47/lib/stringify.js")},"./node_modules/bcp-47/lib/normalize.json":function(I){I.exports=JSON.parse('{"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"}')},"./node_modules/bcp-47/lib/parse.js":function(I,g,r){"use strict";var o=r("./node_modules/is-alphanumerical/index.js"),l=r("./node_modules/is-alphabetical/index.js"),u=r("./node_modules/is-decimal/index.js"),m=r("./node_modules/bcp-47/lib/regular.json"),y=r("./node_modules/bcp-47/lib/normalize.json");I.exports=E;var T={}.hasOwnProperty;function E(e,n){var i=n||{},d=t(),P=String(e),b=P.toLowerCase(),A=0,_,h,f;if(e==null)throw new Error("Expected string, got `"+e+"`");if(T.call(y,b))return(i.normalize==null||i.normalize)&&y[b]?E(y[b]):(d[m.indexOf(b)===-1?"irregular":"regular"]=P,d);for(;l(b.charCodeAt(A))&&A<9;)A++;if(A>1&&A<9){if(d.language=P.slice(0,A),A<4)for(h=0;b.charCodeAt(A)===45&&l(b.charCodeAt(A+1))&&l(b.charCodeAt(A+2))&&l(b.charCodeAt(A+3))&&!l(b.charCodeAt(A+4));){if(h>2)return v(A,3,"Too many extended language subtags, expected at most 3 subtags");d.extendedLanguageSubtags.push(P.slice(A+1,A+4)),A+=4,h++}for(b.charCodeAt(A)===45&&l(b.charCodeAt(A+1))&&l(b.charCodeAt(A+2))&&l(b.charCodeAt(A+3))&&l(b.charCodeAt(A+4))&&!l(b.charCodeAt(A+5))&&(d.script=P.slice(A+1,A+5),A+=5),b.charCodeAt(A)===45&&(l(b.charCodeAt(A+1))&&l(b.charCodeAt(A+2))&&!l(b.charCodeAt(A+3))?(d.region=P.slice(A+1,A+3),A+=3):u(b.charCodeAt(A+1))&&u(b.charCodeAt(A+2))&&u(b.charCodeAt(A+3))&&!u(b.charCodeAt(A+4))&&(d.region=P.slice(A+1,A+4),A+=4));b.charCodeAt(A)===45;){for(f=_=A+1;o(b.charCodeAt(f));){if(f-_>7)return v(f,1,"Too long variant, expected at most 8 characters");f++}if(f-_>4||f-_>3&&u(b.charCodeAt(_)))d.variants.push(P.slice(_,f)),A=f;else break}for(;b.charCodeAt(A)===45&&!(b.charCodeAt(A+1)===120||!o(b.charCodeAt(A+1))||b.charCodeAt(A+2)!==45||!o(b.charCodeAt(A+3)));){for(f=A+2,h=0;b.charCodeAt(f)===45&&o(b.charCodeAt(f+1))&&o(b.charCodeAt(f+2));)for(_=f+1,f=_+2,h++;o(b.charCodeAt(f));){if(f-_>7)return v(f,2,"Too long extension, expected at most 8 characters");f++}if(!h)return v(f,4,"Empty extension, extensions must have at least 2 characters of content");d.extensions.push({singleton:P.charAt(A+1),extensions:P.slice(A+3,f).split("-")}),A=f}}else A=0;if(A===0&&b.charCodeAt(A)===120||b.charCodeAt(A)===45&&b.charCodeAt(A+1)===120)for(f=A=A?A+2:1;b.charCodeAt(f)===45&&o(b.charCodeAt(f+1));){for(f=_=A+1;o(b.charCodeAt(f));){if(f-_>7)return v(f,5,"Too long private-use area, expected at most 8 characters");f++}d.privateuse.push(P.slice(A+1,f)),A=f}if(A!==P.length)return v(A,6,"Found superfluous content after tag");return d;function v(c,S,p){return i.warning&&i.warning(p,S,c),i.forgiving?d:t()}}function t(){return{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}},"./node_modules/bcp-47/lib/regular.json":function(I){I.exports=JSON.parse('["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"]')},"./node_modules/bcp-47/lib/stringify.js":function(I,g,r){"use strict";I.exports=o;function o(l){var u=l||{},m=[],y,T,E;if(u.irregular||u.regular)return u.irregular||u.regular;if(u.language)for(m=m.concat(u.language,u.extendedLanguageSubtags||[],u.script||[],u.region||[],u.variants||[]),y=u.extensions||[],T=-1;++T<y.length;)E=y[T],E.singleton&&E.extensions&&E.extensions.length&&(m=m.concat(E.singleton,E.extensions));return u.privateuse&&u.privateuse.length&&(m=m.concat("x",u.privateuse)),m.join("-")}},"./node_modules/buffer/index.js":function(I,g,r){"use strict";(function(o){var l=r("./node_modules/base64-js/index.js"),u=r("./node_modules/ieee754/index.js"),m=r("./node_modules/isarray/index.js");g.Buffer=t,g.SlowBuffer=f,g.INSPECT_MAX_BYTES=50,t.TYPED_ARRAY_SUPPORT=o.TYPED_ARRAY_SUPPORT!==void 0?o.TYPED_ARRAY_SUPPORT:y(),g.kMaxLength=T();function y(){try{var W=new Uint8Array(1);return W.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},W.foo()===42&&typeof W.subarray=="function"&&W.subarray(1,1).byteLength===0}catch{return!1}}function T(){return t.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function E(W,B){if(T()<B)throw new RangeError("Invalid typed array length");return t.TYPED_ARRAY_SUPPORT?(W=new Uint8Array(B),W.__proto__=t.prototype):(W===null&&(W=new t(B)),W.length=B),W}function t(W,B,D){if(!t.TYPED_ARRAY_SUPPORT&&!(this instanceof t))return new t(W,B,D);if(typeof W=="number"){if(typeof B=="string")throw new Error("If encoding is specified then the first argument must be a string");return d(this,W)}return e(this,W,B,D)}t.poolSize=8192,t._augment=function(W){return W.__proto__=t.prototype,W};function e(W,B,D,q){if(typeof B=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&B instanceof ArrayBuffer?A(W,B,D,q):typeof B=="string"?P(W,B,D):_(W,B)}t.from=function(W,B,D){return e(null,W,B,D)},t.TYPED_ARRAY_SUPPORT&&(t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&t[Symbol.species]===t&&Object.defineProperty(t,Symbol.species,{value:null,configurable:!0}));function n(W){if(typeof W!="number")throw new TypeError('"size" argument must be a number');if(W<0)throw new RangeError('"size" argument must not be negative')}function i(W,B,D,q){return n(B),B<=0?E(W,B):D!==void 0?typeof q=="string"?E(W,B).fill(D,q):E(W,B).fill(D):E(W,B)}t.alloc=function(W,B,D){return i(null,W,B,D)};function d(W,B){if(n(B),W=E(W,B<0?0:h(B)|0),!t.TYPED_ARRAY_SUPPORT)for(var D=0;D<B;++D)W[D]=0;return W}t.allocUnsafe=function(W){return d(null,W)},t.allocUnsafeSlow=function(W){return d(null,W)};function P(W,B,D){if((typeof D!="string"||D==="")&&(D="utf8"),!t.isEncoding(D))throw new TypeError('"encoding" must be a valid string encoding');var q=v(B,D)|0;W=E(W,q);var me=W.write(B,D);return me!==q&&(W=W.slice(0,me)),W}function b(W,B){var D=B.length<0?0:h(B.length)|0;W=E(W,D);for(var q=0;q<D;q+=1)W[q]=B[q]&255;return W}function A(W,B,D,q){if(B.byteLength,D<0||B.byteLength<D)throw new RangeError("'offset' is out of bounds");if(B.byteLength<D+(q||0))throw new RangeError("'length' is out of bounds");return D===void 0&&q===void 0?B=new Uint8Array(B):q===void 0?B=new Uint8Array(B,D):B=new Uint8Array(B,D,q),t.TYPED_ARRAY_SUPPORT?(W=B,W.__proto__=t.prototype):W=b(W,B),W}function _(W,B){if(t.isBuffer(B)){var D=h(B.length)|0;return W=E(W,D),W.length===0||B.copy(W,0,0,D),W}if(B){if(typeof ArrayBuffer<"u"&&B.buffer instanceof ArrayBuffer||"length"in B)return typeof B.length!="number"||ce(B.length)?E(W,0):b(W,B);if(B.type==="Buffer"&&m(B.data))return b(W,B.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(W){if(W>=T())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+T().toString(16)+" bytes");return W|0}function f(W){return+W!=W&&(W=0),t.alloc(+W)}t.isBuffer=function(B){return!!(B!=null&&B._isBuffer)},t.compare=function(B,D){if(!t.isBuffer(B)||!t.isBuffer(D))throw new TypeError("Arguments must be Buffers");if(B===D)return 0;for(var q=B.length,me=D.length,de=0,ve=Math.min(q,me);de<ve;++de)if(B[de]!==D[de]){q=B[de],me=D[de];break}return q<me?-1:me<q?1:0},t.isEncoding=function(B){switch(String(B).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(B,D){if(!m(B))throw new TypeError('"list" argument must be an Array of Buffers');if(B.length===0)return t.alloc(0);var q;if(D===void 0)for(D=0,q=0;q<B.length;++q)D+=B[q].length;var me=t.allocUnsafe(D),de=0;for(q=0;q<B.length;++q){var ve=B[q];if(!t.isBuffer(ve))throw new TypeError('"list" argument must be an Array of Buffers');ve.copy(me,de),de+=ve.length}return me};function v(W,B){if(t.isBuffer(W))return W.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(W)||W instanceof ArrayBuffer))return W.byteLength;typeof W!="string"&&(W=""+W);var D=W.length;if(D===0)return 0;for(var q=!1;;)switch(B){case"ascii":case"latin1":case"binary":return D;case"utf8":case"utf-8":case void 0:return L(W).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D*2;case"hex":return D>>>1;case"base64":return Q(W).length;default:if(q)return L(W).length;B=(""+B).toLowerCase(),q=!0}}t.byteLength=v;function c(W,B,D){var q=!1;if((B===void 0||B<0)&&(B=0),B>this.length||((D===void 0||D>this.length)&&(D=this.length),D<=0)||(D>>>=0,B>>>=0,D<=B))return"";for(W||(W="utf8");;)switch(W){case"hex":return G(this,B,D);case"utf8":case"utf-8":return U(this,B,D);case"ascii":return Y(this,B,D);case"latin1":case"binary":return se(this,B,D);case"base64":return M(this,B,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,B,D);default:if(q)throw new TypeError("Unknown encoding: "+W);W=(W+"").toLowerCase(),q=!0}}t.prototype._isBuffer=!0;function S(W,B,D){var q=W[B];W[B]=W[D],W[D]=q}t.prototype.swap16=function(){var B=this.length;if(B%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var D=0;D<B;D+=2)S(this,D,D+1);return this},t.prototype.swap32=function(){var B=this.length;if(B%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var D=0;D<B;D+=4)S(this,D,D+3),S(this,D+1,D+2);return this},t.prototype.swap64=function(){var B=this.length;if(B%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var D=0;D<B;D+=8)S(this,D,D+7),S(this,D+1,D+6),S(this,D+2,D+5),S(this,D+3,D+4);return this},t.prototype.toString=function(){var B=this.length|0;return B===0?"":arguments.length===0?U(this,0,B):c.apply(this,arguments)},t.prototype.equals=function(B){if(!t.isBuffer(B))throw new TypeError("Argument must be a Buffer");return this===B?!0:t.compare(this,B)===0},t.prototype.inspect=function(){var B="",D=g.INSPECT_MAX_BYTES;return this.length>0&&(B=this.toString("hex",0,D).match(/.{2}/g).join(" "),this.length>D&&(B+=" ... ")),"<Buffer "+B+">"},t.prototype.compare=function(B,D,q,me,de){if(!t.isBuffer(B))throw new TypeError("Argument must be a Buffer");if(D===void 0&&(D=0),q===void 0&&(q=B?B.length:0),me===void 0&&(me=0),de===void 0&&(de=this.length),D<0||q>B.length||me<0||de>this.length)throw new RangeError("out of range index");if(me>=de&&D>=q)return 0;if(me>=de)return-1;if(D>=q)return 1;if(D>>>=0,q>>>=0,me>>>=0,de>>>=0,this===B)return 0;for(var ve=de-me,Se=q-D,be=Math.min(ve,Se),Me=this.slice(me,de),Fe=B.slice(D,q),Ee=0;Ee<be;++Ee)if(Me[Ee]!==Fe[Ee]){ve=Me[Ee],Se=Fe[Ee];break}return ve<Se?-1:Se<ve?1:0};function p(W,B,D,q,me){if(W.length===0)return-1;if(typeof D=="string"?(q=D,D=0):D>2147483647?D=2147483647:D<-2147483648&&(D=-2147483648),D=+D,isNaN(D)&&(D=me?0:W.length-1),D<0&&(D=W.length+D),D>=W.length){if(me)return-1;D=W.length-1}else if(D<0)if(me)D=0;else return-1;if(typeof B=="string"&&(B=t.from(B,q)),t.isBuffer(B))return B.length===0?-1:C(W,B,D,q,me);if(typeof B=="number")return B=B&255,t.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?me?Uint8Array.prototype.indexOf.call(W,B,D):Uint8Array.prototype.lastIndexOf.call(W,B,D):C(W,[B],D,q,me);throw new TypeError("val must be string, number or Buffer")}function C(W,B,D,q,me){var de=1,ve=W.length,Se=B.length;if(q!==void 0&&(q=String(q).toLowerCase(),q==="ucs2"||q==="ucs-2"||q==="utf16le"||q==="utf-16le")){if(W.length<2||B.length<2)return-1;de=2,ve/=2,Se/=2,D/=2}function be(Ue,Re){return de===1?Ue[Re]:Ue.readUInt16BE(Re*de)}var Me;if(me){var Fe=-1;for(Me=D;Me<ve;Me++)if(be(W,Me)===be(B,Fe===-1?0:Me-Fe)){if(Fe===-1&&(Fe=Me),Me-Fe+1===Se)return Fe*de}else Fe!==-1&&(Me-=Me-Fe),Fe=-1}else for(D+Se>ve&&(D=ve-Se),Me=D;Me>=0;Me--){for(var Ee=!0,Pe=0;Pe<Se;Pe++)if(be(W,Me+Pe)!==be(B,Pe)){Ee=!1;break}if(Ee)return Me}return-1}t.prototype.includes=function(B,D,q){return this.indexOf(B,D,q)!==-1},t.prototype.indexOf=function(B,D,q){return p(this,B,D,q,!0)},t.prototype.lastIndexOf=function(B,D,q){return p(this,B,D,q,!1)};function x(W,B,D,q){D=Number(D)||0;var me=W.length-D;q?(q=Number(q),q>me&&(q=me)):q=me;var de=B.length;if(de%2!==0)throw new TypeError("Invalid hex string");q>de/2&&(q=de/2);for(var ve=0;ve<q;++ve){var Se=parseInt(B.substr(ve*2,2),16);if(isNaN(Se))return ve;W[D+ve]=Se}return ve}function V(W,B,D,q){return ne(L(B,W.length-D),W,D,q)}function H(W,B,D,q){return ne($(B),W,D,q)}function te(W,B,D,q){return H(W,B,D,q)}function w(W,B,D,q){return ne(Q(B),W,D,q)}function F(W,B,D,q){return ne(O(B,W.length-D),W,D,q)}t.prototype.write=function(B,D,q,me){if(D===void 0)me="utf8",q=this.length,D=0;else if(q===void 0&&typeof D=="string")me=D,q=this.length,D=0;else if(isFinite(D))D=D|0,isFinite(q)?(q=q|0,me===void 0&&(me="utf8")):(me=q,q=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var de=this.length-D;if((q===void 0||q>de)&&(q=de),B.length>0&&(q<0||D<0)||D>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");for(var ve=!1;;)switch(me){case"hex":return x(this,B,D,q);case"utf8":case"utf-8":return V(this,B,D,q);case"ascii":return H(this,B,D,q);case"latin1":case"binary":return te(this,B,D,q);case"base64":return w(this,B,D,q);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,B,D,q);default:if(ve)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),ve=!0}},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(W,B,D){return B===0&&D===W.length?l.fromByteArray(W):l.fromByteArray(W.slice(B,D))}function U(W,B,D){D=Math.min(W.length,D);for(var q=[],me=B;me<D;){var de=W[me],ve=null,Se=de>239?4:de>223?3:de>191?2:1;if(me+Se<=D){var be,Me,Fe,Ee;switch(Se){case 1:de<128&&(ve=de);break;case 2:be=W[me+1],(be&192)===128&&(Ee=(de&31)<<6|be&63,Ee>127&&(ve=Ee));break;case 3:be=W[me+1],Me=W[me+2],(be&192)===128&&(Me&192)===128&&(Ee=(de&15)<<12|(be&63)<<6|Me&63,Ee>2047&&(Ee<55296||Ee>57343)&&(ve=Ee));break;case 4:be=W[me+1],Me=W[me+2],Fe=W[me+3],(be&192)===128&&(Me&192)===128&&(Fe&192)===128&&(Ee=(de&15)<<18|(be&63)<<12|(Me&63)<<6|Fe&63,Ee>65535&&Ee<1114112&&(ve=Ee))}}ve===null?(ve=65533,Se=1):ve>65535&&(ve-=65536,q.push(ve>>>10&1023|55296),ve=56320|ve&1023),q.push(ve),me+=Se}return X(q)}var j=4096;function X(W){var B=W.length;if(B<=j)return String.fromCharCode.apply(String,W);for(var D="",q=0;q<B;)D+=String.fromCharCode.apply(String,W.slice(q,q+=j));return D}function Y(W,B,D){var q="";D=Math.min(W.length,D);for(var me=B;me<D;++me)q+=String.fromCharCode(W[me]&127);return q}function se(W,B,D){var q="";D=Math.min(W.length,D);for(var me=B;me<D;++me)q+=String.fromCharCode(W[me]);return q}function G(W,B,D){var q=W.length;(!B||B<0)&&(B=0),(!D||D<0||D>q)&&(D=q);for(var me="",de=B;de<D;++de)me+=R(W[de]);return me}function ee(W,B,D){for(var q=W.slice(B,D),me="",de=0;de<q.length;de+=2)me+=String.fromCharCode(q[de]+q[de+1]*256);return me}t.prototype.slice=function(B,D){var q=this.length;B=~~B,D=D===void 0?q:~~D,B<0?(B+=q,B<0&&(B=0)):B>q&&(B=q),D<0?(D+=q,D<0&&(D=0)):D>q&&(D=q),D<B&&(D=B);var me;if(t.TYPED_ARRAY_SUPPORT)me=this.subarray(B,D),me.__proto__=t.prototype;else{var de=D-B;me=new t(de,void 0);for(var ve=0;ve<de;++ve)me[ve]=this[ve+B]}return me};function J(W,B,D){if(W%1!==0||W<0)throw new RangeError("offset is not uint");if(W+B>D)throw new RangeError("Trying to access beyond buffer length")}t.prototype.readUIntLE=function(B,D,q){B=B|0,D=D|0,q||J(B,D,this.length);for(var me=this[B],de=1,ve=0;++ve<D&&(de*=256);)me+=this[B+ve]*de;return me},t.prototype.readUIntBE=function(B,D,q){B=B|0,D=D|0,q||J(B,D,this.length);for(var me=this[B+--D],de=1;D>0&&(de*=256);)me+=this[B+--D]*de;return me},t.prototype.readUInt8=function(B,D){return D||J(B,1,this.length),this[B]},t.prototype.readUInt16LE=function(B,D){return D||J(B,2,this.length),this[B]|this[B+1]<<8},t.prototype.readUInt16BE=function(B,D){return D||J(B,2,this.length),this[B]<<8|this[B+1]},t.prototype.readUInt32LE=function(B,D){return D||J(B,4,this.length),(this[B]|this[B+1]<<8|this[B+2]<<16)+this[B+3]*16777216},t.prototype.readUInt32BE=function(B,D){return D||J(B,4,this.length),this[B]*16777216+(this[B+1]<<16|this[B+2]<<8|this[B+3])},t.prototype.readIntLE=function(B,D,q){B=B|0,D=D|0,q||J(B,D,this.length);for(var me=this[B],de=1,ve=0;++ve<D&&(de*=256);)me+=this[B+ve]*de;return de*=128,me>=de&&(me-=Math.pow(2,8*D)),me},t.prototype.readIntBE=function(B,D,q){B=B|0,D=D|0,q||J(B,D,this.length);for(var me=D,de=1,ve=this[B+--me];me>0&&(de*=256);)ve+=this[B+--me]*de;return de*=128,ve>=de&&(ve-=Math.pow(2,8*D)),ve},t.prototype.readInt8=function(B,D){return D||J(B,1,this.length),this[B]&128?(255-this[B]+1)*-1:this[B]},t.prototype.readInt16LE=function(B,D){D||J(B,2,this.length);var q=this[B]|this[B+1]<<8;return q&32768?q|4294901760:q},t.prototype.readInt16BE=function(B,D){D||J(B,2,this.length);var q=this[B+1]|this[B]<<8;return q&32768?q|4294901760:q},t.prototype.readInt32LE=function(B,D){return D||J(B,4,this.length),this[B]|this[B+1]<<8|this[B+2]<<16|this[B+3]<<24},t.prototype.readInt32BE=function(B,D){return D||J(B,4,this.length),this[B]<<24|this[B+1]<<16|this[B+2]<<8|this[B+3]},t.prototype.readFloatLE=function(B,D){return D||J(B,4,this.length),u.read(this,B,!0,23,4)},t.prototype.readFloatBE=function(B,D){return D||J(B,4,this.length),u.read(this,B,!1,23,4)},t.prototype.readDoubleLE=function(B,D){return D||J(B,8,this.length),u.read(this,B,!0,52,8)},t.prototype.readDoubleBE=function(B,D){return D||J(B,8,this.length),u.read(this,B,!1,52,8)};function ie(W,B,D,q,me,de){if(!t.isBuffer(W))throw new TypeError('"buffer" argument must be a Buffer instance');if(B>me||B<de)throw new RangeError('"value" argument is out of bounds');if(D+q>W.length)throw new RangeError("Index out of range")}t.prototype.writeUIntLE=function(B,D,q,me){if(B=+B,D=D|0,q=q|0,!me){var de=Math.pow(2,8*q)-1;ie(this,B,D,q,de,0)}var ve=1,Se=0;for(this[D]=B&255;++Se<q&&(ve*=256);)this[D+Se]=B/ve&255;return D+q},t.prototype.writeUIntBE=function(B,D,q,me){if(B=+B,D=D|0,q=q|0,!me){var de=Math.pow(2,8*q)-1;ie(this,B,D,q,de,0)}var ve=q-1,Se=1;for(this[D+ve]=B&255;--ve>=0&&(Se*=256);)this[D+ve]=B/Se&255;return D+q},t.prototype.writeUInt8=function(B,D,q){return B=+B,D=D|0,q||ie(this,B,D,1,255,0),t.TYPED_ARRAY_SUPPORT||(B=Math.floor(B)),this[D]=B&255,D+1};function ue(W,B,D,q){B<0&&(B=65535+B+1);for(var me=0,de=Math.min(W.length-D,2);me<de;++me)W[D+me]=(B&255<<8*(q?me:1-me))>>>(q?me:1-me)*8}t.prototype.writeUInt16LE=function(B,D,q){return B=+B,D=D|0,q||ie(this,B,D,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[D]=B&255,this[D+1]=B>>>8):ue(this,B,D,!0),D+2},t.prototype.writeUInt16BE=function(B,D,q){return B=+B,D=D|0,q||ie(this,B,D,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[D]=B>>>8,this[D+1]=B&255):ue(this,B,D,!1),D+2};function ae(W,B,D,q){B<0&&(B=4294967295+B+1);for(var me=0,de=Math.min(W.length-D,4);me<de;++me)W[D+me]=B>>>(q?me:3-me)*8&255}t.prototype.writeUInt32LE=function(B,D,q){return B=+B,D=D|0,q||ie(this,B,D,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[D+3]=B>>>24,this[D+2]=B>>>16,this[D+1]=B>>>8,this[D]=B&255):ae(this,B,D,!0),D+4},t.prototype.writeUInt32BE=function(B,D,q){return B=+B,D=D|0,q||ie(this,B,D,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[D]=B>>>24,this[D+1]=B>>>16,this[D+2]=B>>>8,this[D+3]=B&255):ae(this,B,D,!1),D+4},t.prototype.writeIntLE=function(B,D,q,me){if(B=+B,D=D|0,!me){var de=Math.pow(2,8*q-1);ie(this,B,D,q,de-1,-de)}var ve=0,Se=1,be=0;for(this[D]=B&255;++ve<q&&(Se*=256);)B<0&&be===0&&this[D+ve-1]!==0&&(be=1),this[D+ve]=(B/Se>>0)-be&255;return D+q},t.prototype.writeIntBE=function(B,D,q,me){if(B=+B,D=D|0,!me){var de=Math.pow(2,8*q-1);ie(this,B,D,q,de-1,-de)}var ve=q-1,Se=1,be=0;for(this[D+ve]=B&255;--ve>=0&&(Se*=256);)B<0&&be===0&&this[D+ve+1]!==0&&(be=1),this[D+ve]=(B/Se>>0)-be&255;return D+q},t.prototype.writeInt8=function(B,D,q){return B=+B,D=D|0,q||ie(this,B,D,1,127,-128),t.TYPED_ARRAY_SUPPORT||(B=Math.floor(B)),B<0&&(B=255+B+1),this[D]=B&255,D+1},t.prototype.writeInt16LE=function(B,D,q){return B=+B,D=D|0,q||ie(this,B,D,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[D]=B&255,this[D+1]=B>>>8):ue(this,B,D,!0),D+2},t.prototype.writeInt16BE=function(B,D,q){return B=+B,D=D|0,q||ie(this,B,D,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[D]=B>>>8,this[D+1]=B&255):ue(this,B,D,!1),D+2},t.prototype.writeInt32LE=function(B,D,q){return B=+B,D=D|0,q||ie(this,B,D,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[D]=B&255,this[D+1]=B>>>8,this[D+2]=B>>>16,this[D+3]=B>>>24):ae(this,B,D,!0),D+4},t.prototype.writeInt32BE=function(B,D,q){return B=+B,D=D|0,q||ie(this,B,D,4,2147483647,-2147483648),B<0&&(B=4294967295+B+1),t.TYPED_ARRAY_SUPPORT?(this[D]=B>>>24,this[D+1]=B>>>16,this[D+2]=B>>>8,this[D+3]=B&255):ae(this,B,D,!1),D+4};function oe(W,B,D,q,me,de){if(D+q>W.length)throw new RangeError("Index out of range");if(D<0)throw new RangeError("Index out of range")}function Z(W,B,D,q,me){return me||oe(W,B,D,4,34028234663852886e22,-34028234663852886e22),u.write(W,B,D,q,23,4),D+4}t.prototype.writeFloatLE=function(B,D,q){return Z(this,B,D,!0,q)},t.prototype.writeFloatBE=function(B,D,q){return Z(this,B,D,!1,q)};function ge(W,B,D,q,me){return me||oe(W,B,D,8,17976931348623157e292,-17976931348623157e292),u.write(W,B,D,q,52,8),D+8}t.prototype.writeDoubleLE=function(B,D,q){return ge(this,B,D,!0,q)},t.prototype.writeDoubleBE=function(B,D,q){return ge(this,B,D,!1,q)},t.prototype.copy=function(B,D,q,me){if(q||(q=0),!me&&me!==0&&(me=this.length),D>=B.length&&(D=B.length),D||(D=0),me>0&&me<q&&(me=q),me===q||B.length===0||this.length===0)return 0;if(D<0)throw new RangeError("targetStart out of bounds");if(q<0||q>=this.length)throw new RangeError("sourceStart out of bounds");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),B.length-D<me-q&&(me=B.length-D+q);var de=me-q,ve;if(this===B&&q<D&&D<me)for(ve=de-1;ve>=0;--ve)B[ve+D]=this[ve+q];else if(de<1e3||!t.TYPED_ARRAY_SUPPORT)for(ve=0;ve<de;++ve)B[ve+D]=this[ve+q];else Uint8Array.prototype.set.call(B,this.subarray(q,q+de),D);return de},t.prototype.fill=function(B,D,q,me){if(typeof B=="string"){if(typeof D=="string"?(me=D,D=0,q=this.length):typeof q=="string"&&(me=q,q=this.length),B.length===1){var de=B.charCodeAt(0);de<256&&(B=de)}if(me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!t.isEncoding(me))throw new TypeError("Unknown encoding: "+me)}else typeof B=="number"&&(B=B&255);if(D<0||this.length<D||this.length<q)throw new RangeError("Out of range index");if(q<=D)return this;D=D>>>0,q=q===void 0?this.length:q>>>0,B||(B=0);var ve;if(typeof B=="number")for(ve=D;ve<q;++ve)this[ve]=B;else{var Se=t.isBuffer(B)?B:L(new t(B,me).toString()),be=Se.length;for(ve=0;ve<q-D;++ve)this[ve+D]=Se[ve%be]}return this};var le=/[^+\/0-9A-Za-z-_]/g;function z(W){if(W=K(W).replace(le,""),W.length<2)return"";for(;W.length%4!==0;)W=W+"=";return W}function K(W){return W.trim?W.trim():W.replace(/^\s+|\s+$/g,"")}function R(W){return W<16?"0"+W.toString(16):W.toString(16)}function L(W,B){B=B||1/0;for(var D,q=W.length,me=null,de=[],ve=0;ve<q;++ve){if(D=W.charCodeAt(ve),D>55295&&D<57344){if(!me){if(D>56319){(B-=3)>-1&&de.push(239,191,189);continue}else if(ve+1===q){(B-=3)>-1&&de.push(239,191,189);continue}me=D;continue}if(D<56320){(B-=3)>-1&&de.push(239,191,189),me=D;continue}D=(me-55296<<10|D-56320)+65536}else me&&(B-=3)>-1&&de.push(239,191,189);if(me=null,D<128){if((B-=1)<0)break;de.push(D)}else if(D<2048){if((B-=2)<0)break;de.push(D>>6|192,D&63|128)}else if(D<65536){if((B-=3)<0)break;de.push(D>>12|224,D>>6&63|128,D&63|128)}else if(D<1114112){if((B-=4)<0)break;de.push(D>>18|240,D>>12&63|128,D>>6&63|128,D&63|128)}else throw new Error("Invalid code point")}return de}function $(W){for(var B=[],D=0;D<W.length;++D)B.push(W.charCodeAt(D)&255);return B}function O(W,B){for(var D,q,me,de=[],ve=0;ve<W.length&&!((B-=2)<0);++ve)D=W.charCodeAt(ve),q=D>>8,me=D%256,de.push(me),de.push(q);return de}function Q(W){return l.toByteArray(z(W))}function ne(W,B,D,q){for(var me=0;me<q&&!(me+D>=B.length||me>=W.length);++me)B[me+D]=W[me];return me}function ce(W){return W!==W}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/codem-isoboxer/dist/iso_boxer.js":function(I,g,r){var o={};o.parseBuffer=function(m){return new l(m).parse()},o.addBoxProcessor=function(m,y){typeof m!="string"||typeof y!="function"||(u.prototype._boxProcessors[m]=y)},o.createFile=function(){return new l},o.createBox=function(m,y,T){var E=u.create(m);return y&&y.append(E,T),E},o.createFullBox=function(m,y,T){var E=o.createBox(m,y,T);return E.version=0,E.flags=0,E},o.Utils={},o.Utils.dataViewToString=function(m,y){var T=y||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(T).decode(m);var E=[],t=0;if(T==="utf-8")for(;t<m.byteLength;){var e=m.getUint8(t++);e<128||(e<224?(e=(e&31)<<6,e|=m.getUint8(t++)&63):e<240?(e=(e&15)<<12,e|=(m.getUint8(t++)&63)<<6,e|=m.getUint8(t++)&63):(e=(e&7)<<18,e|=(m.getUint8(t++)&63)<<12,e|=(m.getUint8(t++)&63)<<6,e|=m.getUint8(t++)&63)),E.push(String.fromCharCode(e))}else for(;t<m.byteLength;)E.push(String.fromCharCode(m.getUint8(t++)));return E.join("")},o.Utils.utf8ToByteArray=function(m){var y,T;if(typeof TextEncoder<"u")y=new TextEncoder().encode(m);else for(y=[],T=0;T<m.length;++T){var E=m.charCodeAt(T);E<128?y.push(E):E<2048?(y.push(192|E>>6),y.push(128|63&E)):E<65536?(y.push(224|E>>12),y.push(128|63&E>>6),y.push(128|63&E)):(y.push(240|E>>18),y.push(128|63&E>>12),y.push(128|63&E>>6),y.push(128|63&E))}return y},o.Utils.appendBox=function(m,y,T){if(y._offset=m._cursor.offset,y._root=m._root?m._root:m,y._raw=m._raw,y._parent=m,T!==-1){if(T==null){m.boxes.push(y);return}var E=-1,t;if(typeof T=="number")E=T;else{if(typeof T=="string")t=T;else if(typeof T=="object"&&T.type)t=T.type;else{m.boxes.push(y);return}for(var e=0;e<m.boxes.length;e++)if(t===m.boxes[e].type){E=e+1;break}}m.boxes.splice(E,0,y)}},g.parseBuffer=o.parseBuffer,g.addBoxProcessor=o.addBoxProcessor,g.createFile=o.createFile,g.createBox=o.createBox,g.createFullBox=o.createFullBox,g.Utils=o.Utils,o.Cursor=function(m){this.offset=typeof m>"u"?0:m};var l=function(m){this._cursor=new o.Cursor,this.boxes=[],m&&(this._raw=new DataView(m))};l.prototype.fetch=function(m){var y=this.fetchAll(m,!0);return y.length?y[0]:null},l.prototype.fetchAll=function(m,y){var T=[];return l._sweep.call(this,m,T,y),T},l.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var m=u.parse(this);if(typeof m.type>"u")break;this.boxes.push(m)}return this},l._sweep=function(m,y,T){this.type&&this.type==m&&y.push(this);for(var E in this.boxes){if(y.length&&T)return;l._sweep.call(this.boxes[E],m,y,T)}},l.prototype.write=function(){var m=0,y;for(y=0;y<this.boxes.length;y++)m+=this.boxes[y].getLength(!1);var T=new Uint8Array(m);for(this._rawo=new DataView(T.buffer),this.bytes=T,this._cursor.offset=0,y=0;y<this.boxes.length;y++)this.boxes[y].write();return T.buffer},l.prototype.append=function(m,y){o.Utils.appendBox(this,m,y)};var u=function(){this._cursor=new o.Cursor};u.parse=function(m){var y=new u;return y._offset=m._cursor.offset,y._root=m._root?m._root:m,y._raw=m._raw,y._parent=m,y._parseBox(),m._cursor.offset=y._raw.byteOffset+y._raw.byteLength,y},u.create=function(m){var y=new u;return y.type=m,y.boxes=[],y},u.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],u.prototype._boxProcessors={},u.prototype._procField=function(m,y,T){this._parsing?this[m]=this._readField(y,T):this._writeField(y,T,this[m])},u.prototype._procFieldArray=function(m,y,T,E){var t;if(this._parsing)for(this[m]=[],t=0;t<y;t++)this[m][t]=this._readField(T,E);else for(t=0;t<this[m].length;t++)this._writeField(T,E,this[m][t])},u.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},u.prototype._procEntries=function(m,y,T){var E;if(this._parsing)for(this[m]=[],E=0;E<y;E++)this[m].push({}),T.call(this,this[m][E]);else for(E=0;E<y;E++)T.call(this,this[m][E])},u.prototype._procSubEntries=function(m,y,T,E){var t;if(this._parsing)for(m[y]=[],t=0;t<T;t++)m[y].push({}),E.call(this,m[y][t]);else for(t=0;t<T;t++)E.call(this,m[y][t])},u.prototype._procEntryField=function(m,y,T,E){this._parsing?m[y]=this._readField(T,E):this._writeField(T,E,m[y])},u.prototype._procSubBoxes=function(m,y){var T;if(this._parsing)for(this[m]=[],T=0;T<y;T++)this[m].push(u.parse(this));else for(T=0;T<y;T++)this._rawo?this[m][T].write():this.size+=this[m][T].getLength()},u.prototype._readField=function(m,y){switch(m){case"uint":return this._readUint(y);case"int":return this._readInt(y);case"template":return this._readTemplate(y);case"string":return y===-1?this._readTerminatedString():this._readString(y);case"data":return this._readData(y);case"utf8":return this._readUTF8String();default:return-1}},u.prototype._readInt=function(m){var y=null,T=this._cursor.offset-this._raw.byteOffset;switch(m){case 8:y=this._raw.getInt8(T);break;case 16:y=this._raw.getInt16(T);break;case 32:y=this._raw.getInt32(T);break;case 64:var E=this._raw.getInt32(T),t=this._raw.getInt32(T+4);y=E*Math.pow(2,32)+t;break}return this._cursor.offset+=m>>3,y},u.prototype._readUint=function(m){var y=null,T=this._cursor.offset-this._raw.byteOffset,E,t;switch(m){case 8:y=this._raw.getUint8(T);break;case 16:y=this._raw.getUint16(T);break;case 24:E=this._raw.getUint16(T),t=this._raw.getUint8(T+2),y=(E<<8)+t;break;case 32:y=this._raw.getUint32(T);break;case 64:E=this._raw.getUint32(T),t=this._raw.getUint32(T+4),y=E*Math.pow(2,32)+t;break}return this._cursor.offset+=m>>3,y},u.prototype._readString=function(m){for(var y="",T=0;T<m;T++){var E=this._readUint(8);y+=String.fromCharCode(E)}return y},u.prototype._readTemplate=function(m){var y=this._readUint(m/2),T=this._readUint(m/2);return y+T/Math.pow(2,m/2)},u.prototype._readTerminatedString=function(){for(var m="";this._cursor.offset-this._offset<this._raw.byteLength;){var y=this._readUint(8);if(y===0)break;m+=String.fromCharCode(y)}return m},u.prototype._readData=function(m){var y=m>0?m:this._raw.byteLength-(this._cursor.offset-this._offset);if(y>0){var T=new Uint8Array(this._raw.buffer,this._cursor.offset,y);return this._cursor.offset+=y,T}else return null},u.prototype._readUTF8String=function(){var m=this._raw.byteLength-(this._cursor.offset-this._offset),y=null;return m>0&&(y=new DataView(this._raw.buffer,this._cursor.offset,m),this._cursor.offset+=m),y&&o.Utils.dataViewToString(y)},u.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength){this._root._incomplete=!0;return}switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())},u.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},u.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(u.parse(this))},u.prototype.append=function(m,y){o.Utils.appendBox(this,m,y)},u.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var m=0;m<this.boxes.length;m++)this.size+=this.boxes[m].getLength();return this._data&&this._writeData(this._data),this.size},u.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var m=0;m<this.boxes.length;m++)this.boxes[m].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},u.prototype._writeInt=function(m,y){if(this._rawo){var T=this._cursor.offset-this._rawo.byteOffset;switch(m){case 8:this._rawo.setInt8(T,y);break;case 16:this._rawo.setInt16(T,y);break;case 32:this._rawo.setInt32(T,y);break;case 64:var E=Math.floor(y/Math.pow(2,32)),t=y-E*Math.pow(2,32);this._rawo.setUint32(T,E),this._rawo.setUint32(T+4,t);break}this._cursor.offset+=m>>3}else this.size+=m>>3},u.prototype._writeUint=function(m,y){if(this._rawo){var T=this._cursor.offset-this._rawo.byteOffset,E,t;switch(m){case 8:this._rawo.setUint8(T,y);break;case 16:this._rawo.setUint16(T,y);break;case 24:E=(y&16776960)>>8,t=y&255,this._rawo.setUint16(T,E),this._rawo.setUint8(T+2,t);break;case 32:this._rawo.setUint32(T,y);break;case 64:E=Math.floor(y/Math.pow(2,32)),t=y-E*Math.pow(2,32),this._rawo.setUint32(T,E),this._rawo.setUint32(T+4,t);break}this._cursor.offset+=m>>3}else this.size+=m>>3},u.prototype._writeString=function(m,y){for(var T=0;T<m;T++)this._writeUint(8,y.charCodeAt(T))},u.prototype._writeTerminatedString=function(m){if(m.length!==0){for(var y=0;y<m.length;y++)this._writeUint(8,m.charCodeAt(y));this._writeUint(8,0)}},u.prototype._writeTemplate=function(m,y){var T=Math.floor(y),E=(y-T)*Math.pow(2,m/2);this._writeUint(m/2,T),this._writeUint(m/2,E)},u.prototype._writeData=function(m){var y;if(m)if(this._rawo){if(m instanceof Array){for(var T=this._cursor.offset-this._rawo.byteOffset,y=0;y<m.length;y++)this._rawo.setInt8(T+y,m[y]);this._cursor.offset+=m.length}m instanceof Uint8Array&&(this._root.bytes.set(m,this._cursor.offset),this._cursor.offset+=m.length)}else this.size+=m.length},u.prototype._writeUTF8String=function(m){var y=o.Utils.utf8ToByteArray(m);if(this._rawo)for(var T=new DataView(this._rawo.buffer,this._cursor.offset,y.length),E=0;E<y.length;E++)T.setUint8(E,y[E]);else this.size+=y.length},u.prototype._writeField=function(m,y,T){switch(m){case"uint":this._writeUint(y,T);break;case"int":this._writeInt(y,T);break;case"template":this._writeTemplate(y,T);break;case"string":y==-1?this._writeTerminatedString(T):this._writeString(y,T);break;case"data":this._writeData(T);break;case"utf8":this._writeUTF8String(T);break;default:break}},u.prototype._boxProcessors.avc1=u.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},u.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},u.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(m){this._procEntryField(m,"segment_duration","uint",this.version===1?64:32),this._procEntryField(m,"media_time","int",this.version===1?64:32),this._procEntryField(m,"media_rate_integer","int",16),this._procEntryField(m,"media_rate_fraction","int",16)})},u.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},u.prototype._boxProcessors.free=u.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},u.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},u.prototype._boxProcessors.ftyp=u.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var m=-1;this._parsing&&(m=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",m,"string",4)},u.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},u.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},u.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),!this._parsing&&typeof this.language=="string"&&(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode((this.language>>10&31)+96,(this.language>>5&31)+96,(this.language&31)+96)),this._procField("pre_defined","uint",16)},u.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},u.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},u.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},u.prototype._boxProcessors.mp4a=u.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},u.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},u.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},u.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},u.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),this.flags&1&&this._procField("scheme_uri","string",-1)},u.prototype._boxProcessors.sdtp=function(){this._procFullBox();var m=-1;this._parsing&&(m=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",m,"uint",8)},u.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(m){this._parsing||(m.reference=(m.reference_type&1)<<31,m.reference|=m.referenced_size&2147483647,m.sap=(m.starts_with_SAP&1)<<31,m.sap|=(m.SAP_type&3)<<28,m.sap|=m.SAP_delta_time&268435455),this._procEntryField(m,"reference","uint",32),this._procEntryField(m,"subsegment_duration","uint",32),this._procEntryField(m,"sap","uint",32),this._parsing&&(m.reference_type=m.reference>>31&1,m.referenced_size=m.reference&2147483647,m.starts_with_SAP=m.sap>>31&1,m.SAP_type=m.sap>>28&7,m.SAP_delta_time=m.sap&268435455)})},u.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},u.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(m){this._procEntryField(m,"ranges_count","uint",32),this._procSubEntries(m,"ranges",m.ranges_count,function(y){this._procEntryField(y,"level","uint",8),this._procEntryField(y,"range_size","uint",24)})})},u.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},u.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(m){this._procEntryField(m,"sample_delta","uint",32),this._procEntryField(m,"subsample_count","uint",16),this._procSubEntries(m,"subsamples",m.subsample_count,function(y){this._procEntryField(y,"subsample_size","uint",this.version===1?32:16),this._procEntryField(y,"subsample_priority","uint",8),this._procEntryField(y,"discardable","uint",8),this._procEntryField(y,"codec_specific_parameters","uint",32)})})},u.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},u.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},u.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),this.flags&1&&this._procField("base_data_offset","uint",64),this.flags&2&&this._procField("sample_description_offset","uint",32),this.flags&8&&this._procField("default_sample_duration","uint",32),this.flags&16&&this._procField("default_sample_size","uint",32),this.flags&32&&this._procField("default_sample_flags","uint",32)},u.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(this.length_size_of_traf_num&48)<<4,this.reserved|=(this.length_size_of_trun_num&12)<<2,this.reserved|=this.length_size_of_sample_num&3),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(this.reserved&48)>>4,this.length_size_of_trun_num=(this.reserved&12)>>2,this.length_size_of_sample_num=this.reserved&3),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(m){this._procEntryField(m,"time","uint",this.version===1?64:32),this._procEntryField(m,"moof_offset","uint",this.version===1?64:32),this._procEntryField(m,"traf_number","uint",(this.length_size_of_traf_num+1)*8),this._procEntryField(m,"trun_number","uint",(this.length_size_of_trun_num+1)*8),this._procEntryField(m,"sample_number","uint",(this.length_size_of_sample_num+1)*8)})},u.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},u.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},u.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),this.flags&1&&this._procField("data_offset","int",32),this.flags&4&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(m){this.flags&256&&this._procEntryField(m,"sample_duration","uint",32),this.flags&512&&this._procEntryField(m,"sample_size","uint",32),this.flags&1024&&this._procEntryField(m,"sample_flags","uint",32),this.flags&2048&&this._procEntryField(m,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},u.prototype._boxProcessors["url "]=u.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},u.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},u.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},u.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},u.prototype._boxProcessors.vtte=function(){}},"./node_modules/core-util-is/lib/util.js":function(I,g,r){function o(_){return Array.isArray?Array.isArray(_):A(_)==="[object Array]"}g.isArray=o;function l(_){return typeof _=="boolean"}g.isBoolean=l;function u(_){return _===null}g.isNull=u;function m(_){return _==null}g.isNullOrUndefined=m;function y(_){return typeof _=="number"}g.isNumber=y;function T(_){return typeof _=="string"}g.isString=T;function E(_){return typeof _=="symbol"}g.isSymbol=E;function t(_){return _===void 0}g.isUndefined=t;function e(_){return A(_)==="[object RegExp]"}g.isRegExp=e;function n(_){return typeof _=="object"&&_!==null}g.isObject=n;function i(_){return A(_)==="[object Date]"}g.isDate=i;function d(_){return A(_)==="[object Error]"||_ instanceof Error}g.isError=d;function P(_){return typeof _=="function"}g.isFunction=P;function b(_){return _===null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||typeof _=="symbol"||typeof _>"u"}g.isPrimitive=b,g.isBuffer=r("./node_modules/buffer/index.js").Buffer.isBuffer;function A(_){return Object.prototype.toString.call(_)}},"./node_modules/es6-promise/auto.js":function(I,g,r){"use strict";I.exports=r("./node_modules/es6-promise/dist/es6-promise.js").polyfill()},"./node_modules/es6-promise/dist/es6-promise.js":function(I,g,r){(function(o,l){(function(u,m){I.exports=m()})(this,function(){"use strict";function u(de){var ve=typeof de;return de!==null&&(ve==="object"||ve==="function")}function m(de){return typeof de=="function"}var y=void 0;Array.isArray?y=Array.isArray:y=function(de){return Object.prototype.toString.call(de)==="[object Array]"};var T=y,E=0,t=void 0,e=void 0,n=function(ve,Se){C[E]=ve,C[E+1]=Se,E+=2,E===2&&(e?e(x):H())};function i(de){e=de}function d(de){n=de}var P=typeof window<"u"?window:void 0,b=P||{},A=b.MutationObserver||b.WebKitMutationObserver,_=typeof self>"u"&&typeof o<"u"&&{}.toString.call(o)==="[object process]",h=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function f(){return function(){return o.nextTick(x)}}function v(){return typeof t<"u"?function(){t(x)}:p()}function c(){var de=0,ve=new A(x),Se=document.createTextNode("");return ve.observe(Se,{characterData:!0}),function(){Se.data=de=++de%2}}function S(){var de=new MessageChannel;return de.port1.onmessage=x,function(){return de.port2.postMessage(0)}}function p(){var de=setTimeout;return function(){return de(x,1)}}var C=new Array(1e3);function x(){for(var de=0;de<E;de+=2){var ve=C[de],Se=C[de+1];ve(Se),C[de]=void 0,C[de+1]=void 0}E=0}function V(){try{var de=Function("return this")().require("vertx");return t=de.runOnLoop||de.runOnContext,v()}catch{return p()}}var H=void 0;_?H=f():A?H=c():h?H=S():P===void 0?H=V():H=p();function te(de,ve){var Se=this,be=new this.constructor(M);be[F]===void 0&&$(be);var Me=Se._state;if(Me){var Fe=arguments[Me-1];n(function(){return z(Me,be,Fe,Se._result)})}else ge(Se,be,de,ve);return be}function w(de){var ve=this;if(de&&typeof de=="object"&&de.constructor===ve)return de;var Se=new ve(M);return ue(Se,de),Se}var F=Math.random().toString(36).substring(2);function M(){}var U=void 0,j=1,X=2;function Y(){return new TypeError("You cannot resolve a promise with itself")}function se(){return new TypeError("A promises callback cannot return that same promise.")}function G(de,ve,Se,be){try{de.call(ve,Se,be)}catch(Me){return Me}}function ee(de,ve,Se){n(function(be){var Me=!1,Fe=G(Se,ve,function(Ee){Me||(Me=!0,ve!==Ee?ue(be,Ee):oe(be,Ee))},function(Ee){Me||(Me=!0,Z(be,Ee))},"Settle: "+(be._label||" unknown promise"));!Me&&Fe&&(Me=!0,Z(be,Fe))},de)}function J(de,ve){ve._state===j?oe(de,ve._result):ve._state===X?Z(de,ve._result):ge(ve,void 0,function(Se){return ue(de,Se)},function(Se){return Z(de,Se)})}function ie(de,ve,Se){ve.constructor===de.constructor&&Se===te&&ve.constructor.resolve===w?J(de,ve):Se===void 0?oe(de,ve):m(Se)?ee(de,ve,Se):oe(de,ve)}function ue(de,ve){if(de===ve)Z(de,Y());else if(u(ve)){var Se=void 0;try{Se=ve.then}catch(be){Z(de,be);return}ie(de,ve,Se)}else oe(de,ve)}function ae(de){de._onerror&&de._onerror(de._result),le(de)}function oe(de,ve){de._state===U&&(de._result=ve,de._state=j,de._subscribers.length!==0&&n(le,de))}function Z(de,ve){de._state===U&&(de._state=X,de._result=ve,n(ae,de))}function ge(de,ve,Se,be){var Me=de._subscribers,Fe=Me.length;de._onerror=null,Me[Fe]=ve,Me[Fe+j]=Se,Me[Fe+X]=be,Fe===0&&de._state&&n(le,de)}function le(de){var ve=de._subscribers,Se=de._state;if(ve.length!==0){for(var be=void 0,Me=void 0,Fe=de._result,Ee=0;Ee<ve.length;Ee+=3)be=ve[Ee],Me=ve[Ee+Se],be?z(Se,be,Me,Fe):Me(Fe);de._subscribers.length=0}}function z(de,ve,Se,be){var Me=m(Se),Fe=void 0,Ee=void 0,Pe=!0;if(Me){try{Fe=Se(be)}catch(Ue){Pe=!1,Ee=Ue}if(ve===Fe){Z(ve,se());return}}else Fe=be;ve._state!==U||(Me&&Pe?ue(ve,Fe):Pe===!1?Z(ve,Ee):de===j?oe(ve,Fe):de===X&&Z(ve,Fe))}function K(de,ve){try{ve(function(be){ue(de,be)},function(be){Z(de,be)})}catch(Se){Z(de,Se)}}var R=0;function L(){return R++}function $(de){de[F]=R++,de._state=void 0,de._result=void 0,de._subscribers=[]}function O(){return new Error("Array Methods must be provided an Array")}var Q=function(){function de(ve,Se){this._instanceConstructor=ve,this.promise=new ve(M),this.promise[F]||$(this.promise),T(Se)?(this.length=Se.length,this._remaining=Se.length,this._result=new Array(this.length),this.length===0?oe(this.promise,this._result):(this.length=this.length||0,this._enumerate(Se),this._remaining===0&&oe(this.promise,this._result))):Z(this.promise,O())}return de.prototype._enumerate=function(Se){for(var be=0;this._state===U&&be<Se.length;be++)this._eachEntry(Se[be],be)},de.prototype._eachEntry=function(Se,be){var Me=this._instanceConstructor,Fe=Me.resolve;if(Fe===w){var Ee=void 0,Pe=void 0,Ue=!1;try{Ee=Se.then}catch(Ke){Ue=!0,Pe=Ke}if(Ee===te&&Se._state!==U)this._settledAt(Se._state,be,Se._result);else if(typeof Ee!="function")this._remaining--,this._result[be]=Se;else if(Me===q){var Re=new Me(M);Ue?Z(Re,Pe):ie(Re,Se,Ee),this._willSettleAt(Re,be)}else this._willSettleAt(new Me(function(Ke){return Ke(Se)}),be)}else this._willSettleAt(Fe(Se),be)},de.prototype._settledAt=function(Se,be,Me){var Fe=this.promise;Fe._state===U&&(this._remaining--,Se===X?Z(Fe,Me):this._result[be]=Me),this._remaining===0&&oe(Fe,this._result)},de.prototype._willSettleAt=function(Se,be){var Me=this;ge(Se,void 0,function(Fe){return Me._settledAt(j,be,Fe)},function(Fe){return Me._settledAt(X,be,Fe)})},de}();function ne(de){return new Q(this,de).promise}function ce(de){var ve=this;return T(de)?new ve(function(Se,be){for(var Me=de.length,Fe=0;Fe<Me;Fe++)ve.resolve(de[Fe]).then(Se,be)}):new ve(function(Se,be){return be(new TypeError("You must pass an array to race."))})}function W(de){var ve=this,Se=new ve(M);return Z(Se,de),Se}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var q=function(){function de(ve){this[F]=L(),this._result=this._state=void 0,this._subscribers=[],M!==ve&&(typeof ve!="function"&&B(),this instanceof de?K(this,ve):D())}return de.prototype.catch=function(Se){return this.then(null,Se)},de.prototype.finally=function(Se){var be=this,Me=be.constructor;return m(Se)?be.then(function(Fe){return Me.resolve(Se()).then(function(){return Fe})},function(Fe){return Me.resolve(Se()).then(function(){throw Fe})}):be.then(Se,Se)},de}();q.prototype.then=te,q.all=ne,q.race=ce,q.resolve=w,q.reject=W,q._setScheduler=i,q._setAsap=d,q._asap=n;function me(){var de=void 0;if(typeof l<"u")de=l;else if(typeof self<"u")de=self;else try{de=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var ve=de.Promise;if(ve){var Se=null;try{Se=Object.prototype.toString.call(ve.resolve())}catch{}if(Se==="[object Promise]"&&!ve.cast)return}de.Promise=q}return q.polyfill=me,q.Promise=q,q})}).call(this,r("./node_modules/process/browser.js"),r("./node_modules/webpack/buildin/global.js"))},"./node_modules/events/events.js":function(I,g,r){"use strict";var o=typeof Reflect=="object"?Reflect:null,l=o&&typeof o.apply=="function"?o.apply:function(p,C,x){return Function.prototype.apply.call(p,C,x)},u;o&&typeof o.ownKeys=="function"?u=o.ownKeys:Object.getOwnPropertySymbols?u=function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:u=function(p){return Object.getOwnPropertyNames(p)};function m(S){console&&console.warn&&console.warn(S)}var y=Number.isNaN||function(p){return p!==p};function T(){T.init.call(this)}I.exports=T,I.exports.once=f,T.EventEmitter=T,T.prototype._events=void 0,T.prototype._eventsCount=0,T.prototype._maxListeners=void 0;var E=10;function t(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}Object.defineProperty(T,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(S){if(typeof S!="number"||S<0||y(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");E=S}}),T.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},T.prototype.setMaxListeners=function(p){if(typeof p!="number"||p<0||y(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this};function e(S){return S._maxListeners===void 0?T.defaultMaxListeners:S._maxListeners}T.prototype.getMaxListeners=function(){return e(this)},T.prototype.emit=function(p){for(var C=[],x=1;x<arguments.length;x++)C.push(arguments[x]);var V=p==="error",H=this._events;if(H!==void 0)V=V&&H.error===void 0;else if(!V)return!1;if(V){var te;if(C.length>0&&(te=C[0]),te instanceof Error)throw te;var w=new Error("Unhandled error."+(te?" ("+te.message+")":""));throw w.context=te,w}var F=H[p];if(F===void 0)return!1;if(typeof F=="function")l(F,this,C);else for(var M=F.length,U=A(F,M),x=0;x<M;++x)l(U[x],this,C);return!0};function n(S,p,C,x){var V,H,te;if(t(C),H=S._events,H===void 0?(H=S._events=Object.create(null),S._eventsCount=0):(H.newListener!==void 0&&(S.emit("newListener",p,C.listener?C.listener:C),H=S._events),te=H[p]),te===void 0)te=H[p]=C,++S._eventsCount;else if(typeof te=="function"?te=H[p]=x?[C,te]:[te,C]:x?te.unshift(C):te.push(C),V=e(S),V>0&&te.length>V&&!te.warned){te.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+te.length+" "+String(p)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=S,w.type=p,w.count=te.length,m(w)}return S}T.prototype.addListener=function(p,C){return n(this,p,C,!1)},T.prototype.on=T.prototype.addListener,T.prototype.prependListener=function(p,C){return n(this,p,C,!0)};function i(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(S,p,C){var x={fired:!1,wrapFn:void 0,target:S,type:p,listener:C},V=i.bind(x);return V.listener=C,x.wrapFn=V,V}T.prototype.once=function(p,C){return t(C),this.on(p,d(this,p,C)),this},T.prototype.prependOnceListener=function(p,C){return t(C),this.prependListener(p,d(this,p,C)),this},T.prototype.removeListener=function(p,C){var x,V,H,te,w;if(t(C),V=this._events,V===void 0)return this;if(x=V[p],x===void 0)return this;if(x===C||x.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete V[p],V.removeListener&&this.emit("removeListener",p,x.listener||C));else if(typeof x!="function"){for(H=-1,te=x.length-1;te>=0;te--)if(x[te]===C||x[te].listener===C){w=x[te].listener,H=te;break}if(H<0)return this;H===0?x.shift():_(x,H),x.length===1&&(V[p]=x[0]),V.removeListener!==void 0&&this.emit("removeListener",p,w||C)}return this},T.prototype.off=T.prototype.removeListener,T.prototype.removeAllListeners=function(p){var C,x,V;if(x=this._events,x===void 0)return this;if(x.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):x[p]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete x[p]),this;if(arguments.length===0){var H=Object.keys(x),te;for(V=0;V<H.length;++V)te=H[V],te!=="removeListener"&&this.removeAllListeners(te);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=x[p],typeof C=="function")this.removeListener(p,C);else if(C!==void 0)for(V=C.length-1;V>=0;V--)this.removeListener(p,C[V]);return this};function P(S,p,C){var x=S._events;if(x===void 0)return[];var V=x[p];return V===void 0?[]:typeof V=="function"?C?[V.listener||V]:[V]:C?h(V):A(V,V.length)}T.prototype.listeners=function(p){return P(this,p,!0)},T.prototype.rawListeners=function(p){return P(this,p,!1)},T.listenerCount=function(S,p){return typeof S.listenerCount=="function"?S.listenerCount(p):b.call(S,p)},T.prototype.listenerCount=b;function b(S){var p=this._events;if(p!==void 0){var C=p[S];if(typeof C=="function")return 1;if(C!==void 0)return C.length}return 0}T.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function A(S,p){for(var C=new Array(p),x=0;x<p;++x)C[x]=S[x];return C}function _(S,p){for(;p+1<S.length;p++)S[p]=S[p+1];S.pop()}function h(S){for(var p=new Array(S.length),C=0;C<p.length;++C)p[C]=S[C].listener||S[C];return p}function f(S,p){return new Promise(function(C,x){function V(te){S.removeListener(p,H),x(te)}function H(){typeof S.removeListener=="function"&&S.removeListener("error",V),C([].slice.call(arguments))}c(S,p,H,{once:!0}),p!=="error"&&v(S,V,{once:!0})})}function v(S,p,C){typeof S.on=="function"&&c(S,"error",p,C)}function c(S,p,C,x){if(typeof S.on=="function")x.once?S.once(p,C):S.on(p,C);else if(typeof S.addEventListener=="function")S.addEventListener(p,function V(H){x.once&&S.removeEventListener(p,V),C(H)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S)}},"./node_modules/fast-deep-equal/index.js":function(I,g,r){"use strict";var o=Array.isArray,l=Object.keys,u=Object.prototype.hasOwnProperty;I.exports=function m(y,T){if(y===T)return!0;if(y&&T&&typeof y=="object"&&typeof T=="object"){var E=o(y),t=o(T),e,n,i;if(E&&t){if(n=y.length,n!=T.length)return!1;for(e=n;e--!==0;)if(!m(y[e],T[e]))return!1;return!0}if(E!=t)return!1;var d=y instanceof Date,P=T instanceof Date;if(d!=P)return!1;if(d&&P)return y.getTime()==T.getTime();var b=y instanceof RegExp,A=T instanceof RegExp;if(b!=A)return!1;if(b&&A)return y.toString()==T.toString();var _=l(y);if(n=_.length,n!==l(T).length)return!1;for(e=n;e--!==0;)if(!u.call(T,_[e]))return!1;for(e=n;e--!==0;)if(i=_[e],!m(y[i],T[i]))return!1;return!0}return y!==y&&T!==T}},"./node_modules/ieee754/index.js":function(I,g){g.read=function(r,o,l,u,m){var y,T,E=m*8-u-1,t=(1<<E)-1,e=t>>1,n=-7,i=l?m-1:0,d=l?-1:1,P=r[o+i];for(i+=d,y=P&(1<<-n)-1,P>>=-n,n+=E;n>0;y=y*256+r[o+i],i+=d,n-=8);for(T=y&(1<<-n)-1,y>>=-n,n+=u;n>0;T=T*256+r[o+i],i+=d,n-=8);if(y===0)y=1-e;else{if(y===t)return T?NaN:(P?-1:1)*(1/0);T=T+Math.pow(2,u),y=y-e}return(P?-1:1)*T*Math.pow(2,y-u)},g.write=function(r,o,l,u,m,y){var T,E,t,e=y*8-m-1,n=(1<<e)-1,i=n>>1,d=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=u?0:y-1,b=u?1:-1,A=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(E=isNaN(o)?1:0,T=n):(T=Math.floor(Math.log(o)/Math.LN2),o*(t=Math.pow(2,-T))<1&&(T--,t*=2),T+i>=1?o+=d/t:o+=d*Math.pow(2,1-i),o*t>=2&&(T++,t/=2),T+i>=n?(E=0,T=n):T+i>=1?(E=(o*t-1)*Math.pow(2,m),T=T+i):(E=o*Math.pow(2,i-1)*Math.pow(2,m),T=0));m>=8;r[l+P]=E&255,P+=b,E/=256,m-=8);for(T=T<<m|E,e+=m;e>0;r[l+P]=T&255,P+=b,T/=256,e-=8);r[l+P-b]|=A*128}},"./node_modules/imsc/src/main/js/doc.js":function(I,g,r){(function(o,l,u,m,y){o.fromXML=function(O,Q,ne){var ce=l.parser(!0,{xmlns:!0}),W=[],B=[],D=[],q=0,me=null;ce.onclosetag=function(Me){if(W[0]instanceof F)me.head!==null&&me.head.styling!==null&&ge(me.head.styling,W[0].styleRefs,W[0].styleAttrs,Q),delete W[0].styleRefs;else if(W[0]instanceof i)for(var Fe in W[0].styles)W[0].styles.hasOwnProperty(Fe)&&Z(W[0],W[0].styles[Fe],Q);else if(W[0]instanceof V||W[0]instanceof H){if(W[0].contents.length>1){var Ee=[W[0].contents[0]],Pe;for(Pe=1;Pe<W[0].contents.length;Pe++)W[0].contents[Pe]instanceof te&&Ee[Ee.length-1]instanceof te?Ee[Ee.length-1].text+=W[0].contents[Pe].text:Ee.push(W[0].contents[Pe]);W[0].contents=Ee}W[0]instanceof H&&W[0].contents.length===1&&W[0].contents[0]instanceof te&&(W[0].text=W[0].contents[0].text,delete W[0].contents)}else W[0]instanceof t&&(W[0].node.uri===u.ns_tt&&W[0].node.local==="metadata"?q--:q>0&&ne&&"onCloseTag"in ne&&ne.onCloseTag());D.shift(),B.shift(),W.shift()},ce.ontext=function(Me){if(W[0]!==void 0)if(W[0]instanceof H||W[0]instanceof V){if(W[0]instanceof H){var Fe=W[0].styleAttrs[m.byName.ruby.qname];if(Fe==="container"||Fe==="textContainer"||Fe==="baseContainer")return}var Ee=new te;Ee.initFromText(me,W[0],Me,B[0],D[0],Q),W[0].contents.push(Ee)}else W[0]instanceof t&&q>0&&ne&&"onText"in ne&&ne.onText(Me)},ce.onopentag=function(Me){var Fe=Me.attributes["xml:space"];Fe?D.unshift(Fe.value):D.length===0?D.unshift("default"):D.unshift(D[0]);var Ee=Me.attributes["xml:lang"];if(Ee?B.unshift(Ee.value):B.length===0?B.unshift(""):B.unshift(B[0]),Me.uri===u.ns_tt)if(Me.local==="tt")me!==null&&L(Q,"Two <tt> elements at ("+this.line+","+this.column+")"),me=new e,me.initFromNode(Me,B[0],Q),W.unshift(me);else if(Me.local==="head")W[0]instanceof e||L(Q,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),W.unshift(me.head);else if(Me.local==="styling")W[0]instanceof n||L(Q,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),W.unshift(me.head.styling);else if(Me.local==="style"){var Pe;W[0]instanceof i?(Pe=new d,Pe.initFromNode(Me,Q),Pe.id?me.head.styling.styles[Pe.id]=Pe:R(Q,"<style> element missing @id attribute"),W.unshift(Pe)):W[0]instanceof F?(Pe=new d,Pe.initFromNode(Me,Q),le(Pe.styleAttrs,W[0].styleAttrs),W.unshift(Pe)):L(Q,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(Me.local==="initial"){var Ue;if(W[0]instanceof i){Ue=new P,Ue.initFromNode(Me,Q);for(var Re in Ue.styleAttrs)Ue.styleAttrs.hasOwnProperty(Re)&&(me.head.styling.initials[Re]=Ue.styleAttrs[Re]);W.unshift(Ue)}else L(Q,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(Me.local==="layout")W[0]instanceof n||L(Q,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),W.unshift(me.head.layout);else if(Me.local==="region"){W[0]instanceof b||L(Q,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Ke=new F;Ke.initFromNode(me,Me,B[0],Q),!Ke.id||Ke.id in me.head.layout.regions?R(Q,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):me.head.layout.regions[Ke.id]=Ke,W.unshift(Ke)}else if(Me.local==="body"){W[0]instanceof e||L(Q,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),me.body!==null&&L(Q,"Second <body> element at "+this.line+","+this.column+")");var Ne=new C;Ne.initFromNode(me,Me,B[0],Q),me.body=Ne,W.unshift(Ne)}else if(Me.local==="div"){W[0]instanceof x||W[0]instanceof C||L(Q,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var ze=new x;ze.initFromNode(me,W[0],Me,B[0],Q);var $e=ze.styleAttrs[m.byName.backgroundImage.qname];$e&&(ze.contents.push(new A($e)),delete ze.styleAttrs[m.byName.backgroundImage.qname]),W[0].contents.push(ze),W.unshift(ze)}else if(Me.local==="image"){W[0]instanceof x||L(Q,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var tt=new A;tt.initFromNode(me,W[0],Me,B[0],Q),W[0].contents.push(tt),W.unshift(tt)}else if(Me.local==="p"){W[0]instanceof x||L(Q,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var ft=new V;ft.initFromNode(me,W[0],Me,B[0],Q),W[0].contents.push(ft),W.unshift(ft)}else if(Me.local==="span"){W[0]instanceof H||W[0]instanceof V||L(Q,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var bt=new H;bt.initFromNode(me,W[0],Me,B[0],D[0],Q),W[0].contents.push(bt),W.unshift(bt)}else if(Me.local==="br"){W[0]instanceof H||W[0]instanceof V||L(Q,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var Et=new w;Et.initFromNode(me,W[0],Me,B[0],Q),W[0].contents.push(Et),W.unshift(Et)}else if(Me.local==="set"){W[0]instanceof H||W[0]instanceof V||W[0]instanceof x||W[0]instanceof C||W[0]instanceof F||W[0]instanceof w||L(Q,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var St=new M;St.initFromNode(me,W[0],Me,Q),W[0].sets.push(St),W.unshift(St)}else W.unshift(new t(Me));else W.unshift(new t(Me));if(W[0]instanceof t){if(Me.uri===u.ns_tt&&Me.local==="metadata")q++;else if(q>0&&ne&&"onOpenTag"in ne){var Ct=[];for(var ye in Me.attributes)Ct[Me.attributes[ye].uri+" "+Me.attributes[ye].local]={uri:Me.attributes[ye].uri,local:Me.attributes[ye].local,value:Me.attributes[ye].value};ne.onOpenTag(Me.uri,Me.local,Ct)}}},ce.write(O).close(),delete me.head.styling.styles;var de=!1;for(var ve in me.head.layout.regions)if(me.head.layout.regions.hasOwnProperty(ve)){de=!0;break}if(!de){var Se=F.prototype.createDefaultRegion(me.lang);me.head.layout.regions[Se.id]=Se}for(var be in me.head.layout.regions)me.head.layout.regions.hasOwnProperty(be)&&E(me,me.head.layout.regions[be],null,null);return me.body&&E(me,me.body,null,null),me.body&&T(me.body),me};function T(O){if("contents"in O)for(var Q=("styleAttrs"in O)?O.styleAttrs[m.byName.ruby.qname]:null,ne=O.kind==="span"&&(Q==="container"||Q==="textContainer"||Q==="baseContainer"),ce=O.contents.length-1;ce>=0;ce--)ne&&!("styleAttrs"in O.contents[ce]&&m.byName.ruby.qname in O.contents[ce].styleAttrs)?delete O.contents[ce]:T(O.contents[ce])}function E(O,Q,ne,ce){var W=ce&&ce.timeContainer==="seq",B=0;ce&&(W&&ne?B=ne.end:B=ce.begin),Q.begin=Q.explicit_begin?Q.explicit_begin+B:B;var D=Q.begin,q=null;if("sets"in Q)for(var me=0;me<Q.sets.length;me++)E(O,Q.sets[me],q,Q),Q.timeContainer==="seq"?D=Q.sets[me].end:D=Math.max(D,Q.sets[me].end),q=Q.sets[me];if(!("contents"in Q))W?D=Q.begin:D=Number.POSITIVE_INFINITY;else if("contents"in Q)for(var de=0;de<Q.contents.length;de++)E(O,Q.contents[de],q,Q),Q.timeContainer==="seq"?D=Q.contents[de].end:D=Math.max(D,Q.contents[de].end),q=Q.contents[de];Q.explicit_end!==null&&Q.explicit_dur!==null?Q.end=Math.min(Q.begin+Q.explicit_dur,B+Q.explicit_end):Q.explicit_end===null&&Q.explicit_dur!==null?Q.end=Q.begin+Q.explicit_dur:Q.explicit_end!==null&&Q.explicit_dur===null?Q.end=B+Q.explicit_end:Q.end=D,delete Q.explicit_begin,delete Q.explicit_dur,delete Q.explicit_end,O._registerEvent(Q)}function t(O){this.node=O}function e(){this.events=[],this.head=new n,this.body=null}e.prototype.initFromNode=function(O,Q,ne){var ce=J(O,ne);this.cellLength={h:new y.ComputedLength(0,1/ce.h),w:new y.ComputedLength(1/ce.w,0)};var W=ie(O,ne);this.effectiveFrameRate=W.effectiveFrameRate,this.tickRate=W.tickRate,this.aspectRatio=ee(O,ne);var B=G(O,u.ns_ttp,"timeBase");B!==null&&B!=="media"&&L(ne,"Unsupported time base");var D=ue(O,ne);D===null?this.pxLength={h:null,w:null}:((D.h.unit!=="px"||D.w.unit!=="px")&&L(ne,"Extent on TT must be in px or absent"),this.pxLength={h:new y.ComputedLength(0,1/D.h.value),w:new y.ComputedLength(1/D.w.value,0)}),this.dimensions={h:new y.ComputedLength(0,1),w:new y.ComputedLength(1,0)},this.lang=Q},e.prototype._registerEvent=function(O){if(!(O.end<=O.begin)){var Q=$(this.events,O.begin);if(Q.found||this.events.splice(Q.index,0,O.begin),O.end!==Number.POSITIVE_INFINITY){var ne=$(this.events,O.end);ne.found||this.events.splice(ne.index,0,O.end)}}},e.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},e.prototype.getMediaTimeEvents=function(){return this.events};function n(){this.styling=new i,this.layout=new b}function i(){this.styles={},this.initials={}}function d(){this.id=null,this.styleAttrs=null,this.styleRefs=null}d.prototype.initFromNode=function(O,Q){this.id=U(O),this.styleAttrs=se(O,Q),this.styleRefs=Y(O)};function P(){this.styleAttrs=null}P.prototype.initFromNode=function(O,Q){this.styleAttrs={};for(var ne in O.attributes)if(O.attributes[ne].uri===u.ns_itts||O.attributes[ne].uri===u.ns_ebutts||O.attributes[ne].uri===u.ns_tts){var ce=O.attributes[ne].uri+" "+O.attributes[ne].local;this.styleAttrs[ce]=O.attributes[ne].value}};function b(){this.regions={}}function A(O,Q){_.call(this,"image"),this.src=O,this.type=Q}A.prototype.initFromNode=function(O,Q,ne,ce,W){this.src="src"in ne.attributes?ne.attributes.src.value:null,this.src||R(W,"Invalid image@src attribute"),this.type="type"in ne.attributes?ne.attributes.type.value:null,this.type||R(W,"Invalid image@type attribute"),v.prototype.initFromNode.call(this,O,Q,ne,W),p.prototype.initFromNode.call(this,O,Q,ne,W),c.prototype.initFromNode.call(this,O,Q,ne,W),f.prototype.initFromNode.call(this,O,Q,ne,W),this.lang=ce};function _(O){this.kind=O}function h(O){this.id=O}h.prototype.initFromNode=function(O,Q,ne,ce){this.id=U(ne)};function f(O){this.regionID=O}f.prototype.initFromNode=function(O,Q,ne,ce){this.regionID=j(ne)};function v(O){this.styleAttrs=O}v.prototype.initFromNode=function(O,Q,ne,ce){this.styleAttrs=se(ne,ce),O.head!==null&&O.head.styling!==null&&ge(O.head.styling,Y(ne),this.styleAttrs,ce)};function c(O){this.sets=O}c.prototype.initFromNode=function(O,Q,ne,ce){this.sets=[]};function S(O){this.contents=O}S.prototype.initFromNode=function(O,Q,ne,ce){this.contents=[]};function p(O,Q,ne){this.explicit_begin=O,this.explicit_end=Q,this.explicit_dur=ne}p.prototype.initFromNode=function(O,Q,ne,ce){var W=oe(O,Q,ne,ce);this.explicit_begin=W.explicit_begin,this.explicit_end=W.explicit_end,this.explicit_dur=W.explicit_dur,this.timeContainer=X(ne,ce)};function C(){_.call(this,"body")}C.prototype.initFromNode=function(O,Q,ne,ce){v.prototype.initFromNode.call(this,O,null,Q,ce),p.prototype.initFromNode.call(this,O,null,Q,ce),c.prototype.initFromNode.call(this,O,null,Q,ce),f.prototype.initFromNode.call(this,O,null,Q,ce),S.prototype.initFromNode.call(this,O,null,Q,ce),this.lang=ne};function x(){_.call(this,"div")}x.prototype.initFromNode=function(O,Q,ne,ce,W){v.prototype.initFromNode.call(this,O,Q,ne,W),p.prototype.initFromNode.call(this,O,Q,ne,W),c.prototype.initFromNode.call(this,O,Q,ne,W),f.prototype.initFromNode.call(this,O,Q,ne,W),S.prototype.initFromNode.call(this,O,Q,ne,W),this.lang=ce};function V(){_.call(this,"p")}V.prototype.initFromNode=function(O,Q,ne,ce,W){v.prototype.initFromNode.call(this,O,Q,ne,W),p.prototype.initFromNode.call(this,O,Q,ne,W),c.prototype.initFromNode.call(this,O,Q,ne,W),f.prototype.initFromNode.call(this,O,Q,ne,W),S.prototype.initFromNode.call(this,O,Q,ne,W),this.lang=ce};function H(){_.call(this,"span")}H.prototype.initFromNode=function(O,Q,ne,ce,W,B){v.prototype.initFromNode.call(this,O,Q,ne,B),p.prototype.initFromNode.call(this,O,Q,ne,B),c.prototype.initFromNode.call(this,O,Q,ne,B),f.prototype.initFromNode.call(this,O,Q,ne,B),S.prototype.initFromNode.call(this,O,Q,ne,B),this.space=W,this.lang=ce};function te(){_.call(this,"span")}te.prototype.initFromText=function(O,Q,ne,ce,W,B){p.prototype.initFromNode.call(this,O,Q,null,B),this.text=ne,this.space=W,this.lang=ce};function w(){_.call(this,"br")}w.prototype.initFromNode=function(O,Q,ne,ce,W){f.prototype.initFromNode.call(this,O,Q,ne,W),p.prototype.initFromNode.call(this,O,Q,ne,W),this.lang=ce};function F(){}F.prototype.createDefaultRegion=function(O){var Q=new F;return h.call(Q,""),v.call(Q,{}),c.call(Q,[]),p.call(Q,0,Number.POSITIVE_INFINITY,null),this.lang=O,Q},F.prototype.initFromNode=function(O,Q,ne,ce){h.prototype.initFromNode.call(this,O,null,Q,ce),p.prototype.initFromNode.call(this,O,null,Q,ce),c.prototype.initFromNode.call(this,O,null,Q,ce),this.styleAttrs=se(Q,ce),this.styleRefs=Y(Q),this.lang=ne};function M(){}M.prototype.initFromNode=function(O,Q,ne,ce){p.prototype.initFromNode.call(this,O,Q,ne,ce);var W=se(ne,ce);this.qname=null,this.value=null;for(var B in W)if(W.hasOwnProperty(B)){if(this.qname){R(ce,"More than one style specified on set");break}this.qname=B,this.value=W[B]}};function U(O){return O&&"xml:id"in O.attributes&&O.attributes["xml:id"].value||null}function j(O){return O&&"region"in O.attributes?O.attributes.region.value:""}function X(O,Q){var ne=O&&"timeContainer"in O.attributes?O.attributes.timeContainer.value:null;return!ne||ne==="par"?"par":ne==="seq"?"seq":(R(Q,"Illegal value of timeContainer (assuming 'par')"),"par")}function Y(O){return O&&"style"in O.attributes?O.attributes.style.value.split(" "):[]}function se(O,Q){var ne={};if(O!==null)for(var ce in O.attributes){var W=O.attributes[ce].uri+" "+O.attributes[ce].local,B=m.byQName[W];if(B!==void 0){var D=B.parse(O.attributes[ce].value);D!==null?(ne[W]=D,B===m.byName.zIndex&&K(Q,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):R(Q,"Cannot parse styling attribute "+W+" --> "+O.attributes[ce].value)}}return ne}function G(O,Q,ne){for(var ce in O.attributes)if(O.attributes[ce].uri===Q&&O.attributes[ce].local===ne)return O.attributes[ce].value;return null}function ee(O,Q){var ne=G(O,u.ns_ittp,"aspectRatio");ne===null&&(ne=G(O,u.ns_ttp,"displayAspectRatio"));var ce=null;if(ne!==null){var W=/(\d+)\s+(\d+)/,B=W.exec(ne);if(B!==null){var D=parseInt(B[1]),q=parseInt(B[2]);D!==0&&q!==0?ce=D/q:R(Q,"Illegal aspectRatio values (ignoring)")}else R(Q,"Malformed aspectRatio attribute (ignoring)")}return ce}function J(O,Q){var ne=G(O,u.ns_ttp,"cellResolution"),ce=15,W=32;if(ne!==null){var B=/(\d+) (\d+)/,D=B.exec(ne);D!==null?(W=parseInt(D[1]),ce=parseInt(D[2])):K(Q,"Malformed cellResolution value (using initial value instead)")}return{w:W,h:ce}}function ie(O,Q){var ne=G(O,u.ns_ttp,"frameRate"),ce=30,W;if(ne!==null){var B=/(\d+)/;W=B.exec(ne),W!==null?ce=parseInt(W[1]):K(Q,"Malformed frame rate attribute (using initial value instead)")}var D=G(O,u.ns_ttp,"frameRateMultiplier"),q=1;if(D!==null){var me=/(\d+) (\d+)/;W=me.exec(D),W!==null?q=parseInt(W[1])/parseInt(W[2]):K(Q,"Malformed frame rate multiplier attribute (using initial value instead)")}var de=q*ce,ve=1,Se=G(O,u.ns_ttp,"tickRate");if(Se===null)ne!==null&&(ve=de);else{var be=/(\d+)/;W=be.exec(Se),W!==null?ve=parseInt(W[1]):K(Q,"Malformed tick rate attribute (using initial value instead)")}return{effectiveFrameRate:de,tickRate:ve}}function ue(O,Q){var ne=G(O,u.ns_tts,"extent");if(ne===null)return null;var ce=ne.split(" ");if(ce.length!==2)return K(Q,"Malformed extent (ignoring)"),null;var W=y.parseLength(ce[0]),B=y.parseLength(ce[1]);return!B||!W?(K(Q,"Malformed extent values (ignoring)"),null):{h:B,w:W}}function ae(O,Q,ne){var ce=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/,W=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/,B=/^(\d+(?:\.\d+)?)f$/,D=/^(\d+(?:\.\d+)?)t$/,q=/^(\d+(?:\.\d+)?)ms$/,me=/^(\d+(?:\.\d+)?)s$/,de=/^(\d+(?:\.\d+)?)h$/,ve=/^(\d+(?:\.\d+)?)m$/,Se,be=null;return(Se=B.exec(ne))!==null?Q!==null&&(be=parseFloat(Se[1])/Q):(Se=D.exec(ne))!==null?O!==null&&(be=parseFloat(Se[1])/O):(Se=q.exec(ne))!==null?be=parseFloat(Se[1])/1e3:(Se=me.exec(ne))!==null?be=parseFloat(Se[1]):(Se=de.exec(ne))!==null?be=parseFloat(Se[1])*3600:(Se=ve.exec(ne))!==null?be=parseFloat(Se[1])*60:(Se=ce.exec(ne))!==null?be=parseInt(Se[1])*3600+parseInt(Se[2])*60+parseFloat(Se[3]):(Se=W.exec(ne))!==null&&Q!==null&&(be=parseInt(Se[1])*3600+parseInt(Se[2])*60+parseInt(Se[3])+(Se[4]===null?0:parseInt(Se[4])/Q)),be}function oe(O,Q,ne,ce){var W=null;ne&&"begin"in ne.attributes&&(W=ae(O.tickRate,O.effectiveFrameRate,ne.attributes.begin.value),W===null&&K(ce,"Malformed begin value "+ne.attributes.begin.value+" (using 0)"));var B=null;ne&&"dur"in ne.attributes&&(B=ae(O.tickRate,O.effectiveFrameRate,ne.attributes.dur.value),B===null&&K(ce,"Malformed dur value "+ne.attributes.dur.value+" (ignoring)"));var D=null;return ne&&"end"in ne.attributes&&(D=ae(O.tickRate,O.effectiveFrameRate,ne.attributes.end.value),D===null&&K(ce,"Malformed end value (ignoring)")),{explicit_begin:W,explicit_end:D,explicit_dur:B}}function Z(O,Q,ne){for(;Q.styleRefs.length>0;){var ce=Q.styleRefs.pop();if(!(ce in O.styles)){R(ne,"Non-existant style id referenced");continue}Z(O,O.styles[ce],ne),le(O.styles[ce].styleAttrs,Q.styleAttrs)}}function ge(O,Q,ne,ce){for(var W=Q.length-1;W>=0;W--){var B=Q[W];if(!(B in O.styles)){R(ce,"Non-existant style id referenced");continue}le(O.styles[B].styleAttrs,ne)}}function le(O,Q){for(var ne in O)O.hasOwnProperty(ne)&&(ne in Q||(Q[ne]=O[ne]))}function z(O,Q){if(O&&O.info&&O.info(Q))throw Q}function K(O,Q){if(O&&O.warn&&O.warn(Q))throw Q}function R(O,Q){if(O&&O.error&&O.error(Q))throw Q}function L(O,Q){throw O&&O.fatal&&O.fatal(Q),Q}function $(O,Q){for(var ne=0,ce=O.length-1,W;ne<=ce;){W=Math.floor((ne+ce)/2);var B=O[W];if(B<Q)ne=W+1;else if(B>Q)ce=W-1;else return{found:!0,index:W}}return{found:!1,index:ne}}})(g,typeof sax>"u"?r("./node_modules/sax/lib/sax.js"):sax,typeof imscNames>"u"?r("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscStyles>"u"?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles,typeof imscUtils>"u"?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/html.js":function(I,g,r){(function(o,l,u){o.render=function(w,F,M,U,j,X,Y,se,G){var ee=U||F.clientHeight,J=j||F.clientWidth;if(w.aspectRatio!==null){var ie=ee*w.aspectRatio;ie>J?ee=Math.round(J/w.aspectRatio):J=ie}var ue=document.createElement("div");ue.style.position="relative",ue.style.width=J+"px",ue.style.height=ee+"px",ue.style.margin="auto",ue.style.top=0,ue.style.bottom=0,ue.style.left=0,ue.style.right=0,ue.style.zIndex=0;var ae={h:ee,w:J,regionH:null,regionW:null,imgResolver:M,displayForcedOnlyMode:X||!1,isd:w,errorHandler:Y,previousISDState:se,enableRollUp:G||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(F.appendChild(ue),"contents"in w)for(var oe=0;oe<w.contents.length;oe++)m(ae,ue,w.contents[oe],w);return ae.currentISDState};function m(w,F,M,U){var j;if(M.kind==="region")j=document.createElement("div"),j.style.position="absolute";else if(M.kind==="body")j=document.createElement("div");else if(M.kind==="div")j=document.createElement("div");else if(M.kind==="image"){if(j=document.createElement("img"),w.imgResolver!==null&&M.src!==null){var X=w.imgResolver(M.src,j);X&&(j.src=X),j.height=w.regionH,j.width=w.regionW}}else if(M.kind==="p")j=document.createElement("p");else if(M.kind==="span")if(M.styleAttrs[u.byName.ruby.qname]==="container")j=document.createElement("ruby"),w.ruby=!0;else if(M.styleAttrs[u.byName.ruby.qname]==="base")j=document.createElement("rb");else if(M.styleAttrs[u.byName.ruby.qname]==="text")j=document.createElement("rt");else if(M.styleAttrs[u.byName.ruby.qname]==="baseContainer")j=document.createElement("rbc");else if(M.styleAttrs[u.byName.ruby.qname]==="textContainer")j=document.createElement("rtc");else{if(M.styleAttrs[u.byName.ruby.qname]==="delimiter")return;j=document.createElement("span")}else M.kind==="br"&&(j=document.createElement("br"));if(!j){te(w.errorHandler,"Error processing ISD element kind: "+M.kind);return}if(M.lang&&(M.kind==="region"||M.lang!==U.lang)&&(j.lang=M.lang),F.appendChild(j),j.style.margin="0",M.kind==="region"){var Y=M.styleAttrs[u.byName.writingMode.qname];Y==="lrtb"||Y==="lr"?(w.ipd="lr",w.bpd="tb"):Y==="rltb"||Y==="rl"?(w.ipd="rl",w.bpd="tb"):Y==="tblr"?(w.ipd="tb",w.bpd="lr"):(Y==="tbrl"||Y==="tb")&&(w.ipd="tb",w.bpd="rl")}else if(M.kind==="p"&&w.bpd==="tb"){var se=M.styleAttrs[u.byName.direction.qname];w.ipd=se==="ltr"?"lr":"rl"}for(var G=0;G<c.length;G++){var ee=c[G],J=M.styleAttrs[ee.qname];J!==void 0&&ee.map!==null&&ee.map(w,j,M,J)}var ie=j,ue=M.styleAttrs[u.byName.linePadding.qname];if(ue&&!ue.isZero()){var ae=ue.toUsedLength(w.w,w.h);if(ae>0){var oe=Math.ceil(ae)+"px";w.bpd==="tb"?(ie.style.paddingLeft=oe,ie.style.paddingRight=oe):(ie.style.paddingTop=oe,ie.style.paddingBottom=oe),w.lp=ue}}var Z=M.styleAttrs[u.byName.multiRowAlign.qname];if(Z&&Z!=="auto"){var ge=document.createElement("span");ge.style.display="inline-block",ge.style.textAlign=Z,j.appendChild(ge),ie=ge,w.mra=Z}var le=M.styleAttrs[u.byName.rubyReserve.qname];if(le&&le[0]!=="none"&&(w.rubyReserve=le),M.styleAttrs[u.byName.fillLineGap.qname]&&(w.flg=!0),M.kind==="span"&&M.text){var z=M.styleAttrs[u.byName.textEmphasis.qname];if(z&&z.style!=="none"&&(w.textEmphasis=!0),u.byName.textCombine.qname in M.styleAttrs&&M.styleAttrs[u.byName.textCombine.qname]==="all")j.textContent=M.text,z&&f(w,j,M,z);else for(var K="",R=0;R<M.text.length;R++){K+=M.text.charAt(R);var L=M.text.charCodeAt(R);if(L<55296||L>56319||R===M.text.length-1){var $=document.createElement("span");$.textContent=K,z&&f(w,$,M,z),j.appendChild($),K="",$._isd_element=M}}}if("contents"in M)for(var O=0;O<M.contents.length;O++)m(w,ie,M.contents[O],M);var Q=[];if(M.kind==="p"&&(_(w,ie,Q,null),w.rubyReserve&&(d(Q,w),w.rubyReserve=null),(w.ruby||w.rubyReserve)&&(i(Q,w),w.ruby=null),w.textEmphasis&&(n(Q,w),w.textEmphasis=null),w.mra&&(e(Q),w.mra=null),w.lp&&(t(Q,w.lp.toUsedLength(w.w,w.h),w),w.lp=null),y(Q),w.flg)){var ne=A(ie.getBoundingClientRect(),w);P(Q,ne.before,ne.after,w,ie),w.flg=null}if(M.kind==="region"&&w.bpd==="tb"&&w.enableRollUp&&M.contents.length>0&&M.styleAttrs[u.byName.displayAlign.qname]==="after"){_(w,ie,Q,null);var ce=M.id===""?"_":M.id,W=new b(ce,Q);if(w.currentISDState[W.id]=W,w.previousISDState&&W.id in w.previousISDState&&w.previousISDState[W.id].plist.length>0&&W.plist.length>1&&W.plist[W.plist.length-2].text===w.previousISDState[W.id].plist[w.previousISDState[W.id].plist.length-1].text){var B=j.firstElementChild,D=W.plist[W.plist.length-1].after-W.plist[W.plist.length-1].before;B.style.bottom="-"+D+"px",B.style.transition="transform 0.4s",B.style.position="relative",B.style.transform="translateY(-"+D+"px)"}}}function y(w){for(var F=0;F<w.length;F++)for(var M=w[F],U=1;U<M.elements.length;){var j=M.elements[U-1],X=M.elements[U];if(E(j.node,X.node)){M.elements.splice(U,1);continue}else U++}for(var Y,se,G=[],ee=0;ee<w.length;ee++)for(var J=0;J<w[ee].elements.length;J++)Y=w[ee].elements[J].node,se=T(Y,G,!1),se&&(Y.style.backgroundColor=se);for(var ie=0;ie<G.length;ie++)G[ie].style.backgroundColor=""}function T(w,F,M){if(w.style.backgroundColor)return M&&!F.includes(w)&&F.push(w),w.style.backgroundColor;if(w.parentElement.nodeName==="SPAN")return T(w.parentElement,F,!0)}function E(w,F){if(w.tagName==="SPAN"&&F.tagName==="SPAN"&&w._isd_element===F._isd_element){w.textContent+=F.textContent;for(var M=0;M<F.style.length;M++){var U=F.style[M];(U.indexOf("border")>=0||U.indexOf("padding")>=0||U.indexOf("margin")>=0)&&(w.style[U]=F.style[U])}return F.parentElement.removeChild(F),!0}return!1}function t(w,F,M){if(w!==null)for(var U=0;U<w.length;U++){var j=w[U].elements.length,X=Math.ceil(F)+"px",Y="-"+Math.ceil(F)+"px";if(j!==0){var se=w[U].elements[w[U].start_elem],G=w[U].elements[w[U].end_elem];if(se===G&&(elementBoundingRect=se.node.getBoundingClientRect(),elementBoundingRect.width==0||elementBoundingRect.height==0))continue;M.ipd==="lr"?(se.node.style.marginLeft=Y,se.node.style.paddingLeft=X):M.ipd==="rl"?(se.node.style.paddingRight=X,se.node.style.marginRight=Y):M.ipd==="tb"&&(se.node.style.paddingTop=X,se.node.style.marginTop=Y),M.ipd==="lr"?(G.node.style.marginRight=Y,G.node.style.paddingRight=X):M.ipd==="rl"?(G.node.style.paddingLeft=X,G.node.style.marginLeft=Y):M.ipd==="tb"&&(G.node.style.paddingBottom=X,G.node.style.marginBottom=Y)}}}function e(w){for(var F=0;F<w.length-1;F++){var M=w[F].elements.length;if(M!==0&&w[F].br===!1){var U=document.createElement("br"),j=w[F].elements[M-1].node;j.parentElement.insertBefore(U,j.nextSibling)}}}function n(w,F){for(var M=0;M<w.length;M++)for(var U=0;U<w[M].te.length;U++)if(!(w[M].te[U].style[H]&&w[M].te[U].style[H]!=="none")){var j;F.bpd==="tb"?j=M===0?"left over":"left under":F.bpd==="rl"?j=M===0?"right under":"left under":j=M===0?"left under":"right under",w[M].te[U].style[H]=j}}function i(w,F){for(var M=0;M<w.length;M++)for(var U=0;U<w[M].rbc.length;U++)if(!w[M].rbc[U].style[x]){var j;C?j=M===0?"before":"after":F.bpd==="tb"||F.bpd==="rl"?j=M===0?"over":"under":j=M===0?"under":"over",w[M].rbc[U].style[x]=j}}function d(w,F){for(var M=0;M<w.length;M++){var U=document.createElement("ruby"),j=document.createElement("rb");j.textContent="\u200B",U.appendChild(j);var X,Y,se=F.rubyReserve[1].toUsedLength(F.w,F.h)+"px";if(F.rubyReserve[0]==="both"||F.rubyReserve[0]==="outside"&&w.length==1)X=document.createElement("rtc"),X.style[x]=C?"after":"under",X.textContent="\u200B",X.style.fontSize=se,Y=document.createElement("rtc"),Y.style[x]=C?"before":"over",Y.textContent="\u200B",Y.style.fontSize=se,U.appendChild(X),U.appendChild(Y);else{X=document.createElement("rtc"),X.textContent="\u200B",X.style.fontSize=se;var G;F.rubyReserve[0]==="after"||F.rubyReserve[0]==="outside"&&M>0?G=C?"after":F.bpd==="tb"||F.bpd==="rl"?"under":"over":G=C?"before":F.bpd==="tb"||F.bpd==="rl"?"over":"under",X.style[x]=G,U.appendChild(X)}for(var ee=null,J=0;J<w[M].rbc.length;J++)if(w[M].rbc[J].localName==="ruby"){ee=w[M].rbc[J];for(var ie=0;ie<ee.style.length;ie++)U.style.setProperty(ee.style.item(ie),ee.style.getPropertyValue(ee.style.item(ie)));break}ee=ee||w[M].elements[0].node,ee.parentElement.insertBefore(U,ee)}}function P(w,F,M,U,j){for(var X=Math.sign(M-F),Y=0;Y<=w.length;Y++){var se;Y===0?se=Math.round(F):Y===w.length?se=Math.round(M):se=Math.round((w[Y-1].after+w[Y].before)/2);var G,ee,J;if(Y>0&&w[Y-1])for(ee=0;ee<w[Y-1].elements.length;ee++)J=w[Y-1].elements[ee],G=X*(se-J.after)+"px",U.bpd==="lr"?J.node.style.paddingRight=G:U.bpd==="rl"?J.node.style.paddingLeft=G:U.bpd==="tb"&&(J.node.style.paddingBottom=G);if(Y<w.length)for(ee=0;ee<w[Y].elements.length;ee++)J=w[Y].elements[ee],G=X*(J.before-se)+"px",U.bpd==="lr"?J.node.style.paddingLeft=G:U.bpd==="rl"?J.node.style.paddingRight=G:U.bpd==="tb"&&(J.node.style.paddingTop=G)}}function b(w,F){this.id=w,this.plist=F}function A(w,F){var M={before:null,after:null,start:null,end:null};return F.bpd==="tb"?(M.before=w.top,M.after=w.bottom,F.ipd==="lr"?(M.start=w.left,M.end=w.right):(M.start=w.right,M.end=w.left)):F.bpd==="lr"?(M.before=w.left,M.after=w.right,M.start=w.top,M.end=w.bottom):F.bpd==="rl"&&(M.before=w.right,M.after=w.left,M.start=w.top,M.end=w.bottom),M}function _(w,F,M,U){if(!(F.localName==="rt"||F.localName==="rtc")){var j=F.style.backgroundColor||U;if(F.childElementCount===0)if(F.localName==="span"||F.localName==="rb"){var X=F.getBoundingClientRect(),Y=A(X,w);if(M.length===0||!h(Y.before,Y.after,M[M.length-1].before,M[M.length-1].after))M.push({before:Y.before,after:Y.after,start:Y.start,end:Y.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});else{var se=Math.sign(Y.after-Y.before),G=Math.sign(Y.end-Y.start);se*(Y.before-M[M.length-1].before)<0&&(M[M.length-1].before=Y.before),se*(Y.after-M[M.length-1].after)>0&&(M[M.length-1].after=Y.after),G*(Y.start-M[M.length-1].start)<0&&(M[M.length-1].start=Y.start,M[M.length-1].start_elem=M[M.length-1].elements.length),G*(Y.end-M[M.length-1].end)>0&&(M[M.length-1].end=Y.end,M[M.length-1].end_elem=M[M.length-1].elements.length)}M[M.length-1].text+=F.textContent,M[M.length-1].elements.push({node:F,bgcolor:j,before:Y.before,after:Y.after})}else F.localName==="br"&&M.length!==0&&(M[M.length-1].br=!0);else for(var ee=F.firstChild;ee;)ee.nodeType===Node.ELEMENT_NODE&&(_(w,ee,M,j),ee.localName==="ruby"||ee.localName==="rtc"?M.length>0&&M[M.length-1].rbc.push(ee):ee.localName==="span"&&ee.style[V]&&ee.style[V]!=="none"&&M.length>0&&M[M.length-1].te.push(ee)),ee=ee.nextSibling}}function h(w,F,M,U){return F<U&&w>M||U<=F&&M>=w}function f(w,F,M,U){if(U.style!=="none"&&(U.style==="auto"?F.style[V]="filled":F.style[V]=U.style+" "+U.symbol,U.position==="before"||U.position==="after")){var j;w.bpd==="tb"?j=U.position==="before"?"left over":"left under":w.bpd==="rl"?j=U.position==="before"?"right under":"left under":j=U.position==="before"?"left under":"right under",F.style[H]=j}}function v(w,F){this.qname=w,this.map=F}for(var c=[new v("http://www.w3.org/ns/ttml#styling backgroundColor",function(w,F,M,U){U[3]!==0&&(F.style.backgroundColor="rgba("+U[0].toString()+","+U[1].toString()+","+U[2].toString()+","+(U[3]/255).toString()+")")}),new v("http://www.w3.org/ns/ttml#styling color",function(w,F,M,U){F.style.color="rgba("+U[0].toString()+","+U[1].toString()+","+U[2].toString()+","+(U[3]/255).toString()+")"}),new v("http://www.w3.org/ns/ttml#styling direction",function(w,F,M,U){F.style.direction=U}),new v("http://www.w3.org/ns/ttml#styling display",function(w,F,M,U){}),new v("http://www.w3.org/ns/ttml#styling displayAlign",function(w,F,M,U){F.style.display="flex",F.style.flexDirection="column",U==="before"?F.style.justifyContent="flex-start":U==="center"?F.style.justifyContent="center":U==="after"&&(F.style.justifyContent="flex-end")}),new v("http://www.w3.org/ns/ttml#styling extent",function(w,F,M,U){w.regionH=U.h.toUsedLength(w.w,w.h),w.regionW=U.w.toUsedLength(w.w,w.h);var j=0,X=0,Y=M.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];Y&&(j=Y[0].toUsedLength(w.w,w.h)+Y[2].toUsedLength(w.w,w.h),X=Y[1].toUsedLength(w.w,w.h)+Y[3].toUsedLength(w.w,w.h)),F.style.height=w.regionH-j+"px",F.style.width=w.regionW-X+"px"}),new v("http://www.w3.org/ns/ttml#styling fontFamily",function(w,F,M,U){for(var j=[],X=0;X<U.length;X++)U[X]==="monospaceSerif"?(j.push("Courier New"),j.push('"Liberation Mono"'),j.push("Courier"),j.push("monospace")):U[X]==="proportionalSansSerif"?(j.push("Arial"),j.push("Helvetica"),j.push('"Liberation Sans"'),j.push("sans-serif")):U[X]==="monospace"?j.push("monospace"):U[X]==="sansSerif"?j.push("sans-serif"):U[X]==="serif"?j.push("serif"):U[X]==="monospaceSansSerif"?(j.push("Consolas"),j.push("monospace")):U[X]==="proportionalSerif"?j.push("serif"):j.push(U[X]);if(j.length>0){for(var Y=[j[0]],se=1;se<j.length;se++)Y.indexOf(j[se])==-1&&Y.push(j[se]);j=Y}F.style.fontFamily=j.join(",")}),new v("http://www.w3.org/ns/ttml#styling shear",function(w,F,M,U){if(U!==0){var j=U*-.9;w.bpd==="tb"?F.style.transform="skewX("+j+"deg)":F.style.transform="skewY("+j+"deg)"}}),new v("http://www.w3.org/ns/ttml#styling fontSize",function(w,F,M,U){F.style.fontSize=U.toUsedLength(w.w,w.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling fontStyle",function(w,F,M,U){F.style.fontStyle=U}),new v("http://www.w3.org/ns/ttml#styling fontWeight",function(w,F,M,U){F.style.fontWeight=U}),new v("http://www.w3.org/ns/ttml#styling lineHeight",function(w,F,M,U){U==="normal"?F.style.lineHeight="normal":F.style.lineHeight=U.toUsedLength(w.w,w.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling opacity",function(w,F,M,U){F.style.opacity=U}),new v("http://www.w3.org/ns/ttml#styling origin",function(w,F,M,U){F.style.top=U.h.toUsedLength(w.w,w.h)+"px",F.style.left=U.w.toUsedLength(w.w,w.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling overflow",function(w,F,M,U){F.style.overflow=U}),new v("http://www.w3.org/ns/ttml#styling padding",function(w,F,M,U){var j=[];j[0]=U[0].toUsedLength(w.w,w.h)+"px",j[1]=U[3].toUsedLength(w.w,w.h)+"px",j[2]=U[2].toUsedLength(w.w,w.h)+"px",j[3]=U[1].toUsedLength(w.w,w.h)+"px",F.style.padding=j.join(" ")}),new v("http://www.w3.org/ns/ttml#styling position",function(w,F,M,U){F.style.top=U.h.toUsedLength(w.w,w.h)+"px",F.style.left=U.w.toUsedLength(w.w,w.h)+"px"}),new v("http://www.w3.org/ns/ttml#styling rubyAlign",function(w,F,M,U){F.style.rubyAlign=U==="spaceAround"?"space-around":"center"}),new v("http://www.w3.org/ns/ttml#styling rubyPosition",function(w,F,M,U){if(U==="before"||U==="after"){var j;C?j=U:w.bpd==="tb"||w.bpd==="rl"?j=U==="before"?"over":"under":j=U==="before"?"under":"over",F.parentElement.style[x]=j}}),new v("http://www.w3.org/ns/ttml#styling showBackground",null),new v("http://www.w3.org/ns/ttml#styling textAlign",function(w,F,M,U){var j;U==="start"?j=w.ipd==="rl"?"right":"left":U==="end"?j=w.ipd==="rl"?"left":"right":j=U,F.style.textAlign=j}),new v("http://www.w3.org/ns/ttml#styling textDecoration",function(w,F,M,U){F.style.textDecoration=U.join(" ").replace("lineThrough","line-through")}),new v("http://www.w3.org/ns/ttml#styling textOutline",function(w,F,M,U){}),new v("http://www.w3.org/ns/ttml#styling textShadow",function(w,F,M,U){var j=M.styleAttrs[u.byName.textOutline.qname];if(U==="none"&&j==="none")F.style.textShadow="";else{var X=[];if(j!=="none"){var Y="rgba("+j.color[0].toString()+","+j.color[1].toString()+","+j.color[2].toString()+","+(j.color[3]/255).toString()+")";X.push("1px 1px 1px "+Y),X.push("-1px 1px 1px "+Y),X.push("1px -1px 1px "+Y),X.push("-1px -1px 1px "+Y)}if(U!=="none")for(var se=0;se<U.length;se++)X.push(U[se].x_off.toUsedLength(w.w,w.h)+"px "+U[se].y_off.toUsedLength(w.w,w.h)+"px "+U[se].b_radius.toUsedLength(w.w,w.h)+"px rgba("+U[se].color[0].toString()+","+U[se].color[1].toString()+","+U[se].color[2].toString()+","+(U[se].color[3]/255).toString()+")");F.style.textShadow=X.join(",")}}),new v("http://www.w3.org/ns/ttml#styling textCombine",function(w,F,M,U){F.style.textCombineUpright=U}),new v("http://www.w3.org/ns/ttml#styling textEmphasis",function(w,F,M,U){}),new v("http://www.w3.org/ns/ttml#styling unicodeBidi",function(w,F,M,U){var j;U==="bidiOverride"?j="bidi-override":j=U,F.style.unicodeBidi=j}),new v("http://www.w3.org/ns/ttml#styling visibility",function(w,F,M,U){F.style.visibility=U}),new v("http://www.w3.org/ns/ttml#styling wrapOption",function(w,F,M,U){U==="wrap"?M.space==="preserve"?F.style.whiteSpace="pre-wrap":F.style.whiteSpace="normal":M.space==="preserve"?F.style.whiteSpace="pre":F.style.whiteSpace="noWrap"}),new v("http://www.w3.org/ns/ttml#styling writingMode",function(w,F,M,U){var j;U==="lrtb"||U==="lr"||U==="rltb"||U==="rl"?F.style.writingMode="horizontal-tb":U==="tblr"?F.style.writingMode="vertical-lr":(U==="tbrl"||U==="tb")&&(F.style.writingMode="vertical-rl")}),new v("http://www.w3.org/ns/ttml#styling zIndex",function(w,F,M,U){F.style.zIndex=U}),new v("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(w,F,M,U){w.displayForcedOnlyMode&&U===!1&&(F.style.visibility="hidden")})],S={},p=0;p<c.length;p++)S[c[p].qname]=c[p];var C="webkitRubyPosition"in window.getComputedStyle(document.documentElement),x=C?"webkitRubyPosition":"rubyPosition",V="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",H="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function te(w,F){if(w&&w.error&&w.error(F))throw F}})(g,typeof imscNames>"u"?r("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscStyles>"u"?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles,typeof imscUtils>"u"?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/isd.js":function(I,g,r){(function(o,l,u,m){o.generateISD=function(_,h,f){var v=new n(_),c={},S={},p={},C=_.head.styling.initials[u.byName.showBackground.qname],x=_.head.styling.initials[u.byName.backgroundColor.qname];for(var V in _.head.layout.regions)if(_.head.layout.regions.hasOwnProperty(V)){var H=_.head.layout.regions[V],te=H.styleAttrs[u.byName.showBackground.qname]||C,w=H.styleAttrs[u.byName.backgroundColor.qname]||x;p[H.id]=(te==="always"||te===void 0)&&w!==void 0&&!(h<H.begin||h>=H.end)}_.body&&_.body.regionID&&(p[_.body.regionID]=!0);function F(j,X){function Y(ee){return!(j<ee.begin||j>=ee.end)}if(X.contents){var se={};for(var G in X)X.hasOwnProperty(G)&&(se[G]=X[G]);return se.contents=[],X.contents.filter(Y).forEach(function(ee){var J=F(j,ee);J.regionID&&(p[J.regionID]=!0),J!==null&&se.contents.push(J)}),se}else return X}_.body!==null?S=F(h,_.body):S=null,p[""]!==void 0&&(p[""]=!0);for(var M in p)if(p[M]){var U=T(_,h,_.head.layout.regions[M],S,null,"",_.head.layout.regions[M],f,c);U!==null&&v.contents.push(U.element)}return v};var y=[u.byName.color.qname,u.byName.textCombine.qname,u.byName.textDecoration.qname,u.byName.textEmphasis.qname,u.byName.textOutline.qname,u.byName.textShadow.qname];function T(_,h,f,v,c,S,p,C,x){if(h<p.begin||h>=p.end)return null;var V="regionID"in p&&p.regionID!==""?p.regionID:S;if(c!==null&&V!==f.id&&(!("contents"in p)||"contents"in p&&p.contents.length===0||V!==""))return null;var H=new i(p);if("sets"in p)for(var te=0;te<p.sets.length;te++)h<p.sets[te].begin||h>=p.sets[te].end||(H.styleAttrs[p.sets[te].qname]=p.sets[te].value);var w={};for(var F in H.styleAttrs)if(H.styleAttrs.hasOwnProperty(F)&&(w[F]=!0,H.kind==="region"&&F===u.byName.writingMode.qname&&!(u.byName.direction.qname in H.styleAttrs))){var M=H.styleAttrs[F];M==="lrtb"||M==="lr"?H.styleAttrs[u.byName.direction.qname]="ltr":(M==="rltb"||M==="rl")&&(H.styleAttrs[u.byName.direction.qname]="rtl")}if(c!==null)for(var U=0;U<u.all.length;U++){var j=u.all[U];if(j.qname===u.byName.textDecoration.qname){var X=c.styleAttrs[j.qname],Y=H.styleAttrs[j.qname],se=[];Y===void 0?se=X:Y.indexOf("none")===-1?((Y.indexOf("noUnderline")===-1&&X.indexOf("underline")!==-1||Y.indexOf("underline")!==-1)&&se.push("underline"),(Y.indexOf("noLineThrough")===-1&&X.indexOf("lineThrough")!==-1||Y.indexOf("lineThrough")!==-1)&&se.push("lineThrough"),(Y.indexOf("noOverline")===-1&&X.indexOf("overline")!==-1||Y.indexOf("overline")!==-1)&&se.push("overline")):se.push("none"),H.styleAttrs[j.qname]=se}else if(j.qname===u.byName.fontSize.qname&&!(j.qname in H.styleAttrs)&&H.kind==="span"&&H.styleAttrs[u.byName.ruby.qname]==="textContainer"){var G=c.styleAttrs[u.byName.fontSize.qname];H.styleAttrs[j.qname]=new m.ComputedLength(.5*G.rw,.5*G.rh)}else if(j.qname===u.byName.fontSize.qname&&!(j.qname in H.styleAttrs)&&H.kind==="span"&&H.styleAttrs[u.byName.ruby.qname]==="text"){var ee=c.styleAttrs[u.byName.fontSize.qname];c.styleAttrs[u.byName.ruby.qname]==="textContainer"?H.styleAttrs[j.qname]=ee:H.styleAttrs[j.qname]=new m.ComputedLength(.5*ee.rw,.5*ee.rh)}else j.inherit&&j.qname in c.styleAttrs&&!(j.qname in H.styleAttrs)&&(H.styleAttrs[j.qname]=c.styleAttrs[j.qname])}for(var J=0;J<u.all.length;J++){var ie=u.all[J];if(!(ie.qname in H.styleAttrs)&&!(ie.qname===u.byName.position.qname&&u.byName.origin.qname in H.styleAttrs)&&!(ie.qname===u.byName.origin.qname&&u.byName.position.qname in H.styleAttrs)){var ue=_.head.styling.initials[ie.qname]||ie.initial;if(ue!==null&&(H.kind==="region"||ie.inherit===!1&&ue!==null)){var ae=ie.parse(ue);ae!==null?(H.styleAttrs[ie.qname]=ae,w[ie.qname]=!0):b(C,"Invalid initial value for '"+ie.qname+"' on element '"+H.kind)}}}for(var oe=0;oe<u.all.length;oe++){var Z=u.all[oe];if(Z.qname in w&&Z.compute!==null){var ge=Z.compute(_,c,H,H.styleAttrs[Z.qname],x);ge!==null?H.styleAttrs[Z.qname]=ge:(H.styleAttrs[Z.qname]=Z.compute(_,c,H,Z.parse(Z.initial),x),b(C,"Style '"+Z.qname+"' on element '"+H.kind+"' cannot be computed"))}}if(H.styleAttrs[u.byName.display.qname]==="none")return null;var le=null;c===null?v===null?le=[]:le=[v]:"contents"in p&&(le=p.contents);for(var z=0;le!==null&&z<le.length;z++){var K=T(_,h,f,v,H,V,le[z],C,x);K!==null&&H.contents.push(K.element)}for(var R in H.styleAttrs)if(H.styleAttrs.hasOwnProperty(R)){var L=!1;if(H.kind==="span"){var $=H.styleAttrs[u.byName.ruby.qname];L=($==="container"||$==="textContainer"||$==="baseContainer")&&y.indexOf(R)!==-1,L||(L=$!=="container"&&R===u.byName.rubyAlign.qname),L||(L=!($==="textContainer"||$==="text")&&R===u.byName.rubyPosition.qname)}if(!L){var O=u.byQName[R];"applies"in O&&(L=O.applies.indexOf(H.kind)===-1)}L&&delete H.styleAttrs[R]}var Q=H.styleAttrs[u.byName.ruby.qname];if(H.kind==="p"||H.kind==="span"&&(Q==="textContainer"||Q==="text")){var ne=[];t(H,ne),E(ne),e(H)}return H.kind==="div"&&u.byName.backgroundImage.qname in H.styleAttrs||H.kind==="br"||H.kind==="image"||"contents"in H&&H.contents.length>0||H.kind==="span"&&H.text!==null||H.kind==="region"&&H.styleAttrs[u.byName.showBackground.qname]==="always"?{region_id:V,element:H}:null}function E(_){function h(p){return p.kind==="br"||/[\r\n\t ]$/.test(p.text)}function f(p){return p.kind==="br"||p.space==="preserve"&&/^[\r\n]/.test(p.text)}for(var v,c=0;c<_.length;){if(v=_[c],v.kind==="br"||v.space==="preserve"){c++;continue}var S=v.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(S)&&(c===0||h(_[c-1]))&&(S=S.substring(1)),v.text=S,S.length===0?_.splice(c,1):c++}for(c=0;c<_.length;c++){if(v=_[c],v.kind==="br"||v.space==="preserve"){c++;continue}/[ ]$/.test(v.text)&&(c===_.length-1||f(_[c+1]))&&(v.text=v.text.slice(0,-1))}}function t(_,h){if("contents"in _)for(var f=0;f<_.contents.length;f++){var v=_.contents[f],c=v.styleAttrs[u.byName.ruby.qname];v.kind==="span"&&(c==="textContainer"||c==="text")||("contents"in v?t(v,h):(v.kind==="span"&&v.text.length!==0||v.kind==="br")&&h.push(v))}}function e(_){if(_.kind==="br")return!1;if("text"in _)return _.text.length===0;if("contents"in _){for(var h=_.contents.length;h--;)e(_.contents[h])&&_.contents.splice(h,1);return _.contents.length===0}}function n(_){this.contents=[],this.aspectRatio=_.aspectRatio,this.lang=_.lang}function i(_){this.kind=_.kind||"region",this.lang=_.lang,_.id&&(this.id=_.id),this.styleAttrs={};for(var h in _.styleAttrs)_.styleAttrs.hasOwnProperty(h)&&(this.styleAttrs[h]=_.styleAttrs[h]);"src"in _&&(this.src=_.src),"type"in _&&(this.type=_.type),"text"in _?this.text=_.text:(this.kind==="region"||"contents"in _)&&(this.contents=[]),"space"in _&&(this.space=_.space)}function d(_,h){if(_&&_.info&&_.info(h))throw h}function P(_,h){if(_&&_.warn&&_.warn(h))throw h}function b(_,h){if(_&&_.error&&_.error(h))throw h}function A(_,h){throw _&&_.fatal&&_.fatal(h),h}})(g,typeof imscNames>"u"?r("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscStyles>"u"?r("./node_modules/imsc/src/main/js/styles.js"):imscStyles,typeof imscUtils>"u"?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/main.js":function(I,g,r){g.generateISD=r("./node_modules/imsc/src/main/js/isd.js").generateISD,g.fromXML=r("./node_modules/imsc/src/main/js/doc.js").fromXML,g.renderHTML=r("./node_modules/imsc/src/main/js/html.js").render},"./node_modules/imsc/src/main/js/names.js":function(I,g,r){(function(o){o.ns_tt="http://www.w3.org/ns/ttml",o.ns_tts="http://www.w3.org/ns/ttml#styling",o.ns_ttp="http://www.w3.org/ns/ttml#parameter",o.ns_xml="http://www.w3.org/XML/1998/namespace",o.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",o.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",o.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",o.ns_ebutts="urn:ebu:tt:style"})(g)},"./node_modules/imsc/src/main/js/styles.js":function(I,g,r){(function(o,l,u){function m(E,t,e,n,i,d,P,b){this.name=t,this.ns=E,this.qname=E+" "+t,this.inherit=i,this.animatable=d,this.initial=e,this.applies=n,this.parse=P,this.compute=b}o.all=[new m(l.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,u.parseColor,null),new m(l.ns_tts,"color","white",["span"],!0,!0,u.parseColor,null),new m(l.ns_tts,"direction","ltr",["p","span"],!0,!0,function(E){return E},null),new m(l.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(E){return E},null),new m(l.ns_tts,"displayAlign","before",["region"],!1,!0,function(E){return E},null),new m(l.ns_tts,"extent","auto",["tt","region"],!1,!0,function(E){if(E==="auto")return E;var t=E.split(" ");if(t.length!==2)return null;var e=u.parseLength(t[0]),n=u.parseLength(t[1]);return!n||!e?null:{h:n,w:e}},function(E,t,e,n,i){var d,P;if(n==="auto")d=new u.ComputedLength(0,1);else if(d=u.toComputedLength(n.h.value,n.h.unit,null,E.dimensions.h,null,E.pxLength.h),d===null)return null;if(n==="auto")P=new u.ComputedLength(1,0);else if(P=u.toComputedLength(n.w.value,n.w.unit,null,E.dimensions.w,null,E.pxLength.w),P===null)return null;return{h:d,w:P}}),new m(l.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(E){for(var t=E.split(","),e=[],n=0;n<t.length;n++)t[n].charAt(0)!=="'"&&t[n].charAt(0)!=='"'&&t[n]==="default"?e.push("monospaceSerif"):e.push(t[n]);return e},null),new m(l.ns_tts,"shear","0%",["p"],!0,!0,u.parseLength,function(E,t,e,n){var i;if(n.unit==="%")i=Math.abs(n.value)>100?Math.sign(n.value)*100:n.value;else return null;return i}),new m(l.ns_tts,"fontSize","1c",["span","p"],!0,!0,u.parseLength,function(E,t,e,n,i){var d;return d=u.toComputedLength(n.value,n.unit,t!==null?t.styleAttrs[o.byName.fontSize.qname]:E.cellLength.h,t!==null?t.styleAttrs[o.byName.fontSize.qname]:E.cellLength.h,E.cellLength.h,E.pxLength.h),d}),new m(l.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(E){return E},null),new m(l.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(E){return E},null),new m(l.ns_tts,"lineHeight","normal",["p"],!0,!0,function(E){return E==="normal"?E:u.parseLength(E)},function(E,t,e,n,i){var d;if(n==="normal")d=n;else if(d=u.toComputedLength(n.value,n.unit,e.styleAttrs[o.byName.fontSize.qname],e.styleAttrs[o.byName.fontSize.qname],E.cellLength.h,E.pxLength.h),d===null)return null;return d}),new m(l.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new m(l.ns_tts,"origin","auto",["region"],!1,!0,function(E){if(E==="auto")return E;var t=E.split(" ");if(t.length!==2)return null;var e=u.parseLength(t[0]),n=u.parseLength(t[1]);return!n||!e?null:{h:n,w:e}},function(E,t,e,n,i){var d,P;if(n==="auto")d=new u.ComputedLength(0,0);else if(d=u.toComputedLength(n.h.value,n.h.unit,null,E.dimensions.h,null,E.pxLength.h),d===null)return null;if(n==="auto")P=new u.ComputedLength(0,0);else if(P=u.toComputedLength(n.w.value,n.w.unit,null,E.dimensions.w,null,E.pxLength.w),P===null)return null;return{h:d,w:P}}),new m(l.ns_tts,"overflow","hidden",["region"],!1,!0,function(E){return E},null),new m(l.ns_tts,"padding","0px",["region"],!1,!0,function(E){var t=E.split(" ");if(t.length>4)return null;for(var e=[],n=0;n<t.length;n++){var i=u.parseLength(t[n]);if(!i)return null;e.push(i)}return e},function(E,t,e,n,i){var d;if(n.length===1)d=[n[0],n[0],n[0],n[0]];else if(n.length===2)d=[n[0],n[1],n[0],n[1]];else if(n.length===3)d=[n[0],n[1],n[2],n[1]];else if(n.length===4)d=[n[0],n[1],n[2],n[3]];else return null;var P=e.styleAttrs[o.byName.writingMode.qname];if(P==="lrtb"||P==="lr")d=[d[0],d[3],d[2],d[1]];else if(P==="rltb"||P==="rl")d=[d[0],d[1],d[2],d[3]];else if(P==="tblr")d=[d[3],d[0],d[1],d[2]];else if(P==="tbrl"||P==="tb")d=[d[3],d[2],d[1],d[0]];else return null;for(var b=[],A=0;A<d.length;A++)if(d[A].value===0)b[A]=new u.ComputedLength(0,0);else if(b[A]=u.toComputedLength(d[A].value,d[A].unit,e.styleAttrs[o.byName.fontSize.qname],A===0||A===2?e.styleAttrs[o.byName.extent.qname].h:e.styleAttrs[o.byName.extent.qname].w,A===0||A===2?E.cellLength.h:E.cellLength.w,A===0||A===2?E.pxLength.h:E.pxLength.w),b[A]===null)return null;return b}),new m(l.ns_tts,"position","top left",["region"],!1,!0,function(E){return u.parsePosition(E)},function(E,t,e,n){var i,d;return i=u.toComputedLength(n.v.offset.value,n.v.offset.unit,null,new u.ComputedLength(-e.styleAttrs[o.byName.extent.qname].h.rw,E.dimensions.h.rh-e.styleAttrs[o.byName.extent.qname].h.rh),null,E.pxLength.h),i===null||(n.v.edge==="bottom"&&(i=new u.ComputedLength(-i.rw-e.styleAttrs[o.byName.extent.qname].h.rw,E.dimensions.h.rh-i.rh-e.styleAttrs[o.byName.extent.qname].h.rh)),d=u.toComputedLength(n.h.offset.value,n.h.offset.unit,null,new u.ComputedLength(E.dimensions.w.rw-e.styleAttrs[o.byName.extent.qname].w.rw,-e.styleAttrs[o.byName.extent.qname].w.rh),null,E.pxLength.w),i===null)?null:(n.h.edge==="right"&&(d=new u.ComputedLength(E.dimensions.w.rw-d.rw-e.styleAttrs[o.byName.extent.qname].w.rw,-d.rh-e.styleAttrs[o.byName.extent.qname].w.rh)),{h:i,w:d})}),new m(l.ns_tts,"ruby","none",["span"],!1,!0,function(E){return E},null),new m(l.ns_tts,"rubyAlign","center",["span"],!0,!0,function(E){return E==="center"||E==="spaceAround"?E:null},null),new m(l.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(E){return E},null),new m(l.ns_tts,"rubyReserve","none",["p"],!0,!0,function(E){var t=E.split(" "),e=[null,null];if(t.length===0||t.length>2)return null;if(t[0]==="none"||t[0]==="both"||t[0]==="after"||t[0]==="before"||t[0]==="outside")e[0]=t[0];else return null;if(t.length===2&&t[0]!=="none"){var n=u.parseLength(t[1]);if(n)e[1]=n;else return null}return e},function(E,t,e,n,i){if(n[0]==="none")return n;var d=null;return n[1]===null?d=new u.ComputedLength(e.styleAttrs[o.byName.fontSize.qname].rw*.5,e.styleAttrs[o.byName.fontSize.qname].rh*.5):d=u.toComputedLength(n[1].value,n[1].unit,e.styleAttrs[o.byName.fontSize.qname],e.styleAttrs[o.byName.fontSize.qname],E.cellLength.h,E.pxLength.h),d===null?null:[n[0],d]}),new m(l.ns_tts,"showBackground","always",["region"],!1,!0,function(E){return E},null),new m(l.ns_tts,"textAlign","start",["p"],!0,!0,function(E){return E},function(E,t,e,n,i){return n==="left"?"start":n==="right"?"end":n}),new m(l.ns_tts,"textCombine","none",["span"],!0,!0,function(E){return E==="none"||E==="all"?E:null},null),new m(l.ns_tts,"textDecoration","none",["span"],!0,!0,function(E){return E.split(" ")},null),new m(l.ns_tts,"textEmphasis","none",["span"],!0,!0,function(E){for(var t=E.split(" "),e={style:null,symbol:null,color:null,position:null},n=0;n<t.length;n++)if(t[n]==="none"||t[n]==="auto")e.style=t[n];else if(t[n]==="filled"||t[n]==="open")e.style=t[n];else if(t[n]==="circle"||t[n]==="dot"||t[n]==="sesame")e.symbol=t[n];else if(t[n]==="current")e.color=t[n];else if(t[n]==="outside"||t[n]==="before"||t[n]==="after")e.position=t[n];else if(e.color=u.parseColor(t[n]),e.color===null)return null;return e.style==null&&e.symbol==null?e.style="auto":(e.symbol=e.symbol||"circle",e.style=e.style||"filled"),e.position=e.position||"outside",e.color=e.color||"current",e},null),new m(l.ns_tts,"textOutline","none",["span"],!0,!0,function(E){if(E==="none")return E;var t={},e=E.split(" ");if(e.length===0||e.length>2)return null;var n=u.parseColor(e[0]);if(t.color=n,n!==null&&e.shift(),e.length!==1)return null;var i=u.parseLength(e[0]);return i?(t.thickness=i,t):null},function(E,t,e,n,i){if(n==="none")return n;var d={};return n.color===null?d.color=e.styleAttrs[o.byName.color.qname]:d.color=n.color,d.thickness=u.toComputedLength(n.thickness.value,n.thickness.unit,e.styleAttrs[o.byName.fontSize.qname],e.styleAttrs[o.byName.fontSize.qname],E.cellLength.h,E.pxLength.h),d.thickness===null?null:d}),new m(l.ns_tts,"textShadow","none",["span"],!0,!0,u.parseTextShadow,function(E,t,e,n){if(n==="none")return n;for(var i=[],d=0;d<n.length;d++){var P={};if(P.x_off=u.toComputedLength(n[d][0].value,n[d][0].unit,null,e.styleAttrs[o.byName.fontSize.qname],null,E.pxLength.w),P.x_off===null||(P.y_off=u.toComputedLength(n[d][1].value,n[d][1].unit,null,e.styleAttrs[o.byName.fontSize.qname],null,E.pxLength.h),P.y_off===null))return null;if(n[d][2]===null)P.b_radius=0;else if(P.b_radius=u.toComputedLength(n[d][2].value,n[d][2].unit,null,e.styleAttrs[o.byName.fontSize.qname],null,E.pxLength.h),P.b_radius===null)return null;n[d][3]===null?P.color=e.styleAttrs[o.byName.color.qname]:P.color=n[d][3],i.push(P)}return i}),new m(l.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(E){return E},null),new m(l.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(E){return E},null),new m(l.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(E){return E},null),new m(l.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(E){return E},null),new m(l.ns_tts,"zIndex","auto",["region"],!1,!0,function(E){var t;return E==="auto"?t=E:(t=parseInt(E),isNaN(t)&&(t=null)),t},null),new m(l.ns_ebutts,"linePadding","0c",["p"],!0,!1,u.parseLength,function(E,t,e,n,i){return u.toComputedLength(n.value,n.unit,null,null,E.cellLength.w,null)}),new m(l.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(E){return E},null),new m(l.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(E){return E},null),new m(l.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(E){return E==="true"},null),new m(l.ns_itts,"fillLineGap","false",["p"],!0,!0,function(E){return E==="true"},null)],o.byQName={};for(var y in o.all)o.byQName[o.all[y].qname]=o.all[y];o.byName={};for(var T in o.all)o.byName[o.all[T].name]=o.all[T]})(g,typeof imscNames>"u"?r("./node_modules/imsc/src/main/js/names.js"):imscNames,typeof imscUtils>"u"?r("./node_modules/imsc/src/main/js/utils.js"):imscUtils)},"./node_modules/imsc/src/main/js/utils.js":function(I,g,r){(function(o){var l=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,u=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,m=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,y={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};o.parseColor=function(E){var t,e=null,n=y[E.toLowerCase()];return n!==void 0?e=n:(t=l.exec(E))!==null?e=[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),t[4]!==void 0?parseInt(t[4],16):255]:(t=u.exec(E))!==null?e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),255]:(t=m.exec(E))!==null&&(e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseInt(t[4])]),e};var T=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;o.parseLength=function(E){var t,e=null;return(t=T.exec(E))!==null&&(e={value:parseFloat(t[1]),unit:t[2]}),e},o.parseTextShadow=function(E){for(var t=E.match(/([^\(,\)]|\([^\)]+\))+/g),e=[],n=0;n<t.length;n++){var i=t[n].split(" ");if(i.length===1&&i[0]==="none")return"none";if(i.length>1&&i.length<5){var d=[null,null,null,null],P=o.parseLength(i.shift());if(P===null||(d[0]=P,P=o.parseLength(i.shift()),P===null))return null;if(d[1]=P,i.length===0){e.push(d);continue}if(P=o.parseLength(i[0]),P!==null&&(d[2]=P,i.shift()),i.length===0){e.push(d);continue}var b=o.parseColor(i[0]);if(b===null)return null;d[3]=b,e.push(d)}}return e},o.parsePosition=function(E){var t=E.split(" "),e=function(_){return _==="center"||_==="left"||_==="top"||_==="bottom"||_==="right"};if(t.length>4)return null;for(var n=0;n<t.length;n++)if(!e(t[n])){var i=o.parseLength(t[n]);if(i===null)return null;t[n]=i}for(var d={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},P=0;P<t.length;){var b=t[P++];if(e(b)){var A={value:0,unit:"%"};t.length!==2&&P<t.length&&!e(t[P])&&(A=t[P++]),b==="right"?(d.h.edge=b,d.h.offset=A):b==="bottom"?(d.v.edge=b,d.v.offset=A):b==="left"?d.h.offset=A:b==="top"&&(d.v.offset=A)}else if(t.length===1||t.length===2)P===1?d.h.offset=b:d.v.offset=b;else return null}return d},o.ComputedLength=function(E,t){this.rw=E,this.rh=t},o.ComputedLength.prototype.toUsedLength=function(E,t){return E*this.rw+t*this.rh},o.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},o.toComputedLength=function(E,t,e,n,i,d){return t==="%"&&n?new o.ComputedLength(n.rw*E/100,n.rh*E/100):t==="em"&&e?new o.ComputedLength(e.rw*E,e.rh*E):t==="c"&&i?new o.ComputedLength(E*i.rw,E*i.rh):t==="px"&&d?new o.ComputedLength(E*d.rw,E*d.rh):t==="rh"?new o.ComputedLength(0,E/100):t==="rw"?new o.ComputedLength(E/100,0):null}})(g)},"./node_modules/inherits/inherits_browser.js":function(I,g){typeof Object.create=="function"?I.exports=function(o,l){l&&(o.super_=l,o.prototype=Object.create(l.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}))}:I.exports=function(o,l){if(l){o.super_=l;var u=function(){};u.prototype=l.prototype,o.prototype=new u,o.prototype.constructor=o}}},"./node_modules/is-alphabetical/index.js":function(I,g,r){"use strict";I.exports=o;function o(l){var u=typeof l=="string"?l.charCodeAt(0):l;return u>=97&&u<=122||u>=65&&u<=90}},"./node_modules/is-alphanumerical/index.js":function(I,g,r){"use strict";var o=r("./node_modules/is-alphabetical/index.js"),l=r("./node_modules/is-decimal/index.js");I.exports=u;function u(m){return o(m)||l(m)}},"./node_modules/is-decimal/index.js":function(I,g,r){"use strict";I.exports=o;function o(l){var u=typeof l=="string"?l.charCodeAt(0):l;return u>=48&&u<=57}},"./node_modules/isarray/index.js":function(I,g){var r={}.toString;I.exports=Array.isArray||function(o){return r.call(o)=="[object Array]"}},"./node_modules/path-browserify/index.js":function(I,g,r){(function(o){function l(T,E){for(var t=0,e=T.length-1;e>=0;e--){var n=T[e];n==="."?T.splice(e,1):n===".."?(T.splice(e,1),t++):t&&(T.splice(e,1),t--)}if(E)for(;t--;t)T.unshift("..");return T}g.resolve=function(){for(var T="",E=!1,t=arguments.length-1;t>=-1&&!E;t--){var e=t>=0?arguments[t]:o.cwd();if(typeof e!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!e)continue;T=e+"/"+T,E=e.charAt(0)==="/"}return T=l(m(T.split("/"),function(n){return!!n}),!E).join("/"),(E?"/":"")+T||"."},g.normalize=function(T){var E=g.isAbsolute(T),t=y(T,-1)==="/";return T=l(m(T.split("/"),function(e){return!!e}),!E).join("/"),!T&&!E&&(T="."),T&&t&&(T+="/"),(E?"/":"")+T},g.isAbsolute=function(T){return T.charAt(0)==="/"},g.join=function(){var T=Array.prototype.slice.call(arguments,0);return g.normalize(m(T,function(E,t){if(typeof E!="string")throw new TypeError("Arguments to path.join must be strings");return E}).join("/"))},g.relative=function(T,E){T=g.resolve(T).substr(1),E=g.resolve(E).substr(1);function t(A){for(var _=0;_<A.length&&A[_]==="";_++);for(var h=A.length-1;h>=0&&A[h]==="";h--);return _>h?[]:A.slice(_,h-_+1)}for(var e=t(T.split("/")),n=t(E.split("/")),i=Math.min(e.length,n.length),d=i,P=0;P<i;P++)if(e[P]!==n[P]){d=P;break}for(var b=[],P=d;P<e.length;P++)b.push("..");return b=b.concat(n.slice(d)),b.join("/")},g.sep="/",g.delimiter=":",g.dirname=function(T){if(typeof T!="string"&&(T=T+""),T.length===0)return".";for(var E=T.charCodeAt(0),t=E===47,e=-1,n=!0,i=T.length-1;i>=1;--i)if(E=T.charCodeAt(i),E===47){if(!n){e=i;break}}else n=!1;return e===-1?t?"/":".":t&&e===1?"/":T.slice(0,e)};function u(T){typeof T!="string"&&(T=T+"");var E=0,t=-1,e=!0,n;for(n=T.length-1;n>=0;--n)if(T.charCodeAt(n)===47){if(!e){E=n+1;break}}else t===-1&&(e=!1,t=n+1);return t===-1?"":T.slice(E,t)}g.basename=function(T,E){var t=u(T);return E&&t.substr(-1*E.length)===E&&(t=t.substr(0,t.length-E.length)),t},g.extname=function(T){typeof T!="string"&&(T=T+"");for(var E=-1,t=0,e=-1,n=!0,i=0,d=T.length-1;d>=0;--d){var P=T.charCodeAt(d);if(P===47){if(!n){t=d+1;break}continue}e===-1&&(n=!1,e=d+1),P===46?E===-1?E=d:i!==1&&(i=1):E!==-1&&(i=-1)}return E===-1||e===-1||i===0||i===1&&E===e-1&&E===t+1?"":T.slice(E,e)};function m(T,E){if(T.filter)return T.filter(E);for(var t=[],e=0;e<T.length;e++)E(T[e],e,T)&&t.push(T[e]);return t}var y="ab".substr(-1)==="b"?function(T,E,t){return T.substr(E,t)}:function(T,E,t){return E<0&&(E=T.length+E),T.substr(E,t)}}).call(this,r("./node_modules/process/browser.js"))},"./node_modules/process-nextick-args/index.js":function(I,g,r){"use strict";(function(o){typeof o>"u"||!o.version||o.version.indexOf("v0.")===0||o.version.indexOf("v1.")===0&&o.version.indexOf("v1.8.")!==0?I.exports={nextTick:l}:I.exports=o;function l(u,m,y,T){if(typeof u!="function")throw new TypeError('"callback" argument must be a function');var E=arguments.length,t,e;switch(E){case 0:case 1:return o.nextTick(u);case 2:return o.nextTick(function(){u.call(null,m)});case 3:return o.nextTick(function(){u.call(null,m,y)});case 4:return o.nextTick(function(){u.call(null,m,y,T)});default:for(t=new Array(E-1),e=0;e<t.length;)t[e++]=arguments[e];return o.nextTick(function(){u.apply(null,t)})}}}).call(this,r("./node_modules/process/browser.js"))},"./node_modules/process/browser.js":function(I,g){var r=I.exports={},o,l;function u(){throw new Error("setTimeout has not been defined")}function m(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?o=setTimeout:o=u}catch{o=u}try{typeof clearTimeout=="function"?l=clearTimeout:l=m}catch{l=m}})();function y(A){if(o===setTimeout)return setTimeout(A,0);if((o===u||!o)&&setTimeout)return o=setTimeout,setTimeout(A,0);try{return o(A,0)}catch{try{return o.call(null,A,0)}catch{return o.call(this,A,0)}}}function T(A){if(l===clearTimeout)return clearTimeout(A);if((l===m||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(A);try{return l(A)}catch{try{return l.call(null,A)}catch{return l.call(this,A)}}}var E=[],t=!1,e,n=-1;function i(){!t||!e||(t=!1,e.length?E=e.concat(E):n=-1,E.length&&d())}function d(){if(!t){var A=y(i);t=!0;for(var _=E.length;_;){for(e=E,E=[];++n<_;)e&&e[n].run();n=-1,_=E.length}e=null,t=!1,T(A)}}r.nextTick=function(A){var _=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)_[h-1]=arguments[h];E.push(new P(A,_)),E.length===1&&!t&&y(d)};function P(A,_){this.fun=A,this.array=_}P.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function b(){}r.on=b,r.addListener=b,r.once=b,r.off=b,r.removeListener=b,r.removeAllListeners=b,r.emit=b,r.prependListener=b,r.prependOnceListener=b,r.listeners=function(A){return[]},r.binding=function(A){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(A){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},"./node_modules/readable-stream/duplex-browser.js":function(I,g,r){I.exports=r("./node_modules/readable-stream/lib/_stream_duplex.js")},"./node_modules/readable-stream/lib/_stream_duplex.js":function(I,g,r){"use strict";var o=r("./node_modules/process-nextick-args/index.js"),l=Object.keys||function(d){var P=[];for(var b in d)P.push(b);return P};I.exports=e;var u=Object.create(r("./node_modules/core-util-is/lib/util.js"));u.inherits=r("./node_modules/inherits/inherits_browser.js");var m=r("./node_modules/readable-stream/lib/_stream_readable.js"),y=r("./node_modules/readable-stream/lib/_stream_writable.js");u.inherits(e,m);for(var T=l(y.prototype),E=0;E<T.length;E++){var t=T[E];e.prototype[t]||(e.prototype[t]=y.prototype[t])}function e(d){if(!(this instanceof e))return new e(d);m.call(this,d),y.call(this,d),d&&d.readable===!1&&(this.readable=!1),d&&d.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,d&&d.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",n)}Object.defineProperty(e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function n(){this.allowHalfOpen||this._writableState.ended||o.nextTick(i,this)}function i(d){d.end()}Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(d){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=d,this._writableState.destroyed=d)}}),e.prototype._destroy=function(d,P){this.push(null),this.end(),o.nextTick(P,d)}},"./node_modules/readable-stream/lib/_stream_passthrough.js":function(I,g,r){"use strict";I.exports=u;var o=r("./node_modules/readable-stream/lib/_stream_transform.js"),l=Object.create(r("./node_modules/core-util-is/lib/util.js"));l.inherits=r("./node_modules/inherits/inherits_browser.js"),l.inherits(u,o);function u(m){if(!(this instanceof u))return new u(m);o.call(this,m)}u.prototype._transform=function(m,y,T){T(null,m)}},"./node_modules/readable-stream/lib/_stream_readable.js":function(I,g,r){"use strict";(function(o,l){var u=r("./node_modules/process-nextick-args/index.js");I.exports=p;var m=r("./node_modules/isarray/index.js"),y;p.ReadableState=S;var T=r("./node_modules/events/events.js").EventEmitter,E=function(K,R){return K.listeners(R).length},t=r("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),e=r("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,n=o.Uint8Array||function(){};function i(K){return e.from(K)}function d(K){return e.isBuffer(K)||K instanceof n}var P=Object.create(r("./node_modules/core-util-is/lib/util.js"));P.inherits=r("./node_modules/inherits/inherits_browser.js");var b=r(0),A=void 0;b&&b.debuglog?A=b.debuglog("stream"):A=function(){};var _=r("./node_modules/readable-stream/lib/internal/streams/BufferList.js"),h=r("./node_modules/readable-stream/lib/internal/streams/destroy.js"),f;P.inherits(p,t);var v=["error","close","destroy","pause","resume"];function c(K,R,L){if(typeof K.prependListener=="function")return K.prependListener(R,L);!K._events||!K._events[R]?K.on(R,L):m(K._events[R])?K._events[R].unshift(L):K._events[R]=[L,K._events[R]]}function S(K,R){y=y||r("./node_modules/readable-stream/lib/_stream_duplex.js"),K=K||{};var L=R instanceof y;this.objectMode=!!K.objectMode,L&&(this.objectMode=this.objectMode||!!K.readableObjectMode);var $=K.highWaterMark,O=K.readableHighWaterMark,Q=this.objectMode?16:16*1024;$||$===0?this.highWaterMark=$:L&&(O||O===0)?this.highWaterMark=O:this.highWaterMark=Q,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new _,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=K.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,K.encoding&&(f||(f=r("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this.decoder=new f(K.encoding),this.encoding=K.encoding)}function p(K){if(y=y||r("./node_modules/readable-stream/lib/_stream_duplex.js"),!(this instanceof p))return new p(K);this._readableState=new S(K,this),this.readable=!0,K&&(typeof K.read=="function"&&(this._read=K.read),typeof K.destroy=="function"&&(this._destroy=K.destroy)),t.call(this)}Object.defineProperty(p.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(K){this._readableState&&(this._readableState.destroyed=K)}}),p.prototype.destroy=h.destroy,p.prototype._undestroy=h.undestroy,p.prototype._destroy=function(K,R){this.push(null),R(K)},p.prototype.push=function(K,R){var L=this._readableState,$;return L.objectMode?$=!0:typeof K=="string"&&(R=R||L.defaultEncoding,R!==L.encoding&&(K=e.from(K,R),R=""),$=!0),C(this,K,R,!1,$)},p.prototype.unshift=function(K){return C(this,K,null,!0,!1)};function C(K,R,L,$,O){var Q=K._readableState;if(R===null)Q.reading=!1,M(K,Q);else{var ne;O||(ne=V(Q,R)),ne?K.emit("error",ne):Q.objectMode||R&&R.length>0?(typeof R!="string"&&!Q.objectMode&&Object.getPrototypeOf(R)!==e.prototype&&(R=i(R)),$?Q.endEmitted?K.emit("error",new Error("stream.unshift() after end event")):x(K,Q,R,!0):Q.ended?K.emit("error",new Error("stream.push() after EOF")):(Q.reading=!1,Q.decoder&&!L?(R=Q.decoder.write(R),Q.objectMode||R.length!==0?x(K,Q,R,!1):X(K,Q)):x(K,Q,R,!1))):$||(Q.reading=!1)}return H(Q)}function x(K,R,L,$){R.flowing&&R.length===0&&!R.sync?(K.emit("data",L),K.read(0)):(R.length+=R.objectMode?1:L.length,$?R.buffer.unshift(L):R.buffer.push(L),R.needReadable&&U(K)),X(K,R)}function V(K,R){var L;return!d(R)&&typeof R!="string"&&R!==void 0&&!K.objectMode&&(L=new TypeError("Invalid non-string/buffer chunk")),L}function H(K){return!K.ended&&(K.needReadable||K.length<K.highWaterMark||K.length===0)}p.prototype.isPaused=function(){return this._readableState.flowing===!1},p.prototype.setEncoding=function(K){return f||(f=r("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder),this._readableState.decoder=new f(K),this._readableState.encoding=K,this};var te=8388608;function w(K){return K>=te?K=te:(K--,K|=K>>>1,K|=K>>>2,K|=K>>>4,K|=K>>>8,K|=K>>>16,K++),K}function F(K,R){return K<=0||R.length===0&&R.ended?0:R.objectMode?1:K!==K?R.flowing&&R.length?R.buffer.head.data.length:R.length:(K>R.highWaterMark&&(R.highWaterMark=w(K)),K<=R.length?K:R.ended?R.length:(R.needReadable=!0,0))}p.prototype.read=function(K){A("read",K),K=parseInt(K,10);var R=this._readableState,L=K;if(K!==0&&(R.emittedReadable=!1),K===0&&R.needReadable&&(R.length>=R.highWaterMark||R.ended))return A("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?ge(this):U(this),null;if(K=F(K,R),K===0&&R.ended)return R.length===0&&ge(this),null;var $=R.needReadable;A("need readable",$),(R.length===0||R.length-K<R.highWaterMark)&&($=!0,A("length less than watermark",$)),R.ended||R.reading?($=!1,A("reading or ended",$)):$&&(A("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(K=F(L,R)));var O;return K>0?O=ue(K,R):O=null,O===null?(R.needReadable=!0,K=0):R.length-=K,R.length===0&&(R.ended||(R.needReadable=!0),L!==K&&R.ended&&ge(this)),O!==null&&this.emit("data",O),O};function M(K,R){if(!R.ended){if(R.decoder){var L=R.decoder.end();L&&L.length&&(R.buffer.push(L),R.length+=R.objectMode?1:L.length)}R.ended=!0,U(K)}}function U(K){var R=K._readableState;R.needReadable=!1,R.emittedReadable||(A("emitReadable",R.flowing),R.emittedReadable=!0,R.sync?u.nextTick(j,K):j(K))}function j(K){A("emit readable"),K.emit("readable"),ie(K)}function X(K,R){R.readingMore||(R.readingMore=!0,u.nextTick(Y,K,R))}function Y(K,R){for(var L=R.length;!R.reading&&!R.flowing&&!R.ended&&R.length<R.highWaterMark&&(A("maybeReadMore read 0"),K.read(0),L!==R.length);)L=R.length;R.readingMore=!1}p.prototype._read=function(K){this.emit("error",new Error("_read() is not implemented"))},p.prototype.pipe=function(K,R){var L=this,$=this._readableState;switch($.pipesCount){case 0:$.pipes=K;break;case 1:$.pipes=[$.pipes,K];break;default:$.pipes.push(K);break}$.pipesCount+=1,A("pipe count=%d opts=%j",$.pipesCount,R);var O=(!R||R.end!==!1)&&K!==l.stdout&&K!==l.stderr,Q=O?ce:be;$.endEmitted?u.nextTick(Q):L.once("end",Q),K.on("unpipe",ne);function ne(Me,Fe){A("onunpipe"),Me===L&&Fe&&Fe.hasUnpiped===!1&&(Fe.hasUnpiped=!0,D())}function ce(){A("onend"),K.end()}var W=se(L);K.on("drain",W);var B=!1;function D(){A("cleanup"),K.removeListener("close",ve),K.removeListener("finish",Se),K.removeListener("drain",W),K.removeListener("error",de),K.removeListener("unpipe",ne),L.removeListener("end",ce),L.removeListener("end",be),L.removeListener("data",me),B=!0,$.awaitDrain&&(!K._writableState||K._writableState.needDrain)&&W()}var q=!1;L.on("data",me);function me(Me){A("ondata"),q=!1;var Fe=K.write(Me);Fe===!1&&!q&&(($.pipesCount===1&&$.pipes===K||$.pipesCount>1&&z($.pipes,K)!==-1)&&!B&&(A("false write response, pause",L._readableState.awaitDrain),L._readableState.awaitDrain++,q=!0),L.pause())}function de(Me){A("onerror",Me),be(),K.removeListener("error",de),E(K,"error")===0&&K.emit("error",Me)}c(K,"error",de);function ve(){K.removeListener("finish",Se),be()}K.once("close",ve);function Se(){A("onfinish"),K.removeListener("close",ve),be()}K.once("finish",Se);function be(){A("unpipe"),L.unpipe(K)}return K.emit("pipe",L),$.flowing||(A("pipe resume"),L.resume()),K};function se(K){return function(){var R=K._readableState;A("pipeOnDrain",R.awaitDrain),R.awaitDrain&&R.awaitDrain--,R.awaitDrain===0&&E(K,"data")&&(R.flowing=!0,ie(K))}}p.prototype.unpipe=function(K){var R=this._readableState,L={hasUnpiped:!1};if(R.pipesCount===0)return this;if(R.pipesCount===1)return K&&K!==R.pipes?this:(K||(K=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,K&&K.emit("unpipe",this,L),this);if(!K){var $=R.pipes,O=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var Q=0;Q<O;Q++)$[Q].emit("unpipe",this,L);return this}var ne=z(R.pipes,K);return ne===-1?this:(R.pipes.splice(ne,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),K.emit("unpipe",this,L),this)},p.prototype.on=function(K,R){var L=t.prototype.on.call(this,K,R);if(K==="data")this._readableState.flowing!==!1&&this.resume();else if(K==="readable"){var $=this._readableState;!$.endEmitted&&!$.readableListening&&($.readableListening=$.needReadable=!0,$.emittedReadable=!1,$.reading?$.length&&U(this):u.nextTick(G,this))}return L},p.prototype.addListener=p.prototype.on;function G(K){A("readable nexttick read 0"),K.read(0)}p.prototype.resume=function(){var K=this._readableState;return K.flowing||(A("resume"),K.flowing=!0,ee(this,K)),this};function ee(K,R){R.resumeScheduled||(R.resumeScheduled=!0,u.nextTick(J,K,R))}function J(K,R){R.reading||(A("resume read 0"),K.read(0)),R.resumeScheduled=!1,R.awaitDrain=0,K.emit("resume"),ie(K),R.flowing&&!R.reading&&K.read(0)}p.prototype.pause=function(){return A("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(A("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function ie(K){var R=K._readableState;for(A("flow",R.flowing);R.flowing&&K.read()!==null;);}p.prototype.wrap=function(K){var R=this,L=this._readableState,$=!1;K.on("end",function(){if(A("wrapped end"),L.decoder&&!L.ended){var ne=L.decoder.end();ne&&ne.length&&R.push(ne)}R.push(null)}),K.on("data",function(ne){if(A("wrapped data"),L.decoder&&(ne=L.decoder.write(ne)),!(L.objectMode&&ne==null)&&!(!L.objectMode&&(!ne||!ne.length))){var ce=R.push(ne);ce||($=!0,K.pause())}});for(var O in K)this[O]===void 0&&typeof K[O]=="function"&&(this[O]=function(ne){return function(){return K[ne].apply(K,arguments)}}(O));for(var Q=0;Q<v.length;Q++)K.on(v[Q],this.emit.bind(this,v[Q]));return this._read=function(ne){A("wrapped _read",ne),$&&($=!1,K.resume())},this},Object.defineProperty(p.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),p._fromList=ue;function ue(K,R){if(R.length===0)return null;var L;return R.objectMode?L=R.buffer.shift():!K||K>=R.length?(R.decoder?L=R.buffer.join(""):R.buffer.length===1?L=R.buffer.head.data:L=R.buffer.concat(R.length),R.buffer.clear()):L=ae(K,R.buffer,R.decoder),L}function ae(K,R,L){var $;return K<R.head.data.length?($=R.head.data.slice(0,K),R.head.data=R.head.data.slice(K)):K===R.head.data.length?$=R.shift():$=L?oe(K,R):Z(K,R),$}function oe(K,R){var L=R.head,$=1,O=L.data;for(K-=O.length;L=L.next;){var Q=L.data,ne=K>Q.length?Q.length:K;if(ne===Q.length?O+=Q:O+=Q.slice(0,K),K-=ne,K===0){ne===Q.length?(++$,L.next?R.head=L.next:R.head=R.tail=null):(R.head=L,L.data=Q.slice(ne));break}++$}return R.length-=$,O}function Z(K,R){var L=e.allocUnsafe(K),$=R.head,O=1;for($.data.copy(L),K-=$.data.length;$=$.next;){var Q=$.data,ne=K>Q.length?Q.length:K;if(Q.copy(L,L.length-K,0,ne),K-=ne,K===0){ne===Q.length?(++O,$.next?R.head=$.next:R.head=R.tail=null):(R.head=$,$.data=Q.slice(ne));break}++O}return R.length-=O,L}function ge(K){var R=K._readableState;if(R.length>0)throw new Error('"endReadable()" called on non-empty stream');R.endEmitted||(R.ended=!0,u.nextTick(le,R,K))}function le(K,R){!K.endEmitted&&K.length===0&&(K.endEmitted=!0,R.readable=!1,R.emit("end"))}function z(K,R){for(var L=0,$=K.length;L<$;L++)if(K[L]===R)return L;return-1}}).call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/process/browser.js"))},"./node_modules/readable-stream/lib/_stream_transform.js":function(I,g,r){"use strict";I.exports=m;var o=r("./node_modules/readable-stream/lib/_stream_duplex.js"),l=Object.create(r("./node_modules/core-util-is/lib/util.js"));l.inherits=r("./node_modules/inherits/inherits_browser.js"),l.inherits(m,o);function u(E,t){var e=this._transformState;e.transforming=!1;var n=e.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));e.writechunk=null,e.writecb=null,t!=null&&this.push(t),n(E);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function m(E){if(!(this instanceof m))return new m(E);o.call(this,E),this._transformState={afterTransform:u.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,E&&(typeof E.transform=="function"&&(this._transform=E.transform),typeof E.flush=="function"&&(this._flush=E.flush)),this.on("prefinish",y)}function y(){var E=this;typeof this._flush=="function"?this._flush(function(t,e){T(E,t,e)}):T(this,null,null)}m.prototype.push=function(E,t){return this._transformState.needTransform=!1,o.prototype.push.call(this,E,t)},m.prototype._transform=function(E,t,e){throw new Error("_transform() is not implemented")},m.prototype._write=function(E,t,e){var n=this._transformState;if(n.writecb=e,n.writechunk=E,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},m.prototype._read=function(E){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},m.prototype._destroy=function(E,t){var e=this;o.prototype._destroy.call(this,E,function(n){t(n),e.emit("close")})};function T(E,t,e){if(t)return E.emit("error",t);if(e!=null&&E.push(e),E._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(E._transformState.transforming)throw new Error("Calling transform done when still transforming");return E.push(null)}},"./node_modules/readable-stream/lib/_stream_writable.js":function(I,g,r){"use strict";(function(o,l,u){var m=r("./node_modules/process-nextick-args/index.js");I.exports=c;function y(J,ie,ue){this.chunk=J,this.encoding=ie,this.callback=ue,this.next=null}function T(J){var ie=this;this.next=null,this.entry=null,this.finish=function(){ee(ie,J)}}var E=!o.browser&&["v0.10","v0.9."].indexOf(o.version.slice(0,5))>-1?l:m.nextTick,t;c.WritableState=f;var e=Object.create(r("./node_modules/core-util-is/lib/util.js"));e.inherits=r("./node_modules/inherits/inherits_browser.js");var n={deprecate:r("./node_modules/util-deprecate/browser.js")},i=r("./node_modules/readable-stream/lib/internal/streams/stream-browser.js"),d=r("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,P=u.Uint8Array||function(){};function b(J){return d.from(J)}function A(J){return d.isBuffer(J)||J instanceof P}var _=r("./node_modules/readable-stream/lib/internal/streams/destroy.js");e.inherits(c,i);function h(){}function f(J,ie){t=t||r("./node_modules/readable-stream/lib/_stream_duplex.js"),J=J||{};var ue=ie instanceof t;this.objectMode=!!J.objectMode,ue&&(this.objectMode=this.objectMode||!!J.writableObjectMode);var ae=J.highWaterMark,oe=J.writableHighWaterMark,Z=this.objectMode?16:16*1024;ae||ae===0?this.highWaterMark=ae:ue&&(oe||oe===0)?this.highWaterMark=oe:this.highWaterMark=Z,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ge=J.decodeStrings===!1;this.decodeStrings=!ge,this.defaultEncoding=J.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(le){w(ie,le)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new T(this)}f.prototype.getBuffer=function(){for(var ie=this.bufferedRequest,ue=[];ie;)ue.push(ie),ie=ie.next;return ue},function(){try{Object.defineProperty(f.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var v;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(J){return v.call(this,J)?!0:this!==c?!1:J&&J._writableState instanceof f}})):v=function(J){return J instanceof this};function c(J){if(t=t||r("./node_modules/readable-stream/lib/_stream_duplex.js"),!v.call(c,this)&&!(this instanceof t))return new c(J);this._writableState=new f(J,this),this.writable=!0,J&&(typeof J.write=="function"&&(this._write=J.write),typeof J.writev=="function"&&(this._writev=J.writev),typeof J.destroy=="function"&&(this._destroy=J.destroy),typeof J.final=="function"&&(this._final=J.final)),i.call(this)}c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function S(J,ie){var ue=new Error("write after end");J.emit("error",ue),m.nextTick(ie,ue)}function p(J,ie,ue,ae){var oe=!0,Z=!1;return ue===null?Z=new TypeError("May not write null values to stream"):typeof ue!="string"&&ue!==void 0&&!ie.objectMode&&(Z=new TypeError("Invalid non-string/buffer chunk")),Z&&(J.emit("error",Z),m.nextTick(ae,Z),oe=!1),oe}c.prototype.write=function(J,ie,ue){var ae=this._writableState,oe=!1,Z=!ae.objectMode&&A(J);return Z&&!d.isBuffer(J)&&(J=b(J)),typeof ie=="function"&&(ue=ie,ie=null),Z?ie="buffer":ie||(ie=ae.defaultEncoding),typeof ue!="function"&&(ue=h),ae.ended?S(this,ue):(Z||p(this,ae,J,ue))&&(ae.pendingcb++,oe=x(this,ae,Z,J,ie,ue)),oe},c.prototype.cork=function(){var J=this._writableState;J.corked++},c.prototype.uncork=function(){var J=this._writableState;J.corked&&(J.corked--,!J.writing&&!J.corked&&!J.finished&&!J.bufferProcessing&&J.bufferedRequest&&U(this,J))},c.prototype.setDefaultEncoding=function(ie){if(typeof ie=="string"&&(ie=ie.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ie+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+ie);return this._writableState.defaultEncoding=ie,this};function C(J,ie,ue){return!J.objectMode&&J.decodeStrings!==!1&&typeof ie=="string"&&(ie=d.from(ie,ue)),ie}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function x(J,ie,ue,ae,oe,Z){if(!ue){var ge=C(ie,ae,oe);ae!==ge&&(ue=!0,oe="buffer",ae=ge)}var le=ie.objectMode?1:ae.length;ie.length+=le;var z=ie.length<ie.highWaterMark;if(z||(ie.needDrain=!0),ie.writing||ie.corked){var K=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:ae,encoding:oe,isBuf:ue,callback:Z,next:null},K?K.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else V(J,ie,!1,le,ae,oe,Z);return z}function V(J,ie,ue,ae,oe,Z,ge){ie.writelen=ae,ie.writecb=ge,ie.writing=!0,ie.sync=!0,ue?J._writev(oe,ie.onwrite):J._write(oe,Z,ie.onwrite),ie.sync=!1}function H(J,ie,ue,ae,oe){--ie.pendingcb,ue?(m.nextTick(oe,ae),m.nextTick(se,J,ie),J._writableState.errorEmitted=!0,J.emit("error",ae)):(oe(ae),J._writableState.errorEmitted=!0,J.emit("error",ae),se(J,ie))}function te(J){J.writing=!1,J.writecb=null,J.length-=J.writelen,J.writelen=0}function w(J,ie){var ue=J._writableState,ae=ue.sync,oe=ue.writecb;if(te(ue),ie)H(J,ue,ae,ie,oe);else{var Z=j(ue);!Z&&!ue.corked&&!ue.bufferProcessing&&ue.bufferedRequest&&U(J,ue),ae?E(F,J,ue,Z,oe):F(J,ue,Z,oe)}}function F(J,ie,ue,ae){ue||M(J,ie),ie.pendingcb--,ae(),se(J,ie)}function M(J,ie){ie.length===0&&ie.needDrain&&(ie.needDrain=!1,J.emit("drain"))}function U(J,ie){ie.bufferProcessing=!0;var ue=ie.bufferedRequest;if(J._writev&&ue&&ue.next){var ae=ie.bufferedRequestCount,oe=new Array(ae),Z=ie.corkedRequestsFree;Z.entry=ue;for(var ge=0,le=!0;ue;)oe[ge]=ue,ue.isBuf||(le=!1),ue=ue.next,ge+=1;oe.allBuffers=le,V(J,ie,!0,ie.length,oe,"",Z.finish),ie.pendingcb++,ie.lastBufferedRequest=null,Z.next?(ie.corkedRequestsFree=Z.next,Z.next=null):ie.corkedRequestsFree=new T(ie),ie.bufferedRequestCount=0}else{for(;ue;){var z=ue.chunk,K=ue.encoding,R=ue.callback,L=ie.objectMode?1:z.length;if(V(J,ie,!1,L,z,K,R),ue=ue.next,ie.bufferedRequestCount--,ie.writing)break}ue===null&&(ie.lastBufferedRequest=null)}ie.bufferedRequest=ue,ie.bufferProcessing=!1}c.prototype._write=function(J,ie,ue){ue(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(J,ie,ue){var ae=this._writableState;typeof J=="function"?(ue=J,J=null,ie=null):typeof ie=="function"&&(ue=ie,ie=null),J!=null&&this.write(J,ie),ae.corked&&(ae.corked=1,this.uncork()),!ae.ending&&!ae.finished&&G(this,ae,ue)};function j(J){return J.ending&&J.length===0&&J.bufferedRequest===null&&!J.finished&&!J.writing}function X(J,ie){J._final(function(ue){ie.pendingcb--,ue&&J.emit("error",ue),ie.prefinished=!0,J.emit("prefinish"),se(J,ie)})}function Y(J,ie){!ie.prefinished&&!ie.finalCalled&&(typeof J._final=="function"?(ie.pendingcb++,ie.finalCalled=!0,m.nextTick(X,J,ie)):(ie.prefinished=!0,J.emit("prefinish")))}function se(J,ie){var ue=j(ie);return ue&&(Y(J,ie),ie.pendingcb===0&&(ie.finished=!0,J.emit("finish"))),ue}function G(J,ie,ue){ie.ending=!0,se(J,ie),ue&&(ie.finished?m.nextTick(ue):J.once("finish",ue)),ie.ended=!0,J.writable=!1}function ee(J,ie,ue){var ae=J.entry;for(J.entry=null;ae;){var oe=ae.callback;ie.pendingcb--,oe(ue),ae=ae.next}ie.corkedRequestsFree?ie.corkedRequestsFree.next=J:ie.corkedRequestsFree=J}Object.defineProperty(c.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(J){this._writableState&&(this._writableState.destroyed=J)}}),c.prototype.destroy=_.destroy,c.prototype._undestroy=_.undestroy,c.prototype._destroy=function(J,ie){this.end(),ie(J)}}).call(this,r("./node_modules/process/browser.js"),r("./node_modules/timers-browserify/main.js").setImmediate,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/readable-stream/lib/internal/streams/BufferList.js":function(I,g,r){"use strict";function o(y,T){if(!(y instanceof T))throw new TypeError("Cannot call a class as a function")}var l=r("./node_modules/readable-stream/node_modules/safe-buffer/index.js").Buffer,u=r(1);function m(y,T,E){y.copy(T,E)}I.exports=function(){function y(){o(this,y),this.head=null,this.tail=null,this.length=0}return y.prototype.push=function(E){var t={data:E,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},y.prototype.unshift=function(E){var t={data:E,next:this.head};this.length===0&&(this.tail=t),this.head=t,++this.length},y.prototype.shift=function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}},y.prototype.clear=function(){this.head=this.tail=null,this.length=0},y.prototype.join=function(E){if(this.length===0)return"";for(var t=this.head,e=""+t.data;t=t.next;)e+=E+t.data;return e},y.prototype.concat=function(E){if(this.length===0)return l.alloc(0);if(this.length===1)return this.head.data;for(var t=l.allocUnsafe(E>>>0),e=this.head,n=0;e;)m(e.data,t,n),n+=e.data.length,e=e.next;return t},y}(),u&&u.inspect&&u.inspect.custom&&(I.exports.prototype[u.inspect.custom]=function(){var y=u.inspect({length:this.length});return this.constructor.name+" "+y})},"./node_modules/readable-stream/lib/internal/streams/destroy.js":function(I,g,r){"use strict";var o=r("./node_modules/process-nextick-args/index.js");function l(y,T){var E=this,t=this._readableState&&this._readableState.destroyed,e=this._writableState&&this._writableState.destroyed;return t||e?(T?T(y):y&&(!this._writableState||!this._writableState.errorEmitted)&&o.nextTick(m,this,y),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(y||null,function(n){!T&&n?(o.nextTick(m,E,n),E._writableState&&(E._writableState.errorEmitted=!0)):T&&T(n)}),this)}function u(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function m(y,T){y.emit("error",T)}I.exports={destroy:l,undestroy:u}},"./node_modules/readable-stream/lib/internal/streams/stream-browser.js":function(I,g,r){I.exports=r("./node_modules/events/events.js").EventEmitter},"./node_modules/readable-stream/node_modules/safe-buffer/index.js":function(I,g,r){var o=r("./node_modules/buffer/index.js"),l=o.Buffer;function u(y,T){for(var E in y)T[E]=y[E]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?I.exports=o:(u(o,g),g.Buffer=m);function m(y,T,E){return l(y,T,E)}u(l,m),m.from=function(y,T,E){if(typeof y=="number")throw new TypeError("Argument must not be a number");return l(y,T,E)},m.alloc=function(y,T,E){if(typeof y!="number")throw new TypeError("Argument must be a number");var t=l(y);return T!==void 0?typeof E=="string"?t.fill(T,E):t.fill(T):t.fill(0),t},m.allocUnsafe=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return l(y)},m.allocUnsafeSlow=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(y)}},"./node_modules/readable-stream/passthrough.js":function(I,g,r){I.exports=r("./node_modules/readable-stream/readable-browser.js").PassThrough},"./node_modules/readable-stream/readable-browser.js":function(I,g,r){g=I.exports=r("./node_modules/readable-stream/lib/_stream_readable.js"),g.Stream=g,g.Readable=g,g.Writable=r("./node_modules/readable-stream/lib/_stream_writable.js"),g.Duplex=r("./node_modules/readable-stream/lib/_stream_duplex.js"),g.Transform=r("./node_modules/readable-stream/lib/_stream_transform.js"),g.PassThrough=r("./node_modules/readable-stream/lib/_stream_passthrough.js")},"./node_modules/readable-stream/transform.js":function(I,g,r){I.exports=r("./node_modules/readable-stream/readable-browser.js").Transform},"./node_modules/readable-stream/writable-browser.js":function(I,g,r){I.exports=r("./node_modules/readable-stream/lib/_stream_writable.js")},"./node_modules/safe-buffer/index.js":function(I,g,r){var o=r("./node_modules/buffer/index.js"),l=o.Buffer;function u(y,T){for(var E in y)T[E]=y[E]}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?I.exports=o:(u(o,g),g.Buffer=m);function m(y,T,E){return l(y,T,E)}m.prototype=Object.create(l.prototype),u(l,m),m.from=function(y,T,E){if(typeof y=="number")throw new TypeError("Argument must not be a number");return l(y,T,E)},m.alloc=function(y,T,E){if(typeof y!="number")throw new TypeError("Argument must be a number");var t=l(y);return T!==void 0?typeof E=="string"?t.fill(T,E):t.fill(T):t.fill(0),t},m.allocUnsafe=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return l(y)},m.allocUnsafeSlow=function(y){if(typeof y!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(y)}},"./node_modules/sax/lib/sax.js":function(I,g,r){(function(o){(function(l){l.parser=function(R,L){return new m(R,L)},l.SAXParser=m,l.SAXStream=i,l.createStream=n,l.MAX_BUFFER_LENGTH=64*1024;var u=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];l.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function m(R,L){if(!(this instanceof m))return new m(R,L);var $=this;T($),$.q=$.c="",$.bufferCheckPosition=l.MAX_BUFFER_LENGTH,$.opt=L||{},$.opt.lowercase=$.opt.lowercase||$.opt.lowercasetags,$.looseCase=$.opt.lowercase?"toLowerCase":"toUpperCase",$.tags=[],$.closed=$.closedRoot=$.sawRoot=!1,$.tag=$.error=null,$.strict=!!R,$.noscript=!!(R||$.opt.noscript),$.state=M.BEGIN,$.strictEntities=$.opt.strictEntities,$.ENTITIES=$.strictEntities?Object.create(l.XML_ENTITIES):Object.create(l.ENTITIES),$.attribList=[],$.opt.xmlns&&($.ns=Object.create(S)),$.trackPosition=$.opt.position!==!1,$.trackPosition&&($.position=$.line=$.column=0),j($,"onready")}Object.create||(Object.create=function(R){function L(){}L.prototype=R;var $=new L;return $}),Object.keys||(Object.keys=function(R){var L=[];for(var $ in R)R.hasOwnProperty($)&&L.push($);return L});function y(R){for(var L=Math.max(l.MAX_BUFFER_LENGTH,10),$=0,O=0,Q=u.length;O<Q;O++){var ne=R[u[O]].length;if(ne>L)switch(u[O]){case"textNode":Y(R);break;case"cdata":X(R,"oncdata",R.cdata),R.cdata="";break;case"script":X(R,"onscript",R.script),R.script="";break;default:G(R,"Max buffer length exceeded: "+u[O])}$=Math.max($,ne)}var ce=l.MAX_BUFFER_LENGTH-$;R.bufferCheckPosition=ce+R.position}function T(R){for(var L=0,$=u.length;L<$;L++)R[u[L]]=""}function E(R){Y(R),R.cdata!==""&&(X(R,"oncdata",R.cdata),R.cdata=""),R.script!==""&&(X(R,"onscript",R.script),R.script="")}m.prototype={end:function(){ee(this)},write:K,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){E(this)}};var t;try{t=r("./node_modules/stream-browserify/index.js").Stream}catch{t=function(){}}var e=l.EVENTS.filter(function(R){return R!=="error"&&R!=="end"});function n(R,L){return new i(R,L)}function i(R,L){if(!(this instanceof i))return new i(R,L);t.apply(this),this._parser=new m(R,L),this.writable=!0,this.readable=!0;var $=this;this._parser.onend=function(){$.emit("end")},this._parser.onerror=function(O){$.emit("error",O),$._parser.error=null},this._decoder=null,e.forEach(function(O){Object.defineProperty($,"on"+O,{get:function(){return $._parser["on"+O]},set:function(Q){if(!Q)return $.removeAllListeners(O),$._parser["on"+O]=Q,Q;$.on(O,Q)},enumerable:!0,configurable:!1})})}i.prototype=Object.create(t.prototype,{constructor:{value:i}}),i.prototype.write=function(R){if(typeof o=="function"&&typeof o.isBuffer=="function"&&o.isBuffer(R)){if(!this._decoder){var L=r("./node_modules/string_decoder/lib/string_decoder.js").StringDecoder;this._decoder=new L("utf8")}R=this._decoder.write(R)}return this._parser.write(R.toString()),this.emit("data",R),!0},i.prototype.end=function(R){return R&&R.length&&this.write(R),this._parser.end(),!0},i.prototype.on=function(R,L){var $=this;return!$._parser["on"+R]&&e.indexOf(R)!==-1&&($._parser["on"+R]=function(){var O=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);O.splice(0,0,R),$.emit.apply($,O)}),t.prototype.on.call($,R,L)};var d=`\r
	 `,P="0124356789",b="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",A=`'"`,_=d+">",h="[CDATA[",f="DOCTYPE",v="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/2000/xmlns/",S={xml:v,xmlns:c};d=H(d),P=H(P),b=H(b);var p=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,C=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,x=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,V=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;A=H(A),_=H(_);function H(R){return R.split("").reduce(function(L,$){return L[$]=!0,L},{})}function te(R){return Object.prototype.toString.call(R)==="[object RegExp]"}function w(R,L){return te(R)?!!L.match(R):R[L]}function F(R,L){return!w(R,L)}var M=0;l.STATE={BEGIN:M++,BEGIN_WHITESPACE:M++,TEXT:M++,TEXT_ENTITY:M++,OPEN_WAKA:M++,SGML_DECL:M++,SGML_DECL_QUOTED:M++,DOCTYPE:M++,DOCTYPE_QUOTED:M++,DOCTYPE_DTD:M++,DOCTYPE_DTD_QUOTED:M++,COMMENT_STARTING:M++,COMMENT:M++,COMMENT_ENDING:M++,COMMENT_ENDED:M++,CDATA:M++,CDATA_ENDING:M++,CDATA_ENDING_2:M++,PROC_INST:M++,PROC_INST_BODY:M++,PROC_INST_ENDING:M++,OPEN_TAG:M++,OPEN_TAG_SLASH:M++,ATTRIB:M++,ATTRIB_NAME:M++,ATTRIB_NAME_SAW_WHITE:M++,ATTRIB_VALUE:M++,ATTRIB_VALUE_QUOTED:M++,ATTRIB_VALUE_CLOSED:M++,ATTRIB_VALUE_UNQUOTED:M++,ATTRIB_VALUE_ENTITY_Q:M++,ATTRIB_VALUE_ENTITY_U:M++,CLOSE_TAG:M++,CLOSE_TAG_SAW_WHITE:M++,SCRIPT:M++,SCRIPT_ENDING:M++},l.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},l.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(l.ENTITIES).forEach(function(R){var L=l.ENTITIES[R],$=typeof L=="number"?String.fromCharCode(L):L;l.ENTITIES[R]=$});for(var U in l.STATE)l.STATE[l.STATE[U]]=U;M=l.STATE;function j(R,L,$){R[L]&&R[L]($)}function X(R,L,$){R.textNode&&Y(R),j(R,L,$)}function Y(R){R.textNode=se(R.opt,R.textNode),R.textNode&&j(R,"ontext",R.textNode),R.textNode=""}function se(R,L){return R.trim&&(L=L.trim()),R.normalize&&(L=L.replace(/\s+/g," ")),L}function G(R,L){return Y(R),R.trackPosition&&(L+=`
Line: `+R.line+`
Column: `+R.column+`
Char: `+R.c),L=new Error(L),R.error=L,j(R,"onerror",L),R}function ee(R){return R.sawRoot&&!R.closedRoot&&J(R,"Unclosed root tag"),R.state!==M.BEGIN&&R.state!==M.BEGIN_WHITESPACE&&R.state!==M.TEXT&&G(R,"Unexpected end"),Y(R),R.c="",R.closed=!0,j(R,"onend"),m.call(R,R.strict,R.opt),R}function J(R,L){if(typeof R!="object"||!(R instanceof m))throw new Error("bad call to strictFail");R.strict&&G(R,L)}function ie(R){R.strict||(R.tagName=R.tagName[R.looseCase]());var L=R.tags[R.tags.length-1]||R,$=R.tag={name:R.tagName,attributes:{}};R.opt.xmlns&&($.ns=L.ns),R.attribList.length=0,X(R,"onopentagstart",$)}function ue(R,L){var $=R.indexOf(":"),O=$<0?["",R]:R.split(":"),Q=O[0],ne=O[1];return L&&R==="xmlns"&&(Q="xmlns",ne=""),{prefix:Q,local:ne}}function ae(R){if(R.strict||(R.attribName=R.attribName[R.looseCase]()),R.attribList.indexOf(R.attribName)!==-1||R.tag.attributes.hasOwnProperty(R.attribName)){R.attribName=R.attribValue="";return}if(R.opt.xmlns){var L=ue(R.attribName,!0),$=L.prefix,O=L.local;if($==="xmlns")if(O==="xml"&&R.attribValue!==v)J(R,"xml: prefix must be bound to "+v+`
Actual: `+R.attribValue);else if(O==="xmlns"&&R.attribValue!==c)J(R,"xmlns: prefix must be bound to "+c+`
Actual: `+R.attribValue);else{var Q=R.tag,ne=R.tags[R.tags.length-1]||R;Q.ns===ne.ns&&(Q.ns=Object.create(ne.ns)),Q.ns[O]=R.attribValue}R.attribList.push([R.attribName,R.attribValue])}else R.tag.attributes[R.attribName]=R.attribValue,X(R,"onattribute",{name:R.attribName,value:R.attribValue});R.attribName=R.attribValue=""}function oe(R,L){if(R.opt.xmlns){var $=R.tag,O=ue(R.tagName);$.prefix=O.prefix,$.local=O.local,$.uri=$.ns[O.prefix]||"",$.prefix&&!$.uri&&(J(R,"Unbound namespace prefix: "+JSON.stringify(R.tagName)),$.uri=O.prefix);var Q=R.tags[R.tags.length-1]||R;$.ns&&Q.ns!==$.ns&&Object.keys($.ns).forEach(function(be){X(R,"onopennamespace",{prefix:be,uri:$.ns[be]})});for(var ne=0,ce=R.attribList.length;ne<ce;ne++){var W=R.attribList[ne],B=W[0],D=W[1],q=ue(B,!0),me=q.prefix,de=q.local,ve=me===""?"":$.ns[me]||"",Se={name:B,value:D,prefix:me,local:de,uri:ve};me&&me!=="xmlns"&&!ve&&(J(R,"Unbound namespace prefix: "+JSON.stringify(me)),Se.uri=me),R.tag.attributes[B]=Se,X(R,"onattribute",Se)}R.attribList.length=0}R.tag.isSelfClosing=!!L,R.sawRoot=!0,R.tags.push(R.tag),X(R,"onopentag",R.tag),L||(!R.noscript&&R.tagName.toLowerCase()==="script"?R.state=M.SCRIPT:R.state=M.TEXT,R.tag=null,R.tagName=""),R.attribName=R.attribValue="",R.attribList.length=0}function Z(R){if(!R.tagName){J(R,"Weird empty close tag."),R.textNode+="</>",R.state=M.TEXT;return}if(R.script){if(R.tagName!=="script"){R.script+="</"+R.tagName+">",R.tagName="",R.state=M.SCRIPT;return}X(R,"onscript",R.script),R.script=""}var L=R.tags.length,$=R.tagName;R.strict||($=$[R.looseCase]());for(var O=$;L--;){var Q=R.tags[L];if(Q.name!==O)J(R,"Unexpected close tag");else break}if(L<0){J(R,"Unmatched closing tag: "+R.tagName),R.textNode+="</"+R.tagName+">",R.state=M.TEXT;return}R.tagName=$;for(var ne=R.tags.length;ne-- >L;){var ce=R.tag=R.tags.pop();R.tagName=R.tag.name,X(R,"onclosetag",R.tagName);var W={};for(var B in ce.ns)W[B]=ce.ns[B];var D=R.tags[R.tags.length-1]||R;R.opt.xmlns&&ce.ns!==D.ns&&Object.keys(ce.ns).forEach(function(q){var me=ce.ns[q];X(R,"onclosenamespace",{prefix:q,uri:me})})}L===0&&(R.closedRoot=!0),R.tagName=R.attribValue=R.attribName="",R.attribList.length=0,R.state=M.TEXT}function ge(R){var L=R.entity,$=L.toLowerCase(),O,Q="";return R.ENTITIES[L]?R.ENTITIES[L]:R.ENTITIES[$]?R.ENTITIES[$]:(L=$,L.charAt(0)==="#"&&(L.charAt(1)==="x"?(L=L.slice(2),O=parseInt(L,16),Q=O.toString(16)):(L=L.slice(1),O=parseInt(L,10),Q=O.toString(10))),L=L.replace(/^0+/,""),Q.toLowerCase()!==L?(J(R,"Invalid character entity"),"&"+R.entity+";"):String.fromCodePoint(O))}function le(R,L){L==="<"?(R.state=M.OPEN_WAKA,R.startTagPosition=R.position):F(d,L)&&(J(R,"Non-whitespace before first tag."),R.textNode=L,R.state=M.TEXT)}function z(R,L){var $="";return L<R.length&&($=R.charAt(L)),$}function K(R){var L=this;if(this.error)throw this.error;if(L.closed)return G(L,"Cannot write after close. Assign an onready handler.");if(R===null)return ee(L);typeof R=="object"&&(R=R.toString());for(var $=0,O="";O=z(R,$++),L.c=O,!!O;)switch(L.trackPosition&&(L.position++,O===`
`?(L.line++,L.column=0):L.column++),L.state){case M.BEGIN:if(L.state=M.BEGIN_WHITESPACE,O==="\uFEFF")continue;le(L,O);continue;case M.BEGIN_WHITESPACE:le(L,O);continue;case M.TEXT:if(L.sawRoot&&!L.closedRoot){for(var Q=$-1;O&&O!=="<"&&O!=="&";)O=z(R,$++),O&&L.trackPosition&&(L.position++,O===`
`?(L.line++,L.column=0):L.column++);L.textNode+=R.substring(Q,$-1)}O==="<"&&!(L.sawRoot&&L.closedRoot&&!L.strict)?(L.state=M.OPEN_WAKA,L.startTagPosition=L.position):(F(d,O)&&(!L.sawRoot||L.closedRoot)&&J(L,"Text data outside of root node."),O==="&"?L.state=M.TEXT_ENTITY:L.textNode+=O);continue;case M.SCRIPT:O==="<"?L.state=M.SCRIPT_ENDING:L.script+=O;continue;case M.SCRIPT_ENDING:O==="/"?L.state=M.CLOSE_TAG:(L.script+="<"+O,L.state=M.SCRIPT);continue;case M.OPEN_WAKA:if(O==="!")L.state=M.SGML_DECL,L.sgmlDecl="";else if(!w(d,O))if(w(p,O))L.state=M.OPEN_TAG,L.tagName=O;else if(O==="/")L.state=M.CLOSE_TAG,L.tagName="";else if(O==="?")L.state=M.PROC_INST,L.procInstName=L.procInstBody="";else{if(J(L,"Unencoded <"),L.startTagPosition+1<L.position){var ne=L.position-L.startTagPosition;O=new Array(ne).join(" ")+O}L.textNode+="<"+O,L.state=M.TEXT}continue;case M.SGML_DECL:(L.sgmlDecl+O).toUpperCase()===h?(X(L,"onopencdata"),L.state=M.CDATA,L.sgmlDecl="",L.cdata=""):L.sgmlDecl+O==="--"?(L.state=M.COMMENT,L.comment="",L.sgmlDecl=""):(L.sgmlDecl+O).toUpperCase()===f?(L.state=M.DOCTYPE,(L.doctype||L.sawRoot)&&J(L,"Inappropriately located doctype declaration"),L.doctype="",L.sgmlDecl=""):O===">"?(X(L,"onsgmldeclaration",L.sgmlDecl),L.sgmlDecl="",L.state=M.TEXT):(w(A,O)&&(L.state=M.SGML_DECL_QUOTED),L.sgmlDecl+=O);continue;case M.SGML_DECL_QUOTED:O===L.q&&(L.state=M.SGML_DECL,L.q=""),L.sgmlDecl+=O;continue;case M.DOCTYPE:O===">"?(L.state=M.TEXT,X(L,"ondoctype",L.doctype),L.doctype=!0):(L.doctype+=O,O==="["?L.state=M.DOCTYPE_DTD:w(A,O)&&(L.state=M.DOCTYPE_QUOTED,L.q=O));continue;case M.DOCTYPE_QUOTED:L.doctype+=O,O===L.q&&(L.q="",L.state=M.DOCTYPE);continue;case M.DOCTYPE_DTD:L.doctype+=O,O==="]"?L.state=M.DOCTYPE:w(A,O)&&(L.state=M.DOCTYPE_DTD_QUOTED,L.q=O);continue;case M.DOCTYPE_DTD_QUOTED:L.doctype+=O,O===L.q&&(L.state=M.DOCTYPE_DTD,L.q="");continue;case M.COMMENT:O==="-"?L.state=M.COMMENT_ENDING:L.comment+=O;continue;case M.COMMENT_ENDING:O==="-"?(L.state=M.COMMENT_ENDED,L.comment=se(L.opt,L.comment),L.comment&&X(L,"oncomment",L.comment),L.comment=""):(L.comment+="-"+O,L.state=M.COMMENT);continue;case M.COMMENT_ENDED:O!==">"?(J(L,"Malformed comment"),L.comment+="--"+O,L.state=M.COMMENT):L.state=M.TEXT;continue;case M.CDATA:O==="]"?L.state=M.CDATA_ENDING:L.cdata+=O;continue;case M.CDATA_ENDING:O==="]"?L.state=M.CDATA_ENDING_2:(L.cdata+="]"+O,L.state=M.CDATA);continue;case M.CDATA_ENDING_2:O===">"?(L.cdata&&X(L,"oncdata",L.cdata),X(L,"onclosecdata"),L.cdata="",L.state=M.TEXT):O==="]"?L.cdata+="]":(L.cdata+="]]"+O,L.state=M.CDATA);continue;case M.PROC_INST:O==="?"?L.state=M.PROC_INST_ENDING:w(d,O)?L.state=M.PROC_INST_BODY:L.procInstName+=O;continue;case M.PROC_INST_BODY:if(!L.procInstBody&&w(d,O))continue;O==="?"?L.state=M.PROC_INST_ENDING:L.procInstBody+=O;continue;case M.PROC_INST_ENDING:O===">"?(X(L,"onprocessinginstruction",{name:L.procInstName,body:L.procInstBody}),L.procInstName=L.procInstBody="",L.state=M.TEXT):(L.procInstBody+="?"+O,L.state=M.PROC_INST_BODY);continue;case M.OPEN_TAG:w(C,O)?L.tagName+=O:(ie(L),O===">"?oe(L):O==="/"?L.state=M.OPEN_TAG_SLASH:(F(d,O)&&J(L,"Invalid character in tag name"),L.state=M.ATTRIB));continue;case M.OPEN_TAG_SLASH:O===">"?(oe(L,!0),Z(L)):(J(L,"Forward-slash in opening tag not followed by >"),L.state=M.ATTRIB);continue;case M.ATTRIB:if(w(d,O))continue;O===">"?oe(L):O==="/"?L.state=M.OPEN_TAG_SLASH:w(p,O)?(L.attribName=O,L.attribValue="",L.state=M.ATTRIB_NAME):J(L,"Invalid attribute name");continue;case M.ATTRIB_NAME:O==="="?L.state=M.ATTRIB_VALUE:O===">"?(J(L,"Attribute without value"),L.attribValue=L.attribName,ae(L),oe(L)):w(d,O)?L.state=M.ATTRIB_NAME_SAW_WHITE:w(C,O)?L.attribName+=O:J(L,"Invalid attribute name");continue;case M.ATTRIB_NAME_SAW_WHITE:if(O==="=")L.state=M.ATTRIB_VALUE;else{if(w(d,O))continue;J(L,"Attribute without value"),L.tag.attributes[L.attribName]="",L.attribValue="",X(L,"onattribute",{name:L.attribName,value:""}),L.attribName="",O===">"?oe(L):w(p,O)?(L.attribName=O,L.state=M.ATTRIB_NAME):(J(L,"Invalid attribute name"),L.state=M.ATTRIB)}continue;case M.ATTRIB_VALUE:if(w(d,O))continue;w(A,O)?(L.q=O,L.state=M.ATTRIB_VALUE_QUOTED):(J(L,"Unquoted attribute value"),L.state=M.ATTRIB_VALUE_UNQUOTED,L.attribValue=O);continue;case M.ATTRIB_VALUE_QUOTED:if(O!==L.q){O==="&"?L.state=M.ATTRIB_VALUE_ENTITY_Q:L.attribValue+=O;continue}ae(L),L.q="",L.state=M.ATTRIB_VALUE_CLOSED;continue;case M.ATTRIB_VALUE_CLOSED:w(d,O)?L.state=M.ATTRIB:O===">"?oe(L):O==="/"?L.state=M.OPEN_TAG_SLASH:w(p,O)?(J(L,"No whitespace between attributes"),L.attribName=O,L.attribValue="",L.state=M.ATTRIB_NAME):J(L,"Invalid attribute name");continue;case M.ATTRIB_VALUE_UNQUOTED:if(F(_,O)){O==="&"?L.state=M.ATTRIB_VALUE_ENTITY_U:L.attribValue+=O;continue}ae(L),O===">"?oe(L):L.state=M.ATTRIB;continue;case M.CLOSE_TAG:if(L.tagName)O===">"?Z(L):w(C,O)?L.tagName+=O:L.script?(L.script+="</"+L.tagName,L.tagName="",L.state=M.SCRIPT):(F(d,O)&&J(L,"Invalid tagname in closing tag"),L.state=M.CLOSE_TAG_SAW_WHITE);else{if(w(d,O))continue;F(p,O)?L.script?(L.script+="</"+O,L.state=M.SCRIPT):J(L,"Invalid tagname in closing tag."):L.tagName=O}continue;case M.CLOSE_TAG_SAW_WHITE:if(w(d,O))continue;O===">"?Z(L):J(L,"Invalid characters in closing tag");continue;case M.TEXT_ENTITY:case M.ATTRIB_VALUE_ENTITY_Q:case M.ATTRIB_VALUE_ENTITY_U:var ce,W;switch(L.state){case M.TEXT_ENTITY:ce=M.TEXT,W="textNode";break;case M.ATTRIB_VALUE_ENTITY_Q:ce=M.ATTRIB_VALUE_QUOTED,W="attribValue";break;case M.ATTRIB_VALUE_ENTITY_U:ce=M.ATTRIB_VALUE_UNQUOTED,W="attribValue";break}O===";"?(L[W]+=ge(L),L.entity="",L.state=ce):w(L.entity.length?V:x,O)?L.entity+=O:(J(L,"Invalid character in entity name"),L[W]+="&"+L.entity+O,L.entity="",L.state=ce);continue;default:throw new Error(L,"Unknown state: "+L.state)}return L.position>=L.bufferCheckPosition&&y(L),L}String.fromCodePoint||function(){var R=String.fromCharCode,L=Math.floor,$=function(){var O=16384,Q=[],ne,ce,W=-1,B=arguments.length;if(!B)return"";for(var D="";++W<B;){var q=Number(arguments[W]);if(!isFinite(q)||q<0||q>1114111||L(q)!==q)throw RangeError("Invalid code point: "+q);q<=65535?Q.push(q):(q-=65536,ne=(q>>10)+55296,ce=q%1024+56320,Q.push(ne,ce)),(W+1===B||Q.length>O)&&(D+=R.apply(null,Q),Q.length=0)}return D};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:$,configurable:!0,writable:!0}):String.fromCodePoint=$}()})(g)}).call(this,r("./node_modules/buffer/index.js").Buffer)},"./node_modules/setimmediate/setImmediate.js":function(I,g,r){(function(o,l){(function(u,m){"use strict";if(u.setImmediate)return;var y=1,T={},E=!1,t=u.document,e;function n(S){typeof S!="function"&&(S=new Function(""+S));for(var p=new Array(arguments.length-1),C=0;C<p.length;C++)p[C]=arguments[C+1];var x={callback:S,args:p};return T[y]=x,e(y),y++}function i(S){delete T[S]}function d(S){var p=S.callback,C=S.args;switch(C.length){case 0:p();break;case 1:p(C[0]);break;case 2:p(C[0],C[1]);break;case 3:p(C[0],C[1],C[2]);break;default:p.apply(m,C);break}}function P(S){if(E)setTimeout(P,0,S);else{var p=T[S];if(p){E=!0;try{d(p)}finally{i(S),E=!1}}}}function b(){e=function(S){l.nextTick(function(){P(S)})}}function A(){if(u.postMessage&&!u.importScripts){var S=!0,p=u.onmessage;return u.onmessage=function(){S=!1},u.postMessage("","*"),u.onmessage=p,S}}function _(){var S="setImmediate$"+Math.random()+"$",p=function(C){C.source===u&&typeof C.data=="string"&&C.data.indexOf(S)===0&&P(+C.data.slice(S.length))};u.addEventListener?u.addEventListener("message",p,!1):u.attachEvent("onmessage",p),e=function(C){u.postMessage(S+C,"*")}}function h(){var S=new MessageChannel;S.port1.onmessage=function(p){var C=p.data;P(C)},e=function(p){S.port2.postMessage(p)}}function f(){var S=t.documentElement;e=function(p){var C=t.createElement("script");C.onreadystatechange=function(){P(p),C.onreadystatechange=null,S.removeChild(C),C=null},S.appendChild(C)}}function v(){e=function(S){setTimeout(P,0,S)}}var c=Object.getPrototypeOf&&Object.getPrototypeOf(u);c=c&&c.setTimeout?c:u,{}.toString.call(u.process)==="[object process]"?b():A()?_():u.MessageChannel?h():t&&"onreadystatechange"in t.createElement("script")?f():v(),c.setImmediate=n,c.clearImmediate=i})(typeof self>"u"?typeof o>"u"?this:o:self)}).call(this,r("./node_modules/webpack/buildin/global.js"),r("./node_modules/process/browser.js"))},"./node_modules/stream-browserify/index.js":function(I,g,r){I.exports=u;var o=r("./node_modules/events/events.js").EventEmitter,l=r("./node_modules/inherits/inherits_browser.js");l(u,o),u.Readable=r("./node_modules/readable-stream/readable-browser.js"),u.Writable=r("./node_modules/readable-stream/writable-browser.js"),u.Duplex=r("./node_modules/readable-stream/duplex-browser.js"),u.Transform=r("./node_modules/readable-stream/transform.js"),u.PassThrough=r("./node_modules/readable-stream/passthrough.js"),u.Stream=u;function u(){o.call(this)}u.prototype.pipe=function(m,y){var T=this;function E(b){m.writable&&m.write(b)===!1&&T.pause&&T.pause()}T.on("data",E);function t(){T.readable&&T.resume&&T.resume()}m.on("drain",t),!m._isStdio&&(!y||y.end!==!1)&&(T.on("end",n),T.on("close",i));var e=!1;function n(){e||(e=!0,m.end())}function i(){e||(e=!0,typeof m.destroy=="function"&&m.destroy())}function d(b){if(P(),o.listenerCount(this,"error")===0)throw b}T.on("error",d),m.on("error",d);function P(){T.removeListener("data",E),m.removeListener("drain",t),T.removeListener("end",n),T.removeListener("close",i),T.removeListener("error",d),m.removeListener("error",d),T.removeListener("end",P),T.removeListener("close",P),m.removeListener("close",P)}return T.on("end",P),T.on("close",P),m.on("close",P),m.emit("pipe",T),m}},"./node_modules/string_decoder/lib/string_decoder.js":function(I,g,r){"use strict";var o=r("./node_modules/safe-buffer/index.js").Buffer,l=o.isEncoding||function(f){switch(f=""+f,f&&f.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(f){if(!f)return"utf8";for(var v;;)switch(f){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return f;default:if(v)return;f=(""+f).toLowerCase(),v=!0}}function m(f){var v=u(f);if(typeof v!="string"&&(o.isEncoding===l||!l(f)))throw new Error("Unknown encoding: "+f);return v||f}g.StringDecoder=y;function y(f){this.encoding=m(f);var v;switch(this.encoding){case"utf16le":this.text=d,this.end=P,v=4;break;case"utf8":this.fillLast=e,v=4;break;case"base64":this.text=b,this.end=A,v=3;break;default:this.write=_,this.end=h;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(v)}y.prototype.write=function(f){if(f.length===0)return"";var v,c;if(this.lastNeed){if(v=this.fillLast(f),v===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<f.length?v?v+this.text(f,c):this.text(f,c):v||""},y.prototype.end=i,y.prototype.text=n,y.prototype.fillLast=function(f){if(this.lastNeed<=f.length)return f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,this.lastTotal-this.lastNeed,0,f.length),this.lastNeed-=f.length};function T(f){return f<=127?0:f>>5===6?2:f>>4===14?3:f>>3===30?4:f>>6===2?-1:-2}function E(f,v,c){var S=v.length-1;if(S<c)return 0;var p=T(v[S]);return p>=0?(p>0&&(f.lastNeed=p-1),p):--S<c||p===-2?0:(p=T(v[S]),p>=0?(p>0&&(f.lastNeed=p-2),p):--S<c||p===-2?0:(p=T(v[S]),p>=0?(p>0&&(p===2?p=0:f.lastNeed=p-3),p):0))}function t(f,v,c){if((v[0]&192)!==128)return f.lastNeed=0,"\uFFFD";if(f.lastNeed>1&&v.length>1){if((v[1]&192)!==128)return f.lastNeed=1,"\uFFFD";if(f.lastNeed>2&&v.length>2&&(v[2]&192)!==128)return f.lastNeed=2,"\uFFFD"}}function e(f){var v=this.lastTotal-this.lastNeed,c=t(this,f,v);if(c!==void 0)return c;if(this.lastNeed<=f.length)return f.copy(this.lastChar,v,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);f.copy(this.lastChar,v,0,f.length),this.lastNeed-=f.length}function n(f,v){var c=E(this,f,v);if(!this.lastNeed)return f.toString("utf8",v);this.lastTotal=c;var S=f.length-(c-this.lastNeed);return f.copy(this.lastChar,0,S),f.toString("utf8",v,S)}function i(f){var v=f&&f.length?this.write(f):"";return this.lastNeed?v+"\uFFFD":v}function d(f,v){if((f.length-v)%2===0){var c=f.toString("utf16le",v);if(c){var S=c.charCodeAt(c.length-1);if(S>=55296&&S<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=f[f.length-1],f.toString("utf16le",v,f.length-1)}function P(f){var v=f&&f.length?this.write(f):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return v+this.lastChar.toString("utf16le",0,c)}return v}function b(f,v){var c=(f.length-v)%3;return c===0?f.toString("base64",v):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=f[f.length-1]:(this.lastChar[0]=f[f.length-2],this.lastChar[1]=f[f.length-1]),f.toString("base64",v,f.length-c))}function A(f){var v=f&&f.length?this.write(f):"";return this.lastNeed?v+this.lastChar.toString("base64",0,3-this.lastNeed):v}function _(f){return f.toString(this.encoding)}function h(f){return f&&f.length?this.write(f):""}},"./node_modules/timers-browserify/main.js":function(I,g,r){(function(o){var l=typeof o<"u"&&o||typeof self<"u"&&self||window,u=Function.prototype.apply;g.setTimeout=function(){return new m(u.call(setTimeout,l,arguments),clearTimeout)},g.setInterval=function(){return new m(u.call(setInterval,l,arguments),clearInterval)},g.clearTimeout=g.clearInterval=function(y){y&&y.close()};function m(y,T){this._id=y,this._clearFn=T}m.prototype.unref=m.prototype.ref=function(){},m.prototype.close=function(){this._clearFn.call(l,this._id)},g.enroll=function(y,T){clearTimeout(y._idleTimeoutId),y._idleTimeout=T},g.unenroll=function(y){clearTimeout(y._idleTimeoutId),y._idleTimeout=-1},g._unrefActive=g.active=function(y){clearTimeout(y._idleTimeoutId);var T=y._idleTimeout;T>=0&&(y._idleTimeoutId=setTimeout(function(){y._onTimeout&&y._onTimeout()},T))},r("./node_modules/setimmediate/setImmediate.js"),g.setImmediate=typeof self<"u"&&self.setImmediate||typeof o<"u"&&o.setImmediate||this&&this.setImmediate,g.clearImmediate=typeof self<"u"&&self.clearImmediate||typeof o<"u"&&o.clearImmediate||this&&this.clearImmediate}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/ua-parser-js/src/ua-parser.js":function(I,g,r){var o;(function(l,u){"use strict";var m="1.0.32",y="",T="?",E="function",t="undefined",e="object",n="string",i="major",d="model",P="name",b="type",A="vendor",_="version",h="architecture",f="console",v="mobile",c="tablet",S="smarttv",p="wearable",C="embedded",x=350,V="Amazon",H="Apple",te="ASUS",w="BlackBerry",F="Browser",M="Chrome",U="Edge",j="Firefox",X="Google",Y="Huawei",se="LG",G="Microsoft",ee="Motorola",J="Opera",ie="Samsung",ue="Sharp",ae="Sony",oe="Xiaomi",Z="Zebra",ge="Facebook",le=function(me,de){var ve={};for(var Se in me)de[Se]&&de[Se].length%2===0?ve[Se]=de[Se].concat(me[Se]):ve[Se]=me[Se];return ve},z=function(me){for(var de={},ve=0;ve<me.length;ve++)de[me[ve].toUpperCase()]=me[ve];return de},K=function(me,de){return typeof me===n?R(de).indexOf(R(me))!==-1:!1},R=function(me){return me.toLowerCase()},L=function(me){return typeof me===n?me.replace(/[^\d\.]/g,y).split(".")[0]:u},$=function(me,de){if(typeof me===n)return me=me.replace(/^\s\s*/,y).replace(/\s\s*$/,y),typeof de===t?me:me.substring(0,x)},O=function(me,de){for(var ve=0,Se,be,Me,Fe,Ee,Pe;ve<de.length&&!Ee;){var Ue=de[ve],Re=de[ve+1];for(Se=be=0;Se<Ue.length&&!Ee;)if(Ee=Ue[Se++].exec(me),Ee)for(Me=0;Me<Re.length;Me++)Pe=Ee[++be],Fe=Re[Me],typeof Fe===e&&Fe.length>0?Fe.length===2?typeof Fe[1]==E?this[Fe[0]]=Fe[1].call(this,Pe):this[Fe[0]]=Fe[1]:Fe.length===3?typeof Fe[1]===E&&!(Fe[1].exec&&Fe[1].test)?this[Fe[0]]=Pe?Fe[1].call(this,Pe,Fe[2]):u:this[Fe[0]]=Pe?Pe.replace(Fe[1],Fe[2]):u:Fe.length===4&&(this[Fe[0]]=Pe?Fe[3].call(this,Pe.replace(Fe[1],Fe[2])):u):this[Fe]=Pe||u;ve+=2}},Q=function(me,de){for(var ve in de)if(typeof de[ve]===e&&de[ve].length>0){for(var Se=0;Se<de[ve].length;Se++)if(K(de[ve][Se],me))return ve===T?u:ve}else if(K(de[ve],me))return ve===T?u:ve;return me},ne={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ce={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_,[P,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_,[P,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[P,_],[/opios[\/ ]+([\w\.]+)/i],[_,[P,J+" Mini"]],[/\bopr\/([\w\.]+)/i],[_,[P,J]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[P,_],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_,[P,"UC"+F]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[_,[P,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[_,[P,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_,[P,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_,[P,"IE"]],[/yabrowser\/([\w\.]+)/i],[_,[P,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[P,/(.+)/,"$1 Secure "+F],_],[/\bfocus\/([\w\.]+)/i],[_,[P,j+" Focus"]],[/\bopt\/([\w\.]+)/i],[_,[P,J+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_,[P,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_,[P,"Dolphin"]],[/coast\/([\w\.]+)/i],[_,[P,J+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[_,[P,"MIUI "+F]],[/fxios\/([-\w\.]+)/i],[_,[P,j]],[/\bqihu|(qi?ho?o?|360)browser/i],[[P,"360 "+F]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[P,/(.+)/,"$1 "+F],_],[/(comodo_dragon)\/([\w\.]+)/i],[[P,/_/g," "],_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[P,_],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[P],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[P,ge],_],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[P,_],[/\bgsa\/([\w\.]+) .*safari\//i],[_,[P,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[_,[P,M+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[P,M+" WebView"],_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_,[P,"Android "+F]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[P,_],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[_,[P,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[_,P],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[P,[_,Q,ne]],[/(webkit|khtml)\/([\w\.]+)/i],[P,_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[P,"Netscape"],_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_,[P,j+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[P,_]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,R]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[h,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[h,"armhf"]],[/windows (ce|mobile); ppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[h,/ower/,y,R]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[h,R]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[A,ie],[b,c]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[A,ie],[b,v]],[/\((ip(?:hone|od)[\w ]*);/i],[d,[A,H],[b,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[A,H],[b,c]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[A,Y],[b,c]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[A,Y],[b,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[A,oe],[b,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[A,oe],[b,c]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[A,"OPPO"],[b,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[A,"Vivo"],[b,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[d,[A,"Realme"],[b,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[A,ee],[b,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[A,ee],[b,c]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[A,se],[b,c]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[A,se],[b,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[A,"Lenovo"],[b,c]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[A,"Nokia"],[b,v]],[/(pixel c)\b/i],[d,[A,X],[b,c]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[A,X],[b,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[A,ae],[b,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[A,ae],[b,c]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[A,"OnePlus"],[b,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[A,V],[b,c]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[A,V],[b,v]],[/(playbook);[-\w\),; ]+(rim)/i],[d,A,[b,c]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[A,w],[b,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[A,te],[b,c]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[A,te],[b,v]],[/(nexus 9)/i],[d,[A,"HTC"],[b,c]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[A,[d,/_/g," "],[b,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[A,"Acer"],[b,c]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[A,"Meizu"],[b,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[A,ue],[b,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[A,d,[b,v]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[A,d,[b,c]],[/(surface duo)/i],[d,[A,G],[b,c]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[A,"Fairphone"],[b,v]],[/(u304aa)/i],[d,[A,"AT&T"],[b,v]],[/\bsie-(\w*)/i],[d,[A,"Siemens"],[b,v]],[/\b(rct\w+) b/i],[d,[A,"RCA"],[b,c]],[/\b(venue[\d ]{2,7}) b/i],[d,[A,"Dell"],[b,c]],[/\b(q(?:mv|ta)\w+) b/i],[d,[A,"Verizon"],[b,c]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[A,"Barnes & Noble"],[b,c]],[/\b(tm\d{3}\w+) b/i],[d,[A,"NuVision"],[b,c]],[/\b(k88) b/i],[d,[A,"ZTE"],[b,c]],[/\b(nx\d{3}j) b/i],[d,[A,"ZTE"],[b,v]],[/\b(gen\d{3}) b.+49h/i],[d,[A,"Swiss"],[b,v]],[/\b(zur\d{3}) b/i],[d,[A,"Swiss"],[b,c]],[/\b((zeki)?tb.*\b) b/i],[d,[A,"Zeki"],[b,c]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[A,"Dragon Touch"],d,[b,c]],[/\b(ns-?\w{0,9}) b/i],[d,[A,"Insignia"],[b,c]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[A,"NextBook"],[b,c]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[A,"Voice"],d,[b,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[A,"LvTel"],d,[b,v]],[/\b(ph-1) /i],[d,[A,"Essential"],[b,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[A,"Envizen"],[b,c]],[/\b(trio[-\w\. ]+) b/i],[d,[A,"MachSpeed"],[b,c]],[/\btu_(1491) b/i],[d,[A,"Rotor"],[b,c]],[/(shield[\w ]+) b/i],[d,[A,"Nvidia"],[b,c]],[/(sprint) (\w+)/i],[A,d,[b,v]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[A,G],[b,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[A,Z],[b,c]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[A,Z],[b,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[A,d,[b,f]],[/droid.+; (shield) bui/i],[d,[A,"Nvidia"],[b,f]],[/(playstation [345portablevi]+)/i],[d,[A,ae],[b,f]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[A,G],[b,f]],[/smart-tv.+(samsung)/i],[A,[b,S]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[A,ie],[b,S]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[A,se],[b,S]],[/(apple) ?tv/i],[A,[d,H+" TV"],[b,S]],[/crkey/i],[[d,M+"cast"],[A,X],[b,S]],[/droid.+aft(\w)( bui|\))/i],[d,[A,V],[b,S]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[A,ue],[b,S]],[/(bravia[\w ]+)( bui|\))/i],[d,[A,ae],[b,S]],[/(mitv-\w{5}) bui/i],[d,[A,oe],[b,S]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[A,$],[d,$],[b,S]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[b,S]],[/((pebble))app/i],[A,d,[b,p]],[/droid.+; (glass) \d/i],[d,[A,X],[b,p]],[/droid.+; (wt63?0{2,3})\)/i],[d,[A,Z],[b,p]],[/(quest( 2)?)/i],[d,[A,ge],[b,p]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[A,[b,C]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[d,[b,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[b,c]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[b,c]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[b,v]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[A,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_,[P,U+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_,[P,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[P,_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_,P]],os:[[/microsoft (windows) (vista|xp)/i],[P,_],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[P,[_,Q,ce]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[P,"Windows"],[_,Q,ce]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[_,/_/g,"."],[P,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[P,"Mac OS"],[_,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[_,P],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[P,_],[/\(bb(10);/i],[_,[P,w]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_,[P,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_,[P,j+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_,[P,"webOS"]],[/crkey\/([\d\.]+)/i],[_,[P,M+"cast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[P,"Chromium OS"],_],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[P,_],[/(sunos) ?([\w\.\d]*)/i],[[P,"Solaris"],_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[P,_]]},B=function(me,de){if(typeof me===e&&(de=me,me=u),!(this instanceof B))return new B(me,de).getResult();var ve=me||(typeof l!==t&&l.navigator&&l.navigator.userAgent?l.navigator.userAgent:y),Se=de?le(W,de):W;return this.getBrowser=function(){var be={};return be[P]=u,be[_]=u,O.call(be,ve,Se.browser),be.major=L(be.version),be},this.getCPU=function(){var be={};return be[h]=u,O.call(be,ve,Se.cpu),be},this.getDevice=function(){var be={};return be[A]=u,be[d]=u,be[b]=u,O.call(be,ve,Se.device),be},this.getEngine=function(){var be={};return be[P]=u,be[_]=u,O.call(be,ve,Se.engine),be},this.getOS=function(){var be={};return be[P]=u,be[_]=u,O.call(be,ve,Se.os),be},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ve},this.setUA=function(be){return ve=typeof be===n&&be.length>x?$(be,x):be,this},this.setUA(ve),this};B.VERSION=m,B.BROWSER=z([P,_,i]),B.CPU=z([h]),B.DEVICE=z([d,A,b,f,v,S,c,p,C]),B.ENGINE=B.OS=z([P,_]),typeof g!==t?(typeof I!==t&&I.exports&&(g=I.exports=B),g.UAParser=B):E==="function"&&r("./node_modules/webpack/buildin/amd-options.js")?(o=function(){return B}.call(g,r,g,I),o!==u&&(I.exports=o)):typeof l!==t&&(l.UAParser=B);var D=typeof l!==t&&(l.jQuery||l.Zepto);if(D&&!D.ua){var q=new B;D.ua=q.getResult(),D.ua.get=function(){return q.getUA()},D.ua.set=function(me){q.setUA(me);var de=q.getResult();for(var ve in de)D.ua[ve]=de[ve]}}})(typeof window=="object"?window:this)},"./node_modules/util-deprecate/browser.js":function(I,g,r){(function(o){I.exports=l;function l(m,y){if(u("noDeprecation"))return m;var T=!1;function E(){if(!T){if(u("throwDeprecation"))throw new Error(y);u("traceDeprecation")?console.trace(y):console.warn(y),T=!0}return m.apply(this,arguments)}return E}function u(m){try{if(!o.localStorage)return!1}catch{return!1}var y=o.localStorage[m];return y==null?!1:String(y).toLowerCase()==="true"}}).call(this,r("./node_modules/webpack/buildin/global.js"))},"./node_modules/webpack/buildin/amd-options.js":function(I,g){(function(r){I.exports=r}).call(this,{})},"./node_modules/webpack/buildin/global.js":function(I,g){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}I.exports=r},"./src/core/Debug.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/EventBus.js"),l=r("./src/core/events/Events.js"),u=r("./src/core/FactoryMaker.js"),m=0,y=1,T=2,E=3,t=4,e=5;function n(d){d=d||{};var P=this.context,b=Object(o.default)(P).getInstance(),A=d.settings,_=[],h,f,v,c;function S(){f=!0,v=!0,c=new Date().getTime(),typeof window<"u"&&window.console&&(_[y]=p(window.console.error),_[T]=p(window.console.error),_[E]=p(window.console.warn),_[t]=p(window.console.info),_[e]=p(window.console.debug))}function p(j){return j&&j.bind?j.bind(window.console):window.console.log.bind(window.console)}function C(j){return{fatal:H.bind(j),error:te.bind(j),warn:w.bind(j),info:F.bind(j),debug:M.bind(j)}}function x(j){f=j}function V(j){v=j}function H(){for(var j=arguments.length,X=new Array(j),Y=0;Y<j;Y++)X[Y]=arguments[Y];U.apply(void 0,[y,this].concat(X))}function te(){for(var j=arguments.length,X=new Array(j),Y=0;Y<j;Y++)X[Y]=arguments[Y];U.apply(void 0,[T,this].concat(X))}function w(){for(var j=arguments.length,X=new Array(j),Y=0;Y<j;Y++)X[Y]=arguments[Y];U.apply(void 0,[E,this].concat(X))}function F(){for(var j=arguments.length,X=new Array(j),Y=0;Y<j;Y++)X[Y]=arguments[Y];U.apply(void 0,[t,this].concat(X))}function M(){for(var j=arguments.length,X=new Array(j),Y=0;Y<j;Y++)X[Y]=arguments[Y];U.apply(void 0,[e,this].concat(X))}function U(j,X){var Y="",se=null;f&&(se=new Date().getTime(),Y+="["+(se-c)+"]"),v&&X&&X.getClassName&&(Y+="["+X.getClassName()+"]",X.getType&&(Y+="["+X.getType()+"]")),Y.length>0&&(Y+=" ");for(var G=arguments.length,ee=new Array(G>2?G-2:0),J=2;J<G;J++)ee[J-2]=arguments[J];Array.apply(null,ee).forEach(function(ie){Y+=ie+" "}),_[j]&&A.get().debug.logLevel>=j&&_[j](Y),A&&A.get().debug.dispatchEvent&&b.trigger(l.default.LOG,{message:Y,level:j})}return h={getLogger:C,setLogTimestampVisible:x,setCalleeNameVisible:V},S(),h}n.__dashjs_factory_name="Debug";var i=u.default.getSingletonFactory(n);i.LOG_LEVEL_NONE=m,i.LOG_LEVEL_FATAL=y,i.LOG_LEVEL_ERROR=T,i.LOG_LEVEL_WARNING=E,i.LOG_LEVEL_INFO=t,i.LOG_LEVEL_DEBUG=e,u.default.updateSingletonFactory(n.__dashjs_factory_name,i),g.default=i},"./src/core/EventBus.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/MediaPlayerEvents.js"),u=0,m=5e3;function y(){var E={};function t(b,A,_){var h=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!b)throw new Error("event type cannot be null or undefined");if(!A||typeof A!="function")throw new Error("listener must be a function: "+A);var f=h.priority||u;if(!(i(b,A,_)>=0)){E[b]=E[b]||[];var v={callback:A,scope:_,priority:f};_&&_.getStreamId&&(v.streamId=_.getStreamId()),_&&_.getType&&(v.mediaType=_.getType()),h&&h.mode&&(v.mode=h.mode);var c=E[b].some(function(S,p){if(S&&f>S.priority)return E[b].splice(p,0,v),!0});c||E[b].push(v)}}function e(b,A,_){if(!(!b||!A||!E[b])){var h=i(b,A,_);h<0||(E[b][h]=null)}}function n(b){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!b||!E[b])){if(A=A||{},A.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");A.type=b,_.streamId&&(A.streamId=_.streamId),_.mediaType&&(A.mediaType=_.mediaType),E[b].filter(function(h){return!(!h||_.streamId&&h.streamId&&h.streamId!==_.streamId||_.mediaType&&h.mediaType&&h.mediaType!==_.mediaType||_.mode&&h.mode&&h.mode!==_.mode||!h.mode&&_.mode&&_.mode===l.default.EVENT_MODE_ON_RECEIVE)}).forEach(function(h){return h&&h.callback.call(h.scope,A)})}}function i(b,A,_){var h=-1;return E[b]&&E[b].some(function(f,v){if(f&&f.callback===A&&(!_||_===f.scope))return h=v,!0}),h}function d(){E={}}var P={on:t,off:e,trigger:n,reset:d};return P}y.__dashjs_factory_name="EventBus";var T=o.default.getSingletonFactory(y);T.EVENT_PRIORITY_LOW=u,T.EVENT_PRIORITY_HIGH=m,o.default.updateSingletonFactory(y.__dashjs_factory_name,T),g.default=T},"./src/core/FactoryMaker.js":function(I,g,r){"use strict";r.r(g);var o=function(){var l,u=[],m={},y={};function T(v,c,S,p){!p[v]&&c&&(p[v]={instance:c,override:S})}function E(v,c){for(var S in u){var p=u[S];if(p.context===v&&p.name===c)return p.instance}return null}function t(v,c,S){for(var p in u){var C=u[p];if(C.context===v&&C.name===c){u[p].instance=S;return}}u.push({name:c,context:v,instance:S})}function e(v){u=u.filter(function(c){return c.context!==v})}function n(v,c){return c[v]}function i(v,c,S){v in S&&(S[v]=c)}function d(v,c){i(v,c,y)}function P(v){return n(v,y)}function b(v){var c=n(v.__dashjs_factory_name,y);return c||(c=function(p){return p===void 0&&(p={}),{create:function(){return f(v,p,arguments)}}},y[v.__dashjs_factory_name]=c),c}function A(v,c){i(v,c,m)}function _(v){return n(v,m)}function h(v){var c=n(v.__dashjs_factory_name,m);return c||(c=function(p){var C;return p===void 0&&(p={}),{getInstance:function(){return C||(C=E(p,v.__dashjs_factory_name)),C||(C=f(v,p,arguments),u.push({name:v.__dashjs_factory_name,context:p,instance:C})),C}}},m[v.__dashjs_factory_name]=c),c}function f(v,c,S){var p,C=v.__dashjs_factory_name,x=c[C];if(x){var V=x.instance;if(x.override){p=v.apply({context:c},S),V=V.apply({context:c,factory:l,parent:p},S);for(var H in V)p.hasOwnProperty(H)&&(p[H]=V[H])}else return V.apply({context:c,factory:l},S)}else p=v.apply({context:c},S);return p.getClassName=function(){return C},p}return l={extend:T,getSingletonInstance:E,setSingletonInstance:t,deleteSingletonInstances:e,getSingletonFactory:h,getSingletonFactoryByName:_,updateSingletonFactory:A,getClassFactory:b,getClassFactoryByName:P,updateClassFactory:d},l}();g.default=o},"./src/core/Settings.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Utils.js"),u=r("./src/core/Debug.js"),m=r("./src/streaming/constants/Constants.js"),y=r("./src/streaming/vo/metrics/HTTPRequest.js"),T=r("./src/core/EventBus.js"),E=r("./src/core/events/Events.js");function t(b){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},t(b)}function e(b,A,_){return A=n(A),A in b?Object.defineProperty(b,A,{value:_,enumerable:!0,configurable:!0,writable:!0}):b[A]=_,b}function n(b){var A=i(b,"string");return t(A)==="symbol"?A:String(A)}function i(b,A){if(t(b)!=="object"||b===null)return b;var _=b[Symbol.toPrimitive];if(_!==void 0){var h=_.call(b,A||"default");if(t(h)!=="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(b)}function d(){var b,A,_,h=this.context,f=Object(T.default)(h).getInstance(),v={"streaming.delay.liveDelay":E.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":E.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":E.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":E.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":E.default.SETTING_UPDATED_PLAYBACK_RATE_MAX},c={debug:{logLevel:u.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,eventControllerRefreshDelay:100,enableManifestDurationMismatchFix:!0,capabilities:{filterUnsupportedEssentialProperties:!0,useMediaCapabilitiesApi:!1},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:!0,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,stableBufferTime:12,longFormContentDurationThreshold:600,stallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeTypeForTrackSwitch:!0},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:m.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},trackSwitchMode:{audio:m.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:m.default.TRACK_SWITCH_MODE_NEVER_REPLACE},selectionModeForInitialTrack:m.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY,fragmentRequestTimeout:2e4,manifestRequestTimeout:1e4,retryIntervals:(b={},e(b,y.HTTPRequest.MPD_TYPE,500),e(b,y.HTTPRequest.XLINK_EXPANSION_TYPE,500),e(b,y.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),e(b,y.HTTPRequest.INIT_SEGMENT_TYPE,1e3),e(b,y.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),e(b,y.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),e(b,y.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,1e3),e(b,y.HTTPRequest.LICENSE,1e3),e(b,y.HTTPRequest.OTHER_TYPE,1e3),e(b,"lowLatencyReductionFactor",10),b),retryAttempts:(A={},e(A,y.HTTPRequest.MPD_TYPE,3),e(A,y.HTTPRequest.XLINK_EXPANSION_TYPE,1),e(A,y.HTTPRequest.MEDIA_SEGMENT_TYPE,3),e(A,y.HTTPRequest.INIT_SEGMENT_TYPE,3),e(A,y.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),e(A,y.HTTPRequest.INDEX_SEGMENT_TYPE,3),e(A,y.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE,3),e(A,y.HTTPRequest.LICENSE,3),e(A,y.HTTPRequest.OTHER_TYPE,3),e(A,"lowLatencyMultiplyFactor",5),A),abr:{movingAverageMethod:m.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:m.default.ABR_STRATEGY_DYNAMIC,additionalAbrRules:{insufficientBufferRule:!0,switchHistoryRule:!0,droppedFramesRule:!0,abandonRequestsRule:!0},bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0},fetchThroughputCalculationMode:m.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING},cmcd:{enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:m.default.CMCD_MODE_QUERY,enabledKeys:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"]}},errors:{recoverAttempts:{mediaErrorDecode:5}}},S=l.default.clone(c);function p(H,te,w){for(var F in H)H.hasOwnProperty(F)&&(te.hasOwnProperty(F)?t(H[F])==="object"&&!(H[F]instanceof Array)&&H[F]!==null?p(H[F],te[F],w.slice()+F+"."):(te[F]=l.default.clone(H[F]),v[w+F]&&f.trigger(v[w+F])):console.error("Settings parameter "+w+F+" is not supported"))}function C(){return S}function x(H){t(H)==="object"&&p(H,S,"")}function V(){S=l.default.clone(c)}return _={get:C,update:x,reset:V},_}d.__dashjs_factory_name="Settings";var P=o.default.getSingletonFactory(d);g.default=P},"./src/core/Utils.js":function(I,g,r){"use strict";r.r(g);var o=r("./node_modules/path-browserify/index.js"),l=r.n(o),u=r("./node_modules/ua-parser-js/src/ua-parser.js"),m=r.n(u);function y(d){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},y(d)}function T(d,P){if(!(d instanceof P))throw new TypeError("Cannot call a class as a function")}function E(d,P){for(var b=0;b<P.length;b++){var A=P[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(d,e(A.key),A)}}function t(d,P,b){return P&&E(d.prototype,P),b&&E(d,b),Object.defineProperty(d,"prototype",{writable:!1}),d}function e(d){var P=n(d,"string");return y(P)==="symbol"?P:String(P)}function n(d,P){if(y(d)!=="object"||d===null)return d;var b=d[Symbol.toPrimitive];if(b!==void 0){var A=b.call(d,P||"default");if(y(A)!=="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(d)}var i=function(){function d(){T(this,d)}return t(d,null,[{key:"mixin",value:function(b,A,_){var h,f={};if(b)for(var v in A)A.hasOwnProperty(v)&&(h=A[v],(!(v in b)||b[v]!==h&&(!(v in f)||f[v]!==h))&&(y(b[v])==="object"&&b[v]!==null?b[v]=d.mixin(b[v],h,_):b[v]=_(h)));return b}},{key:"clone",value:function(b){if(!b||y(b)!=="object")return b;var A;if(b instanceof Array){A=[];for(var _=0,h=b.length;_<h;++_)_ in b&&A.push(d.clone(b[_]))}else A={};return d.mixin(A,b,d.clone)}},{key:"addAditionalQueryParameterToUrl",value:function(b,A){try{if(!A||A.length===0)return b;var _=new URL(b);return A.forEach(function(h){h.key&&h.value&&_.searchParams.set(h.key,h.value)}),_.href}catch{return b}}},{key:"parseHttpHeaders",value:function(b){var A={};if(!b)return A;for(var _=b.trim().split(`\r
`),h=0,f=_.length;h<f;h++){var v=_[h],c=v.indexOf(": ");c>0&&(A[v.substring(0,c)]=v.substring(c+2))}return A}},{key:"generateUuid",value:function(){var b=new Date().getTime(),A="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(_){var h=(b+Math.random()*16)%16|0;return b=Math.floor(b/16),(_=="x"?h:h&3|8).toString(16)});return A}},{key:"generateHashCode",value:function(b){var A=0;if(b.length===0)return A;for(var _=0;_<b.length;_++){var h=b.charCodeAt(_);A=(A<<5)-A+h,A|=0}return A}},{key:"getRelativeUrl",value:function(b,A){try{var _=new URL(b),h=new URL(A);if(_.protocol=h.protocol,_.origin!==h.origin)return A;var f=l.a.relative(_.pathname.substr(0,_.pathname.lastIndexOf("/")),h.pathname.substr(0,h.pathname.lastIndexOf("/"))),v=f.length===0?1:0;return f+=h.pathname.substr(h.pathname.lastIndexOf("/")+v,h.pathname.length-1),h.pathname.length<f.length?h.pathname:f}catch{return A}}},{key:"parseUserAgent",value:function(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var A=b===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return Object(u.UAParser)(A)}catch{return{}}}}]),d}();g.default=i},"./src/core/Version.js":function(I,g,r){"use strict";r.r(g),r.d(g,"getVersionString",function(){return l});var o="4.5.2";function l(){return o}},"./src/core/errors/Errors.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/errors/ErrorsBase.js");function l(h){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l(h)}function u(h,f){for(var v=0;v<f.length;v++){var c=f[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,y(c.key),c)}}function m(h,f,v){return f&&u(h.prototype,f),v&&u(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h}function y(h){var f=T(h,"string");return l(f)==="symbol"?f:String(f)}function T(h,f){if(l(h)!=="object"||h===null)return h;var v=h[Symbol.toPrimitive];if(v!==void 0){var c=v.call(h,f||"default");if(l(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}function E(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function t(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),f&&e(h,f)}function e(h,f){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},e(h,f)}function n(h){var f=P();return function(){var c=b(h),S;if(f){var p=b(this).constructor;S=Reflect.construct(c,arguments,p)}else S=c.apply(this,arguments);return i(this,S)}}function i(h,f){if(f&&(l(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(h)}function d(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(h){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},b(h)}var A=function(h){t(v,h);var f=n(v);function v(){var c;return E(this,v),c=f.call(this),c.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,c.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,c.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,c.SEGMENT_BASE_LOADER_ERROR_CODE=15,c.TIME_SYNC_FAILED_ERROR_CODE=16,c.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,c.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,c.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,c.APPEND_ERROR_CODE=20,c.REMOVE_ERROR_CODE=21,c.DATA_UPDATE_FAILED_ERROR_CODE=22,c.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,c.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,c.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,c.DOWNLOAD_ERROR_ID_SIDX_CODE=26,c.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,c.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,c.DOWNLOAD_ERROR_ID_XLINK_CODE=29,c.MANIFEST_ERROR_ID_PARSE_CODE=31,c.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,c.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,c.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,c.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,c.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",c.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",c.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",c.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",c.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",c.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",c.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",c.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",c.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",c.APPEND_ERROR_MESSAGE="chunk is not defined",c.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",c.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",c.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",c.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",c.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",c.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",c}return m(v)}(o.default),_=new A;g.default=_},"./src/core/errors/ErrorsBase.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function m(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=T(t,"string");return o(e)==="symbol"?e:String(e)}function T(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E=function(){function t(){l(this,t)}return m(t,[{key:"extend",value:function(n,i){if(n){var d=i?i.override:!1,P=i?i.publicOnly:!1;for(var b in n)!n.hasOwnProperty(b)||this[b]&&!d||P&&n[b].indexOf("public_")===-1||(this[b]=n[b])}}}]),t}();g.default=E},"./src/core/events/CoreEvents.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/events/EventsBase.js");function l(_){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},l(_)}function u(_,h){for(var f=0;f<h.length;f++){var v=h[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,y(v.key),v)}}function m(_,h,f){return h&&u(_.prototype,h),f&&u(_,f),Object.defineProperty(_,"prototype",{writable:!1}),_}function y(_){var h=T(_,"string");return l(h)==="symbol"?h:String(h)}function T(_,h){if(l(_)!=="object"||_===null)return _;var f=_[Symbol.toPrimitive];if(f!==void 0){var v=f.call(_,h||"default");if(l(v)!=="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(_)}function E(_,h){if(!(_ instanceof h))throw new TypeError("Cannot call a class as a function")}function t(_,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(h&&h.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),h&&e(_,h)}function e(_,h){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,c){return v.__proto__=c,v},e(_,h)}function n(_){var h=P();return function(){var v=b(_),c;if(h){var S=b(this).constructor;c=Reflect.construct(v,arguments,S)}else c=v.apply(this,arguments);return i(this,c)}}function i(_,h){if(h&&(l(h)==="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(_)}function d(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(_){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},b(_)}var A=function(_){t(f,_);var h=n(f);function f(){var v;return E(this,f),v=h.call(this),v.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",v.BUFFERING_COMPLETED="bufferingCompleted",v.BUFFER_CLEARED="bufferCleared",v.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",v.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",v.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",v.CURRENT_TRACK_CHANGED="currentTrackChanged",v.DATA_UPDATE_COMPLETED="dataUpdateCompleted",v.INBAND_EVENTS="inbandEvents",v.INITIAL_STREAM_SWITCH="initialStreamSwitch",v.INIT_FRAGMENT_LOADED="initFragmentLoaded",v.INIT_FRAGMENT_NEEDED="initFragmentNeeded",v.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",v.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",v.LOADING_COMPLETED="loadingCompleted",v.LOADING_PROGRESS="loadingProgress",v.LOADING_DATA_PROGRESS="loadingDataProgress",v.LOADING_ABANDONED="loadingAborted",v.MANIFEST_UPDATED="manifestUpdated",v.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",v.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",v.QUOTA_EXCEEDED="quotaExceeded",v.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",v.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",v.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",v.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",v.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",v.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",v.SOURCE_BUFFER_ERROR="sourceBufferError",v.STREAMS_COMPOSED="streamsComposed",v.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",v.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",v.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",v.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",v.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",v.URL_RESOLUTION_FAILED="urlResolutionFailed",v.VIDEO_CHUNK_RECEIVED="videoChunkReceived",v.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",v.XLINK_ELEMENT_LOADED="xlinkElementLoaded",v.XLINK_READY="xlinkReady",v.SEEK_TARGET="seekTarget",v.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",v.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",v.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",v.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",v.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",v}return m(f)}(o.default);g.default=A},"./src/core/events/Events.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/events/CoreEvents.js");function l(h){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l(h)}function u(h,f){for(var v=0;v<f.length;v++){var c=f[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,y(c.key),c)}}function m(h,f,v){return f&&u(h.prototype,f),v&&u(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h}function y(h){var f=T(h,"string");return l(f)==="symbol"?f:String(f)}function T(h,f){if(l(h)!=="object"||h===null)return h;var v=h[Symbol.toPrimitive];if(v!==void 0){var c=v.call(h,f||"default");if(l(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}function E(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function t(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),f&&e(h,f)}function e(h,f){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},e(h,f)}function n(h){var f=P();return function(){var c=b(h),S;if(f){var p=b(this).constructor;S=Reflect.construct(c,arguments,p)}else S=c.apply(this,arguments);return i(this,S)}}function i(h,f){if(f&&(l(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(h)}function d(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(h){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},b(h)}var A=function(h){t(v,h);var f=n(v);function v(){return E(this,v),f.apply(this,arguments)}return m(v)}(o.default),_=new A;g.default=_},"./src/core/events/EventsBase.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function m(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=T(t,"string");return o(e)==="symbol"?e:String(e)}function T(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E=function(){function t(){l(this,t)}return m(t,[{key:"extend",value:function(n,i){if(n){var d=i?i.override:!1,P=i?i.publicOnly:!1;for(var b in n)!n.hasOwnProperty(b)||this[b]&&!d||P&&n[b].indexOf("public_")===-1||(this[b]=n[b])}}}]),t}();g.default=E},"./src/dash/DashAdapter.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/constants/DashConstants.js"),l=r("./src/dash/vo/RepresentationInfo.js"),u=r("./src/dash/vo/MediaInfo.js"),m=r("./src/dash/vo/StreamInfo.js"),y=r("./src/dash/vo/ManifestInfo.js"),T=r("./src/dash/vo/Event.js"),E=r("./src/core/FactoryMaker.js"),t=r("./src/dash/models/DashManifestModel.js"),e=r("./src/dash/models/PatchManifestModel.js"),n=r("./node_modules/bcp-47-normalize/index.js"),i=r.n(n);function d(){var P,b,A,_,h,f,v,c=this.context,S="urn:dvb:dash:profile:dvb-dash:2014";function p(){b=Object(t.default)(c).getInstance(),A=Object(e.default)(c).getInstance(),Me()}function C(ye){ye&&(ye.constants&&(f=ye.constants),ye.cea608parser&&(v=ye.cea608parser),ye.errHandler&&b.setConfig({errHandler:ye.errHandler}),ye.BASE64&&b.setConfig({BASE64:ye.BASE64}))}function x(ye){if(ye){var he=new l.default,Ae=ye.adaptation.period.mpd.manifest.Period_asArray[ye.adaptation.period.index].AdaptationSet_asArray[ye.adaptation.index],ke=b.getRepresentationFor(ye.index,Ae);return he.id=ye.id,he.quality=ye.index,he.bandwidth=b.getBandwidth(ke),he.fragmentDuration=ye.segmentDuration||(ye.segments&&ye.segments.length>0?ye.segments[0].duration:NaN),he.MSETimeOffset=ye.MSETimeOffset,he.mediaInfo=Ke(ye.adaptation),he}else return null}function V(ye,he){if(_.length===0||!ye)return null;var Ae=Re(ye,_);if(!Ae)return null;var ke=b.getAdaptationsForPeriod(Ae),Qe=te(ye.index,he,ye);if(!Qe)return null;var Ge=b.getIndexForAdaptation(Qe,_[0].mpd.manifest,ye.index);return Ke(ke[Ge])}function H(ye){return b.getRolesForAdaptation(ye).filter(function(he){return he.value===o.default.MAIN})[0]}function te(ye,he,Ae){var ke=b.getAdaptationsForType(_[0].mpd.manifest,ye,he);if(!ke||ke.length===0)return null;if(ke.length>1&&Ae){var Qe=M(Ae,he);if(h[Ae.id]&&h[Ae.id][he]){for(var Ge=0,qe=ke.length;Ge<qe;Ge++)if(w(h[Ae.id][he],Qe[Ge]))return ke[Ge]}for(var at=0,it=ke.length;at<it;at++)if(H(ke[at]))return ke[at]}return ke[0]}function w(ye,he){if(!ye||!he)return!1;var Ae=ye.id===he.id,ke=ye.codec===he.codec,Qe=ye.viewpoint===he.viewpoint,Ge=ye.lang===he.lang,qe=ye.roles.toString()===he.roles.toString(),at=ye.accessibility.toString()===he.accessibility.toString(),it=ye.audioChannelConfiguration.toString()===he.audioChannelConfiguration.toString();return Ae&&ke&&Qe&&Ge&&qe&&at&&it}function F(ye,he,Ae,ke,Qe,Ge){var qe=[],at,it,Ie,He,Xe,nt;if(!ke||ke.length===0)return[];var mt=b.getAdaptationsForPeriod(he);for(He=0,nt=ke.length;He<nt;He++)if(at=ke[He],Ie=b.getIndexForAdaptation(at,ye,Ae.index),it=Ke(mt[Ie]),Ge){var ht=it.accessibility.length;for(Xe=0;Xe<ht;Xe++)if(it){var _t=it.accessibility[Xe];if(_t.indexOf("cea-608:")===0){var wt=_t.substring(8),ot=wt.split(";");if(ot[0].substring(0,2)==="CC")for(Xe=0;Xe<ot.length;Xe++)it||(it=Ke.call(this,mt[Ie])),Ne(it,ot[Xe].substring(0,3),ot[Xe].substring(4)),qe.push(it),it=null;else for(Xe=0;Xe<ot.length;Xe++)it||(it=Ke.call(this,mt[Ie])),Ne(it,"CC"+(Xe+1),ot[Xe]),qe.push(it),it=null}else _t.indexOf("cea-608")===0&&(Ne(it,f.CC1,"eng"),qe.push(it),it=null)}}else Qe===f.IMAGE?(ze(it),qe.push(it),it=null):it&&qe.push(it);return qe}function M(ye,he,Ae){var ke=_,Qe=Ae,Ge=[];if(Qe)ft(),ke=K(Qe);else if(_.length>0)Qe=_[0].mpd.manifest;else return Ge;var qe=Re(ye,ke),at=b.getAdaptationsForType(Qe,ye?ye.index:null,he);return Ge=F(Qe,qe,ye,at,he),he===f.TEXT&&(at=b.getAdaptationsForType(Qe,ye?ye.index:null,f.VIDEO),Ge=Ge.concat(F(Qe,qe,ye,at,he,!0))),Ge}function U(ye){if(!ye)return null;ft(),_=K(ye)}function j(ye,he){var Ae=[],ke=_;if(ye&&(ft(),ke=K(ye)),ke.length>0){(!he||he>ke.length)&&(he=ke.length);for(var Qe=0;Qe<he;Qe++)Ae.push($e(ke[Qe]))}return Ae}function X(ye,he){var Ae,ke,Qe=Re(ye,_);return Ae=he?he.id:null,_.length>0&&Qe&&(ke=Ae?b.getAdaptationForId(Ae,_[0].mpd.manifest,Qe.index):b.getAdaptationForIndex(he?he.index:null,_[0].mpd.manifest,Qe.index)),ke}function Y(ye,he){var Ae,ke,Qe=Re(ye,_);return Ae=he?he.id:null,_.length>0&&Qe&&(ke=Ae?b.getAdaptationForId(Ae,_[0].mpd.manifest,Qe.index):b.getAdaptationForIndex(he?he.index:null,_[0].mpd.manifest,Qe.index)),ke?b.getProducerReferenceTimesForAdaptation(ke):[]}function se(ye){try{return b.getEssentialPropertiesForRepresentation(ye)}catch{return[]}}function G(ye){return b.getRealPeriodForIndex(ye,_[0].mpd.manifest)}function ee(ye){var he,Ae=Ue(ye);return he=b.getRepresentationsForAdaptation(Ae),he}function J(ye,he,Ae,ke){try{if(!ye||!he||isNaN(Ae)||!ke)return null;var Qe=ye.scheme_id_uri,Ge=ye.value;if(!he[Qe+"/"+Ge])return null;var qe=new T.default,at=ye.timescale||1,it=ke.adaptation.period.start,Ie=he[Qe+"/"+Ge],He=isNaN(ke.presentationTimeOffset)?isNaN(Ie.presentationTimeOffset)?0:Ie.presentationTimeOffset:ke.presentationTimeOffset,Xe=ye.presentation_time_delta/at,nt;ye.version===0?nt=it+Ae-He+Xe:nt=it-He+Xe;var mt=ye.event_duration/at,ht=ye.id,_t=ye.message_data;return qe.eventStream=Ie,qe.eventStream.value=Ge,qe.eventStream.timescale=at,qe.duration=mt,qe.id=ht,qe.calculatedPresentationTime=nt,qe.messageData=_t,qe.presentationTimeDelta=Xe,qe}catch{return null}}function ie(ye,he,Ae){var ke=[];if(_.length>0){var Qe=_[0].mpd.manifest;if(ye instanceof m.default){var Ge=Re(ye,_);ke=b.getEventsForPeriod(Ge)}else if(ye instanceof u.default){var qe=Re(Ae,_);ke=b.getEventStreamForAdaptationSet(Qe,Ue(ye),qe)}else if(ye instanceof l.default){var at=Re(Ae,_);ke=b.getEventStreamForRepresentation(Qe,he,at)}}return ke}function ue(ye,he,Ae){h[ye]=h[ye]||{},h[ye][he]=h[ye][he]||{},h[ye][he]=Ae}function ae(ye){return b.getIsText(ye)}function oe(){var ye=Pe();return b.getUTCTimingSources(ye)}function Z(){var ye=_.length>0?_[0].mpd:null;return b.getSuggestedPresentationDelay(ye)}function ge(ye){var he=R(ye);return b.getAvailabilityStartTime(he)}function le(ye){var he=Pe(ye);return b.getIsDynamic(he)}function z(ye){var he=Pe(ye);return b.getDuration(he)}function K(ye){var he=R(ye);return b.getRegularPeriods(he)}function R(ye){var he=Pe(ye);return b.getMpd(he)}function L(ye){return b.getContentSteering(ye)}function $(ye){return b.getLocation(ye)}function O(ye){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return b.getManifestUpdatePeriod(ye,he)}function Q(ye){return b.getPublishTime(ye)}function ne(ye){var he=b.getPatchLocation(ye),Ae=b.getPublishTime(ye);if(!he||!Ae)return null;if(he.hasOwnProperty("ttl")&&Ae){var ke=parseFloat(he.ttl)*1e3;if(Ae.getTime()+ke<=new Date().getTime())return null}return he.__text}function ce(ye){return b.hasProfile(ye,S)}function W(ye){return A.getIsPatch(ye)}function B(ye){return b.getBaseURLsFromElement(ye)}function D(){return b.getRepresentationSortFunction()}function q(ye,he,Ae){return b.getCodec(ye,he,Ae)}function me(ye,he){var Ae,ke=bt(he);return Ae=St(ke,ye),Ae?Ae.bandwidth:null}function de(ye,he){var Ae=bt(he);return Et(Ae,ye)}function ve(ye,he){var Ae=bt(he);return Ct(Ae,ye)}function Se(ye){if(!ye||_.length===0)return null;var he=_.filter(function(Ae){return Ae.id===ye});return he&&he.length>0?he[0]:null}function be(ye,he){return b.getIsTypeOf(ye,he)}function Me(){_=[],h={}}function Fe(ye,he){var Ae=b.getId(ye),ke=A.getMpdId(he),Qe=b.getPublishTime(ye),Ge=A.getPublishTime(he),qe=A.getOriginalPublishTime(he);return!!(Ae&&ke&&Ae==ke&&Qe&&qe&&Qe.getTime()==qe.getTime()&&Ge&&Qe.getTime()<Ge.getTime())}function Ee(ye,he){A.getPatchOperations(he).forEach(function(Ae){var ke=Ae.getMpdTarget(ye);if(ke!==null){var Qe=ke.name,Ge=ke.target,qe=ke.leaf;if(Ae.xpath.findsAttribute()){switch(Ae.action){case"add":case"replace":Ge[Qe]=Ae.value;break;case"remove":delete Ge[Qe];break}return}var at=(Ge[Qe+"_asArray"]||[]).indexOf(qe),it=Ae.position==="prepend"||Ae.position==="before";if((Ae.action==="remove"||Ae.action==="replace")&&(delete Ge[Qe],at!=-1)){var Ie=Ge[Qe+"_asArray"];Ie.splice(at,1),Ie.length>1?Ge[Qe]=Ie:Ie.length==1?Ge[Qe]=Ie[0]:delete Ge[Qe+"_asArray"]}(Ae.action==="add"||Ae.action==="replace")&&Object.keys(Ae.value).forEach(function(He){var Xe=Ae.value[He],nt=Ge[He+"_asArray"]||[];if(nt.length===0&&Ge[He]&&nt.push(Ge[He]),nt.length===0)nt=Xe;else{var mt=nt.length;He==Qe&&at!=-1?mt=at+(it?0:1)+(Ae.action=="replace"?-1:0):mt=it?0:nt.length,nt.splice.apply(nt,[mt,0].concat(Xe))}Ge[He+"_asArray"]=nt,Ge[He]=nt.length==1?nt[0]:nt})}})}function Pe(ye){return ye||(_.length>0?_[0].mpd.manifest:null)}function Ue(ye){try{var he=Re(ye.streamInfo,_),Ae=b.getAdaptationsForPeriod(he);return!ye||!ye.streamInfo||ye.streamInfo.id===void 0||!Ae?null:Ae[ye.index]}catch{return null}}function Re(ye,he){for(var Ae=he.length,ke=0;ke<Ae;ke++){var Qe=he[ke];if(ye&&ye.id===Qe.id)return Qe}return null}function Ke(ye){if(!ye)return null;var he=new u.default,Ae=ye.period.mpd.manifest.Period_asArray[ye.period.index].AdaptationSet_asArray[ye.index],ke;if(he.id=ye.id,he.index=ye.index,he.type=ye.type,he.streamInfo=$e(ye.period),he.representationCount=b.getRepresentationCount(Ae),he.labels=b.getLabelsForAdaptation(Ae),he.lang=b.getLanguageForAdaptation(Ae),ke=b.getViewpointForAdaptation(Ae),he.viewpoint=ke?ke.value:void 0,he.accessibility=b.getAccessibilityForAdaptation(Ae).map(function(qe){var at=qe.value,it=at;return qe.schemeIdUri&&qe.schemeIdUri.search("cea-608")>=0&&typeof v<"u"&&(at?it="cea-608:"+at:it="cea-608",he.embeddedCaptions=!0),it}),he.audioChannelConfiguration=b.getAudioChannelConfigurationForAdaptation(Ae).map(function(qe){return qe.value}),he.audioChannelConfiguration.length===0&&Array.isArray(Ae.Representation_asArray)&&Ae.Representation_asArray.length>0&&(he.audioChannelConfiguration=b.getAudioChannelConfigurationForRepresentation(Ae.Representation_asArray[0]).map(function(qe){return qe.value})),he.roles=b.getRolesForAdaptation(Ae).map(function(qe){return qe.value}),he.codec=b.getCodec(Ae),he.mimeType=b.getMimeType(Ae),he.contentProtection=b.getContentProtectionData(Ae),he.bitrateList=b.getBitrateListForAdaptation(Ae),he.selectionPriority=b.getSelectionPriority(Ae),he.contentProtection){var Qe=he.contentProtection.map(function(qe){return b.getKID(qe)}).filter(function(qe){return qe!==null});if(Qe.length){var Ge=Qe[0];he.contentProtection.forEach(function(qe){qe.keyId=Ge})}}return he.isText=b.getIsText(Ae),he.supplementalProperties=b.getSupplementalProperties(Ae),he.isFragmented=b.getIsFragmented(Ae),he.isEmbedded=!1,he}function Ne(ye,he,Ae){ye.id=he,ye.index=100+parseInt(he.substring(2,3)),ye.type=f.TEXT,ye.codec="cea-608-in-SEI",ye.isEmbedded=!0,ye.isFragmented=!1,ye.lang=i()(Ae),ye.roles=["caption"]}function ze(ye){ye.type=f.IMAGE}function $e(ye){var he=new m.default,Ae=1;return he.id=ye.id,he.index=ye.index,he.start=ye.start,he.duration=ye.duration,he.manifestInfo=tt(ye.mpd),he.isLast=ye.mpd.manifest.Period_asArray.length===1||Math.abs(he.start+he.duration-he.manifestInfo.duration)<Ae,he}function tt(ye){var he=new y.default;return he.dvrWindowSize=ye.timeShiftBufferDepth,he.loadedTime=ye.manifest.loadedTime,he.availableFrom=ye.availabilityStartTime,he.minBufferTime=ye.manifest.minBufferTime,he.maxFragmentDuration=ye.maxSegmentDuration,he.duration=b.getDuration(ye.manifest),he.isDynamic=b.getIsDynamic(ye.manifest),he.serviceDescriptions=b.getServiceDescriptions(ye.manifest),he.protocol=ye.manifest.protocol,he}function ft(){if(!f)throw new Error("setConfig function has to be called previously")}function bt(ye){return _.length>0?_[0].mpd.manifest.Period_asArray[ye]:null}function Et(ye,he){var Ae=St(ye,he,!0);return Ae!==null?Ae:-1}function St(ye,he,Ae){var ke,Qe,Ge,qe,at,it;if(ye){for(Qe=ye.AdaptationSet_asArray,at=0;at<Qe.length;at=at+1)for(ke=Qe[at],qe=ke.Representation_asArray,it=0;it<qe.length;it=it+1)if(Ge=qe[it],he===Ge.id)return Ae?it:Ge}return null}function Ct(ye,he){var Ae,ke,Qe,Ge;if(!ye||!he)return-1;for(ke=ye.AdaptationSet_asArray,Ge=0;Ge<ke.length;Ge=Ge+1)if(Ae=ke[Ge],Qe=Ae.Representation_asArray,b.getIsTypeOf(Ae,he))return Qe.length;return-1}return P={getBandwidthForRepresentation:me,getIndexForRepresentation:de,getMaxIndexForBufferType:ve,convertRepresentationToRepresentationInfo:x,getStreamsInfo:j,getMediaInfoForType:V,getAllMediaInfoForType:M,getAdaptationForType:te,getRealAdaptation:X,getProducerReferenceTimes:Y,getRealPeriodByIndex:G,getEssentialPropertiesForRepresentation:se,getVoRepresentations:ee,getEventsFor:ie,getEvent:J,getMpd:R,setConfig:C,updatePeriods:U,getIsTextTrack:ae,getUTCTimingSources:oe,getSuggestedPresentationDelay:Z,getAvailabilityStartTime:ge,getIsTypeOf:be,getIsDynamic:le,getDuration:z,getRegularPeriods:K,getContentSteering:L,getLocation:$,getPatchLocation:ne,getManifestUpdatePeriod:O,getPublishTime:Q,getIsDVB:ce,getIsPatch:W,getBaseURLsFromElement:B,getRepresentationSortFunction:D,getCodec:q,getPeriodById:Se,setCurrentMediaInfo:ue,isPatchValid:Fe,applyPatchToManifest:Ee,areMediaInfosEqual:w,reset:Me},p(),P}d.__dashjs_factory_name="DashAdapter",g.default=E.default.getSingletonFactory(d)},"./src/dash/DashHandler.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/vo/FragmentRequest.js"),l=r("./src/streaming/vo/metrics/HTTPRequest.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/streaming/MediaPlayerEvents.js"),y=r("./src/dash/utils/SegmentsUtils.js"),T=r("./src/dash/constants/DashConstants.js"),E=.5,t=.001;function e(n){n=n||{};var i=n.eventBus,d=n.debug,P=n.urlUtils,b=n.type,A=n.streamInfo,_=n.segmentsController,h=n.timelineConverter,f=n.baseURLController,v,c,S,p,C;function x(){c=d.getLogger(v),F(),i.on(m.default.DYNAMIC_TO_STATIC,ae,v)}function V(oe){p=oe,C=!1,_.initialize(oe)}function H(){return A.id}function te(){return b}function w(){return A}function F(){S=null}function M(){F(),i.off(m.default.DYNAMIC_TO_STATIC,ae,v)}function U(oe,Z,ge){var le=f.resolve(ge.path),z,K;return!le||Z===le.url||!P.isRelative(Z)?z=Z:(z=le.url,K=le.serviceLocation,Z&&(z=P.resolve(Z,z))),P.isRelative(z)?!1:(oe.url=z,oe.serviceLocation=K,!0)}function j(oe,Z){return Z?X(oe,Z,te()):null}function X(oe,Z,ge){var le=new o.default,z=Z.adaptation.period,K=z.start;if(le.mediaType=ge,le.type=l.HTTPRequest.INIT_SEGMENT_TYPE,le.range=Z.range,le.availabilityStartTime=h.calcAvailabilityStartTimeFromPresentationTime(K,Z,p),le.availabilityEndTime=h.calcAvailabilityEndTimeFromPresentationTime(K+z.duration,Z,p),le.quality=Z.index,le.mediaInfo=oe,le.representationId=Z.id,U(le,Z.initialization,Z))return le.url=Object(y.replaceTokenForTemplate)(le.url,"Bandwidth",Z.bandwidth),le}function Y(oe,Z){if(Z==null)return null;var ge=new o.default,le=Z.representation,z=le.adaptation.period.mpd.manifest.Period_asArray[le.adaptation.period.index].AdaptationSet_asArray[le.adaptation.index].Representation_asArray[le.index].bandwidth,K=Z.media;if(K=Object(y.replaceTokenForTemplate)(K,"Number",Z.replacementNumber),K=Object(y.replaceTokenForTemplate)(K,"Time",Z.replacementTime),K=Object(y.replaceTokenForTemplate)(K,"Bandwidth",z),K=Object(y.replaceIDForTemplate)(K,le.id),K=Object(y.unescapeDollarsInTemplate)(K),ge.mediaType=te(),ge.type=l.HTTPRequest.MEDIA_SEGMENT_TYPE,ge.range=Z.mediaRange,ge.startTime=Z.presentationStartTime,ge.mediaStartTime=Z.mediaStartTime,ge.duration=Z.duration,ge.timescale=le.timescale,ge.availabilityStartTime=Z.availabilityStartTime,ge.availabilityEndTime=Z.availabilityEndTime,ge.availabilityTimeComplete=le.availabilityTimeComplete,ge.wallStartTime=Z.wallStartTime,ge.quality=le.index,ge.index=Z.index,ge.mediaInfo=oe,ge.adaptationIndex=le.adaptation.index,ge.representationId=le.id,U(ge,K,le))return ge}function se(oe,Z){if(!oe||!S)return!1;if(C)return!0;if(!isFinite(oe.adaptation.period.duration)||S.presentationStartTime+S.duration>Z)return!1;if(oe.mediaFinishedInformation&&!isNaN(oe.mediaFinishedInformation.numberOfSegments)&&!isNaN(S.index)&&S.index>=oe.mediaFinishedInformation.numberOfSegments-1){if(!p||oe.segmentInfoType===T.default.SEGMENT_TEMPLATE)return!0;if(p&&oe.segmentInfoType===T.default.SEGMENT_LIST&&oe.adaptation.period.nextPeriodId)return!0}return!!(p&&oe.adaptation.period.nextPeriodId&&oe.segmentInfoType===T.default.SEGMENT_TIMELINE&&oe.mediaFinishedInformation&&!isNaN(oe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&S&&!isNaN(S.mediaStartTime)&&!isNaN(S.duration)&&S.mediaStartTime+S.duration>=oe.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)}function G(oe,Z,ge){var le=null;if(!Z||!Z.segmentInfoType)return le;var z=_.getSegmentByTime(Z,ge);return z&&(S=z,c.debug("Index for time "+ge+" is "+z.index),le=Y(oe,z)),le}function ee(oe,Z){var ge=null,le=S?S.index+1:0,z=_.getSegmentByIndex(Z,le,S?S.mediaStartTime:-1);return z?(ge=Y(oe,z),ge):null}function J(oe,Z){var ge=null;if(!Z||!Z.segmentInfoType)return null;var le=S?S.index+1:0,z=_.getSegmentByIndex(Z,le,S?S.mediaStartTime:-1);if(z)ge=Y(oe,z),S=z;else{if(p&&!C)return c.debug(te()+" No segment found at index: "+le+". Wait for next loop"),null;C=!0}return ge}function ie(oe,Z,ge,le){try{if(isNaN(oe)||!Z||!ge)return NaN;if(oe<0&&(oe=0),isNaN(le)&&(le=E),G(Z,ge,oe))return oe;if(ge.adaptation.period.start+ge.adaptation.period.duration<oe)return NaN;for(var z=isFinite(ge.adaptation.period.duration)?ge.adaptation.period.start+ge.adaptation.period.duration:oe+30,K=Math.min(oe+le,z),R=NaN,L=null;K<=z;){var $=null;if(K<=z&&($=G(Z,ge,K)),$){R=K,L=$;break}K+=le}if(L){var O=L.startTime+L.duration;return oe>L.startTime&&O-oe>le?oe:!isNaN(L.startTime)&&oe<L.startTime&&R>L.startTime?L.startTime+t:Math.min(O-le,R)}return R}catch{return NaN}}function ue(){return S?S.index:-1}function ae(){c.debug("Dynamic stream complete"),C=!0}return v={initialize:V,getStreamId:H,getType:te,getStreamInfo:w,getInitRequest:j,getSegmentRequestForTime:G,getCurrentIndex:ue,getNextSegmentRequest:J,isLastSegmentRequested:se,reset:M,getNextSegmentRequestIdempotent:ee,getValidTimeAheadOfTargetTime:ie},x(),v}e.__dashjs_factory_name="DashHandler",g.default=u.default.getClassFactory(e)},"./src/dash/DashMetrics.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/vo/metrics/HTTPRequest.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/streaming/constants/MetricsConstants.js"),y=r("./src/dash/utils/Round10.js"),T=r("./src/streaming/models/MetricsModel.js"),E=r("./src/core/Utils.js"),t=r("./src/streaming/vo/metrics/PlayList.js");function e(n){n=n||{};var i=this.context,d,P,b,A,_=n.metricsModel;function h(){_=_||Object(T.default)(i).getInstance({settings:n.settings}),f()}function f(){P=!0,b=null,A=null}function v($){var O=_.getMetricsFor($,!0);return F(O,m.default.TRACK_SWITCH)}function c($,O,Q,ne,ce){_.addRepresentationSwitch($,O,Q,ne,ce)}function S($){var O=_.getMetricsFor($,!0);return F(O,m.default.BUFFER_STATE)}function p($){var O=_.getMetricsFor($,!0),Q=F(O,m.default.BUFFER_LEVEL);return Q?y.default.round10(Q.level/1e3,-3):0}function C($,O,Q){_.addBufferLevel($,O,Q)}function x($,O,Q){_.addBufferState($,O,Q)}function V(){_.clearAllCurrentMetrics()}function H($){var O=_.getMetricsFor($,!0);if(!O)return null;var Q=O.HttpList,ne=null,ce;if(!Q||Q.length<=0)return null;for(ce=Q.length-1;ce>=0;){if(Q[ce].responsecode){ne=Q[ce];break}ce--}return ne}function te($){var O=_.getMetricsFor($,!0);return O?O.HttpList?O.HttpList:[]:[]}function w($,O,Q){_.addRequestsQueue($,O,Q)}function F($,O){if(!$)return null;var Q=$[O];return!Q||Q.length===0?null:Q[Q.length-1]}function M(){var $=_.getMetricsFor(o.default.VIDEO,!0);return F($,m.default.DROPPED_FRAMES)}function U($){_.addDroppedFrames(o.default.VIDEO,$)}function j($){var O=_.getMetricsFor($,!0);return F(O,m.default.SCHEDULING_INFO)}function X($,O){_.addSchedulingInfo($.mediaType,new Date,$.type,$.startTime,$.availabilityStartTime,$.duration,$.quality,$.range,O)}function Y(){var $=_.getMetricsFor(o.default.STREAM);return F($,m.default.MANIFEST_UPDATE)}function se($){var O=this.getCurrentManifestUpdate();_.updateManifestUpdateInfo(O,$)}function G($){if($){var O=this.getCurrentManifestUpdate();_.addManifestUpdateStreamInfo(O,$.id,$.index,$.start,$.duration)}}function ee($){_.addManifestUpdate(o.default.STREAM,$.type,$.requestStartDate,$.requestEndDate)}function J($,O,Q,ne,ce){_.addHttpRequest($.mediaType,null,$.type,$.url,$.quality,O,$.serviceLocation||null,$.range||null,$.requestStartDate,$.firstByteDate,$.requestEndDate,Q,$.duration,ne,ce,$.fileLoaderType)}function ie($,O){if($){var Q=this.getCurrentManifestUpdate();_.addManifestUpdateRepresentationInfo(Q,$.id,$.index,$.streamIndex,O,$.presentationTimeOffset,$.startNumber,$.fragmentInfoType)}}function ue($){var O=$?_.getMetricsFor($,!0):_.getMetricsFor(o.default.VIDEO,!0)||_.getMetricsFor(o.default.AUDIO,!0);return F(O,m.default.DVR_INFO)}function ae($,O,Q,ne){_.addDVRInfo($,O,Q,ne)}function oe($){if(!$)return null;var O={},Q,ne,ce;for(Q=te(o.default.STREAM),ce=Q.length-1;ce>=0;ce--)if(ne=Q[ce],ne.type===l.HTTPRequest.MPD_TYPE){O=E.default.parseHttpHeaders(ne._responseHeaders);break}var W=O[$.toLowerCase()];return W===void 0?null:W}function Z($,O){if(!O)return null;var Q={},ne=H($);ne&&(Q=E.default.parseHttpHeaders(ne._responseHeaders));var ce=Q[O.toLowerCase()];return ce===void 0?null:ce}function ge(){A&&(_.addPlayList(A),A=null)}function le($,O){A=new t.PlayList,A.start=new Date,A.mstart=$,A.starttype=O}function z($,O,Q){P===!0&&(P=!1,b=new t.PlayListTrace,b.representationid=$,b.start=new Date,b.mstart=O,b.playbackspeed=Q!==null?Q.toString():null)}function K($){if(b)for(var O in b)b[O]=$[O]}function R($,O){if(P===!1&&A&&b&&b.start){var Q=b.start,ne=$.getTime()-Q.getTime();b.duration=ne,b.stopreason=O,A.trace.push(b),P=!0}}function L($){_.addDVBErrors($)}return d={getCurrentRepresentationSwitch:v,getCurrentBufferState:S,getCurrentBufferLevel:p,getCurrentHttpRequest:H,getHttpRequests:te,getCurrentDroppedFrames:M,getCurrentSchedulingInfo:j,getCurrentDVRInfo:ue,getCurrentManifestUpdate:Y,getLatestFragmentRequestHeaderValueByID:Z,getLatestMPDRequestHeaderValueByID:oe,addRepresentationSwitch:c,addDVRInfo:ae,updateManifestUpdateInfo:se,addManifestUpdateStreamInfo:G,addManifestUpdateRepresentationInfo:ie,addManifestUpdate:ee,addHttpRequest:J,addSchedulingInfo:X,addRequestsQueue:w,addBufferLevel:C,addBufferState:x,addDroppedFrames:U,addPlayList:ge,addDVBErrors:L,createPlaylistMetrics:le,createPlaylistTraceMetrics:z,updatePlayListTraceMetrics:K,pushPlayListTraceMetrics:R,clearAllCurrentMetrics:V},h(),d}e.__dashjs_factory_name="DashMetrics",g.default=u.default.getSingletonFactory(e)},"./src/dash/SegmentBaseLoader.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/vo/Segment.js"),l=r("./src/streaming/vo/DashJSError.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/streaming/vo/FragmentRequest.js"),y=r("./src/streaming/net/URLLoader.js");function T(){var E=this.context,t,e,n,i,d,P,b,A,_,h,f,v,c;function S(){}function p(){A=Object(y.default)(E).create({errHandler:n,dashMetrics:P,mediaPlayerModel:b,requestModifier:d,boxParser:i,errors:_,urlUtils:v,constants:h,dashConstants:f})}function C(j){j.baseURLController&&(c=j.baseURLController),j.dashMetrics&&(P=j.dashMetrics),j.mediaPlayerModel&&(b=j.mediaPlayerModel),j.errHandler&&(n=j.errHandler),j.boxParser&&(i=j.boxParser),j.debug&&(e=j.debug.getLogger(t)),j.requestModifier&&(d=j.requestModifier),j.errors&&(_=j.errors),j.urlUtils&&(v=j.urlUtils),j.constants&&(h=j.constants),j.dashConstants&&(f=j.dashConstants)}function x(j,X){return new Promise(function(Y){V(j,X,Y)})}function V(j,X,Y,se){var G=null,ee=j?c.resolve(j.path):null,J=se||{init:!0,url:ee?ee.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:X};e.debug("Start searching for initialization.");var ie=U(J),ue=function(Z){if(J.bytesLoaded=J.range.end,G=i.findInitRange(Z),G)j.range=G,Y(j);else return J.range.end=J.bytesLoaded+J.bytesToLoad,V(j,X,Y,J)},ae=function(){Y(j)};A.load({request:ie,success:ue,error:ae}),e.debug("Perform init search: "+J.url)}function H(j,X,Y){return new Promise(function(se){te(j,X,Y,se)})}function te(j,X,Y,se,G,ee){if(Y&&(Y.start===void 0||Y.end===void 0)){var J=Y?Y.toString().split("-"):null;Y=J?{start:parseFloat(J[0]),end:parseFloat(J[1])}:null}G=G||w;var ie=null,ue=null,ae=!!Y,oe=j?c.resolve(j.path):null,Z={init:!1,url:oe?oe.url:void 0,range:ae?Y:{start:0,end:1500},searching:!ae,bytesLoaded:ee?ee.bytesLoaded:0,bytesToLoad:1500,mediaType:X},ge=U(Z),le=function(R){var L=Z.bytesToLoad,$=R.byteLength;if(Z.bytesLoaded=Z.range.end-Z.range.start,ie=i.parse(R),ue=ie.getBox("sidx"),!ue||!ue.isComplete){if(ue)Z.range.start=ue.offset||Z.range.start,Z.range.end=Z.range.start+(ue.size||L);else if($<Z.bytesLoaded){G(null,j,se);return}else{var O=ie.getLastBox();O&&O.size?(Z.range.start=O.offset+O.size,Z.range.end=Z.range.start+L):Z.range.end+=L}te(j,X,Z.range,se,null,Z)}else{var Q=ue.references,ne,ce;if(Q!=null&&Q.length>0&&(ne=Q[0].reference_type===1),ne){e.debug("Initiate multiple SIDX load."),Z.range.end=Z.range.start+ue.size;var W,B,D,q,me,de=[],ve=0,Se=(ue.offset||Z.range.start)+ue.size,be=function(Fe){Fe?(de=de.concat(Fe),ve++,ve>=B&&(de.sort(function(Ee,Pe){return Ee.startTime-Pe.startTime<0?-1:0}),G(de,j,se))):G(null,j,se)};for(W=0,B=Q.length;W<B;W++)D=Se,q=Se+Q[W].referenced_size-1,Se=Se+Q[W].referenced_size,me={start:D,end:q},te(j,X,me,se,be,Z)}else e.debug("Parsing segments from SIDX. representation "+X+" - id: "+j.id+" for range : "+Z.range.start+" - "+Z.range.end),ce=M(ue,Z),G(ce,j,se)}},z=function(){G(null,j,se)};A.load({request:ge,success:le,error:z}),e.debug("Perform SIDX load for type ".concat(X," : ").concat(Z.url," with range ").concat(Z.range.start," - ").concat(Z.range.end))}function w(j,X,Y){Y({segments:j,representation:X,error:j?void 0:new l.default(_.SEGMENT_BASE_LOADER_ERROR_CODE,_.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function F(){A&&(A.abort(),A=null)}function M(j,X){for(var Y=j.references,se=Y.length,G=j.timescale,ee=j.earliest_presentation_time,J=X.range.start+j.offset+j.first_offset+j.size,ie=[],ue,ae,oe,Z,ge=0;ge<se;ge++)oe=Y[ge].subsegment_duration,Z=Y[ge].referenced_size,ue=new o.default,ue.duration=oe,ue.startTime=ee,ue.timescale=G,ae=J+Z-1,ue.mediaRange=J+"-"+ae,ie.push(ue),ee+=oe,J+=Z;return ie}function U(j){if(j.url){var X=new m.default;return X.setInfo(j),X}}return t={setConfig:C,initialize:p,loadInitialization:x,loadSegments:H,reset:F},t}T.__dashjs_factory_name="SegmentBaseLoader",g.default=u.default.getSingletonFactory(T)},"./src/dash/WebmSegmentBaseLoader.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/utils/EBMLParser.js"),l=r("./src/streaming/constants/Constants.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/dash/vo/Segment.js"),y=r("./src/streaming/vo/FragmentRequest.js"),T=r("./src/streaming/net/URLLoader.js"),E=r("./src/streaming/vo/DashJSError.js");function t(){var e=this.context,n,i,d,P,b,A,_,h,f,v;function c(){d={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}}}function S(){h=Object(T.default)(e).create({errHandler:P,dashMetrics:A,mediaPlayerModel:_,requestModifier:b,errors:f})}function p(M){if(!M.baseURLController||!M.dashMetrics||!M.mediaPlayerModel||!M.errHandler)throw new Error(l.default.MISSING_CONFIG_ERROR);v=M.baseURLController,A=M.dashMetrics,_=M.mediaPlayerModel,P=M.errHandler,f=M.errors,i=M.debug.getLogger(n),b=M.requestModifier}function C(M){var U=[],j=Object(o.default)(e).create({data:M}),X,Y;for(j.consumeTagAndSize(d.Segment.Cues);j.moreData()&&j.consumeTagAndSize(d.Segment.Cues.CuePoint,!0);){for(X={},X.CueTime=j.parseTag(d.Segment.Cues.CuePoint.CueTime),X.CueTracks=[];j.moreData()&&j.consumeTag(d.Segment.Cues.CuePoint.CueTrackPositions,!0);){var se=j.getMatroskaCodedNum(),G=j.getPos();if(Y={},Y.Track=j.parseTag(d.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Y.Track===0)throw new Error("Cue track cannot be 0");Y.ClusterPosition=j.parseTag(d.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),X.CueTracks.push(Y),j.setPos(G+se)}if(X.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");U.push(X)}if(U.length===0)throw new Error("mandatory cuepoint not found");return U}function x(M,U,j,X){var Y,se,G,ee,J,ie,ue,ae;for(se=C(M),G=[],J=0,ie=se.length;J<ie;J+=1)ee=new m.default,Y=0,J<se.length-1?Y=se[J+1].CueTime-se[J].CueTime:Y=X-se[J].CueTime,ee.duration=Y,ee.startTime=se[J].CueTime,ee.timescale=1e3,ue=se[J].CueTracks[0].ClusterPosition+U,J<se.length-1?ae=se[J+1].CueTracks[0].ClusterPosition+U-1:ae=j-1,ee.mediaRange=ue+"-"+ae,G.push(ee);return i.debug("Parsed cues: "+G.length+" cues."),G}function V(M,U,j,X){if(!M||M.byteLength===0){X(null);return}var Y=Object(o.default)(e).create({data:M}),se,G,ee,J,ie=j?j.split("-"):null,ue=null,ae={url:U,range:{start:ie?parseFloat(ie[0]):null,end:ie?parseFloat(ie[1]):null},request:ue};for(i.debug("Parse EBML header: "+ae.url),Y.skipOverElement(d.EBML),Y.consumeTag(d.Segment),ee=Y.getMatroskaCodedNum(),ee+=Y.getPos(),J=Y.getPos();Y.moreData()&&!Y.consumeTagAndSize(d.Segment.Info,!0);)if(!(Y.skipOverElement(d.Segment.SeekHead,!0)||Y.skipOverElement(d.Segment.Tracks,!0)||Y.skipOverElement(d.Segment.Cues,!0)||Y.skipOverElement(d.Void,!0)))throw new Error("no valid top level element found");for(;se===void 0;){var oe=Y.getMatroskaCodedNum(!0),Z=Y.getMatroskaCodedNum();switch(oe){case d.Segment.Info.Duration.tag:se=Y[d.Segment.Info.Duration.parse](Z);break;default:Y.setPos(Y.getPos()+Z);break}}ue=w(ae);var ge=function(K){G=x(K,J,ee,se),X(G)},le=function(){i.error("Download Error: Cues "+ae.url),X(null)};h.load({request:ue,success:ge,error:le}),i.debug("Perform cues load: "+ae.url+" bytes="+ae.range.start+"-"+ae.range.end)}function H(M,U){return new Promise(function(j){var X=null,Y=M?v.resolve(M.path):null,se=M?M.range.split("-"):null,G={range:{start:se?parseFloat(se[0]):null,end:se?parseFloat(se[1]):null},request:X,url:Y?Y.url:void 0,init:!0,mediaType:U};i.info("Start loading initialization."),X=w(G);var ee=function(){j(M)},J=function(){j(M)};h.load({request:X,success:ee,error:J}),i.debug("Perform init load: "+G.url)})}function te(M,U,j){return new Promise(function(X){var Y=null,se=M?v.resolve(M.path):null,G=se?se.url:void 0,ee=8192,J={bytesLoaded:0,bytesToLoad:ee,range:{start:0,end:ee},request:Y,url:G,init:!1,mediaType:U};Y=w(J),i.debug("Parsing ebml header");var ie=function(oe){V(oe,G,j,function(Z){X({segments:Z,representation:M,error:Z?void 0:new E.default(f.SEGMENT_BASE_LOADER_ERROR_CODE,f.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},ue=function(){X({representation:M,error:new E.default(f.SEGMENT_BASE_LOADER_ERROR_CODE,f.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})};h.load({request:Y,success:ie,error:ue})})}function w(M){var U=new y.default;return U.setInfo(M),U}function F(){h&&(h.abort(),h=null)}return n={setConfig:p,initialize:S,loadInitialization:H,loadSegments:te,reset:F},c(),n}t.__dashjs_factory_name="WebmSegmentBaseLoader",g.default=u.default.getSingletonFactory(t)},"./src/dash/constants/DashConstants.js":function(I,g,r){"use strict";r.r(g);function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,y(d.key),d)}}function m(e,n,i){return n&&u(e.prototype,n),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var n=T(e,"string");return o(n)==="symbol"?n:String(n)}function T(e,n){if(o(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(o(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var E=function(){function e(){l(this,e),this.init()}return m(e,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.PRODUCER_REFERENCE_TIME="ProducerReferenceTime",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.REPRESENTATION_ASARRAY="Representation_asArray",this.PRODUCERREFERENCETIME_ASARRAY="ProducerReferenceTime_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.STATIC="static",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate",this.SERVICE_DESCRIPTION_OPERATING_QUALITY="OperatingQuality",this.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH="OperatingBandwidth",this.PATCH_LOCATION="PatchLocation",this.PUBLISH_TIME="publishTime",this.ORIGINAL_PUBLISH_TIME="originalPublishTime",this.ORIGINAL_MPD_ID="mpdId",this.WALL_CLOCK_TIME="wallClockTime",this.PRESENTATION_TIME="presentationTime",this.LABEL="Label",this.GROUP_LABEL="GroupLabel",this.CONTENT_STEERING="ContentSteering",this.CONTENT_STEERING_AS_ARRAY="ContentSteering_asArray",this.DEFAULT_SERVICE_LOCATION="defaultServiceLocation",this.QUERY_BEFORE_START="queryBeforeStart",this.PROXY_SERVER_URL="proxyServerURL",this.CONTENT_STEERING_RESPONSE={VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",SERVICE_LOCATION_PRIORITY:"SERVICE-LOCATION-PRIORITY"}}}]),e}(),t=new E;g.default=t},"./src/dash/controllers/ContentSteeringController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u=r("./src/streaming/net/URLLoader.js"),m=r("./src/core/errors/Errors.js"),y=r("./src/dash/vo/ContentSteeringRequest.js"),T=r("./src/dash/vo/ContentSteeringResponse.js"),E=r("./src/dash/constants/DashConstants.js"),t=r("./src/streaming/MediaPlayerEvents.js"),e=r("./src/core/events/Events.js"),n=r("./src/streaming/constants/Constants.js"),i=r("./src/core/Utils.js"),d=r("./src/streaming/utils/URLUtils.js"),P={THROUGHPUT:"_DASH_throughput",PATHWAY:"_DASH_pathway",URL:"url"};function b(){var A=this.context,_=Object(d.default)(A).getInstance(),h,f,v,c,S,p,C,x,V,H,te,w,F,M,U;function j(){f=Object(l.default)(A).getInstance().getLogger(h),K()}function X(R){R&&(R.adapter&&(U=R.adapter),R.errHandler&&(x=R.errHandler),R.dashMetrics&&(V=R.dashMetrics),R.mediaPlayerModel&&(H=R.mediaPlayerModel),R.requestModifier&&(w=R.requestModifier),R.manifestModel&&(te=R.manifestModel),R.abrController&&(F=R.abrController),R.eventBus&&(M=R.eventBus))}function Y(){C=Object(u.default)(A).create({errHandler:x,dashMetrics:V,mediaPlayerModel:H,requestModifier:w,errors:m.default}),M.on(t.default.PERIOD_SWITCH_COMPLETED,se,h),M.on(e.default.FRAGMENT_LOADING_STARTED,G,h)}function se(R){R&&R.toStreamInfo&&(c=R.toStreamInfo)}function G(R){R&&R.request&&R.request.serviceLocation&&(S=R.request.serviceLocation)}function ee(){var R=te.getValue();return U.getContentSteering(R)}function J(){var R=ee();return R&&R.queryBeforeStart}function ie(){return new Promise(function(R){try{var L=ee();if(!L||!L.serverUrl){R();return}var $=ue(L),O=new y.default($);C.load({request:O,success:function(ne){ae(ne),M.trigger(t.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:v,url:$}),R()},error:function(ne){ge(ne),R(ne)}})}catch(Q){R(Q)}})}function ue(R){var L=R.proxyServerUrl?R.proxyServerUrl:R.serverUrl;v&&v.reloadUri&&(_.isRelative(v.reloadUri)?L=_.resolve(v.reloadUri,R.serverUrl):L=v.reloadUri);var $=[];if(c){var O=U.getIsDynamic(),Q=U.getAllMediaInfoForType(c,n.default.VIDEO).length>0?n.default.VIDEO:n.default.AUDIO,ne=F.getThroughputHistory(),ce=ne?ne.getAverageThroughput(Q,O):NaN;isNaN(ce)||$.push({key:P.THROUGHPUT,value:ce*1e3})}return S&&$.push({key:P.PATHWAY,value:S}),R.proxyServerUrl&&R.proxyServerUrl===L&&R.serverUrl&&$.push({key:P.URL,value:encodeURI(R.serverUrl)}),L=i.default.addAditionalQueryParameterToUrl(L,$),L}function ae(R){!R||!R[E.default.CONTENT_STEERING_RESPONSE.VERSION]||parseInt(R[E.default.CONTENT_STEERING_RESPONSE.VERSION])!==1||(v=new T.default,v.version=R[E.default.CONTENT_STEERING_RESPONSE.VERSION],R[E.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(R[E.default.CONTENT_STEERING_RESPONSE.TTL])&&(v.ttl=R[E.default.CONTENT_STEERING_RESPONSE.TTL]),R[E.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(v.reloadUri=R[E.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),R[E.default.CONTENT_STEERING_RESPONSE.SERVICE_LOCATION_PRIORITY]&&(v.serviceLocationPriority=R[E.default.CONTENT_STEERING_RESPONSE.SERVICE_LOCATION_PRIORITY]),oe())}function oe(){v&&v.ttl&&!isNaN(v.ttl)&&(p&&clearTimeout(p),p=setTimeout(function(){ie()},v.ttl*1e3))}function Z(){p&&clearTimeout(p),p=null}function ge(R){f.warn("Error fetching data from content steering server",R),oe()}function le(){return v}function z(){K(),M.off(t.default.PERIOD_SWITCH_COMPLETED,se,h),M.off(e.default.FRAGMENT_LOADING_STARTED,G,h)}function K(){v=null,c=null,S=null,Z()}return h={reset:z,setConfig:X,loadSteeringData:ie,getCurrentSteeringResponseData:le,shouldQueryBeforeStart:J,getSteeringDataFromManifest:ee,stopSteeringRequestTimer:Z,initialize:Y},j(),h}b.__dashjs_factory_name="ContentSteeringController",g.default=o.default.getSingletonFactory(b)},"./src/dash/controllers/RepresentationController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/core/FactoryMaker.js"),u=r("./src/streaming/MediaPlayerEvents.js"),m=r("./src/dash/utils/SegmentsUtils.js");function y(T){T=T||{};var E=T.eventBus,t=T.events,e=T.abrController,n=T.dashMetrics,i=T.playbackController,d=T.timelineConverter,P=T.type,b=T.streamInfo,A=T.dashConstants,_=T.segmentsController,h=T.isDynamic,f,v,c,S,p;function C(){M(),E.on(u.default.MANIFEST_VALIDITY_CHANGED,le,f)}function x(){return b.id}function V(){return P}function H(){if(!e||!n||!i||!d)throw new Error(o.default.MISSING_CONFIG_ERROR)}function te(){return v}function w(){return c}function F(){return p}function M(){v=null,c=!0,S=[]}function U(){E.off(u.default.MANIFEST_VALIDITY_CHANGED,le,f),M()}function j(z,K,R,L,$){H(),c=!0,S=K;var O=J($);if(ge(O),v=z,R!==o.default.VIDEO&&R!==o.default.AUDIO&&(R!==o.default.TEXT||!L))return ae(),Promise.resolve();for(var Q=[],ne=0,ce=S.length;ne<ce;ne++){var W=S[ne];Q.push(X(W))}return Promise.all(Q)}function X(z){return new Promise(function(K,R){var L=z.hasInitialization(),$=z.hasSegments(),O=[];O.push(_.updateInitData(z,L)),O.push(_.updateSegmentData(z,$)),Promise.all(O).then(function(Q){Q[0]&&!Q[0].error&&(z=se(z,Q[0])),Q[1]&&!Q[1].error&&(z=G(z,Q[1])),Y(z),oe(z),K()}).catch(function(Q){R(Q)})})}function Y(z){z.mediaFinishedInformation=_.getMediaFinishedInformation(z)}function se(z,K){return!K||K.error||!K.representation?z:K.representation}function G(z,K){if(!(!K||K.error)){var R=K.segments,L=[],$=0,O,Q,ne,ce;for(O=0,Q=R?R.length:0;O<Q;O++)ne=R[O],ce=Object(m.getTimeBasedSegment)(d,h,z,ne.startTime,ne.duration,ne.timescale,ne.media,ne.mediaRange,$),ce&&(L.push(ce),ce=null,$++);return L.length>0&&(z.segments=L),z}}function ee(){H();var z=new Date,K=F(),R=i.getTime()*1e3;K&&n.addRepresentationSwitch(K.adaptation.type,z,R,K.id),E.trigger(u.default.REPRESENTATION_SWITCH,{mediaType:P,streamId:b.id,currentRepresentation:K,numberOfRepresentations:S.length},{streamId:b.id,mediaType:P})}function J(z){return z==null||z>=S.length?null:S[z]}function ie(z){return S.indexOf(z)}function ue(){for(var z=0,K=S.length;z<K;z++){var R=S[z].segmentInfoType;if(!S[z].hasInitialization()||(R===A.SEGMENT_BASE||R===A.BASE_URL)&&!S[z].segments)return!1}return!0}function ae(z){c=!1,E.trigger(t.DATA_UPDATE_COMPLETED,{data:v,currentRepresentation:p,error:z},{streamId:b.id,mediaType:P})}function oe(z){if(w()){var K=n.getCurrentManifestUpdate(),R=!1,L,$;if(K){for(var O=0;O<K.representationInfo.length;O++)if(L=K.representationInfo[O],L.index===z.index&&L.mediaType===V()){R=!0;break}R||n.addManifestUpdateRepresentationInfo(z,V())}if(ue()){e.setPlaybackQuality(P,b,ie(p));var Q=n.getCurrentDVRInfo(P);Q&&n.updateManifestUpdateInfo({latency:Q.range.end-i.getTime()}),$=n.getCurrentRepresentationSwitch(F().adaptation.type),$||ee(),ae()}}}function Z(z){var K=J(z);ge(K),ee()}function ge(z){p=z}function le(z){if(z.newDuration){var K=F();if(K&&K.adaptation.period){var R=K.adaptation.period;R.duration=z.newDuration}}}return f={getStreamId:x,getType:V,getData:te,isUpdating:w,updateData:j,getCurrentRepresentation:F,getRepresentationForQuality:J,prepareQualityChange:Z,reset:U},C(),f}y.__dashjs_factory_name="RepresentationController",g.default=l.default.getClassFactory(y)},"./src/dash/controllers/SegmentBaseController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/dash/SegmentBaseLoader.js"),u=r("./src/dash/WebmSegmentBaseLoader.js");function m(T){T=T||{};var E=this.context,t=T.eventBus,e=T.events,n=T.dashMetrics,i=T.mediaPlayerModel,d=T.errHandler,P=T.baseURLController,b=T.debug,A=T.boxParser,_=T.requestModifier,h=T.errors,f,v,c;function S(){v=Object(l.default)(E).getInstance(),c=Object(u.default)(E).getInstance(),v.setConfig({baseURLController:P,dashMetrics:n,mediaPlayerModel:i,errHandler:d,eventBus:t,events:e,errors:h,debug:b,boxParser:A,requestModifier:_}),c.setConfig({baseURLController:P,dashMetrics:n,mediaPlayerModel:i,errHandler:d,eventBus:t,events:e,errors:h,debug:b,requestModifier:_})}function p(te){var w=te?te.split("/")[1]:"";return w.toLowerCase()==="webm"}function C(){v.initialize(),c.initialize()}function x(te){return p(te.representation.mimeType)?c.loadInitialization(te.representation,te.mediaType):v.loadInitialization(te.representation,te.mediaType)}function V(te){return p(te.mimeType)?c.loadSegments(te.representation,te.mediaType,te.representation?te.representation.indexRange:null):v.loadSegments(te.representation,te.mediaType,te.representation?te.representation.indexRange:null)}function H(){v.reset(),c.reset()}return f={initialize:C,getSegmentBaseInitSegment:x,getSegmentList:V,reset:H},S(),f}m.__dashjs_factory_name="SegmentBaseController";var y=o.default.getSingletonFactory(m);g.default=y},"./src/dash/controllers/SegmentsController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/dash/utils/TimelineSegmentsGetter.js"),u=r("./src/dash/utils/TemplateSegmentsGetter.js"),m=r("./src/dash/utils/ListSegmentsGetter.js"),y=r("./src/dash/utils/SegmentBaseGetter.js");function T(t){t=t||{};var e=this.context,n=t.dashConstants,i=t.type,d=t.segmentBaseController,P,b;function A(){b={}}function _(C){b[n.SEGMENT_TIMELINE]=Object(l.default)(e).create(t,C),b[n.SEGMENT_TEMPLATE]=Object(u.default)(e).create(t,C),b[n.SEGMENT_LIST]=Object(m.default)(e).create(t,C),b[n.SEGMENT_BASE]=Object(y.default)(e).create(t,C)}function h(C,x){return x?Promise.resolve():d.getSegmentBaseInitSegment({representation:C,mediaType:i})}function f(C,x){return x?Promise.resolve():d.getSegmentList({mimeType:C.mimeType,representation:C,mediaType:i})}function v(C){return C?C.segments?b[n.SEGMENT_BASE]:b[C.segmentInfoType]:null}function c(C,x,V){var H=v(C);return H?H.getSegmentByIndex(C,x,V):null}function S(C,x){var V=v(C);return V?V.getSegmentByTime(C,x):null}function p(C){var x=v(C);return x?x.getMediaFinishedInformation(C):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}return P={initialize:_,updateInitData:h,updateSegmentData:f,getSegmentByIndex:c,getSegmentByTime:S,getMediaFinishedInformation:p},A(),P}T.__dashjs_factory_name="SegmentsController";var E=o.default.getClassFactory(T);g.default=E},"./src/dash/controllers/ServiceDescriptionController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u=r("./src/streaming/constants/Constants.js"),m=r("./src/dash/constants/DashConstants.js"),y=[u.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],T={VIDEO:"video",AUDIO:"audio",ANY:"any",ALL:"all"};function E(){var t=this.context,e,n,i,d,P;function b(){d=Object(l.default)(t).getInstance().getLogger(e),h()}function A(M){M&&M.adapter&&(P=M.adapter)}function _(){h()}function h(){n={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{}},i=[]}function f(){return n}function v(M){if(!(!M||!M.serviceDescriptions)){var U=M.serviceDescriptions.filter(function(Y){return y.includes(Y.schemeIdUri)}),j=M.serviceDescriptions.filter(function(Y){return Y.schemeIdUri==null}),X=U.length>0?U[U.length-1]:j[j.length-1];X&&(X.latency&&X.latency.target>0&&c(X),X.playbackRate&&C(X),X.operatingQuality&&void 0,X.operatingBandwidth&&V(X))}}function c(M){var U;if(M.schemeIdUri===u.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME?U=p(M):U=S(M),i.length>0){var j=F(U),X=j.to,Y=j.id;n.liveDelay=U.liveDelay-X,n.liveCatchup.maxDrift=U.maxDrift,d.debug(`
                Found latency properties coming from service description. Applied time offset of `.concat(X," from ProducerReferenceTime element with id ").concat(Y,`.
                Live Delay: `).concat(U.liveDelay-X,", Live catchup max drift: ").concat(U.maxDrift,`
            `))}else n.liveDelay=U.liveDelay,n.liveCatchup.maxDrift=U.maxDrift,d.debug("Found latency properties coming from service description: Live Delay: ".concat(U.liveDelay,", Live catchup max drift: ").concat(U.maxDrift))}function S(M){var U=M.latency.target/1e3,j=!isNaN(M.latency.max)&&M.latency.max>M.latency.target?(M.latency.max-M.latency.target+500)/1e3:NaN,X=M.latency.referenceId||NaN;return{liveDelay:U,maxDrift:j,referenceId:X}}function p(M){var U=M.latency.target/1e3,j=!isNaN(M.latency.max)&&M.latency.max>M.latency.target?(M.latency.max-M.latency.target+500)/1e3:NaN,X=M.latency.referenceId||NaN;return{liveDelay:U,maxDrift:j,referenceId:X}}function C(M){var U=M.playbackRate.min?Math.round((M.playbackRate.min-1)*1e3)/1e3:NaN,j=M.playbackRate.max?Math.round((M.playbackRate.max-1)*1e3)/1e3:NaN;n.liveCatchup.playbackRate.min=U,n.liveCatchup.playbackRate.max=j,d.debug("Found latency properties coming from service description: Live catchup min playback rate: ".concat(U)),d.debug("Found latency properties coming from service description: Live catchup max playback rate: ".concat(j))}function x(){}function V(M){if(!(!M||!M.operatingBandwidth||!M.operatingBandwidth.mediaType||M.operatingBandwidth.mediaType===T.ALL)){var U={};U.minBandwidth=M.operatingBandwidth.min,U.maxBandwidth=M.operatingBandwidth.max,U.targetBandwidth=M.operatingBandwidth.target;var j=[];M.operatingBandwidth.mediaType===T.VIDEO||M.operatingBandwidth.mediaType===T.AUDIO?j.push(M.operatingBandwidth.mediaType):M.operatingBandwidth.mediaType===T.ANY&&(j.push(T.AUDIO),j.push(T.VIDEO)),j.forEach(function(X){isNaN(U.minBandwidth)||H("minBitrate",X,U.minBandwidth),isNaN(U.maxBandwidth)||H("maxBitrate",X,U.maxBandwidth),isNaN(U.targetBandwidth)||H("initialBitrate",X,U.targetBandwidth)})}}function H(M,U,j){try{n[M][U]=j/1e3}catch(X){d.error(X)}}function te(){return i}function w(M){try{var U=[];if(M&&M.length>0){var j=[u.default.VIDEO,u.default.AUDIO,u.default.TEXT],X=P.getAvailabilityStartTime()/1e3;M.forEach(function(Y){var se=j.reduce(function(G,ee){return G=G.concat(P.getAllMediaInfoForType(Y,ee)),G},[]).reduce(function(G,ee){var J=P.getProducerReferenceTimes(Y,ee);return J.forEach(function(ie){var ue=P.getVoRepresentations(ee);if(ue&&ue.length>0&&ue[0].adaptation&&ue[0].segmentInfoType===m.default.SEGMENT_TEMPLATE){var ae=ue[0],oe=new Date(ie[m.default.WALL_CLOCK_TIME]),Z=oe.getTime()/1e3,ge=Z-(ie[m.default.PRESENTATION_TIME]/ae[m.default.TIMESCALE]-ae[m.default.PRESENTATION_TIME_OFFSET]+Y.start),le=X-ge;G.push({id:ie[m.default.ID],to:le})}}),G},[]);U=U.concat(se)})}i=U}catch(Y){d.error(Y),i=[]}}function F(M){var U=0,j,X=i.filter(function(Y){return Y.id===M.referenceId});return X.length===0?(U=i.length>0?i[0].to:0,j=i[0].id||NaN):(U=X[0].to||0,j=X[0].id||NaN),{to:U,id:j}}return e={getServiceDescriptionSettings:f,getProducerReferenceTimeOffsets:te,calculateProducerReferenceTimeOffsets:w,applyServiceDescription:v,reset:_,setConfig:A},b(),e}E.__dashjs_factory_name="ServiceDescriptionController",g.default=o.default.getSingletonFactory(E)},"./src/dash/models/DashManifestModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/dash/constants/DashConstants.js"),u=r("./src/dash/vo/Representation.js"),m=r("./src/dash/vo/AdaptationSet.js"),y=r("./src/dash/vo/Period.js"),T=r("./src/dash/vo/Mpd.js"),E=r("./src/dash/vo/UTCTiming.js"),t=r("./src/dash/vo/Event.js"),e=r("./src/dash/vo/BaseURL.js"),n=r("./src/dash/vo/EventStream.js"),i=r("./src/dash/vo/ProducerReferenceTime.js"),d=r("./src/dash/vo/ContentSteering.js"),P=r("./src/streaming/utils/ObjectUtils.js"),b=r("./src/streaming/utils/URLUtils.js"),A=r("./src/core/FactoryMaker.js"),_=r("./src/core/Debug.js"),h=r("./src/streaming/vo/DashJSError.js"),f=r("./src/core/errors/Errors.js"),v=r("./src/streaming/thumbnail/ThumbnailTracks.js");function c(w,F){var M=typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(!M){if(Array.isArray(w)||(M=C(w))||F&&w&&typeof w.length=="number"){M&&(w=M);var U=0,j=function(){};return{s:j,n:function(){return U>=w.length?{done:!0}:{done:!1,value:w[U++]}},e:function(ee){throw ee},f:j}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var X=!0,Y=!1,se;return{s:function(){M=M.call(w)},n:function(){var ee=M.next();return X=ee.done,ee},e:function(ee){Y=!0,se=ee},f:function(){try{!X&&M.return!=null&&M.return()}finally{if(Y)throw se}}}}function S(w){return V(w)||x(w)||C(w)||p()}function p(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C(w,F){if(w){if(typeof w=="string")return H(w,F);var M=Object.prototype.toString.call(w).slice(8,-1);if(M==="Object"&&w.constructor&&(M=w.constructor.name),M==="Map"||M==="Set")return Array.from(w);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return H(w,F)}}function x(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}function V(w){if(Array.isArray(w))return H(w)}function H(w,F){(F==null||F>w.length)&&(F=w.length);for(var M=0,U=new Array(F);M<F;M++)U[M]=w[M];return U}function te(){var w,F,M,U,j=this.context,X=Object(b.default)(j).getInstance(),Y=Number.isInteger||function(pe){return typeof pe=="number"&&isFinite(pe)&&Math.floor(pe)===pe};function se(){F=Object(_.default)(j).getInstance().getLogger(w)}function G(pe,Ye){if(!pe)throw new Error("adaptation is not defined");if(!Ye)throw new Error("type is not defined");if(pe.Representation_asArray&&pe.Representation_asArray.length){var lt=tt(pe.Representation_asArray[0]);if(lt&&lt.length>0&&v.THUMBNAILS_SCHEME_ID_URIS.indexOf(lt[0].schemeIdUri)>=0)return Ye===o.default.IMAGE}if(pe.ContentComponent_asArray&&pe.ContentComponent_asArray.length>0){if(pe.ContentComponent_asArray.length>1)return Ye===o.default.MUXED;if(pe.ContentComponent_asArray[0].contentType===Ye)return!0}var De=Ye===o.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(Ye);if(pe.Representation_asArray&&pe.Representation_asArray.length){var je=pe.Representation_asArray[0].codecs;if(De.test(je))return!0}if(pe.hasOwnProperty(l.default.MIME_TYPE))return De.test(pe.mimeType);if(pe.Representation_asArray){for(var Ze,ut=0;ut<pe.Representation_asArray.length;ut++)if(Ze=pe.Representation_asArray[ut],Ze.hasOwnProperty(l.default.MIME_TYPE))return De.test(Ze.mimeType)}return!1}function ee(pe){if(!pe)throw new Error("adaptation is not defined");if(pe.hasOwnProperty(l.default.SEGMENT_TEMPLATE)||pe.hasOwnProperty(l.default.SEGMENT_TIMELINE)||pe.hasOwnProperty(l.default.SEGMENT_LIST)||pe.hasOwnProperty(l.default.SEGMENT_BASE))return!0;if(pe.Representation_asArray&&pe.Representation_asArray.length>0){var Ye=pe.Representation_asArray[0];if(Ye.hasOwnProperty(l.default.SEGMENT_TEMPLATE)||Ye.hasOwnProperty(l.default.SEGMENT_TIMELINE)||Ye.hasOwnProperty(l.default.SEGMENT_LIST)||Ye.hasOwnProperty(l.default.SEGMENT_BASE))return!0}return!1}function J(pe){return G(pe,o.default.AUDIO)}function ie(pe){return G(pe,o.default.VIDEO)}function ue(pe){return G(pe,o.default.TEXT)}function ae(pe){return G(pe,o.default.MUXED)}function oe(pe){return G(pe,o.default.IMAGE)}function Z(pe){var Ye=pe&&pe.hasOwnProperty(l.default.PRODUCERREFERENCETIME_ASARRAY)?pe[l.default.PRODUCERREFERENCETIME_ASARRAY]:[],lt=pe&&pe.hasOwnProperty(l.default.REPRESENTATION_ASARRAY)?pe[l.default.REPRESENTATION_ASARRAY]:[];lt.forEach(function(je){je.hasOwnProperty(l.default.PRODUCERREFERENCETIME_ASARRAY)&&Ye.push.apply(Ye,S(je[l.default.PRODUCERREFERENCETIME_ASARRAY]))});var De=[];return Ye.forEach(function(je){var Ze=new i.default;if(je.hasOwnProperty(l.default.ID))Ze[l.default.ID]=je[l.default.ID];else return;if(je.hasOwnProperty(l.default.WALL_CLOCK_TIME))Ze[l.default.WALL_CLOCK_TIME]=je[l.default.WALL_CLOCK_TIME];else return;if(je.hasOwnProperty(l.default.PRESENTATION_TIME))Ze[l.default.PRESENTATION_TIME]=je[l.default.PRESENTATION_TIME];else return;De.push(Ze)}),De}function ge(pe){var Ye="";return pe&&pe.hasOwnProperty(l.default.LANG)&&(Ye=pe.lang),Ye}function le(pe){return pe&&pe.hasOwnProperty(l.default.VIEWPOINT)?pe.Viewpoint:null}function z(pe){return pe&&pe.hasOwnProperty(l.default.ROLE_ASARRAY)?pe.Role_asArray:[]}function K(pe){return pe&&pe.hasOwnProperty(l.default.ACCESSIBILITY_ASARRAY)?pe.Accessibility_asArray:[]}function R(pe){return pe&&pe.hasOwnProperty(l.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?pe.AudioChannelConfiguration_asArray:[]}function L(pe){return pe&&pe.hasOwnProperty(l.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?pe.AudioChannelConfiguration_asArray:[]}function $(){return function(pe,Ye){return pe.bandwidth-Ye.bandwidth}}function O(pe){return pe&&Array.isArray(pe.Representation_asArray)&&pe.Representation_asArray.sort($()),pe}function Q(pe,Ye){return pe&&pe.Period_asArray&&Y(Ye)?pe.Period_asArray[Ye]?pe.Period_asArray[Ye].AdaptationSet_asArray:[]:[]}function ne(pe){return pe&&pe.Period_asArray?pe.Period_asArray:[]}function ce(pe,Ye){var lt=ne(Ye);return lt.length>0&&Y(pe)?lt[pe]:null}function W(pe,Ye,lt){var De=Q(Ye,lt),je,Ze;for(je=0,Ze=De.length;je<Ze;je++)if(De[je].hasOwnProperty(l.default.ID)&&De[je].id===pe)return De[je];return null}function B(pe,Ye,lt){var De=Q(Ye,lt);return De.length>0&&Y(pe)?De[pe]:null}function D(pe,Ye,lt){if(!pe)return-1;for(var De=Q(Ye,lt),je=0;je<De.length;je++){var Ze=Object(P.default)(j).getInstance();if(Ze.areEqual(De[je],pe))return je}return-1}function q(pe,Ye,lt){var De=Q(pe,Ye),je,Ze,ut=[];for(je=0,Ze=De.length;je<Ze;je++)G(De[je],lt)&&ut.push(O(De[je]));return ut}function me(pe,Ye,lt){var De=null;if(pe&&pe.Representation_asArray&&pe.Representation_asArray.length>0){var je=Y(Ye)&&Ye>=0&&Ye<pe.Representation_asArray.length?pe.Representation_asArray[Ye]:pe.Representation_asArray[0];je&&(De=je.mimeType+';codecs="'+je.codecs+'"',lt&&je.width!==void 0&&(De+=';width="'+je.width+'";height="'+je.height+'"'))}return De&&(De=De.replace(/\sprofiles=[^;]*/g,"")),De}function de(pe){return pe&&pe.Representation_asArray&&pe.Representation_asArray.length>0?pe.Representation_asArray[0].mimeType:null}function ve(pe){return!pe||!pe.hasOwnProperty(l.default.CENC_DEFAULT_KID)?null:pe[l.default.CENC_DEFAULT_KID]}function Se(pe){if(!pe||!Array.isArray(pe.Label_asArray))return[];for(var Ye=[],lt=0;lt<pe.Label_asArray.length;lt++)Ye.push({lang:pe.Label_asArray[lt].lang,text:pe.Label_asArray[lt].__text||pe.Label_asArray[lt]});return Ye}function be(pe){return!pe||!pe.hasOwnProperty(l.default.CONTENTPROTECTION_ASARRAY)||pe.ContentProtection_asArray.length===0?null:pe.ContentProtection_asArray}function Me(pe){var Ye=!1;return pe&&pe.hasOwnProperty("type")&&(Ye=pe.type===l.default.DYNAMIC),Ye}function Fe(pe){return pe&&pe[l.default.ID]||null}function Ee(pe,Ye){var lt=!1;return pe&&pe.profiles&&pe.profiles.length>0&&(lt=pe.profiles.indexOf(Ye)!==-1),lt}function Pe(pe){var Ye;return pe&&pe.hasOwnProperty(l.default.MEDIA_PRESENTATION_DURATION)?Ye=pe.mediaPresentationDuration:pe&&pe.type=="dynamic"?Ye=Number.POSITIVE_INFINITY:Ye=Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,Ye}function Ue(pe){return pe&&pe.bandwidth?pe.bandwidth:NaN}function Re(pe){var Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,lt=NaN;return pe&&pe.hasOwnProperty(l.default.MINIMUM_UPDATE_PERIOD)&&(lt=pe.minimumUpdatePeriod),isNaN(lt)?lt:Math.max(lt-Ye,1)}function Ke(pe){return pe&&pe.hasOwnProperty(l.default.PUBLISH_TIME)?new Date(pe[l.default.PUBLISH_TIME]):null}function Ne(pe){return pe&&Array.isArray(pe.Representation_asArray)?pe.Representation_asArray.length:0}function ze(pe){var Ye=O(pe),lt=Ye&&Array.isArray(Ye.Representation_asArray)?Ye.Representation_asArray:[];return lt.map(function(De){return{bandwidth:De.bandwidth,width:De.width||0,height:De.height||0,scanType:De.scanType||null,id:De.id||null}})}function $e(pe){try{var Ye=pe&&typeof pe.selectionPriority<"u"?parseInt(pe.selectionPriority):1;return isNaN(Ye)?1:Ye}catch{return 1}}function tt(pe){return!pe||!pe.EssentialProperty_asArray||!pe.EssentialProperty_asArray.length?null:pe.EssentialProperty_asArray.map(function(Ye){return{schemeIdUri:Ye.schemeIdUri,value:Ye.value}})}function ft(pe,Ye){return Ye&&Ye.Representation_asArray&&Ye.Representation_asArray.length>0&&Y(pe)?Ye.Representation_asArray[pe]:null}function bt(pe){if(pe&&pe.period&&Y(pe.period.index)){var Ye=pe.period.mpd.manifest.Period_asArray[pe.period.index];if(Ye&&Ye.AdaptationSet_asArray&&Y(pe.index))return O(Ye.AdaptationSet_asArray[pe.index])}}function Et(pe){var Ye=[],lt=bt(pe),De,je;if(lt&&lt.Representation_asArray){if(pe&&pe.period&&Y(pe.period.index)){var Ze=Xe(pe.period.mpd.manifest);Ze&&(je=Ze[0])}for(var ut=0,Ot=lt.Representation_asArray.length;ut<Ot;++ut){var At=lt.Representation_asArray[ut],we=new u.default;if(we.index=ut,we.adaptation=pe,At.hasOwnProperty(l.default.ID)&&(we.id=At.id),At.hasOwnProperty(l.default.CODECS)&&(we.codecs=At.codecs),At.hasOwnProperty(l.default.MIME_TYPE)&&(we.mimeType=At[l.default.MIME_TYPE]),At.hasOwnProperty(l.default.CODEC_PRIVATE_DATA)&&(we.codecPrivateData=At.codecPrivateData),At.hasOwnProperty(l.default.BANDWITH)&&(we.bandwidth=At.bandwidth),At.hasOwnProperty(l.default.WIDTH)&&(we.width=At.width),At.hasOwnProperty(l.default.HEIGHT)&&(we.height=At.height),At.hasOwnProperty(l.default.SCAN_TYPE)&&(we.scanType=At.scanType),At.hasOwnProperty(l.default.MAX_PLAYOUT_RATE)&&(we.maxPlayoutRate=At.maxPlayoutRate),At.hasOwnProperty(l.default.SEGMENT_BASE)?(De=At.SegmentBase,we.segmentInfoType=l.default.SEGMENT_BASE):At.hasOwnProperty(l.default.SEGMENT_LIST)?(De=At.SegmentList,De.hasOwnProperty(l.default.SEGMENT_TIMELINE)?we.segmentInfoType=l.default.SEGMENT_TIMELINE:we.segmentInfoType=l.default.SEGMENT_LIST):At.hasOwnProperty(l.default.SEGMENT_TEMPLATE)?(De=At.SegmentTemplate,De.hasOwnProperty(l.default.SEGMENT_TIMELINE)?we.segmentInfoType=l.default.SEGMENT_TIMELINE:we.segmentInfoType=l.default.SEGMENT_TEMPLATE,De.hasOwnProperty(l.default.INITIALIZATION_MINUS)&&(we.initialization=De.initialization.split("$Bandwidth$").join(At.bandwidth).split("$RepresentationID$").join(At.id))):we.segmentInfoType=l.default.BASE_URL,we.essentialProperties=tt(At),De){if(De.hasOwnProperty(l.default.INITIALIZATION)){var Oe=De.Initialization;Oe.hasOwnProperty(l.default.SOURCE_URL)&&(we.initialization=Oe.sourceURL),Oe.hasOwnProperty(l.default.RANGE)&&(we.range=Oe.range)}else ue(lt)&&ee(lt)&&lt.mimeType&&lt.mimeType.indexOf("application/mp4")===-1&&(we.range=0);De.hasOwnProperty(l.default.TIMESCALE)&&(we.timescale=De.timescale),De.hasOwnProperty(l.default.DURATION)?we.segmentDuration=De.duration/we.timescale:At.hasOwnProperty(l.default.SEGMENT_TEMPLATE)&&(De=At.SegmentTemplate,De.hasOwnProperty(l.default.SEGMENT_TIMELINE)&&(we.segmentDuration=St(De.SegmentTimeline)/we.timescale)),De.hasOwnProperty(l.default.MEDIA)&&(we.media=De.media),De.hasOwnProperty(l.default.START_NUMBER)&&(we.startNumber=De.startNumber),De.hasOwnProperty(l.default.INDEX_RANGE)&&(we.indexRange=De.indexRange),De.hasOwnProperty(l.default.PRESENTATION_TIME_OFFSET)&&(we.presentationTimeOffset=De.presentationTimeOffset/we.timescale),De.hasOwnProperty(l.default.AVAILABILITY_TIME_OFFSET)?we.availabilityTimeOffset=De.availabilityTimeOffset:je&&je.availabilityTimeOffset!==void 0&&(we.availabilityTimeOffset=je.availabilityTimeOffset),De.hasOwnProperty(l.default.AVAILABILITY_TIME_COMPLETE)?we.availabilityTimeComplete=De.availabilityTimeComplete!=="false":je&&je.availabilityTimeComplete!==void 0&&(we.availabilityTimeComplete=je.availabilityTimeComplete)}we.MSETimeOffset=Ct(we),we.path=[pe.period.index,pe.index,ut],Ye.push(we)}}return Ye}function St(pe){if(!pe||!pe.S_asArray)return NaN;var Ye=pe.S_asArray[0],lt=pe.S_asArray[1];return Ye.hasOwnProperty("d")?Ye.d:lt.t-Ye.t}function Ct(pe){var Ye=pe.presentationTimeOffset,lt=pe.adaptation.period.start;return lt-Ye}function ye(pe){var Ye=pe&&Y(pe.index)?pe.mpd.manifest.Period_asArray[pe.index]:null,lt=[],De,je,Ze;if(Ye&&Ye.AdaptationSet_asArray)for(Ze=0;Ze<Ye.AdaptationSet_asArray.length;Ze++)je=Ye.AdaptationSet_asArray[Ze],De=new m.default,je.hasOwnProperty(l.default.ID)&&(De.id=je.id),De.index=Ze,De.period=pe,ae(je)?De.type=o.default.MUXED:J(je)?De.type=o.default.AUDIO:ie(je)?De.type=o.default.VIDEO:ue(je)?De.type=o.default.TEXT:oe(je)?De.type=o.default.IMAGE:F.warn("Unknown Adaptation stream type"),lt.push(De);return lt}function he(pe){var Ye=pe?Me(pe.manifest):!1,lt=[],De=null,je=null,Ze=null,ut=null,Ot,At;for(At=0,Ot=pe&&pe.manifest&&pe.manifest.Period_asArray?pe.manifest.Period_asArray.length:0;At<Ot;At++)je=pe.manifest.Period_asArray[At],je.hasOwnProperty(l.default.START)?(ut=new y.default,ut.start=je.start):De!==null&&De.hasOwnProperty(l.default.DURATION)&&Ze!==null?(ut=new y.default,ut.start=parseFloat((Ze.start+Ze.duration).toFixed(5))):At===0&&!Ye&&(ut=new y.default,ut.start=0),Ze!==null&&isNaN(Ze.duration)&&(ut!==null?Ze.duration=parseFloat((ut.start-Ze.start).toFixed(5)):F.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),ut!==null&&(ut.id=Ae(je,At),ut.index=At,ut.mpd=pe,je.hasOwnProperty(l.default.DURATION)&&(ut.duration=je.duration),Ze&&(Ze.nextPeriodId=ut.id),lt.push(ut),De=je,Ze=ut),je=null,ut=null;return lt.length===0||Ze!==null&&isNaN(Ze.duration)&&(Ze.duration=parseFloat((Ge(Ze)-Ze.start).toFixed(5))),lt}function Ae(pe,Ye){if(!pe)throw new Error("Period cannot be null or undefined");var lt=y.default.DEFAULT_ID+"_"+Ye;return pe.hasOwnProperty(l.default.ID)&&pe.id.length>0&&pe.id!=="__proto__"&&(lt=pe.id),lt}function ke(pe){var Ye=new T.default;return pe&&(Ye.manifest=pe,pe.hasOwnProperty(l.default.AVAILABILITY_START_TIME)?Ye.availabilityStartTime=new Date(pe.availabilityStartTime.getTime()):pe.loadedTime&&(Ye.availabilityStartTime=new Date(pe.loadedTime.getTime())),pe.hasOwnProperty(l.default.AVAILABILITY_END_TIME)&&(Ye.availabilityEndTime=new Date(pe.availabilityEndTime.getTime())),pe.hasOwnProperty(l.default.MINIMUM_UPDATE_PERIOD)&&(Ye.minimumUpdatePeriod=pe.minimumUpdatePeriod),pe.hasOwnProperty(l.default.MEDIA_PRESENTATION_DURATION)&&(Ye.mediaPresentationDuration=pe.mediaPresentationDuration),pe.hasOwnProperty(l.default.SUGGESTED_PRESENTATION_DELAY)&&(Ye.suggestedPresentationDelay=pe.suggestedPresentationDelay),pe.hasOwnProperty(l.default.TIMESHIFT_BUFFER_DEPTH)&&(Ye.timeShiftBufferDepth=pe.timeShiftBufferDepth),pe.hasOwnProperty(l.default.MAX_SEGMENT_DURATION)&&(Ye.maxSegmentDuration=pe.maxSegmentDuration),pe.hasOwnProperty(l.default.PUBLISH_TIME)&&(Ye.publishTime=new Date(pe.publishTime))),Ye}function Qe(){if(!M||!M.hasOwnProperty("error"))throw new Error(o.default.MISSING_CONFIG_ERROR)}function Ge(pe){Qe();var Ye=Me(pe.mpd.manifest),lt;return pe.mpd.manifest.mediaPresentationDuration?lt=pe.mpd.manifest.mediaPresentationDuration:pe.duration?lt=pe.duration:Ye?lt=Number.POSITIVE_INFINITY:M.error(new h.default(f.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",pe)),lt}function qe(pe){var Ye=pe&&pe.mpd&&pe.mpd.manifest?pe.mpd.manifest:null,lt=Ye?Ye.Period_asArray:null,De=lt&&pe&&Y(pe.index)?lt[pe.index].EventStream_asArray:null,je=[],Ze,ut;if(De)for(Ze=0;Ze<De.length;Ze++){var Ot=new n.default;if(Ot.period=pe,Ot.timescale=1,De[Ze].hasOwnProperty(o.default.SCHEME_ID_URI))Ot.schemeIdUri=De[Ze][o.default.SCHEME_ID_URI];else throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(De[Ze].hasOwnProperty(l.default.TIMESCALE)&&(Ot.timescale=De[Ze][l.default.TIMESCALE]),De[Ze].hasOwnProperty(l.default.VALUE)&&(Ot.value=De[Ze][l.default.VALUE]),De[Ze].hasOwnProperty(l.default.PRESENTATION_TIME_OFFSET)&&(Ot.presentationTimeOffset=De[Ze][l.default.PRESENTATION_TIME_OFFSET]),ut=0;De[Ze].Event_asArray&&ut<De[Ze].Event_asArray.length;ut++){var At=De[Ze].Event_asArray[ut],we=new t.default;we.presentationTime=0,we.eventStream=Ot,At.hasOwnProperty(l.default.PRESENTATION_TIME)&&(we.presentationTime=At.presentationTime);var Oe=Ot.presentationTimeOffset?Ot.presentationTimeOffset/Ot.timescale:0;we.calculatedPresentationTime=we.presentationTime/Ot.timescale+pe.start-Oe,At.hasOwnProperty(l.default.DURATION)&&(we.duration=At.duration/Ot.timescale),At.hasOwnProperty(l.default.ID)?we.id=At.id:we.id=null,At.Signal&&At.Signal.Binary?we.messageData=U.decodeArray(At.Signal.Binary.toString()):we.messageData=At.messageData||At.__cdata||At.__text,je.push(we)}}return je}function at(pe,Ye,lt){var De=[],je;if(!pe)return De;for(je=0;je<pe.length;je++){var Ze=new n.default;if(Ze.timescale=1,Ze.representation=Ye,pe[je].hasOwnProperty(o.default.SCHEME_ID_URI))Ze.schemeIdUri=pe[je].schemeIdUri;else throw new Error("Invalid EventStream. SchemeIdUri has to be set");pe[je].hasOwnProperty(l.default.TIMESCALE)&&(Ze.timescale=pe[je].timescale),pe[je].hasOwnProperty(l.default.VALUE)&&(Ze.value=pe[je].value),De.push(Ze),Ze.period=lt}return De}function it(pe,Ye,lt){var De,je,Ze;return pe&&pe.Period_asArray&&Ye&&Ye.period&&Y(Ye.period.index)&&(je=pe.Period_asArray[Ye.period.index],je&&je.AdaptationSet_asArray&&Y(Ye.index)&&(Ze=je.AdaptationSet_asArray[Ye.index],Ze&&(De=Ze.InbandEventStream_asArray))),at(De,null,lt)}function Ie(pe,Ye,lt){var De,je,Ze,ut;return pe&&pe.Period_asArray&&Ye&&Ye.adaptation&&Ye.adaptation.period&&Y(Ye.adaptation.period.index)&&(je=pe.Period_asArray[Ye.adaptation.period.index],je&&je.AdaptationSet_asArray&&Y(Ye.adaptation.index)&&(Ze=je.AdaptationSet_asArray[Ye.adaptation.index],Ze&&Ze.Representation_asArray&&Y(Ye.index)&&(ut=Ze.Representation_asArray[Ye.index],ut&&(De=ut.InbandEventStream_asArray)))),at(De,Ye,lt)}function He(pe){var Ye=Me(pe),lt=pe?pe.hasOwnProperty(l.default.AVAILABILITY_START_TIME):!1,De=pe?pe.UTCTiming_asArray:null,je=[];return(Ye||lt)&&De&&De.forEach(function(Ze){var ut=new E.default;if(Ze.hasOwnProperty(o.default.SCHEME_ID_URI))ut.schemeIdUri=Ze.schemeIdUri;else return;if(Ze.hasOwnProperty(l.default.VALUE))ut.value=Ze.value.toString();else return;je.push(ut)}),je}function Xe(pe){var Ye=[],lt=pe.BaseURL_asArray||[pe.baseUri],De=!1;return lt.some(function(je){if(je){var Ze=new e.default,ut=je.__text||je;return X.isRelative(ut)&&(De=!0,pe.baseUri&&(ut=X.resolve(ut,pe.baseUri))),Ze.url=ut,je.hasOwnProperty(l.default.SERVICE_LOCATION)&&je.serviceLocation.length?Ze.serviceLocation=je.serviceLocation:Ze.serviceLocation=ut,je.hasOwnProperty(l.default.DVB_PRIORITY)&&(Ze.dvb_priority=je[l.default.DVB_PRIORITY]),je.hasOwnProperty(l.default.DVB_WEIGHT)&&(Ze.dvb_weight=je[l.default.DVB_WEIGHT]),je.hasOwnProperty(l.default.AVAILABILITY_TIME_OFFSET)&&(Ze.availabilityTimeOffset=je[l.default.AVAILABILITY_TIME_OFFSET]),je.hasOwnProperty(l.default.AVAILABILITY_TIME_COMPLETE)&&(Ze.availabilityTimeComplete=je[l.default.AVAILABILITY_TIME_COMPLETE]!=="false"),Ye.push(Ze),De}}),Ye}function nt(pe){if(pe&&pe.hasOwnProperty(l.default.CONTENT_STEERING_AS_ARRAY)){var Ye=pe[l.default.CONTENT_STEERING_AS_ARRAY][0],lt=new d.default;return lt.serverUrl=Ye.__text,Ye.hasOwnProperty(l.default.DEFAULT_SERVICE_LOCATION)&&(lt.defaultServiceLocation=Ye[l.default.DEFAULT_SERVICE_LOCATION]),Ye.hasOwnProperty(l.default.QUERY_BEFORE_START)&&(lt.queryBeforeStart=Ye[l.default.QUERY_BEFORE_START].toLowerCase()==="true"),Ye.hasOwnProperty(l.default.PROXY_SERVER_URL)&&(lt.proxyServerUrl=Ye[l.default.PROXY_SERVER_URL]),lt}}function mt(pe){if(pe&&pe.hasOwnProperty(o.default.LOCATION))return pe.Location=pe.Location_asArray[0],pe.Location}function ht(pe){if(pe&&pe.hasOwnProperty(l.default.PATCH_LOCATION))return pe.PatchLocation=pe.PatchLocation_asArray[0],pe.PatchLocation}function _t(pe){return pe&&pe.hasOwnProperty(l.default.SUGGESTED_PRESENTATION_DELAY)?pe.suggestedPresentationDelay:null}function wt(pe){return pe&&pe.hasOwnProperty(l.default.AVAILABILITY_START_TIME)&&pe.availabilityStartTime!==null?pe.availabilityStartTime.getTime():null}function ot(pe){var Ye=[];if(pe&&pe.hasOwnProperty(l.default.SERVICE_DESCRIPTION)){var lt=c(pe.ServiceDescription_asArray),De;try{for(lt.s();!(De=lt.n()).done;){var je=De.value,Ze=null,ut=null,Ot=null,At=null,we=null,Oe=null;for(var Be in je)je.hasOwnProperty(Be)&&(Be===l.default.ID?Ze=je[Be]:Be===l.default.SERVICE_DESCRIPTION_SCOPE?ut=je[Be].schemeIdUri:Be===l.default.SERVICE_DESCRIPTION_LATENCY?Ot={target:parseInt(je[Be].target),max:parseInt(je[Be].max),min:parseInt(je[Be].min),referenceId:parseInt(je[Be].referenceId)}:Be===l.default.SERVICE_DESCRIPTION_PLAYBACK_RATE?At={max:parseFloat(je[Be].max),min:parseFloat(je[Be].min)}:Be===l.default.SERVICE_DESCRIPTION_OPERATING_QUALITY?we={mediaType:je[Be].mediaType,max:parseInt(je[Be].max),min:parseInt(je[Be].min),target:parseInt(je[Be].target),type:je[Be].type,maxQualityDifference:parseInt(je[Be].maxQualityDifference)}:Be===l.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH&&(Oe={mediaType:je[Be].mediaType,max:parseInt(je[Be].max),min:parseInt(je[Be].min),target:parseInt(je[Be].target)}));Ye.push({id:Ze,schemeIdUri:ut,latency:Ot,playbackRate:At,operatingQuality:we,operatingBandwidth:Oe})}}catch(et){lt.e(et)}finally{lt.f()}}return Ye}function Wt(pe){var Ye={};if(pe&&pe.hasOwnProperty(l.default.SUPPLEMENTAL_PROPERTY)){var lt=c(pe.SupplementalProperty_asArray),De;try{for(lt.s();!(De=lt.n()).done;){var je=De.value;je.hasOwnProperty(o.default.SCHEME_ID_URI)&&je.hasOwnProperty(l.default.VALUE)&&(Ye[je[o.default.SCHEME_ID_URI]]=je[l.default.VALUE])}}catch(Ze){lt.e(Ze)}finally{lt.f()}}return Ye}function $t(pe){pe&&(pe.errHandler&&(M=pe.errHandler),pe.BASE64&&(U=pe.BASE64))}return w={getIsTypeOf:G,getIsText:ue,getIsFragmented:ee,getProducerReferenceTimesForAdaptation:Z,getLanguageForAdaptation:ge,getViewpointForAdaptation:le,getRolesForAdaptation:z,getAccessibilityForAdaptation:K,getAudioChannelConfigurationForAdaptation:R,getAudioChannelConfigurationForRepresentation:L,getAdaptationForIndex:B,getIndexForAdaptation:D,getAdaptationForId:W,getAdaptationsForType:q,getRealPeriods:ne,getRealPeriodForIndex:ce,getCodec:me,getSelectionPriority:$e,getMimeType:de,getKID:ve,getLabelsForAdaptation:Se,getContentProtectionData:be,getIsDynamic:Me,getId:Fe,hasProfile:Ee,getDuration:Pe,getBandwidth:Ue,getManifestUpdatePeriod:Re,getPublishTime:Ke,getRepresentationCount:Ne,getBitrateListForAdaptation:ze,getRepresentationFor:ft,getRepresentationsForAdaptation:Et,getAdaptationsForPeriod:ye,getRegularPeriods:he,getMpd:ke,getEventsForPeriod:qe,getEssentialPropertiesForRepresentation:tt,getEventStreamForAdaptationSet:it,getEventStreamForRepresentation:Ie,getUTCTimingSources:He,getBaseURLsFromElement:Xe,getRepresentationSortFunction:$,getContentSteering:nt,getLocation:mt,getPatchLocation:ht,getSuggestedPresentationDelay:_t,getAvailabilityStartTime:wt,getServiceDescriptions:ot,getSupplementalProperties:Wt,setConfig:$t},se(),w}te.__dashjs_factory_name="DashManifestModel",g.default=A.default.getSingletonFactory(te)},"./src/dash/models/PatchManifestModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/constants/DashConstants.js"),l=r("./src/core/FactoryMaker.js"),u=r("./src/core/Debug.js"),m=r("./src/dash/vo/SimpleXPath.js"),y=r("./src/dash/vo/PatchOperation.js");function T(){var E,t,e=this.context;function n(){t=Object(u.default)(e).getInstance().getLogger(E)}function i(_){return _&&_.hasOwnProperty(o.default.ORIGINAL_MPD_ID)||!1}function d(_){return _&&_.hasOwnProperty(o.default.PUBLISH_TIME)?new Date(_[o.default.PUBLISH_TIME]):null}function P(_){return _&&_.hasOwnProperty(o.default.ORIGINAL_PUBLISH_TIME)?new Date(_[o.default.ORIGINAL_PUBLISH_TIME]):null}function b(_){return _&&_[o.default.ORIGINAL_MPD_ID]||null}function A(_){return _?(_.__children||[]).map(function(h){var f=Object.keys(h)[0];if(f!=="add"&&f!=="remove"&&f!=="replace")return t.warn("Ignoring node of invalid action: ".concat(f)),null;var v=h[f],c=v.sel;if(f==="add"&&v.type){if(!v.type.startsWith("@"))return t.warn("Ignoring add action for prefixed namespace declaration: ".concat(v.type,"=").concat(v.__text)),null;c="".concat(c,"/").concat(v.type)}var S=new m.default(c);if(!S.isValid())return t.warn("Ignoring action with invalid selector: ".concat(f," - ").concat(c)),null;var p=null;S.findsAttribute()?p=v.__text||"":f!=="remove"&&(p=v.__children.reduce(function(x,V){var H=Object.keys(V)[0];return H!=="#text"&&(x[H]=x[H]||[],x[H].push(V[H])),x},{}));var C=new y.default(f,S,p);return f==="add"&&(C.position=v.pos),C}).filter(function(h){return!!h}):[]}return E={getIsPatch:i,getPublishTime:d,getOriginalPublishTime:P,getMpdId:b,getPatchOperations:A},n(),E}T.__dashjs_factory_name="PatchManifestModel",g.default=l.default.getSingletonFactory(T)},"./src/dash/parser/DashParser.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/dash/parser/objectiron.js"),u=r("./externals/xml2json.js"),m=r("./src/dash/parser/matchers/StringMatcher.js"),y=r("./src/dash/parser/matchers/DurationMatcher.js"),T=r("./src/dash/parser/matchers/DateTimeMatcher.js"),E=r("./src/dash/parser/matchers/NumericMatcher.js"),t=r("./src/dash/parser/matchers/LangMatcher.js"),e=r("./src/dash/parser/maps/RepresentationBaseValuesMap.js"),n=r("./src/dash/parser/maps/SegmentValuesMap.js");function i(d){d=d||{};var P=this.context,b=d.debug,A,_,h,f,v;function c(){_=b.getLogger(A),h=[new y.default,new T.default,new E.default,new t.default,new m.default],f=new u.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!1,matchers:h}),v=Object(l.default)(P).create({adaptationset:new e.default,period:new n.default})}function S(){return h}function p(){return v}function C(x){var V,H=window.performance.now();if(V=f.xml_str2json(x),!V)throw new Error("parsing the manifest failed");var te=window.performance.now();V.Patch?(V=V.Patch,V.add_asArray&&V.add_asArray.forEach(function(F){return v.run(F)}),V.replace_asArray&&V.replace_asArray.forEach(function(F){return v.run(F)})):(V=V.MPD,v.run(V));var w=window.performance.now();return _.info("Parsing complete: ( xml2json: "+(te-H).toPrecision(3)+"ms, objectiron: "+(w-te).toPrecision(3)+"ms, total: "+((w-H)/1e3).toPrecision(3)+"s)"),V.protocol="DASH",V}return A={parse:C,getMatchers:S,getIron:p},c(),A}i.__dashjs_factory_name="DashParser",g.default=o.default.getClassFactory(i)},"./src/dash/parser/maps/CommonProperty.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function m(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=T(t,"string");return o(e)==="symbol"?e:String(e)}function T(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E=function(){function t(e){l(this,t);var n=function(d){return d&&d.length&&d.charAt(0)===d.charAt(0).toUpperCase()};this._name=e,this._merge=n(e)}return m(t,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),t}();g.default=E},"./src/dash/parser/maps/MapNode.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/parser/maps/CommonProperty.js");function l(e){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l(e)}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function m(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,T(d.key),d)}}function y(e,n,i){return n&&m(e.prototype,n),i&&m(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function T(e){var n=E(e,"string");return l(n)==="symbol"?n:String(n)}function E(e,n){if(l(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(l(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var t=function(){function e(n,i,d){var P=this;u(this,e),this._name=n||"",this._properties=[],this._children=d||[],Array.isArray(i)&&i.forEach(function(b){P._properties.push(new o.default(b))})}return y(e,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();g.default=t},"./src/dash/parser/maps/RepresentationBaseValuesMap.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/parser/maps/MapNode.js"),l=r("./src/dash/constants/DashConstants.js");function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},u(h)}function m(h,f){for(var v=0;v<f.length;v++){var c=f[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,T(c.key),c)}}function y(h,f,v){return f&&m(h.prototype,f),v&&m(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h}function T(h){var f=E(h,"string");return u(f)==="symbol"?f:String(f)}function E(h,f){if(u(h)!=="object"||h===null)return h;var v=h[Symbol.toPrimitive];if(v!==void 0){var c=v.call(h,f||"default");if(u(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}function t(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function e(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),f&&n(h,f)}function n(h,f){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},n(h,f)}function i(h){var f=b();return function(){var c=A(h),S;if(f){var p=A(this).constructor;S=Reflect.construct(c,arguments,p)}else S=c.apply(this,arguments);return d(this,S)}}function d(h,f){if(f&&(u(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(h)}function P(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(h){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},A(h)}var _=function(h){e(v,h);var f=i(v);function v(){t(this,v);var c=[l.default.PROFILES,l.default.WIDTH,l.default.HEIGHT,l.default.SAR,l.default.FRAMERATE,l.default.AUDIO_SAMPLING_RATE,l.default.MIME_TYPE,l.default.SEGMENT_PROFILES,l.default.CODECS,l.default.MAXIMUM_SAP_PERIOD,l.default.START_WITH_SAP,l.default.MAX_PLAYOUT_RATE,l.default.CODING_DEPENDENCY,l.default.SCAN_TYPE,l.default.FRAME_PACKING,l.default.AUDIO_CHANNEL_CONFIGURATION,l.default.CONTENT_PROTECTION,l.default.ESSENTIAL_PROPERTY,l.default.SUPPLEMENTAL_PROPERTY,l.default.INBAND_EVENT_STREAM];return f.call(this,l.default.ADAPTATION_SET,c,[new o.default(l.default.REPRESENTATION,c,[new o.default(l.default.SUB_REPRESENTATION,c)])])}return y(v)}(o.default);g.default=_},"./src/dash/parser/maps/SegmentValuesMap.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/parser/maps/MapNode.js"),l=r("./src/dash/constants/DashConstants.js");function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},u(h)}function m(h,f){for(var v=0;v<f.length;v++){var c=f[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,T(c.key),c)}}function y(h,f,v){return f&&m(h.prototype,f),v&&m(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h}function T(h){var f=E(h,"string");return u(f)==="symbol"?f:String(f)}function E(h,f){if(u(h)!=="object"||h===null)return h;var v=h[Symbol.toPrimitive];if(v!==void 0){var c=v.call(h,f||"default");if(u(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}function t(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function e(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),f&&n(h,f)}function n(h,f){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},n(h,f)}function i(h){var f=b();return function(){var c=A(h),S;if(f){var p=A(this).constructor;S=Reflect.construct(c,arguments,p)}else S=c.apply(this,arguments);return d(this,S)}}function d(h,f){if(f&&(u(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(h)}function P(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(h){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},A(h)}var _=function(h){e(v,h);var f=i(v);function v(){t(this,v);var c=[l.default.SEGMENT_BASE,l.default.SEGMENT_TEMPLATE,l.default.SEGMENT_LIST];return f.call(this,l.default.PERIOD,c,[new o.default(l.default.ADAPTATION_SET,c,[new o.default(l.default.REPRESENTATION,c)])])}return y(v)}(o.default);g.default=_},"./src/dash/parser/matchers/BaseMatcher.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function m(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=T(t,"string");return o(e)==="symbol"?e:String(e)}function T(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E=function(){function t(e,n){l(this,t),this._test=e,this._converter=n}return m(t,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),t}();g.default=E},"./src/dash/parser/matchers/DateTimeMatcher.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/parser/matchers/BaseMatcher.js");function l(c){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},l(c)}function u(c,S){for(var p=0;p<S.length;p++){var C=S[p];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(c,y(C.key),C)}}function m(c,S,p){return S&&u(c.prototype,S),p&&u(c,p),Object.defineProperty(c,"prototype",{writable:!1}),c}function y(c){var S=T(c,"string");return l(S)==="symbol"?S:String(S)}function T(c,S){if(l(c)!=="object"||c===null)return c;var p=c[Symbol.toPrimitive];if(p!==void 0){var C=p.call(c,S||"default");if(l(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(c)}function E(c,S){if(!(c instanceof S))throw new TypeError("Cannot call a class as a function")}function t(c,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(S&&S.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),S&&e(c,S)}function e(c,S){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,x){return C.__proto__=x,C},e(c,S)}function n(c){var S=P();return function(){var C=b(c),x;if(S){var V=b(this).constructor;x=Reflect.construct(C,arguments,V)}else x=C.apply(this,arguments);return i(this,x)}}function i(c,S){if(S&&(l(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(c)}function d(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(c){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},b(c)}var A=60,_=60,h=1e3,f=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,v=function(c){t(p,c);var S=n(p);function p(){return E(this,p),S.call(this,function(C){return f.test(C.value)},function(C){var x=f.exec(C),V;if(V=Date.UTC(parseInt(x[1],10),parseInt(x[2],10)-1,parseInt(x[3],10),parseInt(x[4],10),parseInt(x[5],10),x[6]&&parseInt(x[6],10)||0,x[7]&&parseFloat(x[7])*h||0),x[9]&&x[10]){var H=parseInt(x[9],10)*_+parseInt(x[10],10);V+=(x[8]==="+"?-1:1)*H*A*h}return new Date(V)})}return m(p)}(o.default);g.default=v},"./src/dash/parser/matchers/DurationMatcher.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/parser/matchers/BaseMatcher.js"),l=r("./src/streaming/constants/Constants.js"),u=r("./src/dash/constants/DashConstants.js");function m(x){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},m(x)}function y(x,V){for(var H=0;H<V.length;H++){var te=V[H];te.enumerable=te.enumerable||!1,te.configurable=!0,"value"in te&&(te.writable=!0),Object.defineProperty(x,E(te.key),te)}}function T(x,V,H){return V&&y(x.prototype,V),H&&y(x,H),Object.defineProperty(x,"prototype",{writable:!1}),x}function E(x){var V=t(x,"string");return m(V)==="symbol"?V:String(V)}function t(x,V){if(m(x)!=="object"||x===null)return x;var H=x[Symbol.toPrimitive];if(H!==void 0){var te=H.call(x,V||"default");if(m(te)!=="object")return te;throw new TypeError("@@toPrimitive must return a primitive value.")}return(V==="string"?String:Number)(x)}function e(x,V){if(!(x instanceof V))throw new TypeError("Cannot call a class as a function")}function n(x,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(V&&V.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),Object.defineProperty(x,"prototype",{writable:!1}),V&&i(x,V)}function i(x,V){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(te,w){return te.__proto__=w,te},i(x,V)}function d(x){var V=A();return function(){var te=_(x),w;if(V){var F=_(this).constructor;w=Reflect.construct(te,arguments,F)}else w=te.apply(this,arguments);return P(this,w)}}function P(x,V){if(V&&(m(V)==="object"||typeof V=="function"))return V;if(V!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b(x)}function b(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(x){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(H){return H.__proto__||Object.getPrototypeOf(H)},_(x)}var h=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,f=365*24*60*60,v=30*24*60*60,c=24*60*60,S=60*60,p=60,C=function(x){n(H,x);var V=d(H);function H(){return e(this,H),V.call(this,function(te){for(var w=[u.default.MIN_BUFFER_TIME,u.default.MEDIA_PRESENTATION_DURATION,u.default.MINIMUM_UPDATE_PERIOD,u.default.TIMESHIFT_BUFFER_DEPTH,u.default.MAX_SEGMENT_DURATION,u.default.MAX_SUBSEGMENT_DURATION,u.default.SUGGESTED_PRESENTATION_DELAY,u.default.START,l.default.START_TIME,u.default.DURATION],F=w.length,M=0;M<F;M++)if(te.nodeName===w[M])return h.test(te.value);return!1},function(te){var w=h.exec(te),F=parseFloat(w[3]||0)*f+parseFloat(w[5]||0)*v+parseFloat(w[7]||0)*c+parseFloat(w[9]||0)*S+parseFloat(w[11]||0)*p+parseFloat(w[13]||0);return w[1]!==void 0&&(F=-F),F})}return T(H)}(o.default);g.default=C},"./src/dash/parser/matchers/LangMatcher.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/parser/matchers/BaseMatcher.js"),l=r("./src/dash/constants/DashConstants.js"),u=r("./node_modules/bcp-47-normalize/index.js"),m=r.n(u);function y(c){return y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},y(c)}function T(c,S,p){return S=e(S),S in c?Object.defineProperty(c,S,{value:p,enumerable:!0,configurable:!0,writable:!0}):c[S]=p,c}function E(c,S){for(var p=0;p<S.length;p++){var C=S[p];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(c,e(C.key),C)}}function t(c,S,p){return S&&E(c.prototype,S),p&&E(c,p),Object.defineProperty(c,"prototype",{writable:!1}),c}function e(c){var S=n(c,"string");return y(S)==="symbol"?S:String(S)}function n(c,S){if(y(c)!=="object"||c===null)return c;var p=c[Symbol.toPrimitive];if(p!==void 0){var C=p.call(c,S||"default");if(y(C)!=="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(c)}function i(c,S){if(!(c instanceof S))throw new TypeError("Cannot call a class as a function")}function d(c,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(S&&S.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),Object.defineProperty(c,"prototype",{writable:!1}),S&&P(c,S)}function P(c,S){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,x){return C.__proto__=x,C},P(c,S)}function b(c){var S=h();return function(){var C=f(c),x;if(S){var V=f(this).constructor;x=Reflect.construct(C,arguments,V)}else x=C.apply(this,arguments);return A(this,x)}}function A(c,S){if(S&&(y(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _(c)}function _(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function f(c){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},f(c)}var v=function(c){d(p,c);var S=b(p);function p(){return i(this,p),S.call(this,function(C,x){var V,H=(V={},T(V,l.default.ADAPTATION_SET,[l.default.LANG]),T(V,l.default.REPRESENTATION,[l.default.LANG]),T(V,l.default.CONTENT_COMPONENT,[l.default.LANG]),T(V,l.default.LABEL,[l.default.LANG]),T(V,l.default.GROUP_LABEL,[l.default.LANG]),V);if(H.hasOwnProperty(x)){var te=H[x];return te!==void 0?te.indexOf(C.name)>=0:!1}return!1},function(C){var x=m()(C);return x!==void 0?x:String(C)})}return t(p)}(o.default);g.default=v},"./src/dash/parser/matchers/NumericMatcher.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/parser/matchers/BaseMatcher.js");function l(h){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l(h)}function u(h,f){for(var v=0;v<f.length;v++){var c=f[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,y(c.key),c)}}function m(h,f,v){return f&&u(h.prototype,f),v&&u(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h}function y(h){var f=T(h,"string");return l(f)==="symbol"?f:String(f)}function T(h,f){if(l(h)!=="object"||h===null)return h;var v=h[Symbol.toPrimitive];if(v!==void 0){var c=v.call(h,f||"default");if(l(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}function E(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function t(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),f&&e(h,f)}function e(h,f){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},e(h,f)}function n(h){var f=P();return function(){var c=b(h),S;if(f){var p=b(this).constructor;S=Reflect.construct(c,arguments,p)}else S=c.apply(this,arguments);return i(this,S)}}function i(h,f){if(f&&(l(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(h)}function d(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(h){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},b(h)}var A=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,_=function(h){t(v,h);var f=n(v);function v(){return E(this,v),f.call(this,function(c){return A.test(c.value)},function(c){return parseFloat(c)})}return m(v)}(o.default);g.default=_},"./src/dash/parser/matchers/StringMatcher.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/parser/matchers/BaseMatcher.js"),l=r("./src/dash/constants/DashConstants.js");function u(f){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},u(f)}function m(f,v,c){return v=E(v),v in f?Object.defineProperty(f,v,{value:c,enumerable:!0,configurable:!0,writable:!0}):f[v]=c,f}function y(f,v){for(var c=0;c<v.length;c++){var S=v[c];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(f,E(S.key),S)}}function T(f,v,c){return v&&y(f.prototype,v),c&&y(f,c),Object.defineProperty(f,"prototype",{writable:!1}),f}function E(f){var v=t(f,"string");return u(v)==="symbol"?v:String(v)}function t(f,v){if(u(f)!=="object"||f===null)return f;var c=f[Symbol.toPrimitive];if(c!==void 0){var S=c.call(f,v||"default");if(u(S)!=="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(f)}function e(f,v){if(!(f instanceof v))throw new TypeError("Cannot call a class as a function")}function n(f,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(v&&v.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),Object.defineProperty(f,"prototype",{writable:!1}),v&&i(f,v)}function i(f,v){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,p){return S.__proto__=p,S},i(f,v)}function d(f){var v=A();return function(){var S=_(f),p;if(v){var C=_(this).constructor;p=Reflect.construct(S,arguments,C)}else p=S.apply(this,arguments);return P(this,p)}}function P(f,v){if(v&&(u(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b(f)}function b(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _(f){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(c){return c.__proto__||Object.getPrototypeOf(c)},_(f)}var h=function(f){n(c,f);var v=d(c);function c(){return e(this,c),v.call(this,function(S,p){var C,x=(C={},m(C,l.default.MPD,[l.default.ID,l.default.PROFILES]),m(C,l.default.PERIOD,[l.default.ID]),m(C,l.default.BASE_URL,[l.default.SERVICE_LOCATION,l.default.BYTE_RANGE]),m(C,l.default.SEGMENT_BASE,[l.default.INDEX_RANGE]),m(C,l.default.INITIALIZATION,[l.default.RANGE]),m(C,l.default.REPRESENTATION_INDEX,[l.default.RANGE]),m(C,l.default.SEGMENT_LIST,[l.default.INDEX_RANGE]),m(C,l.default.BITSTREAM_SWITCHING,[l.default.RANGE]),m(C,l.default.SEGMENT_URL,[l.default.MEDIA_RANGE,l.default.INDEX_RANGE]),m(C,l.default.SEGMENT_TEMPLATE,[l.default.INDEX_RANGE,l.default.MEDIA,l.default.INDEX,l.default.INITIALIZATION_MINUS,l.default.BITSTREAM_SWITCHING_MINUS]),m(C,l.default.ASSET_IDENTIFIER,[l.default.VALUE,l.default.ID]),m(C,l.default.EVENT_STREAM,[l.default.VALUE]),m(C,l.default.ADAPTATION_SET,[l.default.PROFILES,l.default.MIME_TYPE,l.default.SEGMENT_PROFILES,l.default.CODECS,l.default.CONTENT_TYPE]),m(C,l.default.FRAME_PACKING,[l.default.VALUE,l.default.ID]),m(C,l.default.AUDIO_CHANNEL_CONFIGURATION,[l.default.VALUE,l.default.ID]),m(C,l.default.CONTENT_PROTECTION,[l.default.VALUE,l.default.ID]),m(C,l.default.ESSENTIAL_PROPERTY,[l.default.VALUE,l.default.ID]),m(C,l.default.SUPPLEMENTAL_PROPERTY,[l.default.VALUE,l.default.ID]),m(C,l.default.INBAND_EVENT_STREAM,[l.default.VALUE,l.default.ID]),m(C,l.default.ACCESSIBILITY,[l.default.VALUE,l.default.ID]),m(C,l.default.ROLE,[l.default.VALUE,l.default.ID]),m(C,l.default.RATING,[l.default.VALUE,l.default.ID]),m(C,l.default.VIEWPOINT,[l.default.VALUE,l.default.ID]),m(C,l.default.CONTENT_COMPONENT,[l.default.CONTENT_TYPE]),m(C,l.default.REPRESENTATION,[l.default.ID,l.default.DEPENDENCY_ID,l.default.MEDIA_STREAM_STRUCTURE_ID]),m(C,l.default.SUBSET,[l.default.ID]),m(C,l.default.METRICS,[l.default.METRICS_MINUS]),m(C,l.default.REPORTING,[l.default.VALUE,l.default.ID]),C);if(x.hasOwnProperty(p)){var V=x[p];return V!==void 0?V.indexOf(S.name)>=0:!1}return!1},function(S){return String(S)})}return T(c)}(o.default);g.default=h},"./src/dash/parser/objectiron.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(y){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(T){return typeof T}:function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},l(y)}function u(y){function T(n,i){for(var d in n)i.hasOwnProperty(d)||(i[d]=n[d])}function E(n,i,d){for(var P=0,b=n.length;P<b;++P){var A=n[P];if(i[A.name])if(d[A.name]){if(A.merge){var _=i[A.name],h=d[A.name];l(_)==="object"&&l(h)==="object"?T(_,h):d[A.name]=_+h}}else d[A.name]=i[A.name]}}function t(n,i){for(var d=0,P=n.children.length;d<P;++d){var b=n.children[d],A=i[b.name+"_asArray"];if(A)for(var _=0,h=A.length;_<h;++_){var f=A[_];E(n.properties,i,f),t(b,f)}}}function e(n){if(n===null||l(n)!=="object")return n;if(n.Period_asArray&&"period"in y)for(var i=y.period,d=n.Period_asArray,P=0,b=d.length;P<b;++P){var A=d[P];if(t(i,A),"adaptationset"in y){var _=A.AdaptationSet_asArray;if(_)for(var h=y.adaptationset,f=0,v=_.length;f<v;++f)t(h,_[f])}}return n}return{run:e}}u.__dashjs_factory_name="ObjectIron";var m=o.default.getClassFactory(u);g.default=m},"./src/dash/utils/ListSegmentsGetter.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/constants/Constants.js"),u=r("./src/dash/utils/SegmentsUtils.js");function m(T,E){T=T||{};var t=T.timelineConverter,e;function n(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(l.default.MISSING_CONFIG_ERROR)}function i(b){var A={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!b)return A;var _=b.adaptation.period.mpd.manifest.Period_asArray[b.adaptation.period.index].AdaptationSet_asArray[b.adaptation.index].Representation_asArray[b.index].SegmentList,h=b&&!isNaN(b.startNumber)?b.startNumber:1,f=Math.max(h-1,0);return A.numberOfSegments=f+_.SegmentURL_asArray.length,A}function d(b,A){if(n(),!b)return null;var _=b.adaptation.period.mpd.manifest.Period_asArray[b.adaptation.period.index].AdaptationSet_asArray[b.adaptation.index].Representation_asArray[b.index].SegmentList,h=_.SegmentURL_asArray.length,f=b&&!isNaN(b.startNumber)?b.startNumber:1,v=Math.max(f-1,0),c=Math.max(A-v,0),S=null;if(c<h){var p=_.SegmentURL_asArray[c];S=Object(u.getIndexBasedSegment)(t,E,b,A),S&&(S.replacementTime=(f+A-1)*b.segmentDuration,S.media=p.media?p.media:"",S.mediaRange=p.mediaRange,S.indexRange=p.indexRange)}return S}function P(b,A){if(n(),!b)return null;var _=b.segmentDuration;if(isNaN(_))return null;var h=t.calcPeriodRelativeTimeFromMpdRelativeTime(b,A),f=Math.floor(h/_);return d(b,f)}return e={getSegmentByIndex:d,getSegmentByTime:P,getMediaFinishedInformation:i},e}m.__dashjs_factory_name="ListSegmentsGetter";var y=o.default.getClassFactory(m);g.default=y},"./src/dash/utils/Round10.js":function(I,g,r){"use strict";r.r(g),r.d(g,"default",function(){return E});function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,y(d.key),d)}}function m(e,n,i){return n&&u(e.prototype,n),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var n=T(e,"string");return o(n)==="symbol"?n:String(n)}function T(e,n){if(o(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(o(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var E=function(){function e(){l(this,e)}return m(e,null,[{key:"round10",value:function(i,d){return t("round",i,d)}}]),e}();function t(e,n,i){return typeof i>"u"||+i==0?Math[e](n):(n=+n,i=+i,n===null||isNaN(n)||!(typeof i=="number"&&i%1===0)?NaN:(n=n.toString().split("e"),n=Math[e](+(n[0]+"e"+(n[1]?+n[1]-i:-i))),n=n.toString().split("e"),+(n[0]+"e"+(n[1]?+n[1]+i:i))))}},"./src/dash/utils/SegmentBaseGetter.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/constants/Constants.js");function u(y){y=y||{};var T=y.timelineConverter,E;function t(){if(!T||!T.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(l.default.MISSING_CONFIG_ERROR)}function e(P){var b={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return!P||!P.segments||(b.numberOfSegments=P.segments.length),b}function n(P,b){if(t(),!P)return null;var A=P.segments?P.segments.length:-1,_;if(b<A&&(_=P.segments[b],_&&_.index===b))return _;for(var h=0;h<A;h++)if(_=P.segments[h],_&&_.index===b)return _;return null}function i(P,b){t();var A=d(P,b);return n(P,A)}function d(P,b){if(!P)return-1;var A=P.segments,_=A?A.length:null,h=-1,f,v,c,S,p;if(A&&_>0){for(p=0;p<_;p++)if(v=A[p],c=v.presentationStartTime,S=v.duration,f=S/2,b+f>=c&&b-f<c+S){h=v.index;break}}return h}return E={getSegmentByIndex:n,getSegmentByTime:i,getMediaFinishedInformation:e},E}u.__dashjs_factory_name="SegmentBaseGetter";var m=o.default.getClassFactory(u);g.default=m},"./src/dash/utils/SegmentsUtils.js":function(I,g,r){"use strict";r.r(g),r.d(g,"unescapeDollarsInTemplate",function(){return m}),r.d(g,"replaceIDForTemplate",function(){return y}),r.d(g,"replaceTokenForTemplate",function(){return T}),r.d(g,"getIndexBasedSegment",function(){return e}),r.d(g,"getTimeBasedSegment",function(){return n});var o=r("./src/dash/vo/Segment.js");function l(i,d){for(;i.length<d;)i="0"+i;return i}function u(i,d){return i.representation.startNumber+d}function m(i){return i&&i.split("$$").join("$")}function y(i,d){if(!d||!i||i.indexOf("$RepresentationID$")===-1)return i;var P=d.toString();return i.split("$RepresentationID$").join(P)}function T(i,d,P){var b="%0",A,_,h,f,v,c,S=d.length,p=b.length;if(!i)return i;for(;;){if(A=i.indexOf("$"+d),A<0||(_=i.indexOf("$",A+S),_<0))return i;if(h=i.indexOf(b,A+S),h>A&&h<_)switch(f=i.charAt(_-1),v=parseInt(i.substring(h+p,_-1),10),f){case"d":case"i":case"u":c=l(P.toString(),v);break;case"x":c=l(P.toString(16),v);break;case"X":c=l(P.toString(16),v).toUpperCase();break;case"o":c=l(P.toString(8),v);break;default:return i}else c=P;i=i.substring(0,A)+c+i.substring(_+1)}}function E(i,d,P,b,A,_,h,f){var v=new o.default;return v.representation=i,v.duration=d,v.presentationStartTime=P,v.mediaStartTime=b,v.availabilityStartTime=A.calcAvailabilityStartTimeFromPresentationTime(_,i,h),v.availabilityEndTime=A.calcAvailabilityEndTimeFromPresentationTime(_+d,i,h),v.wallStartTime=A.calcWallTimeForSegment(v,h),v.replacementNumber=u(v,f),v.index=f,v}function t(i,d,P,b){var A=d.adaptation.period;if(isFinite(A.duration)&&A.start+A.duration<=P.presentationStartTime)return!1;if(b){if(d.availabilityTimeOffset==="INF")return!0;var _=i.getClientReferenceTime();return P.availabilityStartTime.getTime()<=_&&(!isFinite(P.availabilityEndTime)||P.availabilityEndTime.getTime()>=_)}return!0}function e(i,d,P,b){var A,_,h;A=P.segmentDuration,isNaN(A)&&(A=P.adaptation.period.duration),_=parseFloat((P.adaptation.period.start+b*A).toFixed(5)),h=parseFloat((_+A).toFixed(5));var f=i.calcMediaTimeFromPresentationTime(_,P),v=E(P,A,_,f,i,h,d,b);return t(i,P,v,d)?v:null}function n(i,d,P,b,A,_,h,f,v,c){var S=b/_,p=A/_,C,x,V;return C=i.calcPresentationTimeFromMediaTime(S,P),x=C+p,V=E(P,p,C,S,i,x,d,v),t(i,P,V,d)?(V.replacementTime=c||b,h=T(h,"Number",V.replacementNumber),h=T(h,"Time",V.replacementTime),V.media=h,V.mediaRange=f,V):null}},"./src/dash/utils/TemplateSegmentsGetter.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/constants/Constants.js"),u=r("./src/dash/utils/SegmentsUtils.js");function m(T,E){T=T||{};var t=T.timelineConverter,e;function n(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(l.default.MISSING_CONFIG_ERROR)}function i(b){var A={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!b)return A;var _=b.segmentDuration;return isNaN(_)?A.numberOfSegments=1:A.numberOfSegments=Math.ceil(b.adaptation.period.duration/_),A}function d(b,A){if(n(),!b)return null;var _=b.adaptation.period.mpd.manifest.Period_asArray[b.adaptation.period.index].AdaptationSet_asArray[b.adaptation.index].Representation_asArray[b.index].SegmentTemplate;A=Math.max(A,0);var h=Object(u.getIndexBasedSegment)(t,E,b,A);if(h){h.replacementTime=Math.round((A-1)*b.segmentDuration*b.timescale,10);var f=_.media;f=Object(u.replaceTokenForTemplate)(f,"Number",h.replacementNumber),f=Object(u.replaceTokenForTemplate)(f,"Time",h.replacementTime),h.media=f}return h}function P(b,A){if(n(),!b)return null;var _=b.segmentDuration;if(isNaN(_))return null;var h=t.calcPeriodRelativeTimeFromMpdRelativeTime(b,A),f=Math.floor(h/_);return d(b,f)}return e={getSegmentByIndex:d,getSegmentByTime:P,getMediaFinishedInformation:i},e}m.__dashjs_factory_name="TemplateSegmentsGetter";var y=o.default.getClassFactory(m);g.default=y},"./src/dash/utils/TimelineConverter.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/EventBus.js"),l=r("./src/core/events/Events.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/dash/constants/DashConstants.js"),y=r("./src/dash/models/DashManifestModel.js"),T=r("./src/core/Settings.js"),E=r("./src/streaming/constants/Constants.js"),t=r("./src/streaming/MediaPlayerEvents.js"),e=r("./src/streaming/constants/ConformanceViolationConstants.js");function n(){var i=this.context,d=Object(o.default)(i).getInstance(),P=Object(T.default)(i).getInstance(),b,A,_,h;function f(){A=Object(y.default)(i).getInstance(),ue()}function v(){ie(),d.on(l.default.UPDATE_TIME_SYNC_OFFSET,J,this)}function c(){return h}function S(ae){h=ae}function p(){return Date.now()-_*1e3+h*1e3}function C(ae,oe,Z,ge){var le,z=oe.adaptation.period.mpd,K=z.availabilityStartTime;if(ge)Z&&z.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?le=new Date(K.getTime()+(ae+z.timeShiftBufferDepth)*1e3):le=z.availabilityEndTime;else if(Z){var R=oe.availabilityTimeOffset;le=new Date(K.getTime()+(ae-R)*1e3)}else le=K;return le}function x(ae,oe,Z){return C(ae,oe,Z)}function V(ae,oe,Z){return C(ae,oe,Z,!0)}function H(ae,oe){return(ae.getTime()-oe.mpd.availabilityStartTime.getTime()+h*1e3)/1e3}function te(ae,oe){var Z=oe.adaptation.period.start,ge=oe.presentationTimeOffset;return ae+(Z-ge)}function w(ae,oe){var Z=oe.adaptation.period.start,ge=oe.presentationTimeOffset;return ae-Z+ge}function F(ae,oe){var Z,ge,le;return oe&&(Z=ae.representation.adaptation.period.mpd.suggestedPresentationDelay,ge=ae.presentationStartTime+Z,le=new Date(ae.availabilityStartTime.getTime()+ge*1e3)),le}function M(ae,oe){if(!oe)return U(ae);if(P.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){var Z=X(ae);return Y(Z.now,Z.range),Z.range}return j(ae)}function U(ae){var oe={start:NaN,end:NaN},Z=0,ge=NaN;return ae.forEach(function(le){var z=le.getStreamInfo();Z+=z.duration,(isNaN(ge)||z.start<ge)&&(ge=z.start)}),oe.start=ge,oe.end=ge+Z,oe}function j(ae){var oe={start:NaN,end:NaN};if(!ae||ae.length===0)return oe;var Z=ae[0].getAdapter().getRegularPeriods()[0],ge=H(new Date,Z),le=Z.mpd.timeShiftBufferDepth,z=isNaN(le)?0:ge-le;if(oe.start=se(ae,z),oe.end=!isNaN(oe.start)&&ge<oe.start?ge:se(ae,ge,!0),!isNaN(le)&&oe.end<ge-le&&(oe.end=NaN),P.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){var K=X(ae);if(K.range.end<oe.start)return d.trigger(t.default.CONFORMANCE_VIOLATION,{level:e.default.LEVELS.WARNING,event:e.default.EVENTS.INVALID_DVR_WINDOW}),Y(K.now,K.range),K.range}return oe}function X(ae){var oe={start:NaN,end:NaN},Z=ae[0].getAdapter().getRegularPeriods()[0],ge=H(new Date,Z);if(!ae||ae.length===0)return{range:oe,now:ge};ae.forEach(function(z){var K=z.getAdapter(),R=K.getMediaInfoForType(z.getStreamInfo(),E.default.VIDEO)||K.getMediaInfoForType(z.getStreamInfo(),E.default.AUDIO),L=K.getVoRepresentations(R),$=L[0],O={start:NaN,end:NaN};if($)if($.segmentInfoType===m.default.SEGMENT_TIMELINE)O=G($);else{var Q=$.adaptation.period;O.start=Q.start,O.end=Math.max(ge,Q.start+Q.duration)}!isNaN(O.start)&&(isNaN(oe.start)||oe.start>O.start)&&(oe.start=O.start),!isNaN(O.end)&&(isNaN(oe.end)||oe.end<O.end)&&(oe.end=O.end)}),oe.end=Math.min(ge,oe.end);var le=se(ae,oe.end,!0);return oe.end=isNaN(le)?oe.end:le,oe.start=Z&&Z.mpd&&Z.mpd.timeShiftBufferDepth&&!isNaN(Z.mpd.timeShiftBufferDepth)&&!isNaN(oe.end)?Math.max(oe.end-Z.mpd.timeShiftBufferDepth,oe.start):oe.start,oe.start=se(ae,oe.start),{range:oe,now:ge}}function Y(ae,oe){_=ae-oe.end}function se(ae,oe){var Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;try{for(var ge=0,le=!1,z=NaN;!le&&ge<ae.length;){var K=ae[ge].getStreamInfo();K.start<=oe&&(!isFinite(K.duration)||K.start+K.duration>=oe)?(z=oe,le=!0):!Z&&K.start>oe&&(isNaN(z)||K.start<z)?z=K.start:Z&&K.start+K.duration<oe&&(isNaN(z)||K.start+K.duration>z)&&(z=K.start+K.duration),ge+=1}return z}catch{return oe}}function G(ae){var oe=ae.adaptation.period.mpd.manifest.Period_asArray[ae.adaptation.period.index].AdaptationSet_asArray[ae.adaptation.index],Z=A.getRepresentationFor(ae.index,oe),ge=Z.SegmentTemplate.SegmentTimeline,le=Z.SegmentTemplate.timescale,z=ge.S_asArray,K={start:0,end:0},R=0,L,$,O,Q;for(K.start=te(z[0].t/le,ae),O=0,Q=z.length;O<Q;O++)L=z[O],$=0,L.hasOwnProperty("r")&&($=L.r),R+=L.d*(1+$);return K.end=te((z[0].t+R)/le,ae),K}function ee(ae,oe){var Z=ae.adaptation.period.start;return oe-Z}function J(ae){ae.offset!==void 0&&!isNaN(ae.offset)&&S(ae.offset/1e3)}function ie(){h=0,_=0}function ue(){d.off(l.default.UPDATE_TIME_SYNC_OFFSET,J,this),ie()}return b={initialize:v,getClientTimeOffset:c,setClientTimeOffset:S,getClientReferenceTime:p,calcAvailabilityStartTimeFromPresentationTime:x,calcAvailabilityEndTimeFromPresentationTime:V,calcPresentationTimeFromWallTime:H,calcPresentationTimeFromMediaTime:te,calcPeriodRelativeTimeFromMpdRelativeTime:ee,calcMediaTimeFromPresentationTime:w,calcWallTimeForSegment:F,calcTimeShiftBufferWindow:M,reset:ue},f(),b}n.__dashjs_factory_name="TimelineConverter",g.default=u.default.getSingletonFactory(n)},"./src/dash/utils/TimelineSegmentsGetter.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/constants/Constants.js"),u=r("./src/dash/utils/SegmentsUtils.js");function m(T,E){T=T||{};var t=T.timelineConverter,e=T.dashMetrics,n;function i(){if(!t)throw new Error(l.default.MISSING_CONFIG_ERROR)}function d(f){if(!f)return 0;var v=f.adaptation.period.mpd.manifest.Period_asArray[f.adaptation.period.index].AdaptationSet_asArray[f.adaptation.index].Representation_asArray[f.index].SegmentTemplate||f.adaptation.period.mpd.manifest.Period_asArray[f.adaptation.period.index].AdaptationSet_asArray[f.adaptation.index].Representation_asArray[f.index].SegmentList,c=v.SegmentTimeline,S=0,p=0,C=0,x,V,H,te,w,F,M;for(M=f.timescale,x=c.S_asArray,te=x.length,H=0;H<te;H++){if(V=x[H],F=0,V.hasOwnProperty("r")&&(F=V.r),V.hasOwnProperty("t")&&(S=V.t,p=S/M),F<0){var U=x[H+1];F=b(f,U,V,M,p)}for(w=0;w<=F;w++)C++,S+=V.d,p=S/M}return{numberOfSegments:C,mediaTimeOfLastSignaledSegment:p}}function P(f,v){var c=f.adaptation.period.mpd.manifest.Period_asArray[f.adaptation.period.index].AdaptationSet_asArray[f.adaptation.index].Representation_asArray[f.index].SegmentTemplate||f.adaptation.period.mpd.manifest.Period_asArray[f.adaptation.period.index].AdaptationSet_asArray[f.adaptation.index].Representation_asArray[f.index].SegmentList,S=c.SegmentTimeline,p=c.SegmentURL_asArray,C=0,x=-1,V,H,te,w,F,M,U;U=f.timescale,V=S.S_asArray;var j=!1;for(te=0,w=V.length;te<w&&!j;te++){if(H=V[te],M=0,H.hasOwnProperty("r")&&(M=H.r),H.hasOwnProperty("t")&&(C=H.t),M<0){var X=V[te+1];M=b(f,X,H,U,C/U)}for(F=0;F<=M&&!j;F++)x++,j=v(C,c,p,H,U,x,te),j&&(f.segmentDuration=H.d/U),C+=H.d}}function b(f,v,c,S,p){var C;if(v&&v.hasOwnProperty("t"))C=v.t/S;else try{var x=0;if(!isNaN(f.adaptation.period.start)&&!isNaN(f.adaptation.period.duration)&&isFinite(f.adaptation.period.duration))x=f.adaptation.period.start+f.adaptation.period.duration;else{var V=e.getCurrentDVRInfo();x=isNaN(V.end)?0:V.end}C=t.calcMediaTimeFromPresentationTime(x,f),f.segmentDuration=c.d/S}catch{C=0}return Math.max(Math.ceil((C-p)/(c.d/S))-1,0)}function A(f,v,c){if(i(),!f)return null;var S=null,p=!1;return P(f,function(C,x,V,H,te,w,F){if(p||c<0){var M=x.media,U=H.mediaRange;return V&&(M=V[F].media||"",U=V[F].mediaRange),S=Object(u.getTimeBasedSegment)(t,E,f,C,H.d,te,M,U,w,H.tManifest),!0}else C>=c*te-H.d*.5&&(p=!0);return!1}),S}function _(f,v){if(i(),!f)return null;v===void 0&&(v=null);var c=null,S=t.calcMediaTimeFromPresentationTime(v,f);return P(f,function(p,C,x,V,H,te,w){var F=h(S*H);if(F<p+V.d&&F>=p){var M=C.media,U=V.mediaRange;return x&&(M=x[w].media||"",U=x[w].mediaRange),c=Object(u.getTimeBasedSegment)(t,E,f,p,V.d,H,M,U,te,V.tManifest),!0}return!1}),c}function h(f){return parseFloat(f.toPrecision(15))}return n={getSegmentByIndex:A,getSegmentByTime:_,getMediaFinishedInformation:d},n}m.__dashjs_factory_name="TimelineSegmentsGetter";var y=o.default.getClassFactory(m);g.default=y},"./src/dash/vo/AdaptationSet.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.period=null,this.index=-1,this.type=null});g.default=E},"./src/dash/vo/BaseURL.js":function(I,g,r){"use strict";r.r(g);function o(n){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o(n)}function l(n,i){for(var d=0;d<i.length;d++){var P=i[d];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(n,m(P.key),P)}}function u(n,i,d){return i&&l(n.prototype,i),d&&l(n,d),Object.defineProperty(n,"prototype",{writable:!1}),n}function m(n){var i=y(n,"string");return o(i)==="symbol"?i:String(i)}function y(n,i){if(o(n)!=="object"||n===null)return n;var d=n[Symbol.toPrimitive];if(d!==void 0){var P=d.call(n,i||"default");if(o(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}function T(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var E=1,t=1,e=u(function n(i,d,P,b){T(this,n),this.url=i||"",this.serviceLocation=d||i||"",this.dvb_priority=P||E,this.dvb_weight=b||t,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0});e.DEFAULT_DVB_PRIORITY=E,e.DEFAULT_DVB_WEIGHT=t,g.default=e},"./src/dash/vo/ContentSteering.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.defaultServiceLocation=null,this.queryBeforeStart=!1,this.proxyServerUrl=null,this.serverUrl=null});g.default=E},"./src/dash/vo/ContentSteeringRequest.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/vo/metrics/HTTPRequest.js");function l(e){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l(e)}function u(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,y(d.key),d)}}function m(e,n,i){return n&&u(e.prototype,n),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var n=T(e,"string");return l(n)==="symbol"?n:String(n)}function T(e,n){if(l(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(l(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function E(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var t=m(function e(n){E(this,e),this.url=n||null,this.type=o.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"});g.default=t},"./src/dash/vo/ContentSteeringResponse.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.version=null,this.ttl=300,this.reloadUri=null,this.serviceLocationPriority=[]});g.default=E},"./src/dash/vo/Event.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN});g.default=E},"./src/dash/vo/EventStream.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0});g.default=E},"./src/dash/vo/ManifestInfo.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null});g.default=E},"./src/dash/vo/MediaInfo.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.labels=null,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.KID=null,this.bitrateList=null,this.isFragmented=null,this.isEmbedded=null,this.selectionPriority=1,this.supplementalProperties={}});g.default=E},"./src/dash/vo/Mpd.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.publishTime=null,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN});g.default=E},"./src/dash/vo/PatchOperation.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function m(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=T(t,"string");return o(e)==="symbol"?e:String(e)}function T(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E=function(){function t(e,n,i){l(this,t),this.action=e,this.xpath=n,this.value=i,this.position=null}return m(t,[{key:"getMpdTarget",value:function(n){var i=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(n,i)}}]),t}();g.default=E},"./src/dash/vo/Period.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null});E.DEFAULT_ID="defaultId",g.default=E},"./src/dash/vo/ProducerReferenceTime.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null});g.default=E},"./src/dash/vo/Representation.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/constants/DashConstants.js");function l(e){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l(e)}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function m(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,T(d.key),d)}}function y(e,n,i){return n&&m(e.prototype,n),i&&m(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function T(e){var n=E(e,"string");return l(n)==="symbol"?n:String(n)}function E(e,n){if(l(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(l(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var t=function(){function e(){u(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.mimeType=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return y(e,[{key:"hasInitialization",value:function(){return this.initialization!==null||this.range!==null}},{key:"hasSegments",value:function(){return this.segmentInfoType!==o.default.BASE_URL&&this.segmentInfoType!==o.default.SEGMENT_BASE&&!this.indexRange}}]),e}();g.default=t},"./src/dash/vo/RepresentationInfo.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.id=null,this.quality=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null});g.default=E},"./src/dash/vo/Segment.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.wallStartTime=NaN,this.representation=null});g.default=E},"./src/dash/vo/SimpleXPath.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function m(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=T(t,"string");return o(e)==="symbol"?e:String(e)}function T(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E=function(){function t(e){var n=this;l(this,t),this.valid=e[0]=="/",this.path=e.split("/").filter(function(i){return i.length!==0}).map(function(i){var d={name:i},P=i.indexOf("[");if(P!=-1){d.name=i.substring(0,P);var b=i.substring(P+1,i.length-1);n.valid=n.valid&&b.indexOf("[")==-1;var A=b.indexOf("=");A!=-1?(d.attribute={name:b.substring(1,A),value:b.substring(A+1)},["'",'"'].indexOf(d.attribute.value[0])!=-1&&(d.attribute.value=d.attribute.value.substring(1,d.attribute.value.length-1))):d.position=parseInt(b,10)-1}return d})}return m(t,[{key:"isValid",value:function(){return this.valid}},{key:"findsElement",value:function(){return!this.findsAttribute()}},{key:"findsAttribute",value:function(){return this.path[this.path.length-1].name.startsWith("@")}},{key:"getMpdTarget",value:function(n,i){for(var d=null,P=n,b=1,A="MPD";b<this.path.length&&P!==null;){d=P;var _=this.path[b];if(A=_.name,b!==this.path.length-1||!A.startsWith("@")){var h=d[A+"_asArray"]||[];h.length===0&&d[A]&&h.push(d[A]),_.position?P=h[_.position]||null:_.attribute?function(){var f=_.attribute;P=h.filter(function(v){return v[f.name]==f.value})[0]||null}():P=h[0]||null}b++}return P===null?null:A.startsWith("@")?{name:A.substring(1),leaf:P,target:P}:{name:A,leaf:P,target:i?d:P}}}]),t}();g.default=E},"./src/dash/vo/StreamInfo.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0});g.default=E},"./src/dash/vo/UTCTiming.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.schemeIdUri="",this.value=""});g.default=E},"./src/streaming/FragmentLoader.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/net/URLLoader.js"),u=r("./src/streaming/vo/HeadRequest.js"),m=r("./src/streaming/vo/DashJSError.js"),y=r("./src/core/FactoryMaker.js");function T(E){E=E||{};var t=this.context,e=E.eventBus,n=E.events,i=E.urlUtils,d=E.errors,P=E.streamId,b,A;function _(){A=Object(l.default)(t).create({errHandler:E.errHandler,errors:d,dashMetrics:E.dashMetrics,mediaPlayerModel:E.mediaPlayerModel,requestModifier:E.requestModifier,urlUtils:i,constants:o.default,boxParser:E.boxParser,dashConstants:E.dashConstants,requestTimeout:E.settings.get().streaming.fragmentRequestTimeout})}function h(S){var p=function(V){e.trigger(n.CHECK_FOR_EXISTENCE_COMPLETED,{request:S,exists:V})};if(S){var C=new u.default(S.url);A.load({request:C,success:function(){p(!0)},error:function(){p(!1)}})}else p(!1)}function f(S){var p=function(x,V){e.trigger(n.LOADING_COMPLETED,{request:S,response:x||null,error:V||null,sender:b})};S?A.load({request:S,progress:function(x){e.trigger(n.LOADING_PROGRESS,{request:S,stream:x.stream,streamId:P}),x.data&&e.trigger(n.LOADING_DATA_PROGRESS,{request:S,response:x.data||null,error:null,sender:b})},success:function(x){p(x)},error:function(x,V,H){p(void 0,new m.default(d.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,H,V))},abort:function(x){x&&e.trigger(n.LOADING_ABANDONED,{mediaType:x.mediaType,request:x,sender:b})}}):p(void 0,new m.default(d.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,d.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))}function v(){A&&A.abort()}function c(){A&&(A.abort(),A=null)}return b={checkForExistence:h,load:f,abort:v,reset:c},_(),b}T.__dashjs_factory_name="FragmentLoader",g.default=y.default.getClassFactory(T)},"./src/streaming/ManifestLoader.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/dash/constants/DashConstants.js"),u=r("./src/streaming/controllers/XlinkController.js"),m=r("./src/streaming/net/URLLoader.js"),y=r("./src/streaming/utils/URLUtils.js"),T=r("./src/streaming/vo/TextRequest.js"),E=r("./src/streaming/vo/DashJSError.js"),t=r("./src/streaming/vo/metrics/HTTPRequest.js"),e=r("./src/core/EventBus.js"),n=r("./src/core/events/Events.js"),i=r("./src/core/errors/Errors.js"),d=r("./src/core/FactoryMaker.js"),P=r("./src/dash/parser/DashParser.js");function b(_){_=_||{};var h=this.context,f=_.debug,v=_.settings,c=Object(e.default)(h).getInstance(),S=Object(y.default)(h).getInstance(),p,C,x,V,H,te=_.mssHandler,w=_.errHandler;function F(){C=f.getLogger(p),c.on(n.default.XLINK_READY,M,p),x=Object(m.default)(h).create({errHandler:_.errHandler,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,requestModifier:_.requestModifier,urlUtils:S,constants:o.default,dashConstants:l.default,errors:i.default,requestTimeout:_.settings.get().streaming.manifestRequestTimeout}),V=Object(u.default)(h).create({errHandler:w,dashMetrics:_.dashMetrics,mediaPlayerModel:_.mediaPlayerModel,requestModifier:_.requestModifier,settings:_.settings}),H=null}function M(Y){c.trigger(n.default.INTERNAL_MANIFEST_LOADED,{manifest:Y.manifest})}function U(Y){var se=null;return Y.indexOf("SmoothStreamingMedia")>-1?(te&&(se=te.createMssParser(),te.registerEvents()),se):Y.indexOf("MPD")>-1||Y.indexOf("Patch")>-1?Object(P.default)(h).create({debug:f}):se}function j(Y){var se=new T.default(Y,t.HTTPRequest.MPD_TYPE);x.load({request:se,success:function(ee,J,ie){if(V){var ue,ae,oe;if(ie&&ie!==Y?(ae=S.parseBaseUrl(ie),ue=ie):(S.isRelative(Y)&&(Y=S.resolve(Y,window.location.href)),ae=S.parseBaseUrl(Y)),J=="No Content"){c.trigger(n.default.INTERNAL_MANIFEST_LOADED,{manifest:null});return}if(H===null&&(H=U(ee)),H===null){c.trigger(n.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new E.default(i.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,i.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Y))});return}V.setMatchers(H.getMatchers()),V.setIron(H.getIron());try{oe=H.parse(ee)}catch{c.trigger(n.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new E.default(i.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,i.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Y))});return}if(oe){if(oe.url=ue||Y,oe.originalUrl||(oe.originalUrl=oe.url),oe.hasOwnProperty(o.default.LOCATION)&&(ae=S.parseBaseUrl(oe.Location_asArray[0]),C.debug("BaseURI set by Location to: "+ae)),v&&v.get().streaming.enableManifestDurationMismatchFix&&oe.mediaPresentationDuration&&oe.Period_asArray.length>1){var Z=oe.Period_asArray.reduce(function(ge,le){return ge+le.duration},0);!isNaN(Z)&&oe.mediaPresentationDuration>Z&&(C.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),oe.mediaPresentationDuration=Z)}oe.baseUri=ae,oe.loadedTime=new Date,V.resolveManifestOnLoad(oe),c.trigger(n.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:ee})}else c.trigger(n.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new E.default(i.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,i.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+"".concat(Y))})}},error:function(ee,J,ie){c.trigger(n.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new E.default(i.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,i.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+"".concat(Y,", ").concat(ie))})}})}function X(){c.off(n.default.XLINK_READY,M,p),te&&te.reset(),V&&(V.reset(),V=null),x&&(x.abort(),x=null)}return p={load:j,reset:X},F(),p}b.__dashjs_factory_name="ManifestLoader";var A=d.default.getClassFactory(b);g.default=A},"./src/streaming/ManifestUpdater.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/EventBus.js"),l=r("./src/core/events/Events.js"),u=r("./src/streaming/MediaPlayerEvents.js"),m=r("./src/core/FactoryMaker.js"),y=r("./src/core/Debug.js"),T=r("./src/core/errors/Errors.js"),E=r("./src/dash/constants/DashConstants.js"),t=r("./src/streaming/utils/URLUtils.js");function e(){var n=this.context,i=Object(o.default)(n).getInstance(),d=Object(t.default)(n).getInstance(),P,b,A,_,h,f,v,c,S,p,C,x;function V(){b=Object(y.default)(n).getInstance().getLogger(P)}function H(ae){ae&&(ae.manifestModel&&(S=ae.manifestModel),ae.adapter&&(p=ae.adapter),ae.manifestLoader&&(c=ae.manifestLoader),ae.errHandler&&(C=ae.errHandler),ae.settings&&(x=ae.settings))}function te(){F(),i.on(l.default.STREAMS_COMPOSED,ie,this),i.on(u.default.PLAYBACK_STARTED,ee,this),i.on(u.default.PLAYBACK_PAUSED,J,this),i.on(l.default.INTERNAL_MANIFEST_LOADED,G,this)}function w(ae){Y(ae)}function F(){A=NaN,v=!1,h=!0,f=!1,U()}function M(){i.off(u.default.PLAYBACK_STARTED,ee,this),i.off(u.default.PLAYBACK_PAUSED,J,this),i.off(l.default.STREAMS_COMPOSED,ie,this),i.off(l.default.INTERNAL_MANIFEST_LOADED,G,this),F()}function U(){_!==null&&(clearTimeout(_),_=null)}function j(ae){U(),!f&&(isNaN(ae)&&!isNaN(A)&&(ae=A*1e3),isNaN(ae)||(b.debug("Refresh manifest in "+ae+" milliseconds."),_=setTimeout(se,ae)))}function X(){var ae=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;v=!0;var oe=S.getValue(),Z=oe.url,ge=p.getPatchLocation(oe),le=p.getLocation(oe);ge&&!ae?Z=ge:le&&(Z=le),d.isRelative(Z)&&(Z=d.resolve(Z,oe.url)),c.load(Z)}function Y(ae){if(!ae)ae=S.getValue(),ae.loadedTime=new Date;else if(p.getIsPatch(ae)){var oe=ae;ae=S.getValue();var Z=p.isPatchValid(ae,oe),ge=Z;if(Z){var le=p.getPublishTime(ae);ge=p.applyPatchToManifest(ae,oe);var z=p.getPublishTime(ae);ge=le.getTime()!=z.getTime()}if(!ge){b.debug("Patch provided is invalid, performing full manifest refresh"),X(!0);return}ae.loadedTime=new Date}if(S.getValue()&&S.getValue().type===E.default.DYNAMIC&&ae.type===E.default.STATIC){i.trigger(l.default.DYNAMIC_TO_STATIC),v=!1,f=!0;return}S.setValue(ae);var K=new Date,R=(K.getTime()-ae.loadedTime.getTime())/1e3;A=p.getManifestUpdatePeriod(ae,R),A*1e3>2147483647&&(A=2147483647/1e3),i.trigger(l.default.MANIFEST_UPDATED,{manifest:ae}),b.info("Manifest has been refreshed at "+K+"["+K.getTime()/1e3+"] "),h||j()}function se(){if(!h){if(v){j(x.get().streaming.manifestUpdateRetryInterval);return}X()}}function G(ae){ae.error?ae.error.code===T.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&C.error(ae.error):Y(ae.manifest)}function ee(){h=!1,j()}function J(){h=!x.get().streaming.scheduling.scheduleWhilePaused,h&&U()}function ie(){v=!1}function ue(){return v}return P={initialize:te,setManifest:w,refreshManifest:X,getIsUpdating:ue,setConfig:H,reset:M},V(),P}e.__dashjs_factory_name="ManifestUpdater",g.default=m.default.getClassFactory(e)},"./src/streaming/MediaPlayer.js":function(I,g,r){"use strict";r.r(g);var o=r("./externals/cea608-parser.js"),l=r.n(o),u=r("./src/streaming/constants/Constants.js"),m=r("./src/dash/constants/DashConstants.js"),y=r("./src/streaming/constants/MetricsConstants.js"),T=r("./src/streaming/controllers/PlaybackController.js"),E=r("./src/streaming/controllers/StreamController.js"),t=r("./src/streaming/controllers/GapController.js"),e=r("./src/streaming/controllers/CatchupController.js"),n=r("./src/dash/controllers/ServiceDescriptionController.js"),i=r("./src/dash/controllers/ContentSteeringController.js"),d=r("./src/streaming/controllers/MediaController.js"),P=r("./src/streaming/controllers/BaseURLController.js"),b=r("./src/streaming/ManifestLoader.js"),A=r("./src/streaming/utils/ErrorHandler.js"),_=r("./src/streaming/utils/Capabilities.js"),h=r("./src/streaming/utils/CapabilitiesFilter.js"),f=r("./src/streaming/utils/RequestModifier.js"),v=r("./src/streaming/models/URIFragmentModel.js"),c=r("./src/streaming/models/ManifestModel.js"),S=r("./src/streaming/models/MediaPlayerModel.js"),p=r("./src/streaming/controllers/AbrController.js"),C=r("./src/streaming/net/SchemeLoaderFactory.js"),x=r("./src/streaming/models/VideoModel.js"),V=r("./src/streaming/models/CmcdModel.js"),H=r("./src/streaming/utils/DOMStorage.js"),te=r("./src/core/Debug.js"),w=r("./src/core/errors/Errors.js"),F=r("./src/core/EventBus.js"),M=r("./src/core/events/Events.js"),U=r("./src/streaming/MediaPlayerEvents.js"),j=r("./src/core/FactoryMaker.js"),X=r("./src/core/Settings.js"),Y=r("./src/core/Version.js"),se=r("./src/dash/controllers/SegmentBaseController.js"),G=r("./src/dash/DashAdapter.js"),ee=r("./src/dash/DashMetrics.js"),J=r("./src/dash/utils/TimelineConverter.js"),ie=r("./src/streaming/vo/metrics/HTTPRequest.js"),ue=r("./externals/base64.js"),ae=r.n(ue),oe=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),Z=r.n(oe),ge=r("./src/streaming/vo/DashJSError.js"),le=r("./src/streaming/utils/SupervisorTools.js"),z=r("./src/streaming/ManifestUpdater.js"),K=r("./src/streaming/utils/URLUtils.js"),R=r("./src/streaming/utils/BoxParser.js"),L=r("./src/streaming/text/TextController.js"),$=r("./src/streaming/models/CustomParametersModel.js");function O(){var ne="You must first call initialize() and set a source before calling this method",ce="You must first call initialize() and set a valid source and view before calling this method",W="You must first call attachView() to set the video element before calling this method",B="You must first call attachSource() with a valid source before calling this method",D="MediaPlayer not initialized!",q=this.context,me=Object(F.default)(q).getInstance(),de=Object(X.default)(q).getInstance(),ve=Object(te.default)(q).getInstance({settings:de}),Se,be,Me,Fe,Ee,Pe,Ue,Re,Ke,Ne,ze,$e,tt,ft,bt,Et,St,Ct,ye,he,Ae,ke,Qe,Ge,qe,at,it,Ie,He,Xe,nt,mt,ht,_t,wt,ot,Wt;function $t(){be=ve.getLogger(Se),Ee=!1,Ue=!1,Pe=!1,Re=!0,tt=null,Et=null,Fe=null,St=null,Wt=null,M.default.extend(U.default),Ct=Object(S.default)(q).getInstance(),ye=Object($.default)(q).getInstance(),_t=Object(x.default)(q).getInstance(),wt=Object(v.default)(q).getInstance()}function pe(We){We&&(We.capabilities&&(ke=We.capabilities),We.capabilitiesFilter&&(Qe=We.capabilitiesFilter),We.streamController&&(Ge=We.streamController),We.textController&&(qe=We.textController),We.gapController&&(at=We.gapController),We.playbackController&&(it=We.playbackController),We.serviceDescriptionController&&(Ie=We.serviceDescriptionController),We.contentSteeringController&&(He=We.contentSteeringController),We.catchupController&&(Xe=We.catchupController),We.mediaPlayerModel&&(Ct=We.mediaPlayerModel),We.customParametersModel&&(ye=We.customParametersModel),We.abrController&&(Ke=We.abrController),We.schemeLoaderFactory&&(Ne=We.schemeLoaderFactory),We.mediaController&&($e=We.mediaController),We.settings&&(de=We.settings))}function Ye(We,gt,Lt){var Yt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;if(ke||(ke=Object(_.default)(q).getInstance(),ke.setConfig({settings:de})),he||(he=Object(A.default)(q).getInstance()),!ke.supportsMediaSource()){he.error(new ge.default(w.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,w.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE));return}Ee||(Ee=!0,ze=Object(J.default)(q).getInstance(),Ke||(Ke=Object(p.default)(q).getInstance(),Ke.setConfig({settings:de})),Ne||(Ne=Object(C.default)(q).getInstance()),it||(it=Object(T.default)(q).getInstance()),$e||($e=Object(d.default)(q).getInstance()),Ge||(Ge=Object(E.default)(q).getInstance()),at||(at=Object(t.default)(q).getInstance()),Xe||(Xe=Object(e.default)(q).getInstance()),Ie||(Ie=Object(n.default)(q).getInstance()),He||(He=Object(i.default)(q).getInstance()),Qe||(Qe=Object(h.default)(q).getInstance()),St=Object(G.default)(q).getInstance(),mt=Object(c.default)(q).getInstance(),ht=Object(V.default)(q).getInstance(),nt=Object(ee.default)(q).getInstance({settings:de}),ot=Object(H.default)(q).getInstance({settings:de}),St.setConfig({constants:u.default,cea608parser:l.a,errHandler:he,BASE64:ae.a}),Ae||(Ae=Object(P.default)(q).create()),Ae.setConfig({adapter:St}),Ie.setConfig({adapter:St}),Wt||(Wt=Object(se.default)(q).getInstance({dashMetrics:nt,mediaPlayerModel:Ct,errHandler:he,baseURLController:Ae,events:M.default,eventBus:me,debug:ve,boxParser:Object(R.default)(q).getInstance(),requestModifier:Object(f.default)(q).getInstance(),errors:w.default})),$e.setConfig({domStorage:ot,settings:de,customParametersModel:ye}),Ct.setConfig({playbackController:it,serviceDescriptionController:Ie}),Xt(),Le(Lt!==void 0?Lt:!0),Un()),We&&Zt(We),gt&&cn(gt,Yt),be.info("[dash.js "+Ot()+"] MediaPlayer has been initialized")}function lt(){cn(null),Zt(null),Fe=null,tt&&(tt.reset(),tt=null),ft&&(ft.reset(),ft=null),ye&&ye.reset(),de.reset(),Et&&(Et.reset(),Et=null)}function De(){lt(),j.default.deleteSingletonInstances(q)}function je(){return!!Me&&!!_t.getElement()}function Ze(We,gt,Lt,Yt){me.on(We,gt,Lt,Yt)}function ut(We,gt,Lt){me.off(We,gt,Lt)}function Ot(){return Object(Y.getVersionString)()}function At(){return ve}function we(){if(!Ue)throw ce;(!Re||Be()&&Ue)&&it.play(!0)}function Oe(){if(!Ue)throw ce;it.pause()}function Be(){if(!Ue)throw ce;return it.isPaused()}function et(We){if(!Ue)throw ce;if(Object(le.checkParameterType)(We,"number"),isNaN(We))throw u.default.BAD_ARGUMENT_ERROR;We<0&&(We=0);var gt=it.getIsDynamic()?tr(We):We,Lt=qt();!it.getIsDynamic()&&Lt.duration&&(gt=Math.min(Lt.duration,gt)),it.seek(gt,!1,!1,!0)}function vt(){!Ue||!xe()||it.seekToOriginalLive()}function pt(){if(!Ue)throw ce;return it.isSeeking()}function xe(){if(!Ue)throw ce;return it.getIsDynamic()}function ct(){if(!Ue)throw ce;return it.getLowLatencyModeEnabled()}function Tt(We){qt().playbackRate=We}function Rt(){return qt().playbackRate}function jt(We){Object(le.checkParameterType)(We,"boolean"),qt().muted=We}function zt(){return qt().muted}function Vt(We){if(typeof We!="number"||isNaN(We)||We<0||We>1)throw u.default.BAD_ARGUMENT_ERROR;qt().volume=We}function Gt(){return qt().volume}function sr(We){var gt=[u.default.VIDEO,u.default.AUDIO,u.default.TEXT];if(We)if(gt.indexOf(We)!==-1){var Yt=Je().getCurrentBufferLevel(We);return Yt||NaN}else return be.warn("getBufferLength requested for invalid type"),NaN;else{var Lt=gt.map(function(Jt){return Bn(Jt).length>0?Je().getCurrentBufferLevel(Jt):Number.MAX_VALUE}).reduce(function(Jt,Br){return Math.min(Jt,Br)});return Lt===Number.MAX_VALUE?NaN:Lt}}function gr(){var We=Ge&&Ge.hasVideoTrack()?u.default.VIDEO:u.default.AUDIO,gt=nt.getCurrentDVRInfo(We);return gt?gt.manifestInfo.dvrWindowSize:0}function tr(We){var gt=Ge&&Ge.hasVideoTrack()?u.default.VIDEO:u.default.AUDIO,Lt=nt.getCurrentDVRInfo(gt);if(!Lt)return 0;var Yt=it.getOriginalLiveDelay(),Jt=Lt.range.start+We;return Jt>Lt.range.end-Yt&&(Jt=Lt.range.end-Yt),Jt}function lr(){if(!Ue)throw ce;return it.getOriginalLiveDelay()}function ur(We){if(!Ue)throw ce;var gt=qt().currentTime;if(We!==void 0)gt=Ge.getTimeRelativeToStreamId(gt,We);else if(it.getIsDynamic()){var Lt=Ge&&Ge.hasVideoTrack()?u.default.VIDEO:u.default.AUDIO,Yt=nt.getCurrentDVRInfo(Lt);gt=Yt===null||gt===0?0:Math.max(0,gt-Yt.range.start)}return gt}function br(){if(!Ue)throw ce;var We=qt().duration;if(it.getIsDynamic()){var gt=Ge&&Ge.hasVideoTrack()?u.default.VIDEO:u.default.AUDIO,Lt=nt.getCurrentDVRInfo(gt);We=Lt?Lt.range.end-Lt.range.start:0}return We}function N(){if(!Ue)throw ce;return ur()<0?NaN:jn(ur())}function re(){if(!Ue)throw ce;return jn(br())}function k(We){if(!Pe)throw ne;return Ke.getTopBitrateInfoFor(We)}function fe(We){if(!Pe)throw ne;if(We===u.default.IMAGE){var gt=Yr();if(!gt)return-1;var Lt=gt.getThumbnailController();return Lt?Lt.getCurrentTrackIndex():-1}return Ke.getQualityFor(We)}function _e(We,gt){var Lt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(!Pe)throw ne;if(We===u.default.IMAGE){var Yt=Yr();if(!Yt)return;var Jt=Yt.getThumbnailController();Jt&&Jt.setTrackByIndex(gt)}Ke.setPlaybackQuality(We,Ge.getActiveStreamInfo(),gt,{forceReplace:Lt})}function Te(){Ke.setElementSize(),Ke.setWindowResizeEventCalled(!0)}function Le(We){Object(le.checkParameterType)(We,"boolean"),Re=We}function Ve(){return Re}function rt(){if(!Ee)throw D;return Ue?it.getCurrentLiveLatency():NaN}function st(We,gt,Lt){ye.addAbrCustomRule(We,gt,Lt)}function It(We){ye.removeAbrCustomRule(We)}function Nt(){ye.removeAllAbrCustomRule()}function yt(){return ye.getAbrCustomRules()}function Ft(We,gt){ye.addUTCTimingSource(We,gt)}function kt(We,gt){ye.removeUTCTimingSource(We,gt)}function Kt(){ye.clearDefaultUTCTimingSources()}function Xt(){ye.restoreDefaultUTCTimingSources()}function Bt(We){var gt=Ke.getThroughputHistory(),Lt=it.getIsDynamic();return gt?gt.getAverageThroughput(We,Lt):0}function Qt(We,gt){ye.setXHRWithCredentialsForType(We,gt)}function Mt(We){return ye.getXHRWithCredentialsForType(We)}function Ce(){return Un()}function Je(){return nt}function dt(We){var gt=Ge.getActiveStreamInfo();return!gt||!qe?!1:qe.enableText(gt.id,We)}function Pt(We){var gt=Ge.getActiveStreamInfo();return!gt||!qe?!1:qe.enableForcedTextStreaming(We)}function Dt(){var We=Ge.getActiveStreamInfo();return!We||!qe?!1:qe.isTextEnabled(We)}function xt(We){if(!Ue)throw ce;var gt=Ge.getActiveStreamInfo();!gt||!qe||qe.setTextTrack(gt.id,We)}function Ht(){var We=NaN,gt=Ge.getActiveStreamInfo();if(!(!gt||!qe))return We=qe.getCurrentTrackIdx(gt.id),We}function qt(){if(!_t.getElement())throw W;return _t.getElement()}function Zt(We){if(!Ee)throw D;_t.setElement(We),We&&(mn(),za(),Xa(),Ge&&Ge.switchToVideoElement()),Ue&&xn(),kn()}function vr(){return _t?_t.getTTMLRenderingDiv():null}function Vr(We){if(!_t.getElement())throw W;_t.setTTMLRenderingDiv(We)}function Fr(We){if(!_t.getElement())throw W;_t.setVttRenderingDiv(We)}function ga(We){if(!Pe)throw ne;var gt=Yr();return gt?gt.getBitrateListFor(We):[]}function va(We){if(!Pe)throw ne;return St.getStreamsInfo(We)}function Bn(We){if(!Pe)throw ne;var gt=Ge.getActiveStreamInfo();return gt?$e.getTracksFor(We,gt.id):[]}function pa(We,gt,Lt){if(!Pe)throw ne;return Lt=Lt||St.getStreamsInfo(gt,1)[0],Lt?St.getAllMediaInfoForType(Lt,We,gt):[]}function ya(We){if(!Pe)throw ne;var gt=Ge.getActiveStreamInfo();return $e.getCurrentTrackFor(We,gt.id)}function Ea(We,gt){if(!Ee)throw D;$e.setInitialSettings(We,gt)}function _a(We){if(!Ee)throw D;return $e.getInitialSettings(We)}function Ta(We){if(!Pe)throw ne;$e.setTrack(We)}function ba(We){ye.registerCustomCapabilitiesFilter(We)}function Sa(We){ye.unregisterCustomCapabilitiesFilter(We)}function Aa(We){ye.setCustomInitialTrackSelectionFunction(We)}function Ma(){ye.resetCustomInitialTrackSelectionFunction(null)}function Pa(We){ye.registerLicenseRequestFilter(We)}function Ra(We){ye.registerLicenseResponseFilter(We)}function Ca(We){ye.unregisterLicenseRequestFilter(We)}function Ia(We){ye.unregisterLicenseResponseFilter(We)}function Oa(){return mn()}function Da(We){tt=We}function La(We){Fe=We,Ge&&Ge.setProtectionData(Fe)}function Na(We,gt){if(typeof gt=="function"){if(We<0){gt(null);return}var Lt=it.getIsDynamic()?tr(We):We,Yt=Ge.getStreamForTime(Lt);if(Yt===null){gt(null);return}var Jt=Yt.getThumbnailController();if(!Jt){gt(null);return}return Jt.provide(Lt,gt)}}function wa(We,gt){var Lt=dn(),Yt=this,Jt=function Br(Or){Or.error?gt(null,Or.error):gt(Or.manifest),me.off(M.default.INTERNAL_MANIFEST_LOADED,Br,Yt),Lt.reset()};me.on(M.default.INTERNAL_MANIFEST_LOADED,Jt,Yt),wt.initialize(We),Lt.load(We)}function Fa(){if(!Me)throw B;return Me}function Ba(We){Me=We,Ge.load(Me)}function cn(We){var gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!Ee)throw D;typeof We=="string"&&wt.initialize(We),(gt==null||isNaN(gt))&&(gt=NaN),gt=Math.max(0,gt),Me=We,(Pe||Ue)&&xn(),je()&&kn(gt)}function xa(){return de.get()}function Ua(We){de.update(We)}function ja(){de.reset()}function ka(We,gt,Lt){var Yt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,Jt=new Date(We*1e3),Br=Jt.toLocaleDateString(gt),Or=Jt.toLocaleTimeString(gt,{hour12:Lt});return Yt?Or+" "+Br:Or}function Ka(We){We=Math.max(We,0);var gt=Math.floor(We/3600),Lt=Math.floor(We%3600/60),Yt=Math.floor(We%3600%60);return(gt===0?"":gt<10?"0"+gt.toString()+":":gt.toString()+":")+(Lt<10?"0"+Lt.toString():Lt.toString())+":"+(Yt<10?"0"+Yt.toString():Yt.toString())}function Wa(We,gt,Lt){j.default.extend(We,gt,Lt,q)}function Yr(){if(!Pe)throw ne;var We=Ge.getActiveStreamInfo();return We?Ge.getStreamById(We.id):null}function Ha(){return St}function Ga(){if(He)return He.loadSteeringData()}function Va(){if(He)return He.getCurrentSteeringResponseData()}function xn(){Ue=!1,Pe=!1,St.reset(),Ge.reset(),at.reset(),Xe.reset(),it.reset(),Ie.reset(),He.reset(),Ke.reset(),$e.reset(),Wt.reset(),tt&&(de.get().streaming.protection.keepProtectionMediaKeys?tt.stop():(tt.reset(),tt=null,mn())),qe.reset(),ht.reset()}function Ya(){var We=dn();Ge||(Ge=Object(E.default)(q).getInstance()),qe||(qe=Object(L.default)(q).create({errHandler:he,manifestModel:mt,adapter:St,mediaController:$e,videoModel:_t,settings:de})),Qe.setConfig({capabilities:ke,customParametersModel:ye,adapter:St,settings:de,manifestModel:mt,errHandler:he}),Ge.setConfig({capabilities:ke,capabilitiesFilter:Qe,manifestLoader:We,manifestModel:mt,mediaPlayerModel:Ct,customParametersModel:ye,protectionController:tt,textController:qe,adapter:St,dashMetrics:nt,errHandler:he,timelineConverter:ze,videoModel:_t,playbackController:it,serviceDescriptionController:Ie,contentSteeringController:He,abrController:Ke,mediaController:$e,settings:de,baseURLController:Ae,uriFragmentModel:wt,segmentBaseController:Wt}),at.setConfig({settings:de,playbackController:it,streamController:Ge,videoModel:_t,timelineConverter:ze,adapter:St}),it.setConfig({streamController:Ge,serviceDescriptionController:Ie,dashMetrics:nt,adapter:St,videoModel:_t,timelineConverter:ze,settings:de}),Xe.setConfig({streamController:Ge,playbackController:it,mediaPlayerModel:Ct,videoModel:_t,settings:de}),Ke.setConfig({streamController:Ge,domStorage:ot,mediaPlayerModel:Ct,customParametersModel:ye,dashMetrics:nt,adapter:St,videoModel:_t,settings:de}),ht.setConfig({abrController:Ke,dashMetrics:nt,playbackController:it}),He.setConfig({adapter:St,errHandler:he,dashMetrics:nt,mediaPlayerModel:Ct,manifestModel:mt,abrController:Ke,eventBus:me,requestModifier:Object(f.default)(q).getInstance()}),Ke.initialize(),Ge.initialize(Re,Fe),qe.initialize(),at.initialize(),Xe.initialize(),ht.initialize(),He.initialize(),Wt.initialize()}function dn(){return Object(b.default)(q).create({debug:ve,errHandler:he,dashMetrics:nt,mediaPlayerModel:Ct,requestModifier:Object(f.default)(q).getInstance(),mssHandler:bt,settings:de})}function mn(){if(tt)return tt;var We=dashjs.Protection;if(typeof We=="function"){var gt=We(q).create();return M.default.extend(We.events),U.default.extend(We.events,{publicOnly:!0}),w.default.extend(We.errors),ke||(ke=Object(_.default)(q).getInstance()),tt=gt.createProtectionSystem({debug:ve,errHandler:he,videoModel:_t,customParametersModel:ye,capabilities:ke,eventBus:me,events:M.default,BASE64:ae.a,constants:u.default,cmcdModel:ht,settings:de}),tt}return null}function za(){if(!ft){var We=dashjs.MetricsReporting;if(typeof We=="function"){var gt=We(q).create();ft=gt.createMetricsReporting({debug:ve,eventBus:me,mediaElement:qt(),adapter:St,dashMetrics:nt,mediaPlayerModel:Ct,events:M.default,constants:u.default,metricsConstants:y.default})}}}function Xa(){if(!bt){var We=dashjs.MssHandler;typeof We=="function"&&(w.default.extend(We.errors),bt=We(q).create({eventBus:me,mediaPlayerModel:Ct,dashMetrics:nt,manifestModel:mt,playbackController:it,streamController:Ge,protectionController:tt,baseURLController:Ae,errHandler:he,events:M.default,constants:u.default,debug:ve,initSegmentType:ie.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:ae.a,ISOBoxer:Z.a,settings:de}))}}function Un(){if(!Ee)throw D;if(Et)return Et;var We=dashjs.OfflineController;if(typeof We=="function"){M.default.extend(We.events),U.default.extend(We.events,{publicOnly:!0}),w.default.extend(We.errors);var gt=dn(),Lt=Object(z.default)(q).create();return Lt.setConfig({manifestModel:mt,adapter:St,manifestLoader:gt,errHandler:he}),Et=We(q).create({debug:ve,manifestUpdater:Lt,baseURLController:Ae,manifestLoader:gt,manifestModel:mt,mediaPlayerModel:Ct,abrController:Ke,playbackController:it,adapter:St,errHandler:he,dashMetrics:nt,timelineConverter:ze,segmentBaseController:Wt,schemeLoaderFactory:Ne,eventBus:me,events:M.default,errors:w.default,constants:u.default,settings:de,dashConstants:m.default,urlUtils:Object(K.default)(q).getInstance()}),Et}return null}function jn(We){var gt=Ge&&Ge.hasVideoTrack()?u.default.VIDEO:u.default.AUDIO,Lt=nt.getCurrentDVRInfo(gt),Yt,Jt;return Lt?(Yt=Lt.manifestInfo.availableFrom.getTime()/1e3,Jt=We+(Yt+Lt.range.start),Jt):0}function kn(){var We=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Et&&Et.resetRecords(),!Pe&&Me&&(Pe=!0,be.info("Streaming Initialized"),Ya(),typeof Me=="string"?Ge.load(Me,We):Ge.loadWithManifest(Me,We)),!Ue&&je()&&(Ue=!0,be.info("Playback Initialized"))}return Se={initialize:Ye,setConfig:pe,on:Ze,off:ut,extend:Wa,attachView:Zt,attachSource:cn,isReady:je,play:we,isPaused:Be,pause:Oe,isSeeking:pt,isDynamic:xe,getLowLatencyModeEnabled:ct,seek:et,seekToOriginalLive:vt,setPlaybackRate:Tt,getPlaybackRate:Rt,setMute:jt,isMuted:zt,setVolume:Vt,getVolume:Gt,time:ur,duration:br,timeAsUTC:N,durationAsUTC:re,getActiveStream:Yr,getDVRWindowSize:gr,getDVRSeekOffset:tr,getTargetLiveDelay:lr,convertToTimeCode:Ka,formatUTC:ka,getVersion:Ot,getDebug:At,getBufferLength:sr,getTTMLRenderingDiv:vr,getVideoElement:qt,getSource:Fa,updateSource:Ba,getCurrentLiveLatency:rt,getTopBitrateInfoFor:k,setAutoPlay:Le,getAutoPlay:Ve,getDashMetrics:Je,getQualityFor:fe,setQualityFor:_e,updatePortalSize:Te,enableText:dt,enableForcedTextStreaming:Pt,isTextEnabled:Dt,setTextTrack:xt,getBitrateInfoListFor:ga,getStreamsFromManifest:va,getTracksFor:Bn,getTracksForTypeFromManifest:pa,getCurrentTrackFor:ya,setInitialMediaSettingsFor:Ea,getInitialMediaSettingsFor:_a,setCurrentTrack:Ta,addABRCustomRule:st,removeABRCustomRule:It,removeAllABRCustomRule:Nt,getABRCustomRules:yt,getAverageThroughput:Bt,retrieveManifest:wa,addUTCTimingSource:Ft,removeUTCTimingSource:kt,clearDefaultUTCTimingSources:Kt,restoreDefaultUTCTimingSources:Xt,setXHRWithCredentialsForType:Qt,getXHRWithCredentialsForType:Mt,getProtectionController:Oa,attachProtectionController:Da,setProtectionData:La,registerLicenseRequestFilter:Pa,registerLicenseResponseFilter:Ra,unregisterLicenseRequestFilter:Ca,unregisterLicenseResponseFilter:Ia,registerCustomCapabilitiesFilter:ba,unregisterCustomCapabilitiesFilter:Sa,setCustomInitialTrackSelectionFunction:Aa,resetCustomInitialTrackSelectionFunction:Ma,attachTTMLRenderingDiv:Vr,attachVttRenderingDiv:Fr,getCurrentTextTrackIndex:Ht,provideThumbnail:Na,getDashAdapter:Ha,getOfflineController:Ce,triggerSteeringRequest:Ga,getCurrentSteeringResponseData:Va,getSettings:xa,updateSettings:Ua,resetSettings:ja,reset:lt,destroy:De},$t(),Se}O.__dashjs_factory_name="MediaPlayer";var Q=j.default.getClassFactory(O);Q.events=U.default,Q.errors=w.default,j.default.updateClassFactory(O.__dashjs_factory_name,Q),g.default=Q},"./src/streaming/MediaPlayerEvents.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/events/EventsBase.js");function l(h){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l(h)}function u(h,f){for(var v=0;v<f.length;v++){var c=f[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,y(c.key),c)}}function m(h,f,v){return f&&u(h.prototype,f),v&&u(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h}function y(h){var f=T(h,"string");return l(f)==="symbol"?f:String(f)}function T(h,f){if(l(h)!=="object"||h===null)return h;var v=h[Symbol.toPrimitive];if(v!==void 0){var c=v.call(h,f||"default");if(l(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}function E(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function t(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),f&&e(h,f)}function e(h,f){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},e(h,f)}function n(h){var f=P();return function(){var c=b(h),S;if(f){var p=b(this).constructor;S=Reflect.construct(c,arguments,p)}else S=c.apply(this,arguments);return i(this,S)}}function i(h,f){if(f&&(l(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(h)}function d(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(h){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},b(h)}var A=function(h){t(v,h);var f=n(v);function v(){var c;return E(this,v),c=f.call(this),c.AST_IN_FUTURE="astInFuture",c.BUFFER_EMPTY="bufferStalled",c.BUFFER_LOADED="bufferLoaded",c.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",c.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",c.DYNAMIC_TO_STATIC="dynamicToStatic",c.ERROR="error",c.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",c.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",c.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",c.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",c.LOG="log",c.MANIFEST_LOADED="manifestLoaded",c.METRICS_CHANGED="metricsChanged",c.METRIC_CHANGED="metricChanged",c.METRIC_ADDED="metricAdded",c.METRIC_UPDATED="metricUpdated",c.PERIOD_SWITCH_STARTED="periodSwitchStarted",c.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",c.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",c.QUALITY_CHANGE_RENDERED="qualityChangeRendered",c.TRACK_CHANGE_RENDERED="trackChangeRendered",c.STREAM_INITIALIZING="streamInitializing",c.STREAM_UPDATED="streamUpdated",c.STREAM_ACTIVATED="streamActivated",c.STREAM_DEACTIVATED="streamDeactivated",c.STREAM_INITIALIZED="streamInitialized",c.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",c.TEXT_TRACKS_ADDED="allTextTracksAdded",c.TEXT_TRACK_ADDED="textTrackAdded",c.TTML_PARSED="ttmlParsed",c.TTML_TO_PARSE="ttmlToParse",c.CAPTION_RENDERED="captionRendered",c.CAPTION_CONTAINER_RESIZE="captionContainerResize",c.CAN_PLAY="canPlay",c.CAN_PLAY_THROUGH="canPlayThrough",c.PLAYBACK_ENDED="playbackEnded",c.PLAYBACK_ERROR="playbackError",c.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",c.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",c.PLAYBACK_LOADED_DATA="playbackLoadedData",c.PLAYBACK_PAUSED="playbackPaused",c.PLAYBACK_PLAYING="playbackPlaying",c.PLAYBACK_PROGRESS="playbackProgress",c.PLAYBACK_RATE_CHANGED="playbackRateChanged",c.PLAYBACK_SEEKED="playbackSeeked",c.PLAYBACK_SEEKING="playbackSeeking",c.PLAYBACK_STALLED="playbackStalled",c.PLAYBACK_STARTED="playbackStarted",c.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",c.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",c.PLAYBACK_WAITING="playbackWaiting",c.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",c.EVENT_MODE_ON_START="eventModeOnStart",c.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",c.CONFORMANCE_VIOLATION="conformanceViolation",c.REPRESENTATION_SWITCH="representationSwitch",c.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",c.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",c}return m(v)}(o.default),_=new A;g.default=_},"./src/streaming/MediaPlayerFactory.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/MediaPlayer.js");function l(){var t="application/dash+xml",e;function n(P,b,A){if(!P||!/^VIDEO$/i.test(P.nodeName))return null;if(P._dashjs_player)return P._dashjs_player;var _,h=P.id||P.name||"video element";if(b=b||[].slice.call(P.querySelectorAll("source")).filter(function(f){return f.type==t})[0],!b&&P.src)b=document.createElement("source"),b.src=P.src;else if(!b&&!P.src)return null;return A=A||{},_=Object(o.default)(A).create(),_.initialize(P,b.src,P.autoplay),e||(e=_.getDebug().getLogger()),e.debug("Converted "+h+" to dash.js player and added content: "+b.src),P._dashjs_player=_,_}function i(P,b){var A=[];P=P||"[data-dashjs-player]",b=b||document;for(var _=b.querySelectorAll(P),h=0;h<_.length;h++){var f=n(_[h],null);A.push(f)}for(var v=b.querySelectorAll('source[type="'+t+'"]'),c=0;c<v.length;c++){var S=d(v[c]),p=n(S,null);A.push(p)}return A}function d(P){return/^VIDEO$/i.test(P.nodeName)?P:d(P.parentNode)}return{create:n,createAll:i}}var u=l(),m;function y(){window.removeEventListener("load",y),u.createAll()}function T(){window.dashjs&&(window.clearInterval(m),u.createAll())}var E=typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate;!E&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?u.createAll():m=window.setInterval(T,500):window.addEventListener("load",y)),g.default=u},"./src/streaming/SourceBufferSink.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/Debug.js"),l=r("./src/streaming/vo/DashJSError.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/core/errors/Errors.js"),y=r("./src/core/Settings.js"),T=r("./src/streaming/constants/Constants.js"),E=r("./src/streaming/vo/metrics/HTTPRequest.js"),t=r("./src/core/events/Events.js"),e=.1,n=.01,i=50;function d(b){var A=this.context,_=Object(y.default)(A).getInstance(),h=b.textController,f=b.eventBus,v,c,S,p,C,x,V=[],H=[],te=!1,w=b.mediaSource,F=null;function M(){S=Object(o.default)(A).getInstance().getLogger(v)}function U(ce,W,B){C=ce,c=C.type;var D=C.codec;X(B),G();var q=[];return q.push(le()),q.push(ie(C.streamInfo)),q.push(j(D)),W&&W.MSETimeOffset!==void 0&&q.push(ue(W.MSETimeOffset)),Promise.all(q)}function j(ce){return new Promise(function(W){ne(function(){p.changeType&&p.changeType(ce),W()})})}function X(ce){p=ce.getBuffer()}function Y(ce,W,B){C=W,c=C.type;var D=C.codec;try{if(D.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return se(ce);p=w.addSourceBuffer(D),G();var q=[];return q.push(ie(C.streamInfo)),B&&B.MSETimeOffset!==void 0&&q.push(ue(B.MSETimeOffset)),Promise.all(q)}catch(me){return C.type==T.default.TEXT&&!C.isFragmented||D.indexOf('codecs="stpp')!==-1||D.indexOf('codecs="vtt')!==-1?se(ce):Promise.reject(me)}}function se(ce){return p=h.getTextSourceBuffer(ce),Promise.resolve()}function G(){if(typeof p.addEventListener=="function")try{p.addEventListener("updateend",$,!1),p.addEventListener("error",O,!1),p.addEventListener("abort",O,!1)}catch{x=setInterval($,i)}else x=setInterval($,i)}function ee(){return c}function J(){try{typeof p.removeEventListener=="function"&&(p.removeEventListener("updateend",$,!1),p.removeEventListener("error",O,!1),p.removeEventListener("abort",O,!1)),clearInterval(x)}catch(ce){S.error(ce)}}function ie(ce){return new Promise(function(W){if(!p||!_.get().streaming.buffer.useAppendWindow){W();return}ne(function(){try{if(!p){W();return}var B=w.duration,D=0;ce&&!isNaN(ce.start)&&!isNaN(ce.duration)&&isFinite(ce.duration)&&(B=ce.start+ce.duration),ce&&!isNaN(ce.start)&&(D=ce.start),(p.appendWindowEnd!==B||p.appendWindowStart!==D)&&(p.appendWindowStart=0,p.appendWindowEnd=B+n,p.appendWindowStart=Math.max(D-e,0),S.debug("Updated append window for ".concat(C.type,". Set start to ").concat(p.appendWindowStart," and end to ").concat(p.appendWindowEnd))),W()}catch{S.warn("Failed to set append window"),W()}})})}function ue(ce){return new Promise(function(W){if(!p){W();return}ne(function(){try{p.timestampOffset!==ce&&!isNaN(ce)&&(p.timestampOffset=ce,S.debug("Set MSE timestamp offset to ".concat(ce))),W()}catch{W()}})})}function ae(){if(p){try{V=[],J(),te=!1,H=[],(!p.getClassName||p.getClassName()!=="TextSourceBuffer")&&(S.debug("Removing sourcebuffer from media source"),w.removeSourceBuffer(p))}catch{}p=null}F=null}function oe(){return p}function Z(){try{return p.buffered}catch(ce){return S.error("getAllBufferRanges exception: "+ce.message),null}}function ge(ce){var W=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(function(D,q){if(!ce){q({chunk:ce,error:new l.default(m.default.APPEND_ERROR_CODE,m.default.APPEND_ERROR_MESSAGE)});return}H.push({data:ce,promise:{resolve:D,reject:q},request:B}),ne(K.bind(W))})}function le(){return new Promise(function(ce){ne(function(){var W=p.appendWindowStart,B=p.appendWindowEnd;p&&(p.abort(),p.appendWindowStart=W,p.appendWindowEnd=B),ce()})})}function z(ce){return new Promise(function(W,B){var D=ce.start,q=ce.end;if(!(D>=0&&q>D)){W();return}ne(function(){try{p.remove(D,q),ne(function(){W({from:D,to:q,unintended:!1}),ce.resolve&&ce.resolve()})}catch(me){B({from:D,to:q,unintended:!1,error:new l.default(m.default.REMOVE_ERROR_CODE,m.default.REMOVE_ERROR_MESSAGE)}),ce.reject&&ce.reject(me)}})})}function K(){if(!te&&H.length>0){te=!0;var ce=H[0];H.splice(0,1);var W=function(){te=!1,H.length>0&&K.call(this),ce&&ce.data&&ce.data.segmentType&&ce.data.segmentType!==E.HTTPRequest.INIT_SEGMENT_TYPE&&delete ce.data.bytes,ce.promise.resolve({chunk:ce.data})};try{F=ce.request,ce.data.bytes.byteLength===0?W.call(this):(p.appendBuffer?p.appendBuffer(ce.data.bytes):p.append(ce.data.bytes,ce.data),ne(W.bind(this)))}catch(B){S.fatal('SourceBuffer append failed "'+B+'"'),H.length>0?K():te=!1,delete ce.data.bytes,ce.promise.reject({chunk:ce.data,error:new l.default(B.code,B.message)})}}}function R(){return new Promise(function(ce){try{H=[],w.readyState==="open"?ne(function(){try{p&&p.abort(),ce()}catch{ce()}}):(p&&p.setTextTrack&&w.readyState==="ended"&&p.abort(),ce())}catch{ce()}})}function L(){if(V.length>0&&!p.updating){var ce=V.shift();ce(),L()}}function $(){p.updating||L()}function O(ce){var W=ce.target||{};Q(t.default.SOURCE_BUFFER_ERROR,{error:W,lastRequestAppended:F})}function Q(ce,W){var B=W||{};f.trigger(ce,B,{streamId:C.streamInfo.id,mediaType:c})}function ne(ce){V.push(ce),p.updating||L()}return v={getType:ee,getAllBufferRanges:Z,getBuffer:oe,append:ge,remove:z,abort:R,reset:ae,updateTimestampOffset:ue,initializeForStreamSwitch:U,initializeForFirstUse:Y,updateAppendWindow:ie,changeType:j},M(),v}d.__dashjs_factory_name="SourceBufferSink";var P=u.default.getClassFactory(d);g.default=P},"./src/streaming/Stream.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/dash/constants/DashConstants.js"),u=r("./src/streaming/StreamProcessor.js"),m=r("./src/streaming/controllers/FragmentController.js"),y=r("./src/streaming/thumbnail/ThumbnailController.js"),T=r("./src/core/EventBus.js"),E=r("./src/core/events/Events.js"),t=r("./src/core/Debug.js"),e=r("./src/core/errors/Errors.js"),n=r("./src/core/FactoryMaker.js"),i=r("./src/streaming/vo/DashJSError.js"),d=r("./src/streaming/utils/BoxParser.js"),P=r("./src/streaming/utils/URLUtils.js"),b=r("./src/streaming/controllers/BlacklistController.js"),A=[o.default.VIDEO,o.default.AUDIO,o.default.TEXT,o.default.MUXED,o.default.IMAGE];function _(h){h=h||{};var f=this.context,v=Object(T.default)(f).getInstance(),c=Object(P.default)(f).getInstance(),S=h.manifestModel,p=h.mediaPlayerModel,C=h.dashMetrics,x=h.manifestUpdater,V=h.adapter,H=h.timelineConverter,te=h.capabilities,w=h.errHandler,F=h.abrController,M=h.playbackController,U=h.eventController,j=h.mediaController,X=h.protectionController,Y=h.textController,se=h.videoModel,G=h.streamInfo,ee=h.settings,J,ie,ue,ae,oe,Z,ge,le,z,K,R,L,$,O,Q,ne,ce,W;function B(){try{ne=Object(t.default)(f).getInstance(),ie=ne.getLogger(J),tt(),Q=Object(d.default)(f).getInstance(),$=Object(b.default)(f).create({updateEventName:E.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:E.default.SEGMENT_LOCATION_BLACKLIST_ADD}),R=Object(m.default)(f).create({streamInfo:G,mediaPlayerModel:p,dashMetrics:C,errHandler:w,settings:ee,boxParser:Q,dashConstants:l.default,urlUtils:c})}catch(Oe){throw Oe}}function D(){q(),de(),Y.initializeForStream(G),v.trigger(E.default.STREAM_UPDATED,{streamInfo:G})}function q(){v.on(E.default.BUFFERING_COMPLETED,mt,J),v.on(E.default.DATA_UPDATE_COMPLETED,ht,J),v.on(E.default.INBAND_EVENTS,_t,J)}function me(){v.off(E.default.DATA_UPDATE_COMPLETED,ht,J),v.off(E.default.BUFFERING_COMPLETED,mt,J),v.off(E.default.INBAND_EVENTS,_t,J)}function de(){X&&(v.on(E.default.KEY_ERROR,at,J),v.on(E.default.SERVER_CERTIFICATE_UPDATED,at,J),v.on(E.default.LICENSE_REQUEST_COMPLETE,at,J),v.on(E.default.KEY_SYSTEM_SELECTED,at,J),v.on(E.default.KEY_SESSION_CREATED,at,J),v.on(E.default.KEY_STATUSES_CHANGED,at,J))}function ve(){X&&(v.off(E.default.KEY_ERROR,at,J),v.off(E.default.SERVER_CERTIFICATE_UPDATED,at,J),v.off(E.default.LICENSE_REQUEST_COMPLETE,at,J),v.off(E.default.KEY_SYSTEM_SELECTED,at,J),v.off(E.default.KEY_SESSION_CREATED,at,J),v.off(E.default.KEY_STATUSES_CHANGED,at,J))}function Se(){return G?G.id:null}function be(Oe,Be){return new Promise(function(et,vt){if(oe){et(Be);return}if(Ot()){oe=!0,v.trigger(E.default.STREAM_ACTIVATED,{streamInfo:G}),et(Be);return}Me(Oe,Be).then(function(pt){oe=!0,v.trigger(E.default.STREAM_ACTIVATED,{streamInfo:G}),et(pt)}).catch(function(pt){vt(pt)})})}function Me(Oe,Be){return Ee(Oe,Be)}function Fe(Oe,Be){return new Promise(function(et,vt){if(Ot()){vt();return}ie.info("[startPreloading] Preloading next stream with id ".concat(ye())),ut(!0),Ee(Oe,Be).then(function(){for(var pt=0;pt<ue.length&&ue[pt];pt++)ue[pt].setExplicitBufferingTime(Ct()),ue[pt].getScheduleController().startScheduleTimer();et()}).catch(function(){ut(!1),vt()})})}function Ee(Oe,Be){return new Promise(function(et,vt){Ge(),K=!0,He();var pt=se.getElement();A.forEach(function(xe){(xe!==o.default.VIDEO||!pt||pt&&/^VIDEO$/i.test(pt.nodeName))&&Pe(xe,Oe)}),Ke(Be).then(function(xe){if(K=!1,ue.length===0){var ct="No streams to play.";w.error(new i.default(e.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,ct,S.getValue())),ie.fatal(ct)}else Xe();Y.createTracks(G),et(xe)}).catch(function(xe){vt(xe)})})}function Pe(Oe,Be){var et=V.getAllMediaInfoForType(G,Oe),vt=[],pt=null,xe;if(!et||et.length===0){ie.info("No "+Oe+" data.");return}Oe===o.default.VIDEO&&(ge=!0),Oe===o.default.AUDIO&&(le=!0);for(var ct=0,Tt=et.length;ct<Tt;ct++)pt=et[ct],Oe===o.default.TEXT&&pt.isEmbedded&&(Y.addEmbeddedTrack(G,pt),vt.push(pt)),Ue(pt)&&j.addTrack(pt);if(vt.length>0&&(j.setInitialMediaSettingsForType(Oe,G),Y.addMediaInfosToBuffer(G,Oe,vt)),et=et.filter(function(jt){return!jt.isEmbedded}),et.length!==0){if(Oe===o.default.IMAGE){L=Object(y.default)(f).create({streamInfo:G,adapter:V,baseURLController:h.baseURLController,timelineConverter:h.timelineConverter,debug:ne,eventBus:v,events:E.default,dashConstants:l.default,dashMetrics:h.dashMetrics,segmentBaseController:h.segmentBaseController}),L.initialize();return}v.trigger(E.default.STREAM_INITIALIZING,{streamInfo:G,mediaInfo:pt}),j.setInitialMediaSettingsForType(Oe,G);var Rt=Re(et,Be);xe=j.getCurrentTrackFor(Oe,G.id),xe&&(F.updateTopQualityIndex(xe),Rt.selectMediaInfo(Oe!==o.default.TEXT||!xe.isEmbedded?xe:et[0]))}}function Ue(Oe){var Be=Oe?Oe.type:null,et;return Be===o.default.MUXED?(et="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",ie.fatal(et),w.error(new i.default(e.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,et,S.getValue())),!1):Be===o.default.TEXT||Be===o.default.IMAGE?!0:Oe.contentProtection&&!te.supportsEncryptedMedia()?(w.error(new i.default(e.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,e.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),!1):!0}function Re(Oe,Be){var et=Oe&&Oe.length>0?Oe[0]:null,vt=R.getModel(et?et.type:null),pt=et?et.type:null,xe=et?et.mimeType:null,ct=et?et.isFragmented:null,Tt=Object(u.default)(f).create({streamInfo:G,type:pt,mimeType:xe,timelineConverter:H,adapter:V,manifestModel:S,mediaPlayerModel:p,fragmentModel:vt,dashMetrics:h.dashMetrics,baseURLController:h.baseURLController,segmentBaseController:h.segmentBaseController,abrController:F,playbackController:M,mediaController:j,textController:Y,errHandler:w,settings:ee,boxParser:Q,segmentBlacklistController:$});Tt.initialize(Be,ge,ct),ue.push(Tt);for(var Rt=0;Rt<Oe.length;Rt++)Tt.addMediaInfo(Oe[Rt]);return pt===o.default.TEXT&&Y.addMediaInfosToBuffer(G,pt,Oe,vt),Tt}function Ke(Oe){return new Promise(function(Be){var et={},vt=ue.map(function(pt){return pt.createBufferSinks(Oe)});Promise.all(vt).then(function(pt){pt.forEach(function(xe){xe&&(et[xe.getType()]=xe)}),Be(et)}).catch(function(){Be(et)})})}function Ne(Oe){for(var Be=ue?ue.length:0,et=!1,vt=0;vt<Be;vt++){var pt=ue[vt].getFragmentModel();pt.abortRequests(),pt.resetInitialSettings(),ue[vt].reset(et,Oe)}Y&&Y.deactivateStream(G),ue=[],oe=!1,Z=!1,ut(!1),St(!1),v.trigger(E.default.STREAM_DEACTIVATED,{streamInfo:G})}function ze(){return oe}function $e(Oe){for(var Be=0;Be<ue.length;)Ue(ue[Be].getMediaInfo())?(ue[Be].setMediaSource(Oe),Be++):(ue[Be].reset(),ue.splice(Be,1));if(ue.length===0){var et="No streams to play.";w.error(new i.default(e.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,et+"nostreams",S.getValue())),ie.fatal(et)}}function tt(Oe){Ne(Oe),ae=!1,ge=!1,le=!1,z={},K=!1,ce=!1,W=[]}function ft(Oe){R&&(R.reset(),R=null),F&&G&&F.clearDataForStream(G.id),$&&($.reset(),$=null),tt(Oe),G=null,me(),ve()}function bt(){return G?G.duration:NaN}function Et(){return ce}function St(Oe){ce=Oe}function Ct(){return G?G.start:NaN}function ye(){return G?G.id:null}function he(){return G}function Ae(){return le}function ke(){return ge}function Qe(){return L}function Ge(){if(!se||!F)throw new Error(o.default.MISSING_CONFIG_ERROR)}function qe(Oe){if(Ge(),Oe===o.default.IMAGE)return L?L.getBitrateList():[];var Be=nt(Oe);return F.getBitrateList(Be)}function at(Oe){Oe.error&&(w.error(Oe.error),ie.fatal(Oe.error.message))}function it(Oe){if(!(!oe||!G)){Z=!1;var Be=Oe.newMediaInfo,et=S.getValue();V.setCurrentMediaInfo(G.id,Be.type,Be);var vt=wt(Be);if(vt){var pt=M.getTime();ie.info("Stream -  Process track changed at current time "+pt),et.refreshManifestOnSwitchTrack?(W.push(Oe),x.getIsUpdating()||(ie.debug("Stream -  Refreshing manifest for switch track"),x.refreshManifest())):vt.selectMediaInfo(Be).then(function(){(Be.type===o.default.VIDEO||Be.type===o.default.AUDIO)&&F.updateTopQualityIndex(Be),vt.prepareTrackSwitch()})}}}function Ie(Oe){var Be=ot(Oe.mediaType);Be&&Be.prepareQualityChange(Oe)}function He(){if(U){var Oe=V.getEventsFor(G);Oe&&Oe.length>0&&U.addInlineEvents(Oe,G.id)}}function Xe(){for(var Oe=ue.length,Be=!!z.audio||!!z.video,et=Be?new i.default(e.default.DATA_UPDATE_FAILED_ERROR_CODE,e.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,vt=0;vt<Oe;vt++)if(ue[vt].isUpdating()||K)return;if(X){X.clearMediaInfoArray();for(var pt=0;pt<Oe&&ue[pt];pt++){var xe=ue[pt].getType(),ct=ue[pt].getMediaInfo();if(xe===o.default.AUDIO||xe===o.default.VIDEO||xe===o.default.TEXT&&ct.isFragmented){var Tt=ue[pt].getMediaInfo();Tt&&X.initializeForMedia(Tt)}}X.handleKeySystemFromManifest()}et?w.error(et):ae||(ae=!0,se.waitForReadyState(o.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){v.trigger(E.default.STREAM_INITIALIZED,{streamInfo:G})}))}function nt(Oe){for(var Be=null,et=0;et<ue.length;et++)if(Be=ue[et],Be.getType()===Oe)return Be.getMediaInfo();return null}function mt(){var Oe=Wt(),Be=Oe.length;if(Be===0){ie.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined");return}for(var et=0;et<Be;et++)if(!Oe[et].isBufferingCompleted()&&(Oe[et].getType()===o.default.AUDIO||Oe[et].getType()===o.default.VIDEO)){ie.debug("onBufferingCompleted - One streamProcessor has finished but",Oe[et].getType(),"one is not buffering completed");return}ie.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),Z=!0,v.trigger(E.default.STREAM_BUFFERING_COMPLETED,{streamInfo:G},{streamInfo:G})}function ht(Oe){z[Oe.mediaType]=Oe.error,Xe()}function _t(Oe){U&&U.addInbandEvents(Oe.events,G.id)}function wt(Oe){return!Oe||!Oe.type?null:ot(Oe.type)}function ot(Oe){if(!Oe)return null;var Be=Wt();return Be.filter(function(et){return et.getType()===Oe})[0]}function Wt(){for(var Oe=[],Be,et,vt=0;vt<ue.length;vt++)et=ue[vt],Be=et.getType(),(Be===o.default.AUDIO||Be===o.default.VIDEO||Be===o.default.TEXT)&&Oe.push(et);return Oe}function $t(){for(var Oe=ue.length,Be=0;Be<Oe&&ue[Be];Be++)ue[Be].getScheduleController().startScheduleTimer()}function pe(Oe){return new Promise(function(Be){K=!0,G=Oe,U&&He();for(var et=[],vt=0,pt=ue.length;vt<pt;vt++){var xe=ue[vt],ct=xe.getMediaInfo();et.push(xe.updateStreamInfo(G));var Tt=V.getAllMediaInfoForType(G,xe.getType());if(Tt){xe.clearMediaInfoArray();for(var Rt=0;Rt<Tt.length;Rt++){var jt=Tt[Rt];xe.addMediaInfo(Tt[Rt]),V.areMediaInfosEqual(ct,jt)&&(F.updateTopQualityIndex(jt),et.push(xe.selectMediaInfo(jt)))}}}Promise.all(et).then(function(){for(et=[];W.length>0;){var zt=W.pop(),Vt=zt.newMediaInfo,Gt=wt(zt.oldMediaInfo);if(!Gt)return;et.push(Gt.prepareTrackSwitch()),Gt.selectMediaInfo(Vt)}return Promise.all(et)}).then(function(){K=!1,Xe(),v.trigger(E.default.STREAM_UPDATED,{streamInfo:G}),Be()})})}function Ye(Oe){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return Ze(Oe,o.default.VIDEO,Be)&&Ze(Oe,o.default.AUDIO,Be)}function lt(Oe){return Oe?De(o.default.VIDEO,Oe)&&De(o.default.AUDIO,Oe):!0}function De(Oe,Be){var et=he(),vt=Be.getStreamInfo();if(!vt||!et)return!0;var pt=V.getAdaptationForType(vt.index,Oe,vt),xe=V.getAdaptationForType(et.index,Oe,et);return!pt||!xe?!pt&&!xe:!(!je(xe)&&je(pt))}function je(Oe){return Oe?!!(Oe.ContentProtection||Oe.Representation&&Oe.Representation.length>0&&Oe.Representation[0].ContentProtection):!1}function Ze(Oe,Be){var et=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!Oe||!Oe.hasOwnProperty("getStreamInfo"))return!1;var vt=Oe.getStreamInfo(),pt=et?et.getStreamInfo():he();if(!vt||!pt)return!1;var xe=V.getAdaptationForType(vt.index,Be,vt),ct=V.getAdaptationForType(pt.index,Be,pt);if(!xe||!ct)return!xe&&!ct;var Tt=xe&&ct&&xe.mimeType===ct.mimeType,Rt=ct.Representation_asArray.map(function(Gt){return Gt.codecs}),jt=xe.Representation_asArray.map(function(Gt){return Gt.codecs}),zt=jt.some(function(Gt){return Rt.indexOf(Gt)>-1}),Vt=jt.some(function(Gt){return Rt.some(function(sr){return te.codecRootCompatibleWithCodec(sr,Gt)})});return zt||Vt&&Tt}function ut(Oe){O=Oe}function Ot(){return O}function At(){return Z}function we(){return V}return J={initialize:D,getStreamId:Se,activate:be,deactivate:Ne,getIsActive:ze,getDuration:bt,getStartTime:Ct,getId:ye,getStreamInfo:he,getHasAudioTrack:Ae,getHasVideoTrack:ke,startPreloading:Fe,getThumbnailController:Qe,getBitrateListFor:qe,updateData:pe,reset:ft,getProcessors:Wt,setMediaSource:$e,isMediaCodecCompatible:Ye,isProtectionCompatible:lt,getPreloaded:Ot,getIsEndedEventSignaled:Et,setIsEndedEventSignaled:St,getAdapter:we,getHasFinishedBuffering:At,setPreloaded:ut,startScheduleControllers:$t,prepareTrackChange:it,prepareQualityChange:Ie},B(),J}_.__dashjs_factory_name="Stream",g.default=n.default.getClassFactory(_)},"./src/streaming/StreamProcessor.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/dash/constants/DashConstants.js"),u=r("./src/streaming/constants/MetricsConstants.js"),m=r("./src/streaming/models/FragmentModel.js"),y=r("./src/streaming/controllers/BufferController.js"),T=r("./src/streaming/text/NotFragmentedTextBufferController.js"),E=r("./src/streaming/controllers/ScheduleController.js"),t=r("./src/dash/controllers/RepresentationController.js"),e=r("./src/core/FactoryMaker.js"),n=r("./src/streaming/utils/SupervisorTools.js"),i=r("./src/core/EventBus.js"),d=r("./src/core/events/Events.js"),P=r("./src/dash/DashHandler.js"),b=r("./src/core/errors/Errors.js"),A=r("./src/streaming/vo/DashJSError.js"),_=r("./src/core/Debug.js"),h=r("./src/streaming/utils/RequestModifier.js"),f=r("./src/streaming/utils/URLUtils.js"),v=r("./src/streaming/utils/BoxParser.js"),c=r("./src/streaming/vo/metrics/PlayList.js"),S=r("./src/dash/controllers/SegmentsController.js"),p=r("./src/streaming/vo/metrics/HTTPRequest.js");function C(x){x=x||{};var V=this.context,H=Object(i.default)(V).getInstance(),te=x.streamInfo,w=x.type,F=x.errHandler,M=x.mimeType,U=x.timelineConverter,j=x.adapter,X=x.manifestModel,Y=x.mediaPlayerModel,se=x.fragmentModel,G=x.abrController,ee=x.playbackController,J=x.mediaController,ie=x.textController,ue=x.dashMetrics,ae=x.settings,oe=x.boxParser,Z=x.segmentBlacklistController,ge,le,z,K,R,L,$,O,Q,ne,ce,W,B;function D(){le=Object(_.default)(V).getInstance().getLogger(ge),Se(),H.on(d.default.DATA_UPDATE_COMPLETED,tt,ge,{priority:i.default.EVENT_PRIORITY_HIGH}),H.on(d.default.INIT_FRAGMENT_NEEDED,Pe,ge),H.on(d.default.MEDIA_FRAGMENT_NEEDED,Ue,ge),H.on(d.default.MEDIA_FRAGMENT_LOADED,Ze,ge),H.on(d.default.BUFFER_LEVEL_STATE_CHANGED,ft,ge),H.on(d.default.BUFFER_CLEARED,bt,ge),H.on(d.default.SEEK_TARGET,et,ge),H.on(d.default.FRAGMENT_LOADING_ABANDONED,Ae,ge),H.on(d.default.FRAGMENT_LOADING_COMPLETED,ke,ge),H.on(d.default.QUOTA_EXCEEDED,at,ge),H.on(d.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Ge,ge),H.on(d.default.SET_NON_FRAGMENTED_TEXT,qe,ge),H.on(d.default.SOURCE_BUFFER_ERROR,Et,ge)}function q(xe,ct,Tt){W=Object(S.default)(V).create({events:d.default,eventBus:H,streamInfo:te,timelineConverter:U,dashConstants:l.default,segmentBaseController:x.segmentBaseController,type:w}),ce=Object(P.default)(V).create({streamInfo:te,type:w,timelineConverter:U,dashMetrics:ue,mediaPlayerModel:Y,baseURLController:x.baseURLController,errHandler:F,segmentsController:W,settings:ae,boxParser:oe,events:d.default,eventBus:H,errors:b.default,debug:Object(_.default)(V).getInstance(),requestModifier:Object(h.default)(V).getInstance(),dashConstants:l.default,constants:o.default,urlUtils:Object(f.default)(V).getInstance()}),z=te.manifestInfo.isDynamic,ce.initialize(z),G.registerStreamType(w,ge),O=Object(t.default)(V).create({streamInfo:te,type:w,abrController:G,dashMetrics:ue,playbackController:ee,timelineConverter:U,dashConstants:l.default,events:d.default,eventBus:H,errors:b.default,isDynamic:z,segmentsController:W}),L=Be(w,Tt),L&&L.initialize(xe),$=Object(E.default)(V).create({streamInfo:te,type:w,mimeType:M,adapter:j,dashMetrics:ue,mediaPlayerModel:Y,fragmentModel:se,abrController:G,playbackController:ee,textController:ie,mediaController:J,bufferController:L,settings:ae}),$.initialize(ct),B=0,Q=!1}function me(){return te.id}function de(){return w}function ve(){return j.getIsTextTrack(O.getData())}function Se(){R=[],K=null,B=0,Q=!1,ne=!1}function be(xe,ct){ce&&ce.reset(),L&&(L.reset(xe,ct),L=null),$&&($.reset(),$=null),O&&(O.reset(),O=null),W&&(W=null),G&&G.unRegisterStreamType(me(),w),H.off(d.default.DATA_UPDATE_COMPLETED,tt,ge),H.off(d.default.INIT_FRAGMENT_NEEDED,Pe,ge),H.off(d.default.MEDIA_FRAGMENT_NEEDED,Ue,ge),H.off(d.default.MEDIA_FRAGMENT_LOADED,Ze,ge),H.off(d.default.BUFFER_LEVEL_STATE_CHANGED,ft,ge),H.off(d.default.BUFFER_CLEARED,bt,ge),H.off(d.default.SEEK_TARGET,et,ge),H.off(d.default.FRAGMENT_LOADING_ABANDONED,Ae,ge),H.off(d.default.FRAGMENT_LOADING_COMPLETED,ke,ge),H.off(d.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,Ge,ge),H.off(d.default.SET_NON_FRAGMENTED_TEXT,qe,ge),H.off(d.default.QUOTA_EXCEEDED,at,ge),H.off(d.default.SOURCE_BUFFER_ERROR,Et,ge),Se(),w=null,te=null}function Me(){return O?O.isUpdating():!1}function Fe(xe){return new Promise(function(ct){var Tt=L.hasBufferAtTime(xe.seekTime);if(Tt){L.pruneBuffer(),ct();return}$.clearScheduleTimer(),se.abortRequests(),L.prepareForPlaybackSeek().then(function(){var Rt=L.getAllRangesWithSafetyFactor(xe.seekTime);return L.clearBuffers(Rt)}).then(function(){var Rt=L.getContinuousBufferTimeForTargetTime(xe.seekTime);if(!isNaN(Rt)&&!isNaN(te.duration)&&isFinite(te.duration)&&Rt>=te.start+te.duration)L.setIsBufferingCompleted(!0),ct();else{var jt=isNaN(Rt)?xe.seekTime:Rt;vt(jt),L.setSeekTarget(jt);var zt=[];zt.push(L.updateAppendWindow());var Vt=Ye();zt.push(L.updateBufferTimestampOffset(Vt)),Promise.all(zt).then(function(){$.setInitSegmentRequired(!0),$.setCheckPlaybackQuality(!1),$.startScheduleTimer(),ct()})}}).catch(function(Rt){le.error(Rt)})})}function Ee(){return new Promise(function(xe,ct){try{$.clearScheduleTimer(),se.abortRequests(),L.prepareForPlaybackSeek().then(function(){return L.pruneAllSafely()}).then(function(){xe()})}catch(Tt){ct(Tt)}})}function Pe(xe){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(xe.sender){if(ee.getIsManifestUpdateInProgress()){$e();return}if(!(ve()&&!ie.isTextEnabled())&&L&&xe.representationId&&!L.appendInitSegmentFromCache(xe.representationId)){var Tt=O.getCurrentRepresentation();if(Tt.range===0){Ue();return}var Rt=ce?ce.getInitRequest(K,Tt):null;Rt?se.executeRequest(Rt):ct&&($.setInitSegmentRequired(!0),$e())}}}function Ue(xe){var ct=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(ee.getIsManifestUpdateInProgress()||L.getIsPruningInProgress()){$e();return}var Tt=ze();Tt?(Q=!1,Re(Tt)):Ke(ct)}function Re(xe){isNaN(xe.startTime+xe.duration)||(B=xe.startTime+xe.duration),xe.delayLoadingTime=new Date().getTime()+$.getTimeToLoadDelay(),$.setTimeToLoadDelay(0),Ne(xe)?(le.warn("Fragment request url ".concat(xe.url," for stream id ").concat(te.id," and media type ").concat(w," is on the ignore list and will be skipped")),$e()):(le.debug("Next fragment request url for stream id ".concat(te.id," and media type ").concat(w," is ").concat(xe.url)),se.executeRequest(xe))}function Ke(xe){var ct=O.getCurrentRepresentation();if(ae.get().streaming.gaps.enableSeekFix&&(Q||ee.getTime()===0)){var Tt;if(z?z&&ct.segmentInfoType===l.default.SEGMENT_TIMELINE&&(Tt=ce.getValidTimeAheadOfTargetTime(B,K,ct,ae.get().streaming.gaps.threshold)):Tt=ce.getValidTimeAheadOfTargetTime(B,K,ct,ae.get().streaming.gaps.threshold),!isNaN(Tt)&&Tt!==B){ee.isSeeking()||ee.getTime()===0?(le.warn("Adjusting playback time ".concat(Tt," because of gap in the manifest. Seeking by ").concat(Tt-B)),ee.seek(Tt,!1,!1)):(le.warn("Adjusting buffering time ".concat(Tt," because of gap in the manifest. Adjusting time by ").concat(Tt-B)),vt(Tt),xe&&$e());return}}var Rt=ce.isLastSegmentRequested(ct,B);if(Rt){var jt=ce.getCurrentIndex();le.debug("Segment requesting for stream ".concat(te.id," has finished")),H.trigger(d.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:jt},{streamId:te.id,mediaType:w}),L.segmentRequestingCompleted(jt),$.clearScheduleTimer();return}xe&&$e()}function Ne(xe){var ct=xe.url;return xe.range&&(ct=ct.concat("_",xe.range)),Z.contains(ct)}function ze(){var xe=Ye(),ct;if(isNaN(B)||de()===o.default.TEXT&&!ie.isTextEnabled())return null;var Tt=Q;if(ce){var Rt=O&&xe?O.getRepresentationForQuality(xe.quality):null;Tt?ct=ce.getSegmentRequestForTime(K,Rt,B):ct=ce.getNextSegmentRequest(K,Rt)}return ct}function $e(){$.startScheduleTimer(ee.getLowLatencyModeEnabled()?ae.get().streaming.scheduling.lowLatencyTimeout:ae.get().streaming.scheduling.defaultTimeout)}function tt(xe){xe.error||($.setCurrentRepresentation(j.convertRepresentationToRepresentationInfo(xe.currentRepresentation)),L.getIsBufferingCompleted()||L.updateBufferTimestampOffset(xe.currentRepresentation))}function ft(xe){ue.addBufferState(w,xe.state,$.getBufferTarget()),xe.state===u.default.BUFFER_EMPTY&&!ee.isSeeking()&&(le.info("Buffer is empty! Stalling!"),ue.pushPlayListTraceMetrics(new Date,c.PlayListTrace.REBUFFERING_REASON))}function bt(xe){se.syncExecutedRequestsWithBufferedRange(L.getBuffer().getAllBufferRanges(),te.duration),xe.quotaExceeded&&xe.from>ee.getTime()&&vt(xe.from),xe.hasEnoughSpaceToAppend&&xe.quotaExceeded&&$.startScheduleTimer()}function Et(xe){if(!(!xe||!xe.lastRequestAppended||!xe.lastRequestAppended.url)){var ct=xe.lastRequestAppended.url;xe.lastRequestAppended.range&&(ct=ct.concat("_",xe.lastRequestAppended.range)),le.warn("Blacklisting segment with url ".concat(ct)),Z.add(ct)}}function St(xe){le.debug("Preparing quality switch for type ".concat(w));var ct=xe.newQuality;ne=!0,$.clearScheduleTimer();var Tt=Ye(ct);$.setCurrentRepresentation(Tt),O.prepareQualityChange(ct),se.abortRequests(),L.updateBufferTimestampOffset(Tt).then(function(){xe.reason&&xe.reason.forceReplace?Ct():ae.get().streaming.buffer.fastSwitchEnabled?ye(Tt):he(),ue.pushPlayListTraceMetrics(new Date,c.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),ue.createPlaylistTraceMetrics(Tt.id,ee.getTime()*1e3,ee.getPlaybackRate())})}function Ct(){H.trigger(d.default.BUFFER_REPLACEMENT_STARTED,{mediaType:w,streamId:te.id},{mediaType:w,streamId:te.id}),L.prepareForReplacementQualitySwitch().then(function(){we(),ne=!1}).catch(function(){we(),ne=!1})}function ye(xe){var ct=ee.getTime(),Tt=1.5*(isNaN(xe.fragmentDuration)?1:xe.fragmentDuration),Rt=se.getRequests({state:m.default.FRAGMENT_MODEL_EXECUTED,time:ct+Tt,threshold:0})[0];if(Rt&&!ve()){var jt=L.getBufferLevel(),zt=G.getAbandonmentStateFor(te.id,w);if(Rt.quality<xe.quality&&jt>=Tt&&zt!==u.default.ABANDON_LOAD){var Vt=ct+Tt;vt(Vt),$.setCheckPlaybackQuality(!1),$.startScheduleTimer()}else he()}else $.startScheduleTimer();ne=!1}function he(){Oe(),ne=!1}function Ae(xe){le.info("onFragmentLoadingAbandoned request: "+xe.request.url+" has been aborted"),!ee.isSeeking()&&!$.getSwitchStrack()&&!ne&&(le.info("onFragmentLoadingAbandoned request: "+xe.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),xe.request&&xe.request.isInitializationRequest()?$.setInitSegmentRequired(!0):vt(xe.request.startTime+xe.request.duration/2),$.startScheduleTimer(0))}function ke(xe){le.info("OnFragmentLoadingCompleted for stream id "+te.id+" and media type "+w+" - Url:",xe.request?xe.request.url:"undefined",xe.request.range?", Range:"+xe.request.range:""),ve()&&$.startScheduleTimer(0),xe.error&&xe.request.serviceLocation&&Qe(xe)}function Qe(xe){le.info("Fragment loading completed with an error"),!(!xe||!xe.request||!xe.request.type)&&(xe.request.type===p.HTTPRequest.INIT_SEGMENT_TYPE?Pe({representationId:xe.request.representationId,sender:{}},!1):xe.request.type===p.HTTPRequest.MEDIA_SEGMENT_TYPE&&(vt(xe.request.startTime+xe.request.duration/2),Ue({},!1)))}function Ge(){vt(ee.getTime()),pe().startScheduleTimer()}function qe(xe){var ct=xe.currentTrackInfo;if(ct){var Tt=R.find(function(Rt){return Rt.index===ct.index&&Rt.lang===ct.lang});Tt&&ht(Tt).then(function(){L.setIsBufferingCompleted(!1),vt(ee.getTime()),$.setInitSegmentRequired(!0),$.startScheduleTimer()})}}function at(xe){vt(xe.quotaExceededTime),$.clearScheduleTimer()}function it(){return O}function Ie(){return L?L.getBuffer():null}function He(){return L}function Xe(){return se}function nt(xe){return te=xe,lt()?Promise.resolve():L.updateAppendWindow()}function mt(){return te}function ht(xe){xe!==K&&(!xe||!K||xe.type===K.type)&&(K=xe);var ct=j.getRealAdaptation(te,K),Tt=j.getVoRepresentations(K);if(O){var Rt=O.getData(),jt=G.getMaxAllowedIndexFor(w,te.id),zt=G.getMinAllowedIndexFor(w,te.id),Vt,Gt,sr=null;return(Rt===null||Rt.id!==ct.id)&&w!==o.default.TEXT?(Gt=G.getThroughputHistory().getAverageThroughput(w,z),sr=Gt||G.getInitialBitrateFor(w,te.id),Vt=G.getQualityForBitrate(K,sr,te.id)):Vt=G.getQualityFor(w,te.id),zt!==void 0&&Vt<zt&&(Vt=zt),Vt>jt&&(Vt=jt),O.updateData(ct,Tt,w,K.isFragmented,Vt)}else return Promise.resolve()}function _t(xe){R.indexOf(xe)===-1&&R.push(xe)}function wt(){R=[]}function ot(){return K}function Wt(){return L.getMediaSource()}function $t(xe){L.setMediaSource(xe)}function pe(){return $}function Ye(xe){var ct;return xe!==void 0?(Object(n.checkInteger)(xe),ct=O?O.getRepresentationForQuality(xe):null):ct=O?O.getCurrentRepresentation():null,j.convertRepresentationToRepresentationInfo(ct)}function lt(){return L?L.getIsBufferingCompleted():!1}function De(){return L?L.getBufferLevel():0}function je(){var xe=Ye(),ct=O&&xe?O.getRepresentationForQuality(xe.quality):null,Tt=ce.getNextSegmentRequestIdempotent(K,ct);return Tt}function Ze(xe){var ct=xe.chunk,Tt=ct.bytes,Rt=ct.quality,jt=Ye(Rt),zt=O&&jt?O.getRepresentationForQuality(jt.quality):null;if(jt&&zt){var Vt=j.getEventsFor(jt.mediaInfo,null,te),Gt=j.getEventsFor(jt,zt,te);if(Vt&&Vt.length>0||Gt&&Gt.length>0){var sr=se.getRequests({state:m.default.FRAGMENT_MODEL_EXECUTED,quality:Rt,index:ct.index})[0],gr=ut(Tt,sr,Vt,Gt);H.trigger(d.default.INBAND_EVENTS,{events:gr},{streamId:te.id})}}}function ut(xe,ct,Tt,Rt){try{for(var jt={},zt=[],Vt=Tt.concat(Rt),Gt=0,sr=Vt.length;Gt<sr;Gt++)jt[Vt[Gt].schemeIdUri+"/"+Vt[Gt].value]=Vt[Gt];var gr=Object(v.default)(V).getInstance().parse(xe),tr=gr.getBoxes("emsg");if(!tr||tr.length===0)return zt;for(var lr=gr.getBox("sidx"),ur=lr&&!isNaN(lr.earliest_presentation_time)&&!isNaN(lr.timescale)?lr.earliest_presentation_time/lr.timescale:ct&&!isNaN(ct.mediaStartTime)?ct.mediaStartTime:0,br=Math.max(ur,0),N=O.getCurrentRepresentation(),re=0,k=tr.length;re<k;re++){var fe=j.getEvent(tr[re],jt,br,N);fe&&zt.push(fe)}return zt}catch{return[]}}function Ot(xe){var ct=Ie();return ct?Promise.resolve(ct):L?L.createBufferSink(K,xe):Promise.resolve(null)}function At(){return new Promise(function(xe){le.debug("Preparing track switch for type ".concat(w));var ct=w===o.default.TEXT||ae.get().streaming.trackSwitchMode[w]===o.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&ee.getTimeToStreamEnd(te)>ae.get().streaming.buffer.stallThreshold;if(L.getIsBufferingCompleted()&&!ct){L.prepareForNonReplacementTrackSwitch(K.codec).then(function(){H.trigger(d.default.BUFFERING_COMPLETED,{},{streamId:te.id,mediaType:w})}).catch(function(){H.trigger(d.default.BUFFERING_COMPLETED,{},{streamId:te.id,mediaType:w})}),xe();return}$.clearScheduleTimer(),$.setSwitchTrack(!0),ct?(H.trigger(d.default.BUFFER_REPLACEMENT_STARTED,{mediaType:w,streamId:te.id},{mediaType:w,streamId:te.id}),se.abortRequests(),L.prepareForReplacementTrackSwitch(K.codec).then(function(){var Tt=Ye();return L.updateBufferTimestampOffset(Tt)}).then(function(){we(),xe()}).catch(function(){we(),xe()})):L.prepareForNonReplacementTrackSwitch(K.codec).then(function(){Oe(),xe()}).catch(function(){Oe(),xe()})})}function we(){var xe=ee.getTime();ae.get().streaming.buffer.flushBufferAtTrackSwitch&&ee.seek(xe+.001,!1,!0),vt(xe),L.setSeekTarget(xe),$.startScheduleTimer()}function Oe(){var xe=ee.getTime(),ct=L.getContinuousBufferTimeForTargetTime(xe),Tt=isNaN(ct)?xe:ct;vt(Tt),$.startScheduleTimer()}function Be(xe,ct){var Tt=null;return xe?(xe===o.default.TEXT&&!ct?Tt=Object(T.default)(V).create({streamInfo:te,type:xe,mimeType:M,fragmentModel:se,textController:ie,errHandler:F,settings:ae}):Tt=Object(y.default)(V).create({streamInfo:te,type:xe,mediaPlayerModel:Y,manifestModel:X,fragmentModel:se,errHandler:F,mediaController:J,representationController:O,adapter:j,textController:ie,abrController:G,playbackController:ee,settings:ae}),Tt):(F.error(new A.default(b.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,b.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}function et(xe){xe&&!isNaN(xe.time)&&(vt(xe.time),L.setSeekTarget(xe.time))}function vt(xe){B=xe,Q=!0}function pt(xe,ct){ue.pushPlayListTraceMetrics(xe,ct)}return ge={initialize:q,getStreamId:me,getType:de,isUpdating:Me,getBufferController:He,getFragmentModel:Xe,getScheduleController:pe,getRepresentationController:it,getRepresentationInfo:Ye,getBufferLevel:De,isBufferingCompleted:lt,createBufferSinks:Ot,updateStreamInfo:nt,getStreamInfo:mt,selectMediaInfo:ht,clearMediaInfoArray:wt,addMediaInfo:_t,prepareTrackSwitch:At,prepareQualityChange:St,getMediaInfo:ot,getMediaSource:Wt,setMediaSource:$t,getBuffer:Ie,setExplicitBufferingTime:vt,finalisePlayList:pt,probeNextRequest:je,prepareInnerPeriodPlaybackSeeking:Fe,prepareOuterPeriodPlaybackSeeking:Ee,reset:be},D(),ge}C.__dashjs_factory_name="StreamProcessor",g.default=e.default.getClassFactory(C)},"./src/streaming/XlinkLoader.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/vo/DashJSError.js"),l=r("./src/streaming/net/URLLoader.js"),u=r("./src/streaming/vo/metrics/HTTPRequest.js"),m=r("./src/streaming/vo/TextRequest.js"),y=r("./src/core/EventBus.js"),T=r("./src/core/events/Events.js"),E=r("./src/core/FactoryMaker.js"),t=r("./src/core/errors/Errors.js");function e(n){n=n||{};var i="urn:mpeg:dash:resolve-to-zero:2013",d=this.context,P=Object(y.default)(d).getInstance(),b=Object(l.default)(d).create({errHandler:n.errHandler,dashMetrics:n.dashMetrics,mediaPlayerModel:n.mediaPlayerModel,requestModifier:n.requestModifier,errors:t.default}),A;function _(f,v,c){var S=function(x,V){v.resolved=!0,v.resolvedContent=x||null,P.trigger(T.default.XLINK_ELEMENT_LOADED,{element:v,resolveObject:c,error:x||V?null:new o.default(t.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,t.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+f)})};if(f===i)S(null,!0);else{var p=new m.default(f,u.HTTPRequest.XLINK_EXPANSION_TYPE);b.load({request:p,success:function(x){S(x)},error:function(){S(null)}})}}function h(){b&&(b.abort(),b=null)}return A={load:_,reset:h},A}e.__dashjs_factory_name="XlinkLoader",g.default=E.default.getClassFactory(e)},"./src/streaming/constants/ConformanceViolationConstants.js":function(I,g,r){"use strict";r.r(g),g.default={LEVELS:{SUGGESTION:"Suggestion",WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}}},"./src/streaming/constants/Constants.js":function(I,g,r){"use strict";r.r(g);function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,y(d.key),d)}}function m(e,n,i){return n&&u(e.prototype,n),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var n=T(e,"string");return o(n)==="symbol"?n:String(n)}function T(e,n){if(o(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(o(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var E=function(){function e(){l(this,e),this.init()}return m(e,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.CONTENT_STEERING="contentSteering",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_L2A="abrL2A",this.ABR_STRATEGY_LoLP="abrLoLP",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA="abrFetchThroughputCalculationDownloadedData",this.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING="abrFetchThroughputCalculationMoofParsing",this.ABR_FETCH_THROUGHPUT_CALCULATION_AAST="abrFetchThroughputCalculationAAST",this.LIVE_CATCHUP_MODE_DEFAULT="liveCatchupModeDefault",this.LIVE_CATCHUP_MODE_LOLP="liveCatchupModeLoLP",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",this.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",this.TRACK_SELECTION_MODE_FIRST_TRACK="firstTrack",this.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",this.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY="highestEfficiency",this.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",this.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY="highestSelectionPriority",this.CMCD_MODE_QUERY="query",this.CMCD_MODE_HEADER="header",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019",this.XML="XML",this.ARRAY_BUFFER="ArrayBuffer",this.DVB_REPORTING_URL="dvb:reportingUrl",this.DVB_PROBABILITY="dvb:probability",this.VIDEO_ELEMENT_READY_STATES={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},this.FILE_LOADER_TYPES={FETCH:"fetch_loader",XHR:"xhr_loader"}}}]),e}(),t=new E;g.default=t},"./src/streaming/constants/MetricsConstants.js":function(I,g,r){"use strict";r.r(g);function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,y(d.key),d)}}function m(e,n,i){return n&&u(e.prototype,n),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var n=T(e,"string");return o(n)==="symbol"?n:String(n)}function T(e,n){if(o(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(o(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var E=function(){function e(){l(this,e),this.init()}return m(e,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors",this.HTTP_REQUEST_DVB_REPORTING_TYPE="DVBReporting"}}]),e}(),t=new E;g.default=t},"./src/streaming/constants/ProtectionConstants.js":function(I,g,r){"use strict";r.r(g);function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,y(d.key),d)}}function m(e,n,i){return n&&u(e.prototype,n),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var n=T(e,"string");return o(n)==="symbol"?n:String(n)}function T(e,n){if(o(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(o(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var E=function(){function e(){l(this,e),this.init()}return m(e,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready",this.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING="com.microsoft.playready.recommendation",this.INITIALIZATION_DATA_TYPE_CENC="cenc",this.INITIALIZATION_DATA_TYPE_KEYIDS="keyids",this.INITIALIZATION_DATA_TYPE_WEBM="webm"}}]),e}(),t=new E;g.default=t},"./src/streaming/controllers/AbrController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/rules/abr/ABRRulesCollection.js"),l=r("./src/streaming/constants/Constants.js"),u=r("./src/streaming/constants/MetricsConstants.js"),m=r("./src/streaming/vo/BitrateInfo.js"),y=r("./src/streaming/models/FragmentModel.js"),T=r("./src/core/EventBus.js"),E=r("./src/core/events/Events.js"),t=r("./src/core/FactoryMaker.js"),e=r("./src/streaming/rules/RulesContext.js"),n=r("./src/streaming/rules/SwitchRequest.js"),i=r("./src/streaming/rules/SwitchRequestHistory.js"),d=r("./src/streaming/rules/DroppedFramesHistory.js"),P=r("./src/streaming/rules/ThroughputHistory.js"),b=r("./src/core/Debug.js"),A=r("./src/streaming/vo/metrics/HTTPRequest.js"),_=r("./src/streaming/utils/SupervisorTools.js"),h=r("./src/streaming/MediaPlayerEvents.js"),f=1e3,v=100,c=0;function S(){var C=this.context,x=Object(b.default)(C).getInstance(),V=Object(T.default)(C).getInstance(),H,te,w,F,M,U,j,X,Y,se,G,ee,J,ie,ue,ae,oe,Z,ge,le,z,K,R,L,$,O;function Q(){te=x.getLogger(H),D()}function ne(){le=Object(d.default)(C).create(),z=Object(P.default)(C).create({settings:O}),w=Object(o.default)(C).create({dashMetrics:$,customParametersModel:ae,mediaPlayerModel:ue,settings:O}),w.initialize(),V.on(h.default.QUALITY_CHANGE_RENDERED,Se,H),V.on(h.default.METRIC_ADDED,be,H),V.on(E.default.LOADING_PROGRESS,ve,H)}function ce(Ie,He){var Xe=He.getStreamInfo().id;j[Xe]||(j[Xe]={}),ge[Xe]||(ge[Xe]={}),X[Xe]||(X[Xe]={}),ge[Xe][Ie]=Object(i.default)(C).create(),j[Xe][Ie]=He,X[Xe][Ie]={},X[Xe][Ie].state=u.default.ALLOW_LOAD,W(Ie),Ie===l.default.VIDEO&&at()}function W(Ie){var He=O.get().streaming.abr.ABRStrategy;He===l.default.ABR_STRATEGY_L2A?(K[Ie]=!1,L[Ie]=!1,R[Ie]=!0):He===l.default.ABR_STRATEGY_LoLP?(K[Ie]=!1,L[Ie]=!0,R[Ie]=!1):He===l.default.ABR_STRATEGY_BOLA?(K[Ie]=!0,L[Ie]=!1,R[Ie]=!1):He===l.default.ABR_STRATEGY_THROUGHPUT?(K[Ie]=!1,L[Ie]=!1,R[Ie]=!1):He===l.default.ABR_STRATEGY_DYNAMIC&&(K[Ie]=K&&K[Ie]?K[Ie]:!1,L[Ie]=!1,R[Ie]=!1)}function B(Ie,He){try{j[Ie]&&j[Ie][He]&&delete j[Ie][He],ge[Ie]&&ge[Ie][He]&&delete ge[Ie][He],X[Ie]&&X[Ie][He]&&delete X[Ie][He]}catch{}}function D(){M={},U={},X={},j={},ge={},K={},R={},L={},se===void 0&&(se=!1),le&&le.reset(),Z=void 0,le=void 0,z=void 0,clearTimeout(Y),Y=null}function q(){D(),V.off(E.default.LOADING_PROGRESS,ve,H),V.off(h.default.QUALITY_CHANGE_RENDERED,Se,H),V.off(h.default.METRIC_ADDED,be,H),w&&w.reset()}function me(Ie){Ie&&(Ie.streamController&&(F=Ie.streamController),Ie.domStorage&&(oe=Ie.domStorage),Ie.mediaPlayerModel&&(ue=Ie.mediaPlayerModel),Ie.customParametersModel&&(ae=Ie.customParametersModel),Ie.dashMetrics&&($=Ie.dashMetrics),Ie.adapter&&(J=Ie.adapter),Ie.videoModel&&(ie=Ie.videoModel),Ie.settings&&(O=Ie.settings))}function de(){if(!oe||!oe.hasOwnProperty("getSavedBitrateSettings"))throw new Error(l.default.MISSING_CONFIG_ERROR)}function ve(Ie){var He=Ie.request.mediaType,Xe=Ie.streamId;if(!(!He||!Xe||!j[Xe]||!O.get().streaming.abr.autoSwitchBitrate[He])){var nt=j[Xe][He];if(nt){var mt=Object(e.default)(C).create({abrController:H,streamProcessor:nt,currentRequest:Ie.request,useBufferOccupancyABR:K[He],useL2AABR:R[He],useLoLPABR:L[He],videoModel:ie}),ht=w.shouldAbandonFragment(mt,Xe);if(ht.quality>n.default.NO_CHANGE){var _t=nt.getFragmentModel(),wt=_t.getRequests({state:y.default.FRAGMENT_MODEL_LOADING,index:Ie.request.index})[0];wt&&(X[Xe][He].state=u.default.ABANDON_LOAD,ge[Xe][He].reset(),ge[Xe][He].push({oldValue:tt(He,Xe),newValue:ht.quality,confidence:1,reason:ht.reason}),ft(He,F.getActiveStreamInfo(),ht.quality,ht.reason),clearTimeout(Y),Y=setTimeout(function(){X[Xe][He].state=u.default.ALLOW_LOAD,Y=null},O.get().streaming.abandonLoadTimeout))}}}}function Se(Ie){Ie.mediaType===l.default.VIDEO&&(Z!==void 0&&le.push(Ie.streamId,Z,ie.getPlaybackQuality()),Z=Ie.newQuality)}function be(Ie){Ie.metric===u.default.HTTP_REQUEST&&Ie.value&&Ie.value.type===A.HTTPRequest.MEDIA_SEGMENT_TYPE&&(Ie.mediaType===l.default.AUDIO||Ie.mediaType===l.default.VIDEO)&&z.push(Ie.mediaType,Ie.value,O.get().streaming.abr.useDeadTimeLatency),Ie.metric===u.default.BUFFER_LEVEL&&(Ie.mediaType===l.default.AUDIO||Ie.mediaType===l.default.VIDEO)&&he(Ie.mediaType,.001*Ie.value.level)}function Me(Ie,He){try{var Xe;return M[He]=M[He]||{},M[He].hasOwnProperty(Ie)||(M[He][Ie]=0),Xe=Ue(Ie,He),Xe=Re(Xe,Ie,He),Xe=Ke(Xe,Ie,He),Xe}catch{return}}function Fe(Ie,He){try{return Pe(Ie,He)}catch{return}}function Ee(Ie,He){try{var Xe=ue.getAbrBitrateParameter("maxBitrate",Ie);return Xe>-1?Ct(j[He][Ie].getMediaInfo(),Xe,He):void 0}catch{return}}function Pe(Ie,He){try{var Xe=ue.getAbrBitrateParameter("minBitrate",Ie);if(Xe>-1){var nt=j[He][Ie].getMediaInfo(),mt=ye(nt),ht=Ct(nt,Xe,He);return mt[ht]&&ht<mt.length-1&&mt[ht].bitrate<Xe*1e3&&ht++,ht}else return}catch{return}}function Ue(Ie,He){var Xe=M[He][Ie],nt=Xe;if(!j[He]||!j[He][Ie])return nt;var mt=Fe(Ie,He);mt!==void 0&&(nt=Math.max(Xe,mt));var ht=Ee(Ie,He);return ht!==void 0&&(nt=Math.min(nt,ht)),nt}function Re(Ie,He,Xe){var nt=M[Xe][He],mt=O.get().streaming.abr.maxRepresentationRatio[He];return isNaN(mt)||mt>=1||mt<0?Ie:Math.min(Ie,Math.round(nt*mt))}function Ke(Ie,He,Xe){if(He!==l.default.VIDEO||!O.get().streaming.abr.limitBitrateByPortal||!j[Xe]||!j[Xe][He])return Ie;se||at();var nt=j[Xe][He].getStreamInfo(),mt=J.getAdaptationForType(nt.index,He,nt).Representation_asArray,ht=Ie;if(G>0&&ee>0){for(;ht>0&&mt[ht]&&G<mt[ht].width&&G-mt[ht-1].width<mt[ht].width-G;)ht=ht-1;for(;ht<mt.length-1&&mt[ht].width===mt[ht+1].width;)ht=ht+1}return ht}function Ne(Ie){var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(He||(He=F.getActiveStreamInfo().id),Ie&&j&&j[He]&&j[He][Ie]){var Xe=Me(Ie,He),nt=ye(j[He][Ie].getMediaInfo());return nt[Xe]?nt[Xe]:null}return null}function ze(Ie,He){if(de(),Ie===l.default.TEXT)return NaN;var Xe=oe.getSavedBitrateSettings(Ie),nt=ue.getAbrBitrateParameter("initialBitrate",Ie),mt=O.get().streaming.abr.initialRepresentationRatio[Ie];if(nt===-1)if(mt>-1){var ht=j[He][Ie].getStreamInfo(),_t=J.getAdaptationForType(ht.index,Ie,ht).Representation_asArray;if(Array.isArray(_t)){var wt=Math.max(Math.round(_t.length*mt)-1,0);nt=_t[wt].bandwidth/1e3}else nt=0}else isNaN(Xe)?nt=Ie===l.default.VIDEO?f:v:nt=Xe;return nt}function $e(Ie,He){try{if(!Ie||!j||!j[He]||!j[He][Ie])return!1;if(le){var Xe=ie.getPlaybackQuality();Xe&&le.push(He,Z,Xe)}if(!O.get().streaming.abr.autoSwitchBitrate[Ie])return!1;var nt=tt(Ie,He),mt=Object(e.default)(C).create({abrController:H,switchHistory:ge[He][Ie],droppedFramesHistory:le,streamProcessor:j[He][Ie],currentValue:nt,useBufferOccupancyABR:K[Ie],useL2AABR:R[Ie],useLoLPABR:L[Ie],videoModel:ie}),ht=Fe(Ie,He),_t=Me(Ie,He),wt=w.getMaxQuality(mt),ot=wt.quality;return ht!==void 0&&(ot>n.default.NO_CHANGE?ot:nt)<ht&&(ot=ht),ot>_t&&(ot=_t),ge[He][Ie].push({oldValue:nt,newValue:ot}),ot>n.default.NO_CHANGE&&ot!==nt&&(X[He][Ie].state===u.default.ALLOW_LOAD||ot<nt)?(Et(Ie,nt,ot,_t,wt.reason,He),!0):!1}catch{return!1}}function tt(Ie){var He=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;try{if(He||(He=F.getActiveStreamInfo().id),Ie&&j[He]&&j[He][Ie]){var Xe;if(He)return U[He]=U[He]||{},U[He].hasOwnProperty(Ie)||(U[He][Ie]=c),Xe=U[He][Ie],Xe}return c}catch{return c}}function ft(Ie,He,Xe){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;if(!(!He||!He.id||!Ie)){var mt=He.id,ht=tt(Ie,mt);Object(_.checkInteger)(Xe);var _t=Me(Ie,mt);Xe!==ht&&Xe>=0&&Xe<=_t&&Et(Ie,ht,Xe,_t,nt,mt)}}function bt(Ie,He){return X[Ie]&&X[Ie][He]?X[Ie][He].state:null}function Et(Ie,He,Xe,nt,mt,ht){if(Ie&&j[ht]&&j[ht][Ie]){var _t=j[ht][Ie].getStreamInfo(),wt=_t&&_t.manifestInfo&&_t.manifestInfo.isDynamic,ot=$.getCurrentBufferLevel(Ie);te.info("Stream ID: "+ht+" ["+Ie+"] switch from "+He+" to "+Xe+"/"+nt+" (buffer: "+ot+") "+(mt?JSON.stringify(mt):".")),U[ht]=U[ht]||{},U[ht][Ie]=Xe;var Wt=St(ht,Ie,Xe);V.trigger(E.default.QUALITY_CHANGE_REQUESTED,{oldQuality:He,newQuality:Xe,reason:mt,streamInfo:_t,bitrateInfo:Wt,maxIdx:nt,mediaType:Ie},{streamId:_t.id,mediaType:Ie});var $t=z.getAverageThroughput(Ie,wt);isNaN($t)||oe.setSavedBitrateSettings(Ie,$t)}}function St(Ie,He,Xe){if(He&&j&&j[Ie]&&j[Ie][He]){var nt=ye(j[Ie][He].getMediaInfo());return nt[Xe]?nt[Xe]:null}return null}function Ct(Ie,He,Xe){var nt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,mt=Ie&&Ie.type?j[Xe][Ie.type].getRepresentationInfo():null;if(O.get().streaming.abr.useDeadTimeLatency&&nt&&mt&&mt.fragmentDuration){nt=nt/1e3;var ht=mt.fragmentDuration;if(nt>ht)return 0;var _t=nt/ht;He=He*(1-_t)}for(var wt=ye(Ie),ot=wt.length-1;ot>=0;ot--){var Wt=wt[ot];if(He*1e3>=Wt.bitrate)return ot}return c}function ye(Ie){var He=[];if(!Ie||!Ie.bitrateList)return He;for(var Xe=Ie.bitrateList,nt=Ie.type,mt,ht=0,_t=Xe.length;ht<_t;ht++)mt=new m.default,mt.mediaType=nt,mt.qualityIndex=ht,mt.bitrate=Xe[ht].bandwidth,mt.width=Xe[ht].width,mt.height=Xe[ht].height,mt.scanType=Xe[ht].scanType,He.push(mt);return He}function he(Ie,He){var Xe=O.get().streaming.abr.ABRStrategy;Xe===l.default.ABR_STRATEGY_DYNAMIC&&Ae(Ie,He)}function Ae(Ie,He){try{var Xe=ue.getStableBufferTime(),nt=Xe,mt=.5*Xe,ht=K[Ie],_t=He>(ht?mt:nt);K[Ie]=_t,_t!==ht&&(_t?te.info("["+Ie+"] switching from throughput to buffer occupancy ABR rule (buffer: "+He.toFixed(3)+")."):te.info("["+Ie+"] switching from buffer occupancy to throughput ABR rule (buffer: "+He.toFixed(3)+")."))}catch(wt){te.error(wt)}}function ke(){return z}function Qe(Ie){var He=Ie.type,Xe=Ie.streamInfo.id,nt=Ie.representationCount-1;return M[Xe]=M[Xe]||{},M[Xe][He]=nt,nt}function Ge(Ie){var He=Ie?Ie.id:null,Xe=tt(l.default.AUDIO,He),nt=tt(l.default.VIDEO,He),mt=Xe===Me(l.default.AUDIO,He)&&nt===Me(l.default.VIDEO,He);return mt}function qe(Ie){se=Ie}function at(){if(ie){var Ie=O.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio"),He=Ie?window.devicePixelRatio:1;G=ie.getClientWidth()*He,ee=ie.getClientHeight()*He}}function it(Ie){le&&le.clearForStream(Ie),j[Ie]&&delete j[Ie],ge[Ie]&&delete ge[Ie],X[Ie]&&delete X[Ie]}return H={initialize:ne,isPlayingAtTopQuality:Ge,updateTopQualityIndex:Qe,clearDataForStream:it,getThroughputHistory:ke,getBitrateList:ye,getQualityForBitrate:Ct,getTopBitrateInfoFor:Ne,getMinAllowedIndexFor:Fe,getMaxAllowedIndexFor:Me,getInitialBitrateFor:ze,getQualityFor:tt,getAbandonmentStateFor:bt,setPlaybackQuality:ft,checkPlaybackQuality:$e,setElementSize:at,setWindowResizeEventCalled:qe,registerStreamType:ce,unRegisterStreamType:B,setConfig:me,reset:q},Q(),H}S.__dashjs_factory_name="AbrController";var p=t.default.getSingletonFactory(S);p.QUALITY_DEFAULT=c,t.default.updateSingletonFactory(S.__dashjs_factory_name,p),g.default=p},"./src/streaming/controllers/BaseURLController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/models/BaseURLTreeModel.js"),l=r("./src/streaming/utils/BaseURLSelector.js"),u=r("./src/streaming/utils/URLUtils.js"),m=r("./src/dash/vo/BaseURL.js"),y=r("./src/core/FactoryMaker.js"),T=r("./src/core/EventBus.js"),E=r("./src/core/events/Events.js");function t(){var e,n,i=this.context,d=Object(T.default)(i).getInstance(),P=Object(u.default)(i).getInstance(),b,A;function _(C){b.invalidateSelectedIndexes(C.entry)}function h(){b=Object(o.default)(i).create(),A=Object(l.default)(i).create(),d.on(E.default.SERVICE_LOCATION_BLACKLIST_CHANGED,_,e)}function f(C){C.baseURLTreeModel&&(b=C.baseURLTreeModel),C.baseURLSelector&&(A=C.baseURLSelector),C.adapter&&(n=C.adapter)}function v(C){b.update(C),A.chooseSelector(n.getIsDVB(C))}function c(C){var x=b.getForPath(C),V=x.reduce(function(H,te){var w=A.select(te);if(w)P.isRelative(w.url)?H.url=P.resolve(w.url,H.url):(H.url=w.url,H.serviceLocation=w.serviceLocation),H.availabilityTimeOffset=w.availabilityTimeOffset,H.availabilityTimeComplete=w.availabilityTimeComplete;else return new m.default;return H},new m.default);if(!P.isRelative(V.url))return V}function S(){b.reset(),A.reset()}function p(C){b.setConfig({adapter:n}),v(C)}return e={reset:S,initialize:p,resolve:c,setConfig:f},h(),e}t.__dashjs_factory_name="BaseURLController",g.default=y.default.getClassFactory(t)},"./src/streaming/controllers/BlacklistController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/EventBus.js");function u(m){m=m||{};var y,T=[],E=Object(l.default)(this.context).getInstance(),t=m.updateEventName,e=m.addBlacklistEventName;function n(A){return!T.length||!A||!A.length?!1:T.indexOf(A)!==-1}function i(A){T.indexOf(A)===-1&&(T.push(A),E.trigger(t,{entry:A}))}function d(A){i(A.entry)}function P(){e&&E.on(e,d,y)}function b(){T=[]}return y={add:i,contains:n,reset:b},P(),y}u.__dashjs_factory_name="BlackListController",g.default=o.default.getClassFactory(u)},"./src/streaming/controllers/BufferController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/constants/MetricsConstants.js"),u=r("./src/streaming/models/FragmentModel.js"),m=r("./src/streaming/SourceBufferSink.js"),y=r("./src/core/EventBus.js"),T=r("./src/core/events/Events.js"),E=r("./src/core/FactoryMaker.js"),t=r("./src/core/Debug.js"),e=r("./src/streaming/utils/InitCache.js"),n=r("./src/streaming/vo/DashJSError.js"),i=r("./src/core/errors/Errors.js"),d=r("./src/streaming/vo/metrics/HTTPRequest.js"),P=r("./src/streaming/MediaPlayerEvents.js"),b=.5,A=.01,_=22,h="BufferController";function f(v){v=v||{};var c=this.context,S=Object(y.default)(c).getInstance(),p=v.errHandler,C=v.fragmentModel,x=v.representationController,V=v.adapter,H=v.textController,te=v.abrController,w=v.playbackController,F=v.streamInfo,M=v.type,U=v.settings,j,X,Y,se,G,ee,J,ie,ue,ae,oe,Z,ge,le,z,K,R,L;function $(){X=Object(t.default)(c).getInstance().getLogger(j),z=Object(e.default)(c).getInstance(),Ot()}function O(we){W(we),S.on(T.default.INIT_FRAGMENT_LOADED,me,j),S.on(T.default.MEDIA_FRAGMENT_LOADED,ve,j),S.on(T.default.WALLCLOCK_TIME_UPDATED,ht,j),S.on(P.default.PLAYBACK_PLAYING,Et,j),S.on(P.default.PLAYBACK_PROGRESS,ft,j),S.on(P.default.PLAYBACK_TIME_UPDATED,ft,j),S.on(P.default.PLAYBACK_RATE_CHANGED,_t,j),S.on(P.default.PLAYBACK_STALLED,bt,j)}function Q(){return F.id}function ne(){return M}function ce(){return h}function W(we){ee=we}function B(we){return V.convertRepresentationToRepresentationInfo(x.getRepresentationForQuality(we))}function D(we){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return new Promise(function(Be,et){if(!z||!we||!ee){Be(null);return}var vt=te.getQualityFor(M,F.id);ue=Object(m.default)(c).create({mediaSource:ee,textController:H,eventBus:S}),q(we,Oe,vt).then(function(){return Xe(B(vt))}).then(function(){Be(ue)}).catch(function(pt){X.fatal("Caught error on create SourceBuffer: "+pt),p.error(new n.default(i.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,i.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+M)),et(pt)})})}function q(we,Oe,Be){var et=B(Be);return Oe&&Oe[M]&&(M===o.default.VIDEO||M===o.default.AUDIO)?ue.initializeForStreamSwitch(we,et,Oe[M]):ue.initializeForFirstUse(F,we,et)}function me(we){U.get().streaming.cacheInitSegments&&(X.info("Init fragment finished loading saving to",M+"'s init cache"),z.save(we.chunk)),X.debug("Append Init fragment",M," with representationId:",we.chunk.representationId," and quality:",we.chunk.quality,", data size:",we.chunk.bytes.byteLength),Se(we.chunk)}function de(we){var Oe=z.extract(F.id,we);return Oe?(X.info("Append Init fragment",M," with representationId:",Oe.representationId," and quality:",Oe.quality,", data size:",Oe.bytes.byteLength),Se(Oe),!0):!1}function ve(we){Se(we.chunk,we.request)}function Se(we){var Oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;ue.append(we,Oe).then(function(Be){Me(Be)}).catch(function(Be){Me(Be)}),we.mediaInfo.type===o.default.VIDEO&&ut(T.default.VIDEO_CHUNK_RECEIVED,{chunk:we})}function be(we){if(we&&we.length>0)for(var Oe=0,Be=we.length;Oe<Be;Oe++)X.debug("Buffered range: "+we.start(Oe)+" - "+we.end(Oe)+", currentTime = ",w.getTime())}function Me(we){if(we.error){we.error.code===_&&Ee(),(we.error.code===_||!je())&&(X.warn("Clearing playback buffer to overcome quota exceed situation"),ut(T.default.QUOTA_EXCEEDED,{criticalBufferLevel:G,quotaExceededTime:we.chunk.start}),at(qe()));return}if(ue&&(he(),le=!1,oe=we.chunk,!(!oe||!oe.endFragment))){oe&&!isNaN(oe.index)&&(J=Math.max(oe.index,J),Ae());var Oe=ue.getAllBufferRanges();oe.segmentType===d.HTTPRequest.MEDIA_SEGMENT_TYPE&&(be(Oe),ft(),Fe()),oe&&ut(T.default.BYTES_APPENDED_END_FRAGMENT,{quality:oe.quality,startTime:oe.start,index:oe.index,bufferedRanges:Oe,segmentType:oe.segmentType,mediaType:M})}}function Fe(){if(!isNaN(L)){if(M!==o.default.AUDIO&&M!==o.default.VIDEO){L=NaN;return}var we=w.getTime(),Oe=Ct(we,0),Be=Ct(L,0);if(Oe&&Be&&Oe.start===Be.start){L=NaN;return}var et=x.getCurrentRepresentation().segmentDuration,vt=Ct(L,et);vt&&(U.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(we-L)>et?L<=vt.end&&w.seek(Math.max(L,vt.start),!1,!0):we<vt.start&&w.seek(vt.start,!1,!0))}}function Ee(){if(le=!0,G=lt()*.8,X.warn("Quota exceeded, Critical Buffer: "+G),G>0){var we=Math.max(.2*G,1),Oe=G-we,Be=Math.min(U.get().streaming.buffer.bufferTimeAtTopQuality,Oe*.9),et=Math.min(U.get().streaming.buffer.bufferTimeAtTopQualityLongForm,Oe*.9),vt={streaming:{buffer:{bufferToKeep:parseFloat(we.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Be.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(et.toFixed(5))}}};U.update(vt)}}function Pe(){return Y&&pe(!1),ue.abort()}function Ue(we){return new Promise(function(Oe,Be){ue.abort().then(function(){return nt()}).then(function(){return U.get().streaming.buffer.useChangeTypeForTrackSwitch?ue.changeType(we):Promise.resolve()}).then(function(){return Ne()}).then(function(){pe(!1),Oe()}).catch(function(et){Be(et)})})}function Re(){return new Promise(function(we,Oe){ue.abort().then(function(){return nt()}).then(function(){return Ne()}).then(function(){pe(!1),we()}).catch(function(Be){Oe(Be)})})}function Ke(we){return new Promise(function(Oe,Be){nt().then(function(){return U.get().streaming.buffer.useChangeTypeForTrackSwitch?ue.changeType(we):Promise.resolve()}).then(function(){Oe()}).catch(function(et){Be(et)})})}function Ne(){return new Promise(function(we,Oe){var Be=ze();if(!Be||Be.length===0){ft(),we();return}at(Be).then(function(){we()}).catch(function(et){Oe(et)})})}function ze(we){var Oe=[],Be=ue.getAllBufferRanges();if(!Be||Be.length===0)return Oe;if(!we&&we!==0||isNaN(we))Oe.push({start:Be.start(0),end:Be.end(Be.length-1)+b});else{var et=$e(we,Be),vt=tt(we,Be);et&&Oe.push(et),vt&&Oe.push(vt)}return Oe}function $e(we,Oe){var Be=U.get().streaming.buffer.bufferToKeep,et=Oe.start(0),vt=we-et;if(vt>Be){var pt=Math.max(0,we-Be),xe=C.getRequests({state:u.default.FRAGMENT_MODEL_EXECUTED,time:we,threshold:A})[0];if(xe&&(pt=Math.min(xe.startTime,pt)),pt>0)return{start:et,end:pt}}return null}function tt(we,Oe){var Be=Oe.end(Oe.length-1)+b,et=De(we),vt=F.manifestInfo.duration>=U.get().streaming.buffer.longFormContentDurationThreshold,pt=vt?U.get().streaming.buffer.bufferTimeAtTopQualityLongForm:U.get().streaming.buffer.bufferTimeAtTopQuality,xe=isNaN(et)?we:Math.min(et,we+pt);if(xe>=Oe.end(Oe.length-1))return null;var ct=C.getRequests({state:u.default.FRAGMENT_MODEL_EXECUTED,time:we,threshold:A})[0];ct&&(xe=Math.max(ct.startTime+ct.duration,xe));var Tt=U.get().streaming.buffer.avoidCurrentTimeRangePruning;if(Tt){for(var Rt=0;Rt<Oe.length;Rt++)if(Oe.start(Rt)<=we&&we<=Oe.end(Rt)&&Oe.start(Rt)<=xe&&xe<=Oe.end(Rt)){var jt=xe;Rt+1<Oe.length?xe=Oe.start(Rt+1):xe=Oe.end(Rt)+1,X.debug("Buffered range ["+Oe.start(Rt)+", "+Oe.end(Rt)+"] overlaps with targetTime "+we+" and range to be pruned ["+jt+", "+Be+"], using ["+xe+", "+Be+"] instead"+(xe<Be?"":" (no actual pruning)"));break}}return xe<Oe.end(Oe.length-1)?{start:xe,end:Be}:null}function ft(){(!R||M===o.default.TEXT&&H.isTextEnabled())&&he()}function bt(){ke()}function Et(){ke(),L=NaN}function St(we){try{var Oe=ue.getAllBufferRanges();if(!Oe||Oe.length===0)return!1;for(var Be=0;Be<Oe.length;){var et=Oe.start(Be),vt=Oe.end(Be);if(we>=et&&we<=vt)return!0;Be+=1}return!1}catch(pt){return X.error(pt),!1}}function Ct(we,Oe){var Be=ue.getAllBufferRanges(),et=0,vt=0,pt=null,xe=null,ct=0,Tt,Rt,jt=isNaN(Oe)?.15:Oe;if(Be!=null){for(Rt=0,Tt=Be.length;Rt<Tt;Rt++)if(et=Be.start(Rt),vt=Be.end(Rt),pt===null)ct=Math.abs(et-we),(we>=et&&we<vt||ct<=jt)&&(pt=et,xe=vt);else if(ct=et-xe,ct<=jt)xe=vt;else break;if(pt!==null)return{start:pt,end:xe}}return null}function ye(we,Oe){var Be,et;return U.get().streaming.gaps.jumpGaps&&(Oe=U.get().streaming.gaps.smallGapLimit),Be=Ct(we,Oe),Be===null?et=0:et=Be.end-we,et}function he(){if(w){var we=U.get().streaming.gaps.jumpGaps&&!isNaN(U.get().streaming.gaps.smallGapLimit)?U.get().streaming.gaps.smallGapLimit:NaN;se=Math.max(ye(w.getTime()||0,we),0),ut(T.default.BUFFER_LEVEL_UPDATED,{mediaType:M,bufferLevel:se}),ke()}}function Ae(){var we=J>=ie-1,Oe=w.getTimeToStreamEnd(F)-se<1e-5;(we||Oe)&&!Y&&(pe(!0),X.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ".concat(F.id," and type ").concat(M)))}function ke(){M!==o.default.AUDIO&&M!==o.default.VIDEO||((!w.getLowLatencyModeEnabled()&&se<U.get().streaming.buffer.stallThreshold||se===0)&&!Y?Qe(l.default.BUFFER_EMPTY):(Y||se>=U.get().streaming.buffer.stallThreshold||w.getLowLatencyModeEnabled()&&se>0)&&Qe(l.default.BUFFER_LOADED))}function Qe(we){ae===we||we===l.default.BUFFER_EMPTY&&w.getTime()===0||M===o.default.TEXT&&!H.isTextEnabled()||(ae=we,ut(T.default.BUFFER_LEVEL_STATE_CHANGED,{state:we}),ut(we===l.default.BUFFER_LOADED?T.default.BUFFER_LOADED:T.default.BUFFER_EMPTY),X.debug(we===l.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function Ge(){!ue||M===o.default.TEXT||Y||at(qe())}function qe(){var we=[],Oe=ue.getAllBufferRanges();if(!Oe||Oe.length===0)return we;var Be=w.getTime(),et=Math.max(0,Be-U.get().streaming.buffer.bufferToKeep),vt=C.getRequests({state:u.default.FRAGMENT_MODEL_EXECUTED,time:Be,threshold:A})[0];if(vt)et=Math.min(vt.startTime,et);else if(Be===0&&w.getIsDynamic())return[];if(Oe.start(0)<=et){for(var pt={start:0,end:et},xe=0;xe<Oe.length&&Oe.end(xe)<=et;xe++)pt.end=Oe.end(xe);pt.start<pt.end&&we.push(pt)}return we}function at(we){return new Promise(function(Oe,Be){if(!we||!ue||we.length===0){Oe();return}var et=[];we.forEach(function(vt){et.push(it(vt))}),ge||Ie(),Promise.all(et).then(function(){Oe()}).catch(function(vt){Be(vt)})})}function it(we){return new Promise(function(Oe,Be){we.resolve=Oe,we.reject=Be,K.push(we)})}function Ie(){try{if(K.length===0||!ue){X.debug("Nothing to prune, halt pruning"),K=[],ge=!1;return}var we=ue.getBuffer();if(!we||!we.buffered||we.buffered.length===0){X.debug("SourceBuffer is empty (or does not exist), halt pruning"),K=[],ge=!1;return}var Oe=K.shift();X.debug("".concat(M,": Removing buffer from: ").concat(Oe.start," to ").concat(Oe.end)),ge=!0;var Be=w.getTime();Be<Oe.end&&pe(!1),ue.remove(Oe).then(function(et){He(et)}).catch(function(et){He(et)})}catch{ge=!1}}function He(we){X.debug("onRemoved buffer from:",we.from,"to",we.to);var Oe=ue.getAllBufferRanges();be(Oe),K.length===0&&(ge=!1,he()),we.unintended&&(X.warn("Detected unintended removal from:",we.from,"to",we.to,"setting streamprocessor time to",we.from),ut(T.default.SEEK_TARGET,{time:we.from})),ge?Ie():(R?R=!1:he(),ut(T.default.BUFFER_CLEARED,{from:we.from,to:we.to,unintended:we.unintended,hasEnoughSpaceToAppend:je(),quotaExceeded:le}))}function Xe(we){return new Promise(function(Oe){if(!we||we.MSETimeOffset===void 0||!ue||!ue.updateTimestampOffset){Oe();return}ue.updateTimestampOffset(we.MSETimeOffset).then(function(){Oe()}).catch(function(){Oe()})})}function nt(){return ue&&!Y?ue.updateAppendWindow(F):Promise.resolve()}function mt(we){isNaN(we)||(ie=we,Ae())}function ht(){Z++;var we=Z*(U.get().streaming.wallclockTimeUpdateInterval/1e3);we>=U.get().streaming.buffer.bufferPruningInterval&&(Z=0,Ge())}function _t(){ke()}function wt(){return ue}function ot(){return se}function Wt(){return ee}function $t(){return Y}function pe(we){Y!==we&&(Y=we,Y?ut(T.default.BUFFERING_COMPLETED):ie=Number.POSITIVE_INFINITY)}function Ye(){return ge}function lt(){try{var we=ue.getAllBufferRanges(),Oe=0,Be,et;if(!we)return Oe;for(et=0,Be=we.length;et<Be;et++)Oe+=we.end(et)-we.start(et);return Oe}catch{return 0}}function De(we){try{var Oe=we,Be=ue.getAllBufferRanges();if(!Be||Be.length===0)return NaN;for(var et=0;Oe===we&&et<Be.length;){var vt=Be.start(et),pt=Be.end(et);Oe>=vt&&Oe<=pt&&(Oe=pt),et+=1}return Oe===we?NaN:Oe}catch{}}function je(){var we=lt();return isNaN(we)||we<G}function Ze(we){L=we}function ut(we,Oe){var Be=Oe||{};S.trigger(we,Be,{streamId:F.id,mediaType:M})}function Ot(we,Oe){if(G=Number.POSITIVE_INFINITY,ae=void 0,ie=Number.POSITIVE_INFINITY,J=0,oe=null,Y=!1,ge=!1,le=!1,se=0,Z=0,K=[],L=NaN,ue){var Be=ue;ue=null,!we&&!Oe&&Be.abort().then(function(){Be.reset(Oe),Be=null})}R=!1}function At(we,Oe){S.off(T.default.INIT_FRAGMENT_LOADED,me,this),S.off(T.default.MEDIA_FRAGMENT_LOADED,ve,this),S.off(T.default.WALLCLOCK_TIME_UPDATED,ht,this),S.off(P.default.PLAYBACK_PLAYING,Et,this),S.off(P.default.PLAYBACK_PROGRESS,ft,this),S.off(P.default.PLAYBACK_TIME_UPDATED,ft,this),S.off(P.default.PLAYBACK_RATE_CHANGED,_t,this),S.off(P.default.PLAYBACK_STALLED,bt,this),Ot(we,Oe)}return j={initialize:O,getStreamId:Q,getType:ne,getBufferControllerType:ce,createBufferSink:D,getBuffer:wt,getBufferLevel:ot,getRangeAt:Ct,hasBufferAtTime:St,pruneBuffer:Ge,setMediaSource:W,getMediaSource:Wt,appendInitSegmentFromCache:de,getIsBufferingCompleted:$t,setIsBufferingCompleted:pe,getIsPruningInProgress:Ye,reset:At,prepareForPlaybackSeek:Pe,prepareForReplacementTrackSwitch:Ue,prepareForNonReplacementTrackSwitch:Ke,prepareForReplacementQualitySwitch:Re,updateAppendWindow:nt,getAllRangesWithSafetyFactor:ze,getContinuousBufferTimeForTargetTime:De,clearBuffers:at,pruneAllSafely:Ne,updateBufferTimestampOffset:Xe,setSeekTarget:Ze,segmentRequestingCompleted:mt},$(),j}f.__dashjs_factory_name=h,g.default=E.default.getClassFactory(f)},"./src/streaming/controllers/CatchupController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u=r("./src/core/EventBus.js"),m=r("./src/streaming/constants/Constants.js"),y=r("./src/streaming/MediaPlayerEvents.js"),T=r("./src/core/events/Events.js"),E=r("./src/streaming/constants/MetricsConstants.js"),t=r("./src/core/Utils.js");function e(){var n=this.context,i=Object(u.default)(n).getInstance(),d,P,b,A,_,h,f,v,c,S;function p(){x(),oe()}function C(Z){Z&&(Z.settings&&(_=Z.settings),Z.videoModel&&(A=Z.videoModel),Z.streamController&&(h=Z.streamController),Z.playbackController&&(f=Z.playbackController),Z.mediaPlayerModel&&(v=Z.mediaPlayerModel))}function x(){i.on(y.default.BUFFER_LEVEL_UPDATED,M,d),i.on(y.default.BUFFER_LEVEL_STATE_CHANGED,U,d),i.on(y.default.PLAYBACK_PROGRESS,X,d),i.on(y.default.PLAYBACK_TIME_UPDATED,X,d),i.on(y.default.PLAYBACK_SEEKED,F,d),i.on(T.default.SETTING_UPDATED_CATCHUP_ENABLED,j,d),i.on(T.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,oe,d),i.on(T.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,oe,d),i.on(y.default.STREAM_INITIALIZED,oe,d)}function V(){i.off(y.default.BUFFER_LEVEL_UPDATED,M,d),i.off(y.default.BUFFER_LEVEL_STATE_CHANGED,U,d),i.off(y.default.PLAYBACK_PROGRESS,X,d),i.off(y.default.PLAYBACK_TIME_UPDATED,X,d),i.off(y.default.PLAYBACK_SEEKED,X,d),i.off(T.default.SETTING_UPDATED_CATCHUP_ENABLED,j,d),i.off(T.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,oe,d),i.off(T.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,oe,d),i.off(y.default.STREAM_INITIALIZED,oe,d)}function H(){S=Object(l.default)(n).getInstance().getLogger(d),w()}function te(){V(),w(),A.setPlaybackRate(1,!0)}function w(){P=!1;var Z=t.default.parseUserAgent();b=Z&&Z.browser&&Z.browser.name&&Z.browser.name.toLowerCase()==="safari"}function F(){P=!1}function M(Z){if(!(Z.streamId!==h.getActiveStreamInfo().id||!c)){var ge=f.getLiveDelay(),le=f.getBufferLevel();le>ge/2&&(c=!1)}}function U(Z){Z.streamId===h.getActiveStreamInfo().id&&(c=Z.state===E.default.BUFFER_EMPTY)}function j(){v.getCatchupModeEnabled()||A.setPlaybackRate(1)}function X(){f.getIsDynamic()&&v.getCatchupModeEnabled()&&(v.getCatchupPlaybackRates().max>0||v.getCatchupPlaybackRates().min<0)&&!f.isPaused()&&!f.isSeeking()&&G()&&Y()}function Y(){if(!P&&A){var Z,ge=A.getPlaybackRate(),le=v.getCatchupPlaybackRates(),z=f.getBufferLevel(),K=se(),R=v.getCatchupMaxDrift();if(!isNaN(R)&&R>0&&K>R)S.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),P=!0,f.seekToCurrentLive(!0,!1);else{var L=f.getCurrentLiveLatency(),$=f.getLiveDelay();if(ee()===m.default.LIVE_CATCHUP_MODE_LOLP){var O=_.get().streaming.liveCatchup.playbackBufferMin;Z=ae(le,L,$,O,z)}else Z=ue(le,L,$,z);var Q=b?.25:.02/(.5/le.max);Z&&Math.abs(ge-Z)>=Q&&(S.debug("[CatchupController]: Setting playback rate to ".concat(Z)),A.setPlaybackRate(Z))}}}function se(){var Z=f.getCurrentLiveLatency(),ge=f.getLiveDelay();return Z-ge}function G(){try{if(!f.getTime()>0||P)return!1;var Z=ee();if(Z===m.default.LIVE_CATCHUP_MODE_LOLP){var ge=f.getBufferLevel(),le=_.get().streaming.liveCatchup.playbackBufferMin;return ie(ge,le)}else return J()}catch{return!1}}function ee(){var Z=_.get().streaming.liveCatchup.playbackBufferMin;return _.get().streaming.liveCatchup.mode===m.default.LIVE_CATCHUP_MODE_LOLP&&Z!==null&&!isNaN(Z)?m.default.LIVE_CATCHUP_MODE_LOLP:m.default.LIVE_CATCHUP_MODE_DEFAULT}function J(){try{var Z=Math.abs(se());return Z>0}catch{return!1}}function ie(Z,ge){try{var le=Math.abs(se());return le>0||Z<ge}catch{return!1}}function ue(Z,ge,le,z){if(c)return 1;var K=ge-le,R=K<0?Math.abs(Z.min):Z.max,L=K*5,$=R*2/(1+Math.pow(Math.E,-L)),O=1-R+$;return f.getPlaybackStalled()&&z<=le/2&&K>0&&(O=1),O}function ae(Z,ge,le,z,K){var R;if(K<z){var L=Math.abs(Z.min),$=K-z,O=$*5,Q=L*2/(1+Math.pow(Math.E,-O));R=1-L+Q,S.debug("[LoL+ playback control_buffer-based] bufferLevel: "+K+", newRate: "+R)}else{var ne=Z.max,ce=.02;if(Math.abs(ge-le)<=ce*le)R=1;else{var W=ge-le,B=W*5,D=ne*2/(1+Math.pow(Math.E,-B));R=1-ne+D}S.debug("[LoL+ playback control_latency-based] latency: "+ge+", newRate: "+R)}return R}function oe(){v.getCatchupPlaybackRates(!0)}return d={reset:te,setConfig:C,initialize:p},H(),d}e.__dashjs_factory_name="CatchupController",g.default=o.default.getSingletonFactory(e)},"./src/streaming/controllers/EventController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u=r("./src/core/EventBus.js"),m=r("./src/streaming/MediaPlayerEvents.js"),y=r("./src/streaming/net/XHRLoader.js");function T(){var E="urn:mpeg:dash:event:2012",t=1,e="urn:mpeg:dash:event:callback:2015",n=1,i=300,d={DISCARDED:"discarded",UPDATED:"updated",ADDED:"added"},P=this.context,b=Object(u.default)(P).getInstance(),A,_,h,f,v,c,S,p,C,x,V;function H(){_=Object(l.default)(P).getInstance().getLogger(A),w()}function te(){if(!S||!p)throw new Error("setConfig function has to be called previously")}function w(){V=!1,h={},f={},v=null,x=!1,c=Date.now()/1e3}function F(){try{v!==null&&V&&(clearInterval(v),v=null,V=!1,J())}catch(O){throw O}}function M(){try{te(),_.debug("Start Event Controller");var O=C.get().streaming.eventControllerRefreshDelay;!V&&!isNaN(O)&&(V=!0,v=setInterval(U,O))}catch(Q){throw Q}}function U(){try{if(!x){x=!0;var O=p.getTime(),Q=O-c;Q=c>0?Math.max(0,Q):0,j(f,Q,O),j(h,Q,O),X(f),X(h),c=O,x=!1}}catch(ne){x=!1,_.error(ne)}}function j(O,Q,ne){try{var ce=function(B){if(B!==void 0){var D=isNaN(B.duration)?0:B.duration;B.calculatedPresentationTime<=ne&&B.calculatedPresentationTime+Q+D>=ne?Z(B,m.default.EVENT_MODE_ON_START):(ae(ne,D+Q,B.calculatedPresentationTime)||oe(B))&&(_.debug("Removing event ".concat(B.id," from period ").concat(B.eventStream.period.id," as it is expired or invalid")),ge(O,B))}};ue(O,ce)}catch(W){_.error(W)}}function X(O){try{for(var Q in O)O.hasOwnProperty(Q)&&Object.keys(O[Q]).length===0&&delete O[Q]}catch(ne){_.error(ne)}}function Y(O,Q){try{if(te(),h[Q]||(h[Q]={}),O)for(var ne=0;ne<O.length;ne++){var ce=O[ne],W=p.getTime(),B=isNaN(ce.duration)?0:ce.duration;if(!ae(W,B,ce.calculatedPresentationTime)){var D=G(ce,h[Q],!0);D===d.ADDED?(_.debug("Added inline event with id ".concat(ce.id," from period ").concat(Q)),Z(ce,m.default.EVENT_MODE_ON_RECEIVE)):D===d.UPDATED&&_.debug("Updated inline event with id ".concat(ce.id," from period ").concat(Q))}}}catch(q){throw q}}function se(O,Q){try{te(),f[Q]||(f[Q]={});for(var ne=0;ne<O.length;ne++){var ce=O[ne],W=p.getTime(),B=isNaN(ce.duration)?0:ce.duration;if(!ae(W,B,ce.calculatedPresentationTime)){var D=G(ce,f[Q],!1);D===d.ADDED?(ce.eventStream.schemeIdUri===E&&ee(ce),_.debug("Added inband event with id ".concat(ce.id," from period ").concat(Q)),Z(ce,m.default.EVENT_MODE_ON_RECEIVE)):_.debug("Inband event with scheme_id_uri ".concat(ce.eventStream.schemeIdUri,", value ").concat(ce.eventStream.value,", period id ").concat(Q," and event id ").concat(ce.id," was ignored because it has been added before."))}}U()}catch(q){throw q}}function G(O,Q){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ce=O.eventStream.schemeIdUri,W=O.eventStream.value,B=O.id,D=d.DISCARDED;Q[ce]||(Q[ce]=[]);var q=Q[ce].findIndex(function(de){return(!W||de.eventStream.value&&de.eventStream.value===W)&&de.id===B});if(q===-1)Q[ce].push(O),O.triggeredReceivedEvent=!1,O.triggeredStartEvent=!1,D=d.ADDED;else if(ne){var me=Q[ce][q];O.triggeredReceivedEvent=me.triggeredReceivedEvent,O.triggeredStartEvent=me.triggeredStartEvent,Q[ce][q]=O,D=d.UPDATED}return D}function ee(O){try{if(O.eventStream.value==t){var Q=O.calculatedPresentationTime,ne;O.calculatedPresentationTime==4294967295?ne=NaN:ne=O.calculatedPresentationTime+O.duration,b.trigger(m.default.MANIFEST_VALIDITY_CHANGED,{id:O.id,validUntil:Q,newDuration:ne,newManifestValidAfter:NaN},{mode:m.default.EVENT_MODE_ON_START})}}catch(ce){_.error(ce)}}function J(){try{ie(f),ie(h)}catch(O){_.error(O)}}function ie(O){try{var Q=p.getTime(),ne=function(W){var B=W.eventStream&&W.eventStream.period&&!isNaN(W.eventStream.period.duration)?W.eventStream.period.duration:NaN,D=W.eventStream&&W.eventStream.period&&!isNaN(W.eventStream.period.start)?W.eventStream.period.start:NaN;if(!(isNaN(B)||isNaN(D))){var q=W.calculatedPresentationTime;Math.abs(q-Q)<i&&Z(W,m.default.EVENT_MODE_ON_START)}};ue(O,ne)}catch(ce){_.error(ce)}}function ue(O,Q){try{if(O)for(var ne=Object.keys(O),ce=0;ce<ne.length;ce++)for(var W=O[ne[ce]],B=Object.keys(W),D=0;D<B.length;D++){var q=W[B[D]];q.forEach(function(me){me!==void 0&&Q(me)})}}catch(me){_.error(me)}}function ae(O,Q,ne){try{return O-Q>ne}catch(ce){return _.error(ce),!1}}function oe(O){try{var Q=O.eventStream.period.start+O.eventStream.period.duration;return O.calculatedPresentationTime>Q}catch(ne){return _.error(ne),!1}}function Z(O,Q){try{var ne=p.getTime(),ce=O.id;if(Q===m.default.EVENT_MODE_ON_RECEIVE&&!O.triggeredReceivedEvent){_.debug("Received event ".concat(ce)),O.triggeredReceivedEvent=!0,b.trigger(O.eventStream.schemeIdUri,{event:O},{mode:Q});return}O.triggeredStartEvent||(O.eventStream.schemeIdUri===E&&O.eventStream.value==t?(O.duration!==0||O.presentationTimeDelta!==0)&&(_.debug("Starting manifest refresh event ".concat(ce," at ").concat(ne)),le()):O.eventStream.schemeIdUri===e&&O.eventStream.value==n?(_.debug("Starting callback event ".concat(ce," at ").concat(ne)),z(O.messageData)):(_.debug("Starting event ".concat(ce," from period ").concat(O.eventStream.period.id," at ").concat(ne)),b.trigger(O.eventStream.schemeIdUri,{event:O},{mode:Q})),O.triggeredStartEvent=!0)}catch(W){_.error(W)}}function ge(O,Q){try{var ne=Q.eventStream.schemeIdUri,ce=Q.eventStream.period.id,W=Q.eventStream.value,B=Q.id;O[ce][ne]=O[ce][ne].filter(function(D){return W&&D.eventStream.value&&D.eventStream.value!==W||D.id!==B}),O[ce][ne].length===0&&delete O[ce][ne]}catch(D){_.error(D)}}function le(){try{te(),S.refreshManifest()}catch(O){_.error(O)}}function z(O){try{var Q=Object(y.default)(P).create({});Q.load({method:"get",url:O,request:{responseType:"arraybuffer"}})}catch(ne){_.error(ne)}}function K(O){try{if(!O)return;O.manifestUpdater&&(S=O.manifestUpdater),O.playbackController&&(p=O.playbackController),O.settings&&(C=O.settings)}catch(Q){throw Q}}function R(){return h}function L(){return f}function $(){F(),w()}return A={addInlineEvents:Y,addInbandEvents:se,getInbandEvents:L,getInlineEvents:R,start:M,setConfig:K,reset:$},H(),A}T.__dashjs_factory_name="EventController",g.default=o.default.getSingletonFactory(T)},"./src/streaming/controllers/FragmentController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/vo/DataChunk.js"),u=r("./src/streaming/models/FragmentModel.js"),m=r("./src/streaming/FragmentLoader.js"),y=r("./src/streaming/utils/RequestModifier.js"),T=r("./src/core/EventBus.js"),E=r("./src/core/events/Events.js"),t=r("./src/streaming/MediaPlayerEvents.js"),e=r("./src/core/errors/Errors.js"),n=r("./src/core/FactoryMaker.js"),i=r("./src/core/Debug.js");function d(P){P=P||{};var b=this.context,A=Object(T.default)(b).getInstance(),_=P.errHandler,h=P.mediaPlayerModel,f=P.dashMetrics,v=Object(i.default)(b).getInstance(),c=P.streamInfo,S,p,C;function x(){p=v.getLogger(S),te(),A.on(t.default.FRAGMENT_LOADING_COMPLETED,M,S),A.on(t.default.FRAGMENT_LOADING_PROGRESS,M,S)}function V(){return c.id}function H(U){var j=C[U];return j||(j=Object(u.default)(b).create({streamInfo:c,type:U,dashMetrics:f,fragmentLoader:Object(m.default)(b).create({dashMetrics:f,mediaPlayerModel:h,errHandler:_,requestModifier:Object(y.default)(b).getInstance(),settings:P.settings,boxParser:P.boxParser,eventBus:A,events:E.default,errors:e.default,dashConstants:P.dashConstants,urlUtils:P.urlUtils,streamId:V()}),debug:v,eventBus:A,events:E.default}),C[U]=j),j}function te(){for(var U in C)C[U].reset();C={}}function w(){A.off(t.default.FRAGMENT_LOADING_COMPLETED,M,this),A.off(t.default.FRAGMENT_LOADING_PROGRESS,M,this),te()}function F(U,j,X,Y){var se=new l.default;return se.streamId=X,se.mediaInfo=j.mediaInfo,se.segmentType=j.type,se.start=j.startTime,se.duration=j.duration,se.end=se.start+se.duration,se.bytes=U,se.index=j.index,se.quality=j.quality,se.representationId=j.representationId,se.endFragment=Y,se}function M(U){if(U.sender){var j=U.request,X=U.response,Y=j.isInitializationRequest(),se=j.mediaInfo.streamInfo;if(U.error&&(j.mediaType===o.default.AUDIO||j.mediaType===o.default.VIDEO||j.mediaType===o.default.TEXT&&j.mediaInfo.isFragmented)&&A.trigger(E.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:U.request.serviceLocation}),!X||!se){p.warn("No "+j.mediaType+" bytes to push or stream is inactive.");return}var G=F(X,j,c.id,U.type!==E.default.FRAGMENT_LOADING_PROGRESS);A.trigger(Y?E.default.INIT_FRAGMENT_LOADED:E.default.MEDIA_FRAGMENT_LOADED,{chunk:G,request:j},{streamId:se.id,mediaType:j.mediaType})}}return S={getStreamId:V,getModel:H,reset:w},x(),S}d.__dashjs_factory_name="FragmentController",g.default=n.default.getClassFactory(d)},"./src/streaming/controllers/GapController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u=r("./src/core/events/Events.js"),m=r("./src/core/EventBus.js"),y=r("./src/streaming/constants/Constants.js"),T=100,E=10,t=.1;function e(){var n=this.context,i=Object(m.default)(n).getInstance(),d,P,b,A,_,h,f,v,c,S,p,C;function x(){F()}function V(){C=Object(l.default)(n).getInstance().getLogger(d),H()}function H(){ae(),M(),te()}function te(){_=null,h=NaN,A=0,S=null,p={}}function w(Z){Z&&(Z.settings&&(b=Z.settings),Z.playbackController&&(f=Z.playbackController),Z.streamController&&(v=Z.streamController),Z.videoModel&&(c=Z.videoModel))}function F(){i.on(u.default.WALLCLOCK_TIME_UPDATED,se,this),i.on(u.default.INITIAL_STREAM_SWITCH,Y,this),i.on(u.default.PLAYBACK_SEEKING,U,this),i.on(u.default.BUFFER_REPLACEMENT_STARTED,j,d),i.on(u.default.TRACK_CHANGE_RENDERED,X,d)}function M(){i.off(u.default.WALLCLOCK_TIME_UPDATED,se,this),i.off(u.default.INITIAL_STREAM_SWITCH,Y,this),i.off(u.default.PLAYBACK_SEEKING,U,this),i.off(u.default.BUFFER_REPLACEMENT_STARTED,j,d),i.off(u.default.TRACK_CHANGE_RENDERED,X,d)}function U(){S&&(clearTimeout(S),S=null)}function j(Z){try{if(Z.streamId!==v.getActiveStreamInfo().id||Z.mediaType!==y.default.VIDEO&&Z.mediaType!==y.default.AUDIO)return;Z.streamId===v.getActiveStreamInfo().id&&(p[Z.mediaType]=!0)}catch(ge){C.error(ge)}}function X(Z){!Z||!Z.mediaType||(p[Z.mediaType]=!1)}function Y(){_||ue()}function se(){if(G(b.get().streaming.gaps.enableSeekFix)&&(A++,A>=E)){var Z=f.getTime();P===Z?oe(Z,!0):(P=Z,h=NaN),A=0}}function G(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!v.getActiveStream())return!1;var ge=Object.keys(p).some(function(z){return p[z]}),le=Z?ee():!1;return!ge&&b.get().streaming.gaps.jumpGaps&&v.getActiveStreamProcessors().length>0&&(!f.isSeeking()||le)&&!f.isPaused()&&!v.getIsStreamSwitchInProgress()&&!v.getHasMediaOrInitialisationError()}function ee(){var Z=v.getActiveStream(),ge=parseFloat((Z.getStartTime()+Z.getDuration()).toFixed(5));return f.getTime()+b.get().streaming.gaps.threshold>=ge}function J(Z,ge){try{if(!Z||Z.length<=1&&ge>0)return NaN;for(var le=NaN,z=0;isNaN(le)&&z<Z.length;){var K=z>0?Z.end(z-1):0;ge<Z.start(z)&&K-ge<b.get().streaming.gaps.threshold&&(le=z),z+=1}return le}catch{return null}}function ie(Z,ge){for(var le=0,z=Z.length;le<z;le++)if(ge>=Z.start(le)&&ge<=Z.end(le))return!0;return!1}function ue(){try{_||(C.debug("Starting the gap controller"),_=setInterval(function(){if(G()){var Z=f.getTime();oe(Z)}},T))}catch{}}function ae(){C.debug("Stopping the gap controller"),_&&(clearInterval(_),_=null)}function oe(Z){var ge=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,le=b.get().streaming.gaps.enableStallFix,z=b.get().streaming.gaps.stallSeek,K=b.get().streaming.gaps.smallGapLimit,R=b.get().streaming.gaps.jumpLargeGaps,L=c.getBufferRange(),$,O=NaN,Q=!1;if($=J(L,Z),!isNaN($)){var ne=L.start($),ce=ne-Z;ce>0&&(ce<=K||R)&&(O=ne)}var W=f.getTimeToStreamEnd();if(isNaN(O)&&ge&&isFinite(W)&&!isNaN(W)&&W<K&&(O=parseFloat(f.getStreamEndTime().toFixed(5)),Q=!0),le&&isNaN(O)&&ge&&isNaN($)&&ie(L,Z)&&(z===0?(C.warn("Toggle play pause to break stall"),c.pause(),c.play()):(C.warn("Jumping ".concat(z,"s to break stall")),O=Z+z)),O>0&&h!==O&&O>Z&&!S){var B=O-Z;if(Q){var D=v.getStreamForTime(O),q=D&&!!D.getPreloaded();C.warn("Jumping to end of stream because of gap from ".concat(Z," to ").concat(O,". Gap duration: ").concat(B)),f.seek(O,!0,q)}else{var me=f.getIsDynamic(),de=$>0?L.end($-1):Z,ve=me?Math.max(0,B-t)*1e3:0;S=window.setTimeout(function(){f.seek(O,!0,!0),C.warn("Jumping gap occuring in period ".concat(v.getActiveStream().getStreamId()," starting at ").concat(de," and ending at ").concat(O,". Jumping by: ").concat(O-de)),S=null},ve)}h=O}}return d={reset:H,setConfig:w,initialize:x},V(),d}e.__dashjs_factory_name="GapController",g.default=o.default.getSingletonFactory(e)},"./src/streaming/controllers/MediaController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/core/events/Events.js"),u=r("./src/core/EventBus.js"),m=r("./src/core/FactoryMaker.js"),y=r("./src/core/Debug.js"),T=r("./node_modules/bcp-47-normalize/index.js"),E=r.n(T),t=r("./node_modules/bcp-47-match/index.js"),e=r.n(t);function n(){var d=this.context,P=Object(u.default)(d).getInstance(),b,A,_,h,f,v,c,S;function p(){A=Object(y.default)(d).getInstance().getLogger(b),se()}function C(D,q){var me=v[D]||M(D),de=V(D,q.id),ve=[];me||(me=S.getSavedMediaSettings(D),F(D,me)),!(!de||de.length===0)&&(me&&(ve=Array.from(de),ve=ee(ve,J,me),ve=ee(ve,ie,me),ve=ee(ve,ue,me),D===o.default.AUDIO&&v[D]||(ve=ee(ve,ae,me)),ve=ee(ve,oe,me),ve=ee(ve,Z,me)),ve.length===0?w($(D,de),!0):ve.length>1?w($(D,ve,!!v[D])):w(ve[0]))}function x(D){if(D){var q=D.type;if(j(q)){var me=D.streamInfo.id;_[me]||(_[me]=B());for(var de=_[me][q].list,ve=0,Se=de.length;ve<Se;++ve)if(X(de[ve],D))return;de.push(D)}}}function V(D,q){return D?!_[q]||!_[q][D]?[]:_[q][D].list:[]}function H(D,q){return!D||!_[q]||!_[q][D]?null:_[q][D].current}function te(D){if(!D)return!1;var q=D.type,me=D.streamInfo.id;return _[me]&&_[me][q]&&X(_[me][q].current,D)}function w(D){var q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!(!D||!D.streamInfo)){var me=D.type,de=D.streamInfo,ve=de.id,Se=H(me,ve);if(!(!_[ve]||!_[ve][me])&&(_[ve][me].current=D,_[ve][me].current&&(me!==o.default.TEXT&&!X(D,Se)||me===o.default.TEXT&&D.isFragmented)&&P.trigger(l.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:Se,newMediaInfo:D,switchMode:h.get().streaming.trackSwitchMode[me]},{streamId:ve}),!q)){var be=G(D);if(!be||!_[ve][me].storeLastSettings)return;be.roles&&(be.role=be.roles[0],delete be.roles),be.accessibility&&(be.accessibility=be.accessibility[0]),be.audioChannelConfiguration&&(be.audioChannelConfiguration=be.audioChannelConfiguration[0]),v[me]=be,S.setSavedMediaSettings(me,be)}}}function F(D,q){!D||!q||(f[D]=q)}function M(D){return D?f[D]:null}function U(){S.setSavedMediaSettings(o.default.TEXT,null)}function j(D){return D===o.default.AUDIO||D===o.default.VIDEO||D===o.default.TEXT||D===o.default.IMAGE}function X(D,q){if(!D&&!q)return!0;if(!D||!q)return!1;var me=D.id===q.id,de=D.viewpoint===q.viewpoint,ve=D.lang===q.lang,Se=D.codec===q.codec,be=D.roles.toString()===q.roles.toString(),Me=D.accessibility.toString()===q.accessibility.toString(),Fe=D.audioChannelConfiguration.toString()===q.audioChannelConfiguration.toString();return me&&Se&&de&&ve&&be&&Me&&Fe}function Y(D){D&&(D.domStorage&&(S=D.domStorage),D.settings&&(h=D.settings),D.customParametersModel&&(c=D.customParametersModel))}function se(){_={},v={},le()}function G(D){var q={lang:D.lang,viewpoint:D.viewpoint,roles:D.roles,accessibility:D.accessibility,audioChannelConfiguration:D.audioChannelConfiguration},me=q.lang||q.viewpoint||q.role&&q.role.length>0||q.accessibility&&q.accessibility.length>0||q.audioChannelConfiguration&&q.audioChannelConfiguration.length>0;return me?q:null}function ee(D,q,me){var de=[];return D.forEach(function(ve){q(me,ve)&&de.push(ve)}),de.length!==0?de:D}function J(D,q){return!D.lang||D.lang instanceof RegExp?q.lang.match(D.lang):q.lang!==""?Object(t.extendedFilter)(q.lang,E()(D.lang)).length>0:!1}function ie(D,q){return D.index===void 0||D.index===null||q.index===D.index}function ue(D,q){return!D.viewpoint||D.viewpoint===q.viewpoint}function ae(D,q){var me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,de=!D.role||!!q.roles.filter(function(ve){return ve===D.role})[0];return de||q.type===o.default.AUDIO&&me}function oe(D,q){var me;return D.accessibility?me=!!q.accessibility.filter(function(de){return de===D.accessibility})[0]:me=!q.accessibility.length,me}function Z(D,q){var me=!D.audioChannelConfiguration||!!q.audioChannelConfiguration.filter(function(de){return de===D.audioChannelConfiguration})[0];return me}function ge(D,q){var me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;try{var de=!1;if(!D.lang)de=!0;else if(D.lang instanceof RegExp)de=q.lang.match(D.lang);else if(q.lang!==""){var ve=E()(D.lang);ve&&(de=Object(t.extendedFilter)(q.lang,ve).length>0)}var Se=D.index===void 0||D.index===null||q.index===D.index,be=!D.viewpoint||D.viewpoint===q.viewpoint,Me=!D.role||!!q.roles.filter(function(Pe){return Pe===D.role})[0],Fe=!D.accessibility||!!q.accessibility.filter(function(Pe){return Pe===D.accessibility})[0],Ee=!D.audioChannelConfiguration||!!q.audioChannelConfiguration.filter(function(Pe){return Pe===D.audioChannelConfiguration})[0];return de&&Se&&be&&(Me||q.type===o.default.AUDIO&&me)&&Fe&&Ee}catch(Pe){return!1}}function le(){f={audio:null,video:null,text:null}}function z(D){var q=0,me=[];return D.forEach(function(de){isNaN(de.selectionPriority)||(de.selectionPriority>q?(q=de.selectionPriority,me=[de]):de.selectionPriority===q&&me.push(de))}),me}function K(D){var q=0,me=[],de;return D.forEach(function(ve){de=Math.max.apply(Math,ve.bitrateList.map(function(Se){return Se.bandwidth})),de>q?(q=de,me=[ve]):de===q&&me.push(ve)}),me}function R(D){var q=1/0,me=[],de;return D.forEach(function(ve){var Se=ve.bitrateList.reduce(function(be,Me){var Fe=Math.max(1,Me.width*Me.height),Ee=Me.bandwidth/Fe;return be+Ee},0);de=Se/ve.bitrateList.length,de<q?(q=de,me=[ve]):de===q&&me.push(ve)}),me}function L(D){var q=0,me=[],de;return D.forEach(function(ve){de=ve.representationCount,de>q?(q=de,me=[ve]):de===q&&me.push(ve)}),me}function $(D,q){if(D===o.default.TEXT)return q[0];var me=h.get().streaming.selectionModeForInitialTrack,de,ve=c.getCustomInitialTrackSelectionFunction();if(ve&&typeof ve=="function")de=ve(q);else switch(me){case o.default.TRACK_SELECTION_MODE_HIGHEST_SELECTION_PRIORITY:de=O(q);break;case o.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:de=Q(q);break;case o.default.TRACK_SELECTION_MODE_FIRST_TRACK:de=ne(q);break;case o.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:de=ce(q);break;case o.default.TRACK_SELECTION_MODE_WIDEST_RANGE:de=W(q);break;default:A.warn("Track selection mode ".concat(me," is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK")),de=ne(q);break}return de.length>0?de[0]:q[0]}function O(D){var q=z(D);return q.length>1&&(q=K(q)),q.length>1&&(q=L(q)),q}function Q(D){var q=K(D);return q.length>1&&(q=L(q)),q}function ne(D){return D[0]}function ce(D){var q=R(D);return q.length>1&&(q=K(q)),q}function W(D){var q=L(D);return q.length>1&&(q=K(D)),q}function B(){return{audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}}}return b={setInitialMediaSettingsForType:C,addTrack:x,getTracksFor:V,getCurrentTrackFor:H,isCurrentTrack:te,setTrack:w,selectInitialTrack:$,setInitialSettings:F,getInitialSettings:M,getTracksWithHighestBitrate:K,getTracksWithHighestEfficiency:R,getTracksWithWidestRange:L,isTracksEqual:X,matchSettings:ge,matchSettingsLang:J,matchSettingsIndex:ie,matchSettingsViewPoint:ue,matchSettingsRole:ae,matchSettingsAccessibility:oe,matchSettingsAudioChannelConfig:Z,saveTextSettingsDisabled:U,setConfig:Y,reset:se},p(),b}n.__dashjs_factory_name="MediaController";var i=m.default.getSingletonFactory(n);m.default.updateSingletonFactory(n.__dashjs_factory_name,i),g.default=i},"./src/streaming/controllers/MediaSourceController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js");function u(){var m,y,T,E=this.context;function t(){T=Object(l.default)(E).getInstance().getLogger(m)}function e(){var _="WebKitMediaSource"in window,h="MediaSource"in window;return h?y=new MediaSource:_&&(y=new WebKitMediaSource),y}function n(_){var h=window.URL.createObjectURL(y);return _.setSource(h),h}function i(_){_.setSource(null)}function d(_){!y||y.readyState!=="open"||_===null&&isNaN(_)||y.duration!==_&&(A(y)?setTimeout(d.bind(null,_),50):(T.info("Set MediaSource duration:"+_),y.duration=_))}function P(_,h){y&&typeof y.setLiveSeekableRange=="function"&&typeof y.clearLiveSeekableRange=="function"&&y.readyState==="open"&&_>=0&&_<h&&(y.clearLiveSeekableRange(),y.setLiveSeekableRange(_,h))}function b(_){if(!(!_||_.readyState!=="open")){for(var h=_.sourceBuffers,f=0;f<h.length;f++)if(h[f].updating||h[f].buffered.length===0)return;T.info("call to mediaSource endOfStream"),_.endOfStream()}}function A(_){for(var h=_.sourceBuffers,f=0;f<h.length;f++)if(h[f].updating)return!0;return!1}return m={createMediaSource:e,attachMediaSource:n,detachMediaSource:i,setDuration:d,setSeekable:P,signalEndOfStream:b},t(),m}u.__dashjs_factory_name="MediaSourceController",g.default=o.default.getSingletonFactory(u)},"./src/streaming/controllers/PlaybackController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/core/EventBus.js"),u=r("./src/core/events/Events.js"),m=r("./src/core/FactoryMaker.js"),y=r("./src/core/Debug.js"),T=r("./src/streaming/MediaPlayerEvents.js"),E=r("./src/streaming/constants/MetricsConstants.js"),t=500;function e(){var n=this.context,i=Object(l.default)(n).getInstance(),d,P,b,A,_,h,f,v,c,S,p,C,x,V,H,te,w,F,M,U,j,X,Y,se;function G(){P=Object(y.default)(n).getInstance().getLogger(d),ee()}function ee(){ge(),V=!1,S=0,p=0,te=0,X=!1,w=!0,F=!1,Y=!1,M=NaN,f&&(i.off(u.default.DATA_UPDATE_COMPLETED,Ke,d),i.off(u.default.LOADING_PROGRESS,mt,d),i.off(u.default.MANIFEST_UPDATED,Wt,d),i.off(u.default.STREAMS_COMPOSED,$t,d),i.off(T.default.PLAYBACK_ENDED,at,d),i.off(T.default.STREAM_INITIALIZING,_t,d),i.off(T.default.REPRESENTATION_SWITCH,wt,d),i.off(T.default.BUFFER_LEVEL_STATE_CHANGED,$e,d),Re(),lt()),c=null,f=null,C=null,x=null}function J(De,je){C=De,je!==!0&&ie()}function ie(){Ye(),x=C.manifestInfo.isDynamic,j=!1,U=!1,i.on(u.default.DATA_UPDATE_COMPLETED,Ke,d),i.on(u.default.LOADING_PROGRESS,mt,d),i.on(u.default.MANIFEST_UPDATED,Wt,d),i.on(u.default.STREAMS_COMPOSED,$t,d),i.on(T.default.PLAYBACK_ENDED,at,d,{priority:l.default.EVENT_PRIORITY_HIGH}),i.on(T.default.STREAM_INITIALIZING,_t,d),i.on(T.default.REPRESENTATION_SWITCH,wt,d),i.on(T.default.BUFFER_LEVEL_STATE_CHANGED,$e,d),V&&(V=!1,Z())}function ue(){return j}function ae(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return parseFloat((oe(De)-$()).toFixed(5))}function oe(De){var je=De||C;return je.start+je.duration}function Z(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;C&&f&&f.getElement()?(De&&x&&L($()),f.play()):V=!0}function ge(){C&&f&&f.pause()}function le(De){var je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ut=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!(!C||!f)){var Ot=isNaN(M)?f.getTime():M;De!==Ot&&(U=Ze===!0,U||(M=De),P.info("Requesting seek to time: "+De+(U?" (internal)":"")),x&&ut&&L(De),f.setCurrentTime(De,je))}}function z(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ut=R();if(ut!==0){S=p;var Ot=ut-S;le(Ot,De,je,Ze)}}function K(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,Ze=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,ut=R();if(ut!==0){var Ot=ut-S;le(Ot,De,je,Ze)}}function R(){if(!(!C||!f||!x)){var De=b&&b.hasVideoTrack()?o.default.VIDEO:o.default.AUDIO,je=_.getCurrentDVRInfo(De);return je&&je.range?je.range.end:0}}function L(De){var je=new Date(v.getClientReferenceTime()),Ze=h.getRegularPeriods()[0],ut=v.calcPresentationTimeFromWallTime(je,Ze);S=ut-De}function $(){return C&&f?f.getTime():null}function O(){return C&&f?f.isPaused():null}function Q(){return C&&f?f.isSeeking():null}function ne(){return C&&f?f.isStalled():null}function ce(){return C&&f?f.getPlaybackRate():null}function W(){return C&&f?f.getPlayedRanges():null}function B(){return C&&f?f.getEnded():null}function D(){return x}function q(){return b}function me(){return X}function de(){return te}function ve(){return S}function Se(){return p}function be(){if(!x||isNaN(te))return NaN;var De=$();if(isNaN(De)||De===0)return 0;var je=new Date().getTime()+v.getClientTimeOffset()*1e3;return Math.max(((je-te-De*1e3)/1e3).toFixed(3),0)}function Me(De,je){var Ze,ut,Ot,At=4,we=4,Oe=!isNaN(De)&&isFinite(De)?De:NaN,Be=h.getSuggestedPresentationDelay(),et=A.getServiceDescriptionSettings();return isNaN(se.get().streaming.delay.liveDelay)?se.get().streaming.delay.liveDelayFragmentCount!==null&&!isNaN(se.get().streaming.delay.liveDelayFragmentCount)&&!isNaN(Oe)?Ze=Oe*se.get().streaming.delay.liveDelayFragmentCount:et&&!isNaN(et.liveDelay)&&et.liveDelay>0?Ze=et.liveDelay:se.get().streaming.delay.useSuggestedPresentationDelay===!0&&Be!==null&&!isNaN(Be)&&Be>0?Ze=Be:isNaN(Oe)?Ze=je&&!isNaN(je.minBufferTime)?je.minBufferTime*At:C.manifestInfo.minBufferTime*At:Ze=Oe*we:Ze=se.get().streaming.delay.liveDelay,Ot=h.getAvailabilityStartTime(),Ot!==null&&(te=Ot),je&&je.dvrWindowSize>0?ut=Math.min(Ze,je.dvrWindowSize):ut=Ze,S=ut,p=ut,ut}function Fe(De){De&&(De.streamController&&(b=De.streamController),De.serviceDescriptionController&&(A=De.serviceDescriptionController),De.dashMetrics&&(_=De.dashMetrics),De.adapter&&(h=De.adapter),De.videoModel&&(f=De.videoModel),De.timelineConverter&&(v=De.timelineConverter),De.settings&&(se=De.settings))}function Ee(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(!(O()||!x||f.getReadyState()===0||Q()||X)){De||(De=b.hasVideoTrack()?o.default.VIDEO:o.default.AUDIO);var je=$(),Ze=Pe(je,De),ut=!isNaN(Ze)&&Ze!==je;ut&&!Q()&&(ne()||j||f.getReadyState()===1)&&(P.debug("UpdateCurrentTime: Seek to actual time: ".concat(Ze," from currentTime: ").concat(je)),le(Ze,!1,!1))}}function Pe(De,je){var Ze=_.getCurrentDVRInfo(je),ut=Ze?Ze.range:null,Ot;return ut?(De>ut.end?Ot=Math.max(ut.end-S,ut.start):De>0&&De+.25<ut.start&&Math.abs(De-ut.start)<31536e4?F?Ot=Math.max(ut.end-S,ut.start):Ot=ut.start:Ot=De,Ot):NaN}function Ue(){c===null&&(c=setInterval(function(){Ie()},se.get().streaming.wallclockTimeUpdateInterval))}function Re(){clearInterval(c),c=null}function Ke(De){var je=h.convertRepresentationToRepresentationInfo(De.currentRepresentation),Ze=je?je.mediaInfo.streamInfo:null;Ze===null||C.id!==Ze.id||(C=Ze)}function Ne(){i.trigger(u.default.CAN_PLAY)}function ze(){i.trigger(u.default.CAN_PLAY_THROUGH)}function $e(De){De.streamId===b.getActiveStreamInfo().id&&(j=De.state===E.default.BUFFER_EMPTY,se.get().streaming.buffer.setStallState&&f.setStallState(De.mediaType,De.state===E.default.BUFFER_EMPTY))}function tt(){P.info("Native video element event: play"),Ee(),Ue(),i.trigger(u.default.PLAYBACK_STARTED,{startTime:$()})}function ft(){P.info("Native video element event: waiting"),i.trigger(u.default.PLAYBACK_WAITING,{playingTime:$()})}function bt(){P.info("Native video element event: playing"),U=!1,i.trigger(u.default.PLAYBACK_PLAYING,{playingTime:$()})}function Et(){P.info("Native video element event: pause"),i.trigger(u.default.PLAYBACK_PAUSED,{ended:B()})}function St(){if(!U){var De=$();!isNaN(M)&&M!==De&&(De=M),M=NaN,P.info("Seeking to: "+De),Ue(),i.trigger(u.default.PLAYBACK_SEEKING,{seekTime:De,streamId:C.id})}}function Ct(){P.info("Native video element event: seeked"),U=!1,i.trigger(u.default.PLAYBACK_SEEKED)}function ye(){C&&i.trigger(u.default.PLAYBACK_TIME_UPDATED,{timeToEnd:ae(),time:$(),streamId:C.id})}function he(){i.trigger(u.default.PLAYBACK_PROGRESS,{streamId:C.id})}function Ae(){var De=ce();P.info("Native video element event: ratechange: ",De),i.trigger(u.default.PLAYBACK_RATE_CHANGED,{playbackRate:De})}function ke(){P.info("Native video element event: loadedmetadata"),i.trigger(u.default.PLAYBACK_METADATA_LOADED),Ue()}function Qe(){P.info("Native video element event: loadeddata"),i.trigger(u.default.PLAYBACK_LOADED_DATA)}function Ge(){P.info("Native video element event: ended"),ge(),Re();var De=b?b.getActiveStreamInfo():null;De&&i.trigger(u.default.PLAYBACK_ENDED,{isLast:De.isLast})}function qe(){i.trigger(u.default.PLAYBACK_VOLUME_CHANGED)}function at(De){if(c&&De.isLast){P.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");var je=De.seekTime?De.seekTime:oe();f.setCurrentTime(je),ge(),Re()}}function it(De){var je=De.target||De.srcElement;i.trigger(u.default.PLAYBACK_ERROR,{error:je.error})}function Ie(){i.trigger(u.default.WALLCLOCK_TIME_UPDATED,{isDynamic:x,time:new Date}),D()&&(b.addDVRMetric(),O()?He():Ee())}function He(){var De=Date.now();(!H||De>H+t)&&(H=De,ye())}function Xe(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,je=null;return b.getActiveStreamProcessors().forEach(function(Ze){if(!De||De.length===0||De.indexOf(Ze.getType())===-1){var ut=Ze.getBufferLevel();je===null?je=ut:je=Math.min(je,ut)}}),je}function nt(){return F}function mt(De){if(De.stream===!1&&F&&!isNaN(De.request.duration)){var je=1.2*De.request.duration;je>S&&(P.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",je.toFixed(2)),S=je,p=je)}}function ht(De){i.trigger(u.default.PLAYBACK_STALLED,{e:De})}function _t(De){pe(De.mediaInfo)}function wt(De){var je=b.getActiveStreamInfo();!De||!je||!De.currentRepresentation||!De.streamId||De.streamId!==je.id||!De.mediaType||De.mediaType!==o.default.VIDEO&&De.mediaType!==o.default.AUDIO||(w=De.currentRepresentation.availabilityTimeComplete,F=!w,F&&!Y&&(Y=!0))}function ot(){return Y}function Wt(){X=!0}function $t(){X=!1}function pe(De){De&&De.supplementalProperties&&De.supplementalProperties[o.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME]==="true"&&(P.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),F=!0)}function Ye(){f.addEventListener("canplay",Ne),f.addEventListener("canplaythrough",ze),f.addEventListener("play",tt),f.addEventListener("waiting",ft),f.addEventListener("playing",bt),f.addEventListener("pause",Et),f.addEventListener("error",it),f.addEventListener("seeking",St),f.addEventListener("seeked",Ct),f.addEventListener("timeupdate",ye),f.addEventListener("progress",he),f.addEventListener("ratechange",Ae),f.addEventListener("loadedmetadata",ke),f.addEventListener("loadeddata",Qe),f.addEventListener("stalled",ht),f.addEventListener("ended",Ge),f.addEventListener("volumechange",qe)}function lt(){f.removeEventListener("canplay",Ne),f.removeEventListener("canplaythrough",ze),f.removeEventListener("play",tt),f.removeEventListener("waiting",ft),f.removeEventListener("playing",bt),f.removeEventListener("pause",Et),f.removeEventListener("error",it),f.removeEventListener("seeking",St),f.removeEventListener("seeked",Ct),f.removeEventListener("timeupdate",ye),f.removeEventListener("progress",he),f.removeEventListener("ratechange",Ae),f.removeEventListener("loadedmetadata",ke),f.removeEventListener("loadeddata",Qe),f.removeEventListener("stalled",ht),f.removeEventListener("ended",Ge),f.removeEventListener("volumechange",qe)}return d={initialize:J,setConfig:Fe,getTimeToStreamEnd:ae,getBufferLevel:Xe,getPlaybackStalled:ue,getTime:$,getLowLatencyModeEnabled:nt,getInitialCatchupModeActivated:ot,getIsManifestUpdateInProgress:me,getPlaybackRate:ce,getPlayedRanges:W,getEnded:B,getIsDynamic:D,getStreamController:q,computeAndSetLiveDelay:Me,getLiveDelay:ve,getOriginalLiveDelay:Se,getCurrentLiveLatency:be,play:Z,isPaused:O,isStalled:ne,pause:ge,isSeeking:Q,getStreamEndTime:oe,seek:le,seekToOriginalLive:z,seekToCurrentLive:K,reset:ee,updateCurrentTime:Ee,getAvailabilityStartTime:de},G(),d}e.__dashjs_factory_name="PlaybackController",g.default=m.default.getSingletonFactory(e)},"./src/streaming/controllers/ScheduleController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/models/FragmentModel.js"),u=r("./src/core/EventBus.js"),m=r("./src/core/events/Events.js"),y=r("./src/core/FactoryMaker.js"),T=r("./src/core/Debug.js"),E=r("./src/streaming/constants/MetricsConstants.js"),t=r("./src/streaming/MediaPlayerEvents.js");function e(n){n=n||{};var i=this.context,d=Object(u.default)(i).getInstance(),P=n.dashMetrics,b=n.mediaPlayerModel,A=n.fragmentModel,_=n.abrController,h=n.playbackController,f=n.textController,v=n.type,c=n.bufferController,S=n.settings,p,C,x,V,H,te,w,F,M,U,j,X,Y;function se(){x=Object(T.default)(i).getInstance().getLogger(p),Me(),C=n.streamInfo}function G(Pe){w=Pe,d.on(m.default.BYTES_APPENDED_END_FRAGMENT,B,p),d.on(m.default.URL_RESOLUTION_FAILED,D,p),d.on(t.default.PLAYBACK_STARTED,q,p),d.on(t.default.PLAYBACK_RATE_CHANGED,me,p),d.on(t.default.PLAYBACK_TIME_UPDATED,ce,p)}function ee(){return v}function J(){return C.id}function ie(Pe){V=Pe}function ue(Pe){if(!c.getIsBufferingCompleted()){ae();var Ue=isNaN(Pe)?0:Pe;te=setTimeout(Z,Ue)}}function ae(){te&&(clearTimeout(te),te=null)}function oe(){var Pe=C.id,Ue=_.getMaxAllowedIndexFor(v,Pe);return isNaN(M)||M!=Ue?(x.info("Top quality "+v+" index has changed from "+M+" to "+Ue),M=Ue,!0):!1}function Z(){try{if(le()){ae();return}if(z()){var Pe=!1;Y&&(Pe=_.checkPlaybackQuality(v,C.id)),Pe||ge()}else ue(h.getLowLatencyModeEnabled()?S.get().streaming.scheduling.lowLatencyTimeout:S.get().streaming.scheduling.defaultTimeout)}catch{ue(h.getLowLatencyModeEnabled()?S.get().streaming.scheduling.lowLatencyTimeout:S.get().streaming.scheduling.defaultTimeout)}}function ge(){X||V.quality!==U||j?(j?(x.debug("Switch track for "+v+", representation id = "+V.id),j=!1):x.debug("Quality has changed, get init request for representationid = "+V.id),d.trigger(m.default.INIT_FRAGMENT_NEEDED,{representationId:V.id,sender:p},{streamId:C.id,mediaType:v}),Y=!1,X=!1):(x.debug("Media segment needed for ".concat(v," and stream id ").concat(C.id)),d.trigger(m.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:C.id,mediaType:v}),Y=!0)}function le(){try{return v===o.default.TEXT&&!f.isTextEnabled()||h.isPaused()&&(!h.getStreamController().getInitialPlayback()||!h.getStreamController().getAutoPlay())&&!S.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}function z(){try{return V&&(isNaN(U)||j||oe()||K())}catch{return!1}}function K(){if(!v||!V)return!0;var Pe=P.getCurrentBufferLevel(v);return Pe<R()}function R(){var Pe=NaN;return!v||!V||(v===o.default.TEXT?Pe=L():v===o.default.AUDIO&&w?Pe=$():Pe=O()),Pe}function L(){try{if(f.isTextEnabled())if(isNaN(V.fragmentDuration)){var Pe=P.getCurrentSchedulingInfo(E.default.SCHEDULING_INFO);return Pe?Pe.duration:0}else return V.fragmentDuration;else return 0}catch{return 0}}function $(){try{var Pe=P.getCurrentBufferLevel(o.default.VIDEO);return isNaN(V.fragmentDuration)?Pe+1:Math.max(Pe+1,V.fragmentDuration)}catch{return 0}}function O(){try{var Pe=V.mediaInfo.streamInfo;if(_.isPlayingAtTopQuality(Pe)){var Ue=Pe.manifestInfo.duration>=S.get().streaming.buffer.longFormContentDurationThreshold;return Ue?S.get().streaming.buffer.bufferTimeAtTopQualityLongForm:S.get().streaming.buffer.bufferTimeAtTopQuality}else return b.getStableBufferTime()}catch{return b.getStableBufferTime()}}function Q(Pe){j=Pe}function ne(){return j}function ce(){W(!0)}function W(Pe){if(h&&A){var Ue=A.getRequests({state:l.default.FRAGMENT_MODEL_EXECUTED,time:h.getTime(),threshold:0})[0];Ue&&h.getTime()>=Ue.startTime&&((!F.mediaInfo||Ue.mediaInfo.type===F.mediaInfo.type&&Ue.mediaInfo.id!==F.mediaInfo.id)&&Pe&&d.trigger(m.default.TRACK_CHANGE_RENDERED,{mediaType:v,oldMediaInfo:F.mediaInfo,newMediaInfo:Ue.mediaInfo,streamId:C.id}),(Ue.quality!==F.quality||Ue.adaptationIndex!==F.adaptationIndex)&&Pe&&(x.debug("Quality change rendered for streamId ".concat(C.id," and type ").concat(v)),d.trigger(m.default.QUALITY_CHANGE_RENDERED,{mediaType:v,oldQuality:F.quality,newQuality:Ue.quality,streamId:C.id})),F={mediaInfo:Ue.mediaInfo,quality:Ue.quality,adaptationIndex:Ue.adaptationIndex})}}function B(Pe){x.debug("Appended bytes for ".concat(Pe.mediaType," and stream id ").concat(C.id)),(isNaN(Pe.index)||isNaN(U))&&(U=Pe.quality,x.info("["+v+"] lastInitializedRepresentationInfo changed to "+Pe.quality)),ue(0)}function D(){A.abortRequests(),ae()}function q(){S.get().streaming.scheduling.scheduleWhilePaused||ue()}function me(Pe){P.updatePlayListTraceMetrics({playbackspeed:Pe.playbackRate.toString()})}function de(Pe){H=Pe}function ve(){return H}function Se(Pe){Y=Pe}function be(Pe){X=Pe}function Me(){Y=!0,H=0,U=NaN,F={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},M=NaN,j=!1,X=!1}function Fe(){d.off(m.default.BYTES_APPENDED_END_FRAGMENT,B,p),d.off(m.default.URL_RESOLUTION_FAILED,D,p),d.off(t.default.PLAYBACK_STARTED,q,p),d.off(t.default.PLAYBACK_RATE_CHANGED,me,p),d.off(t.default.PLAYBACK_TIME_UPDATED,ce,p),ae(),W(!1),Me(),C=null}function Ee(){return h}return p={initialize:G,getType:ee,getStreamId:J,setCurrentRepresentation:ie,setTimeToLoadDelay:de,getTimeToLoadDelay:ve,setSwitchTrack:Q,getSwitchStrack:ne,startScheduleTimer:ue,clearScheduleTimer:ae,reset:Fe,getBufferTarget:R,getPlaybackController:Ee,setCheckPlaybackQuality:Se,setInitSegmentRequired:be},se(),p}e.__dashjs_factory_name="ScheduleController",g.default=y.default.getClassFactory(e)},"./src/streaming/controllers/StreamController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/constants/MetricsConstants.js"),u=r("./src/streaming/Stream.js"),m=r("./src/streaming/ManifestUpdater.js"),y=r("./src/core/EventBus.js"),T=r("./src/core/events/Events.js"),E=r("./src/core/FactoryMaker.js"),t=r("./src/streaming/vo/metrics/PlayList.js"),e=r("./src/core/Debug.js"),n=r("./src/streaming/utils/InitCache.js"),i=r("./src/streaming/utils/URLUtils.js"),d=r("./src/streaming/MediaPlayerEvents.js"),P=r("./src/streaming/controllers/TimeSyncController.js"),b=r("./src/streaming/controllers/MediaSourceController.js"),A=r("./src/streaming/vo/DashJSError.js"),_=r("./src/core/errors/Errors.js"),h=r("./src/streaming/controllers/EventController.js"),f=r("./src/streaming/constants/ConformanceViolationConstants.js");function v(w){return C(w)||p(w)||S(w)||c()}function c(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S(w,F){if(w){if(typeof w=="string")return x(w,F);var M=Object.prototype.toString.call(w).slice(8,-1);if(M==="Object"&&w.constructor&&(M=w.constructor.name),M==="Map"||M==="Set")return Array.from(w);if(M==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(M))return x(w,F)}}function p(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}function C(w){if(Array.isArray(w))return x(w)}function x(w,F){(F==null||F>w.length)&&(F=w.length);for(var M=0,U=new Array(F);M<F;M++)U[M]=w[M];return U}var V=200,H=2;function te(){var w=this.context,F=Object(y.default)(w).getInstance(),M,U,j,X,Y,se,G,ee,J,ie,ue,ae,oe,Z,ge,le,z,K,R,L,$,O,Q,ne,ce,W,B,D,q,me,de,ve,Se,be,Me,Fe,Ee,Pe,Ue,Re,Ke,Ne,ze,$e,tt,ft,bt,Et,St;function Ct(){U=Object(e.default)(w).getInstance().getLogger(M),ue=Object(P.default)(w).getInstance(),ie=Object(b.default)(w).getInstance(),R=Object(n.default)(w).getInstance(),L=Object(i.default)(w).getInstance(),Xt()}function ye(Ce,Je){ke(),D=Ce,B=Je,O.initialize(),Y=Object(m.default)(w).create(),Y.setConfig({manifestModel:G,adapter:ee,manifestLoader:se,errHandler:$,settings:tt}),Y.initialize(),K=Object(h.default)(w).getInstance(),K.setConfig({manifestUpdater:Y,playbackController:be,settings:tt}),K.start(),ue.setConfig({dashMetrics:J,baseURLController:oe,errHandler:$,settings:tt}),ue.initialize(),ce&&(F.trigger(T.default.PROTECTION_CREATED,{controller:ce}),ce.setMediaElement(Se.getElement()),B&&ce.setProtectionData(B)),he()}function he(){F.on(d.default.PLAYBACK_TIME_UPDATED,At,M),F.on(d.default.PLAYBACK_SEEKING,_t,M),F.on(d.default.PLAYBACK_ERROR,Ve,M),F.on(d.default.PLAYBACK_STARTED,we,M),F.on(d.default.PLAYBACK_PAUSED,Oe,M),F.on(d.default.PLAYBACK_ENDED,Tt,M),F.on(d.default.METRIC_ADDED,Qt,M),F.on(d.default.MANIFEST_VALIDITY_CHANGED,Ft,M),F.on(d.default.BUFFER_LEVEL_UPDATED,Ze,M),F.on(d.default.QUALITY_CHANGE_REQUESTED,ut,M),T.default.KEY_SESSION_UPDATED&&F.on(T.default.KEY_SESSION_UPDATED,it,M),F.on(T.default.MANIFEST_UPDATED,re,M),F.on(T.default.STREAM_BUFFERING_COMPLETED,Be,M),F.on(T.default.TIME_SYNCHRONIZATION_COMPLETED,at,M),F.on(T.default.CURRENT_TRACK_CHANGED,pe,M),F.on(T.default.SETTING_UPDATED_LIVE_DELAY,Ot,M),F.on(T.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Ot,M)}function Ae(){F.off(d.default.PLAYBACK_TIME_UPDATED,At,M),F.off(d.default.PLAYBACK_SEEKING,_t,M),F.off(d.default.PLAYBACK_ERROR,Ve,M),F.off(d.default.PLAYBACK_STARTED,we,M),F.off(d.default.PLAYBACK_PAUSED,Oe,M),F.off(d.default.PLAYBACK_ENDED,Tt,M),F.off(d.default.METRIC_ADDED,Qt,M),F.off(d.default.MANIFEST_VALIDITY_CHANGED,Ft,M),F.off(d.default.BUFFER_LEVEL_UPDATED,Ze,M),F.off(d.default.QUALITY_CHANGE_REQUESTED,ut,M),T.default.KEY_SESSION_UPDATED&&F.off(T.default.KEY_SESSION_UPDATED,it,M),F.off(T.default.MANIFEST_UPDATED,re,M),F.off(T.default.STREAM_BUFFERING_COMPLETED,Be,M),F.off(T.default.TIME_SYNCHRONIZATION_COMPLETED,at,M),F.off(T.default.CURRENT_TRACK_CHANGED,pe,M),F.off(T.default.SETTING_UPDATED_LIVE_DELAY,Ot,M),F.off(T.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Ot,M)}function ke(){if(!se||!se.hasOwnProperty("load")||!O||!O.hasOwnProperty("initialize")||!O.hasOwnProperty("reset")||!O.hasOwnProperty("getClientTimeOffset")||!G||!$||!J||!be)throw new Error(o.default.MISSING_CONFIG_ERROR)}function Qe(){if(!Y||!Y.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}function Ge(Ce){var Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;ke(),Et=Je,se.load(Ce)}function qe(Ce){var Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;Qe(),Et=Je,Y.setManifest(Ce)}function at(){Ie()}function it(){ft=!0}function Ie(){try{var Ce=ee.getStreamsInfo();if(!ne&&Ce.length===0)throw new Error("There are no periods in the MPD");ne&&Ce.length>0&&J.updateManifestUpdateInfo({currentTime:be.getTime(),buffered:Se.getBufferRange(),presentationStartTime:Ce[0].start,clientTimeOffset:O.getClientTimeOffset()}),Q.length>0&&br(Ce);for(var Je=[],dt=0,Pt=Ce.length;dt<Pt;dt++){var Dt=Ce[dt];Je.push(He(Dt)),J.addManifestUpdateStreamInfo(Dt)}Promise.all(Je).then(function(){return tt.get().streaming.applyContentSteering&&!ne&&ae.shouldQueryBeforeStart()?ae.loadSteeringData():Promise.resolve()}).then(function(){ne||Xe(Ce),F.trigger(T.default.STREAMS_COMPOSED),et()}).catch(function(xt){throw xt})}catch(xt){$.error(new A.default(_.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,xt.message+" nostreamscomposed",G.getValue())),de=!0,Bt()}}function He(Ce){var Je=yt(Ce.id);return Je?Je.updateData(Ce):(Je=Object(u.default)(w).create({manifestModel:G,mediaPlayerModel:Fe,dashMetrics:J,manifestUpdater:Y,adapter:ee,timelineConverter:O,capabilities:j,capabilitiesFilter:X,errHandler:$,baseURLController:oe,segmentBaseController:Z,textController:W,abrController:le,playbackController:be,eventController:K,mediaController:z,protectionController:ce,videoModel:Se,streamInfo:Ce,settings:tt}),Q.push(Je),Je.initialize(),Promise.resolve())}function Xe(Ce){je();var Je=J.getCurrentDVRInfo().range;if(Je.end<Je.start){bt&&clearTimeout(bt);var dt=Math.min(((Je.end-Je.start)*-1+H)*1e3,2147483647);U.debug("Waiting for ".concat(dt," ms before playback can start")),F.trigger(T.default.AST_IN_FUTURE,{delay:dt}),bt=setTimeout(function(){Xe(Ce)},dt);return}tt.get().streaming.applyProducerReferenceTime&&Me.calculateProducerReferenceTimeOffsets(Ce);var Pt=Ce[0].manifestInfo;if(tt.get().streaming.applyServiceDescription&&Me.applyServiceDescription(Pt),ee.getIsDynamic()){var Dt=N(Ce,Pt);be.computeAndSetLiveDelay(Dt,Pt)}var xt=gr(),Ht=De(xt),qt=Ht!==null?Ht:Q[0];F.trigger(T.default.INITIAL_STREAM_SWITCH,{startTime:xt}),nt(qt,null,xt),vt()}function nt(Ce,Je,dt){try{if(q||!Ce||Je===Ce&&Ce.getIsActive())return;q=!0,F.trigger(T.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:Je?Je.getStreamInfo():null,toStreamInfo:Ce.getStreamInfo()});var Pt=!1;ne=Ce,Je&&(Pt=Ye(Ce,Je),Je.deactivate(Pt)),dt=isNaN(dt)?!Pt&&Je?Ce.getStreamInfo().start:NaN:dt,U.info("Switch to stream ".concat(Ce.getId(),". Seektime is ").concat(dt,", current playback time is ").concat(be.getTime(),". Seamless period switch is set to ").concat(Pt)),ze=ze.filter(function(Dt){return Dt.getId()!==ne.getId()}),be.initialize(st(),!!Je),Se.getElement()&&mt(dt,Pt)}catch{q=!1}}function mt(Ce,Je){var dt;function Pt(){if(!(!ve||ve.readyState!=="open")){U.debug("MediaSource is open!"),window.URL.revokeObjectURL(dt),ve.removeEventListener("sourceopen",Pt),ve.removeEventListener("webkitsourceopen",Pt),zt();var xt=J.getCurrentDVRInfo();ie.setSeekable(xt.range.start,xt.range.end),ht(Ce,Je)}}function Dt(){ve.addEventListener("sourceopen",Pt,!1),ve.addEventListener("webkitsourceopen",Pt,!1),dt=ie.attachMediaSource(Se),U.debug("MediaSource attached to element.  Waiting on open...")}ve?Je?ht(Ce,Je):(ie.detachMediaSource(Se),Dt()):(ve=ie.createMediaSource(),Dt())}function ht(Ce,Je){ne.activate(ve,Je?Ne:void 0,Ce).then(function(dt){if(dt){var Pt=Object.keys(dt);Pt.length>0&&dt[Pt[0]].getBuffer().changeType&&($e=!0),Ne=dt}isNaN(Ce)||(F.trigger(T.default.SEEK_TARGET,{time:Ce},{streamId:ne.getId()}),be.seek(Ce,!1,!0),ne.startScheduleControllers()),q=!1,F.trigger(T.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:st()})})}function _t(Ce){var Je=Ce.seekTime,dt=De(Je);!dt||dt===ne?(wt(),Wt(Ce)):dt&&dt!==ne&&(wt(dt),$t(Ce,dt)),Le(t.PlayList.SEEK_START_REASON)}function wt(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;ot()}function ot(){ze&&ze.length>0&&(ze.forEach(function(Ce){Ce.deactivate(!0)}),ze=[])}function Wt(Ce){var Je=ne.getProcessors();Je.forEach(function(dt){return dt.prepareInnerPeriodPlaybackSeeking(Ce)}),Te(t.PlayListTrace.USER_REQUEST_STOP_REASON)}function $t(Ce,Je){var dt=Ce&&!isNaN(Ce.seekTime)?Ce.seekTime:NaN,Pt=ne.getProcessors(),Dt=Pt.map(function(xt){return xt.prepareOuterPeriodPlaybackSeeking(Ce)});Promise.all(Dt).then(function(){nt(Je,ne,dt)}).catch(function(xt){$.error(xt)})}function pe(Ce){Ce.newMediaInfo.streamInfo.id===ne.getId()&&(ot(),ne.prepareTrackChange(Ce))}function Ye(Ce,Je){try{return tt.get().streaming.buffer.reuseExistingSourceBuffers&&(Je.isProtectionCompatible(Ce)||ft)&&($e||Je.isMediaCodecCompatible(Ce,Je))}catch{return!1}}function lt(Ce){var Je=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(ve&&!Ce.getPreloaded()){var dt=Ye(Ce,Je);dt&&Ce.startPreloading(ve,Ne).then(function(){ze.push(Ce)})}}function De(Ce){if(isNaN(Ce))return null;for(var Je=Q.length,dt=0;dt<Je;dt++){var Pt=Q[dt],Dt=parseFloat((Pt.getStartTime()+Pt.getDuration()).toFixed(5));if(Ce<Dt)return Pt}return null}function je(){try{var Ce=ee.getIsDynamic(),Je=ee.getStreamsInfo(),dt=Je[0].manifestInfo,Pt=be.getTime(),Dt=O.calcTimeShiftBufferWindow(Q,Ce),xt=ct();if(typeof Dt.start>"u"||typeof Dt.end>"u")return;!xt||xt.length===0?J.addDVRInfo(o.default.VIDEO,Pt,dt,Dt):xt.forEach(function(Ht){J.addDVRInfo(Ht.getType(),Pt,dt,Dt)})}catch{}}function Ze(Ce){if(Ue&&D){var Je=Fe.getInitialBufferLevel(),dt=[o.default.TEXT];(isNaN(Je)||Je<=be.getBufferLevel(dt)||ee.getIsDynamic()&&Je>be.getLiveDelay())&&(Ue=!1,Le(t.PlayList.INITIAL_PLAYOUT_START_REASON),be.play())}Ce&&Ce.mediaType&&J.addBufferLevel(Ce.mediaType,new Date,Ce.bufferLevel*1e3)}function ut(Ce){Ce.streamInfo.id===ne.getId()&&Ce.reason&&Ce.reason.forceReplace&&ot();var Je=yt(Ce.streamInfo.id);Je.prepareQualityChange(Ce)}function Ot(){if(ee.getIsDynamic()&&be.getOriginalLiveDelay()!==0&&ne){var Ce=ee.getStreamsInfo();if(Ce.length>0){var Je=Ce[0].manifestInfo,dt=N(Ce,Je);be.computeAndSetLiveDelay(dt,Je)}}}function At(){if(k()){var Ce=Se.getPlaybackQuality();Ce&&J.addDroppedFrames(Ce)}}function we(){U.debug("[onPlaybackStarted]"),!Ue&&Pe&&Le(t.PlayList.RESUME_FROM_PAUSE_START_REASON),Ue&&(Ue=!1),Re&&(Re=!1,tt.get().streaming.applyContentSteering&&!ae.shouldQueryBeforeStart()&&ae.loadSteeringData()),Pe=!1}function Oe(Ce){U.debug("[onPlaybackPaused]"),Ce.ended||(Pe=!0,Te(t.PlayListTrace.USER_REQUEST_STOP_REASON))}function Be(Ce){U.debug("Stream with id ".concat(Ce.streamInfo.id," finished buffering"));var Je=Ce.streamInfo.isLast;ve&&Je?(U.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),ie.signalEndOfStream(ve)):et()}function et(){if(!(!ne||!ne.getHasFinishedBuffering()))for(var Ce=jt(ne),Je=0;Je<Ce.length;){var dt=Ce[Je],Pt=Je===0?ne:Ce[Je-1];!dt.getPreloaded()&&Pt.getHasFinishedBuffering()&&ve&&lt(dt,Pt),Je+=1}}function vt(){Ke||(Ke=setInterval(function(){!q&&be.getTimeToStreamEnd()<=0&&!be.isSeeking()&&F.trigger(T.default.PLAYBACK_ENDED,{isLast:st().isLast})},V))}function pt(){Ke&&(clearInterval(Ke),Ke=null)}function xe(Ce,Je){for(var dt=null,Pt=0,Dt=0,xt=null,Ht=0;Ht<Q.length;Ht++){if(dt=Q[Ht],Dt=dt.getStartTime(),xt=dt.getDuration(),Number.isFinite(Dt)&&(Pt=Dt),dt.getId()===Je)return Ce-Pt;Number.isFinite(xt)&&(Pt+=xt)}return null}function ct(){return ne?ne.getProcessors():[]}function Tt(Ce){if(ne&&!ne.getIsEndedEventSignaled()){ne.setIsEndedEventSignaled(!0);var Je=Rt();Je?(U.debug("StreamController onEnded, found next stream with id ".concat(Je.getStreamInfo().id,". Switching from ").concat(ne.getStreamInfo().id," to ").concat(Je.getStreamInfo().id)),nt(Je,ne,NaN)):(U.debug("StreamController no next stream found"),ne.setIsEndedEventSignaled(!1)),Te(Je?t.PlayListTrace.END_OF_PERIOD_STOP_REASON:t.PlayListTrace.END_OF_CONTENT_STOP_REASON)}Ce&&Ce.isLast&&(pt(),ae.stopSteeringRequestTimer())}function Rt(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Je=Ce||ne||null;if(!Je)return null;for(var dt=Je.getStreamInfo(),Pt=dt.start,Dt=0,xt=-1,Ht=NaN;Dt<Q.length;){var qt=Q[Dt],Zt=qt.getStreamInfo(),vr=Zt.start-Pt;vr>0&&(isNaN(Ht)||vr<Ht)&&dt.id!==Zt.id&&(Ht=vr,xt=Dt),Dt+=1}return xt>=0?Q[xt]:null}function jt(){var Ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{var Je=Ce||ne||null;if(Je){var dt=Je.getStreamInfo();return Q.filter(function(Pt){var Dt=Pt.getStreamInfo();return Dt.start>dt.start&&dt.id!==Dt.id})}}catch{return[]}}function zt(Ce){var Je=Ce||st().manifestInfo.duration;ie.setDuration(Je)}function Vt(){return ne}function Gt(){return Ue}function sr(){return D}function gr(){var Ce,Je=ee.getIsDynamic();if(Je){var dt=J.getCurrentDVRInfo(),Pt=dt&&dt.range?dt.range.end:0;Ce=Pt-be.getOriginalLiveDelay();var Dt=dt?dt.range:null;if(Dt){if(!isNaN(Et)||Et.toString().indexOf("posix:")!==-1){U.info("Start time provided by the app: ".concat(Et));var xt=lr(!0,Et);isNaN(xt)||(Ce=Math.min(Ce,xt))}else{var Ht=tr(!0);isNaN(Ht)||(U.info("Start time from URI parameters: ".concat(Ht)),Ce=Math.min(Ce,Ht))}var qt=tt.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;Ce=Math.max(Ce,Dt.start+qt)}}else{var Zt=Mt(),vr=Zt[0].getStreamInfo();if(Ce=vr.start,isNaN(Et)){var Fr=tr(!1);isNaN(Fr)||(U.info("Start time from URI parameters: ".concat(Fr)),Ce=Math.max(Ce,Fr))}else{U.info("Start time provided by the app: ".concat(Et));var Vr=lr(!1,Et);isNaN(Vr)||(Ce=Math.max(Ce,Vr))}}return Ce}function tr(Ce){var Je=ge.getURIFragmentData();if(!Je||!Je.t)return NaN;var dt=Mt()[0],Pt=dt.getStreamInfo().start;return Je.t=Je.t.split(",")[0],ur(Ce,Je.t,Pt)}function lr(Ce,Je){var dt=0;if(!Ce){var Pt=Mt()[0];dt=Pt.getStreamInfo().start}return ur(Ce,Je,dt)}function ur(Ce,Je,dt){var Pt=ee.getRegularPeriods()[0],Dt=Je.toString(),xt=Dt.indexOf("posix:")!==-1?Dt.substring(6)==="now"?Date.now()/1e3:parseFloat(Dt.substring(6)):NaN,Ht=Ce&&!isNaN(xt)?O.calcPresentationTimeFromWallTime(new Date(xt*1e3),Pt):parseFloat(Dt)+dt;return Ht}function br(Ce){if(Ce.length===0){U.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.");return}Q=Q.filter(function(Je){var dt=Ce.filter(function(Dt){return Dt.id===Je.getId()}).length>0,Pt=dt||Je.getId()===ne.getId();return Pt||(U.debug("Removing stream ".concat(Je.getId())),Je.reset(!0)),Pt})}function N(Ce,Je){try{var dt=NaN;if(Je&&!isNaN(Je.maxFragmentDuration)&&isFinite(Je.maxFragmentDuration))return Je.maxFragmentDuration;if(Ce&&Ce.length===1){var Pt=Ce[0],Dt=[o.default.VIDEO,o.default.AUDIO,o.default.TEXT],xt=Dt.reduce(function(Ht,qt){var Zt=ee.getMediaInfoForType(Pt,qt);return Zt&&Zt.isFragmented!==!1&&Ht.push(Zt),Ht},[]).reduce(function(Ht,qt){var Zt=ee.getVoRepresentations(qt);return Zt&&Zt.length>0&&Zt.forEach(function(vr){vr&&Ht.push(vr)}),Ht},[]).reduce(function(Ht,qt){var Zt=ee.convertRepresentationToRepresentationInfo(qt);return Zt&&Zt.fragmentDuration&&!isNaN(Zt.fragmentDuration)&&Ht.push(Zt.fragmentDuration),Ht},[]);dt=Math.max.apply(Math,v(xt))}return isFinite(dt)?dt:NaN}catch{return NaN}}function re(Ce){if(Ce.error)de=!0,Bt();else{U.info("Manifest updated... updating data system wide.");var Je=Ce.manifest;ee.updatePeriods(Je);var dt=ee.getUTCTimingSources();ee.getIsDynamic()&&(!dt||dt.length===0)&&F.trigger(d.default.CONFORMANCE_VIOLATION,{level:f.default.LEVELS.WARNING,event:f.default.EVENTS.NO_UTC_TIMING_ELEMENT});var Pt=ee.getIsDynamic()?dt.concat(Ee.getUTCTimingSources()):dt,Dt=L.isHTTPS(Ce.manifest.url);Pt.forEach(function(xt){xt.value.replace(/.*?:\/\//g,"")===tt.get().streaming.utcSynchronization.defaultTimingSource.value.replace(/.*?:\/\//g,"")&&(xt.value=xt.value.replace(Dt?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),Dt?"https://":"http://"),U.debug("Matching default timing source protocol to manifest protocol: ",xt.value))}),X.filterUnsupportedFeatures(Je).then(function(){oe.initialize(Je),ue.attemptSync(Pt,ee.getIsDynamic())})}}function k(){return ne?ne.getHasVideoTrack():!1}function fe(){return ne?ne.getHasAudioTrack():!1}function _e(Ce){ne&&(be.initialize(st()),mt(Ce,!1))}function Te(Ce,Je){Je=Je||new Date,ct().forEach(function(dt){dt.finalisePlayList(Je,Ce)}),J.addPlayList()}function Le(Ce){J.createPlaylistMetrics(be.getTime()*1e3,Ce)}function Ve(Ce){if(Ce.error){var Je="";switch(Ce.error.code){case 1:Je="MEDIA_ERR_ABORTED";break;case 2:Je="MEDIA_ERR_NETWORK";break;case 3:Je="MEDIA_ERR_DECODE",St.counts.mediaErrorDecode+=1;break;case 4:Je="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Je="MEDIA_ERR_ENCRYPTED";break;default:Je="UNKNOWN";break}if(Je==="MEDIA_ERR_DECODE"&&tt.get().errors.recoverAttempts.mediaErrorDecode>=St.counts.mediaErrorDecode){rt();return}me=!0,Ce.error.message&&(Je+=" ("+Ce.error.message+")"),Ce.error.msExtendedCode&&(Je+=" (0x"+(Ce.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),U.fatal("Video Element Error: "+Je),Ce.error&&U.fatal(Ce.error),$.error(new A.default(Ce.error.code,Je)),Bt()}}function rt(){U.warn("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");var Ce=be.getTime();ne.deactivate(!1),U.warn("MediaSource has been resetted. Resuming playback from time ".concat(Ce)),mt(Ce,!1)}function st(){return ne?ne.getStreamInfo():null}function It(){return q}function Nt(){return me||de}function yt(Ce){for(var Je=0,dt=Q.length;Je<dt;Je++)if(Q[Je].getId()===Ce)return Q[Je];return null}function Ft(Ce){isNaN(Ce.newDuration)||zt(Ce.newDuration)}function kt(Ce){Ce&&(Ce.capabilities&&(j=Ce.capabilities),Ce.capabilitiesFilter&&(X=Ce.capabilitiesFilter),Ce.manifestLoader&&(se=Ce.manifestLoader),Ce.manifestModel&&(G=Ce.manifestModel),Ce.mediaPlayerModel&&(Fe=Ce.mediaPlayerModel),Ce.customParametersModel&&(Ee=Ce.customParametersModel),Ce.protectionController&&(ce=Ce.protectionController),Ce.adapter&&(ee=Ce.adapter),Ce.dashMetrics&&(J=Ce.dashMetrics),Ce.errHandler&&($=Ce.errHandler),Ce.timelineConverter&&(O=Ce.timelineConverter),Ce.videoModel&&(Se=Ce.videoModel),Ce.playbackController&&(be=Ce.playbackController),Ce.serviceDescriptionController&&(Me=Ce.serviceDescriptionController),Ce.contentSteeringController&&(ae=Ce.contentSteeringController),Ce.textController&&(W=Ce.textController),Ce.abrController&&(le=Ce.abrController),Ce.mediaController&&(z=Ce.mediaController),Ce.settings&&(tt=Ce.settings),Ce.baseURLController&&(oe=Ce.baseURLController),Ce.uriFragmentModel&&(ge=Ce.uriFragmentModel),Ce.segmentBaseController&&(Z=Ce.segmentBaseController))}function Kt(Ce){B=Ce,ce&&ce.setProtectionData(B)}function Xt(){Q=[],Et=NaN,ce=null,q=!1,ne=null,me=!1,de=!1,Ue=!0,Re=!0,Pe=!1,D=!0,Ke=null,ft=!1,$e=!1,ze=[],bt=null,St={counts:{mediaErrorDecode:0}}}function Bt(){ke(),ue.reset(),Te(me||de?t.PlayListTrace.FAILURE_STOP_REASON:t.PlayListTrace.USER_REQUEST_STOP_REASON);for(var Ce=0,Je=Q?Q.length:0;Ce<Je;Ce++){var dt=Q[Ce];dt.reset(me)}Ae(),oe.reset(),Y.reset(),K.reset(),J.clearAllCurrentMetrics(),G.setValue(null),se.reset(),O.reset(),R.reset(),ve&&(ie.detachMediaSource(Se),ve=null),Se=null,ce&&(ce=null,B=null,G.getValue()&&F.trigger(T.default.PROTECTION_DESTROYED,{data:G.getValue().url})),pt(),F.trigger(T.default.STREAM_TEARDOWN_COMPLETE),Xt()}function Qt(Ce){if(Ce.metric===l.default.DVR_INFO){var Je=fe()?o.default.AUDIO:o.default.VIDEO;Ce.mediaType===Je&&ie.setSeekable(Ce.value.range.start,Ce.value.range.end)}}function Mt(){return Q}return M={initialize:ye,getActiveStreamInfo:st,addDVRMetric:je,hasVideoTrack:k,hasAudioTrack:fe,getStreamById:yt,getStreamForTime:De,getTimeRelativeToStreamId:xe,load:Ge,loadWithManifest:qe,getActiveStreamProcessors:ct,setConfig:kt,setProtectionData:Kt,getIsStreamSwitchInProgress:It,switchToVideoElement:_e,getHasMediaOrInitialisationError:Nt,getStreams:Mt,getActiveStream:Vt,getInitialPlayback:Gt,getAutoPlay:sr,reset:Bt},Ct(),M}te.__dashjs_factory_name="StreamController",g.default=E.default.getSingletonFactory(te)},"./src/streaming/controllers/TimeSyncController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/vo/DashJSError.js"),l=r("./src/streaming/vo/metrics/HTTPRequest.js"),u=r("./src/core/EventBus.js"),m=r("./src/core/events/Events.js"),y=r("./src/core/errors/Errors.js"),T=r("./src/core/FactoryMaker.js"),E=r("./src/core/Debug.js"),t=r("./src/streaming/utils/URLUtils.js"),e=5e3,n=100,i=2,d=2,P=30,b=30,A=600,_=2;function h(){var v=this.context,c=Object(u.default)(v).getInstance(),S=Object(t.default)(v).getInstance(),p,C,x,V,H,te,w,F,M,U,j,X,Y,se,G,ee;function J(){C=Object(E.default)(v).getInstance().getLogger(p),c.on(m.default.ATTEMPT_BACKGROUND_SYNC,Z,p)}function ie(be){be&&(be.dashMetrics&&(w=be.dashMetrics),be.baseURLController&&(ee=be.baseURLController),be.errHandler&&(G=be.errHandler),be.settings&&(H=be.settings))}function ue(){F=[],M=[],U=null,j=null,Y=null,X=NaN,x=!1,V=!1,se=H.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function ae(){ue(),te={"urn:mpeg:dash:utc:http-head:2014":B,"urn:mpeg:dash:utc:http-xsdate:2014":W.bind(null,$),"urn:mpeg:dash:utc:http-iso:2014":W.bind(null,O),"urn:mpeg:dash:utc:direct:2014":ce,"urn:mpeg:dash:utc:http-head:2012":B,"urn:mpeg:dash:utc:http-xsdate:2012":W.bind(null,$),"urn:mpeg:dash:utc:http-iso:2012":W.bind(null,O),"urn:mpeg:dash:utc:direct:2012":ce,"urn:mpeg:dash:utc:http-ntp:2014":ne,"urn:mpeg:dash:utc:ntp:2014":ne,"urn:mpeg:dash:utc:sntp:2014":ne}}function oe(be,Me){if(M=be,!x){if(!K(Me)){c.trigger(m.default.TIME_SYNCHRONIZATION_COMPLETED);return}x=!0,le()}}function Z(){if(!(!H.get().streaming.utcSynchronization.enabled||x||V||!Y||!Y.value||!Y.schemeIdUri||isNaN(X)||isNaN(H.get().streaming.utcSynchronization.backgroundAttempts))&&!(j&&(Date.now()-j)/1e3<b)){F=[],V=!0;var be=isNaN(H.get().streaming.utcSynchronization.backgroundAttempts)?d:H.get().streaming.utcSynchronization.backgroundAttempts;ge(be)}}function ge(be){try{if(be<=0){de();return}var Me=Date.now();te[Y.schemeIdUri](Y.value,function(Fe){var Ee=Date.now(),Pe=z(Me,Ee,Fe);F.push(Pe),ge(be-1)},function(){de()})}catch{de()}}function le(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Me=be||0;if(!M||M.length===0||Me>=M.length){R();return}var Fe=M[Me];if(Fe)if(te.hasOwnProperty(Fe.schemeIdUri)){var Ee=new Date().getTime();te[Fe.schemeIdUri](Fe.value,function(Pe){var Ue=new Date().getTime(),Re=z(Ee,Ue,Pe);Y=Fe,R(Re)},function(){le(Me+1)})}else le(Me+1);else R()}function z(be,Me,Fe){var Ee=Me-(Me-be)/2;return Fe-Ee}function K(be){try{if(!be||!H.get().streaming.utcSynchronization.enabled)return!1;var Me=isNaN(se)?P:se;return!U||!Me||isNaN(Me)?!0:(Date.now()-U)/1e3>=Me}catch{return!0}}function R(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,Me=isNaN(be);Me&&H.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?D():q(Me,be)}function L(be){var Me=60,Fe=60,Ee=1e3,Pe=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/,Ue,Re,Ke=Pe.exec(be);return Ue=Date.UTC(parseInt(Ke[1],10),parseInt(Ke[2],10)-1,parseInt(Ke[3],10),parseInt(Ke[4],10),parseInt(Ke[5],10),Ke[6]&&(parseInt(Ke[6],10)||0),Ke[7]&&parseFloat(Ke[7])*Ee||0),Ke[9]&&Ke[10]&&(Re=parseInt(Ke[9],10)*Fe+parseInt(Ke[10],10),Ue+=(Ke[8]==="+"?-1:1)*Re*Me*Ee),new Date(Ue).getTime()}function $(be){var Me=Date.parse(be);return isNaN(Me)&&(Me=L(be)),Me}function O(be){return Date.parse(be)}function Q(be){return Date.parse(be)}function ne(be,Me,Fe){Fe()}function ce(be,Me,Fe){var Ee=$(be);if(!isNaN(Ee)){Me(Ee);return}Fe()}function W(be,Me,Fe,Ee,Pe){var Ue,Re,Ke=!1,Ne=new XMLHttpRequest,ze=Pe?l.HTTPRequest.HEAD:l.HTTPRequest.GET,$e=Me.match(/\S+/g);if(Me=$e.shift(),Ue=function(){Ke||(Ke=!0,$e.length?W(be,$e.join(" "),Fe,Ee,Pe):Ee())},Re=function(){var bt,Et;Ne.status===200&&(bt=Pe?Ne.getResponseHeader("Date"):Ne.response,Et=be(bt),isNaN(Et)||(Fe(Et),Ke=!0))},S.isRelative(Me)){var tt=ee.resolve();tt&&(Me=S.resolve(Me,tt.url))}Ne.open(ze,Me),Ne.timeout=e||0,Ne.onload=Re,Ne.onloadend=Ue,Ne.send()}function B(be,Me,Fe){W(Q,be,Me,Fe,!0)}function D(){var be=w.getLatestMPDRequestHeaderValueByID("Date"),Me=be!==null?new Date(be).getTime():Number.NaN;if(isNaN(Me))q(!0);else{var Fe=Me-Date.now();q(!1,Fe)}}function q(be,Me){if(!isNaN(X)&&!isNaN(Me)&&!be&&me(Me),!be&&!isNaN(Me)){U=Date.now(),x=!1;var Fe=isNaN(X);X=Me,Fe&&Z(),C.debug("Completed UTC sync. Setting client - server offset to ".concat(Me))}be&&(Y=null,x=!1,G.error(new o.default(y.default.TIME_SYNC_FAILED_ERROR_CODE,y.default.TIME_SYNC_FAILED_ERROR_MESSAGE))),c.trigger(m.default.UPDATE_TIME_SYNC_OFFSET,{offset:Me}),c.trigger(m.default.TIME_SYNCHRONIZATION_COMPLETED)}function me(be){try{var Me=ve(be),Fe=isNaN(se)?P:se,Ee=isNaN(H.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?i:H.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,Pe=isNaN(H.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?A:H.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Ue=isNaN(H.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?_:H.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts,Re;Me?(Re=Math.min(Fe*Ee,Pe),C.debug("Increasing timeBetweenSyncAttempts to ".concat(Re))):(Re=Math.max(Fe/Ee,Ue),C.debug("Decreasing timeBetweenSyncAttempts to ".concat(Re))),se=Re}catch{}}function de(){if(!(!F||F.length===0)){var be=F.reduce(function(Me,Fe){return Me+Fe},0)/F.length;ve(be)?C.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(C.debug("Completed background UTC sync. Setting client - server offset to ".concat(be)),X=be,c.trigger(m.default.UPDATE_TIME_SYNC_OFFSET,{offset:X})),V=!1,j=Date.now()}}function ve(be){try{if(isNaN(X))return!0;var Me=H.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(H.get().streaming.utcSynchronization.maximumAllowedDrift)?H.get().streaming.utcSynchronization.maximumAllowedDrift:n,Fe=X-Me,Ee=X+Me;return be>=Fe&&be<=Ee}catch{return!0}}function Se(){ue(),c.off(m.default.ATTEMPT_BACKGROUND_SYNC,Z,p)}return p={initialize:ae,attemptSync:oe,setConfig:ie,reset:Se},J(),p}h.__dashjs_factory_name="TimeSyncController";var f=T.default.getSingletonFactory(h);f.HTTP_TIMEOUT_MS=e,T.default.updateSingletonFactory(h.__dashjs_factory_name,f),g.default=f},"./src/streaming/controllers/XlinkController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/XlinkLoader.js"),l=r("./src/core/EventBus.js"),u=r("./src/core/events/Events.js"),m=r("./src/core/FactoryMaker.js"),y=r("./externals/xml2json.js"),T=r("./src/streaming/utils/URLUtils.js"),E=r("./src/dash/constants/DashConstants.js"),t="onLoad",e="onActuate",n="urn:mpeg:dash:resolve-to-zero:2013";function i(d){d=d||{};var P=this.context,b=Object(l.default)(P).getInstance(),A=Object(T.default)(P).getInstance(),_,h,f,v,c,S;function p(){b.on(u.default.XLINK_ELEMENT_LOADED,w,_),S=Object(o.default)(P).create({errHandler:d.errHandler,dashMetrics:d.dashMetrics,mediaPlayerModel:d.mediaPlayerModel,requestModifier:d.requestModifier,settings:d.settings})}function C(se){se&&(h=se)}function x(se){se&&(f=se)}function V(se){var G;c=new y.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:h}),v=se,v.Period_asArray?(G=M(v.Period_asArray,v,E.default.PERIOD,t),te(G,E.default.PERIOD,t)):b.trigger(u.default.XLINK_READY,{manifest:v})}function H(){b.off(u.default.XLINK_ELEMENT_LOADED,w,_),S&&(S.reset(),S=null)}function te(se,G,ee){var J={},ie,ue;J.elements=se,J.type=G,J.resolveType=ee,J.elements.length===0&&F(J);for(var ae=0;ae<J.elements.length;ae++)ie=J.elements[ae],A.isHTTPURL(ie.url)?ue=ie.url:ue=ie.originalContent.BaseURL+ie.url,S.load(ue,ie,J)}function w(se){var G,ee,J="<response>",ie="</response>",ue="";if(G=se.element,ee=se.resolveObject,G.resolvedContent){var ae=0;G.resolvedContent.indexOf("<?xml")===0&&(ae=G.resolvedContent.indexOf("?>")+2),ue=G.resolvedContent.substr(0,ae)+J+G.resolvedContent.substr(ae)+ie,G.resolvedContent=c.xml_str2json(ue)}X(ee)&&F(ee)}function F(se){var G=[],ee,J;if(U(se),se.resolveType===e&&b.trigger(u.default.XLINK_READY,{manifest:v}),se.resolveType===t)switch(se.type){case E.default.PERIOD:for(ee=0;ee<v[E.default.PERIOD+"_asArray"].length;ee++)J=v[E.default.PERIOD+"_asArray"][ee],J.hasOwnProperty(E.default.ADAPTATION_SET+"_asArray")&&(G=G.concat(M(J[E.default.ADAPTATION_SET+"_asArray"],J,E.default.ADAPTATION_SET,t))),J.hasOwnProperty(E.default.EVENT_STREAM+"_asArray")&&(G=G.concat(M(J[E.default.EVENT_STREAM+"_asArray"],J,E.default.EVENT_STREAM,t)));te(G,E.default.ADAPTATION_SET,t);break;case E.default.ADAPTATION_SET:b.trigger(u.default.XLINK_READY,{manifest:v});break}}function M(se,G,ee,J){var ie=[],ue,ae,oe;for(ae=se.length-1;ae>=0;ae--)ue=se[ae],ue.hasOwnProperty("xlink:href")&&ue["xlink:href"]===n&&se.splice(ae,1);for(ae=0;ae<se.length;ae++)ue=se[ae],ue.hasOwnProperty("xlink:href")&&ue.hasOwnProperty("xlink:actuate")&&ue["xlink:actuate"]===J&&(oe=j(ue["xlink:href"],G,ee,ae,J,ue),ie.push(oe));return ie}function U(se){var G=[],ee,J,ie,ue,ae,oe;for(ue=se.elements.length-1;ue>=0;ue--){if(ee=se.elements[ue],J=ee.type+"_asArray",!ee.resolvedContent||Y())delete ee.originalContent["xlink:actuate"],delete ee.originalContent["xlink:href"],G.push(ee.originalContent);else if(ee.resolvedContent)for(ae=0;ae<ee.resolvedContent[J].length;ae++)ie=ee.resolvedContent[J][ae],G.push(ie);for(ee.parentElement[J].splice(ee.index,1),oe=0;oe<G.length;oe++)ee.parentElement[J].splice(ee.index+oe,0,G[oe]);G=[]}se.elements.length>0&&f.run(v)}function j(se,G,ee,J,ie,ue){return{url:se,parentElement:G,type:ee,index:J,resolveType:ie,originalContent:ue,resolvedContent:null,resolved:!1}}function X(se){var G,ee;for(G=0;G<se.elements.length;G++)if(ee=se.elements[G],ee.resolved===!1)return!1;return!0}function Y(){return!1}return _={resolveManifestOnLoad:V,setMatchers:C,setIron:x,reset:H},p(),_}i.__dashjs_factory_name="XlinkController",g.default=m.default.getClassFactory(i)},"./src/streaming/metrics/MetricsReporting.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/utils/DVBErrorsTranslator.js"),l=r("./src/streaming/metrics/MetricsReportingEvents.js"),u=r("./src/streaming/metrics/controllers/MetricsCollectionController.js"),m=r("./src/streaming/metrics/metrics/MetricsHandlerFactory.js"),y=r("./src/streaming/metrics/reporting/ReportingFactory.js");function T(){var t=this.context,e,n;function i(b){return n=Object(o.default)(t).getInstance({eventBus:b.eventBus,dashMetrics:b.dashMetrics,metricsConstants:b.metricsConstants,events:b.events}),n.initialise(),Object(u.default)(t).create(b)}function d(){return Object(y.default)(t).getInstance()}function P(){return Object(m.default)(t).getInstance()}return e={createMetricsReporting:i,getReportingFactory:d,getMetricsHandlerFactory:P},e}T.__dashjs_factory_name="MetricsReporting";var E=dashjs.FactoryMaker.getClassFactory(T);E.events=l.default,dashjs.FactoryMaker.updateClassFactory(T.__dashjs_factory_name,E),g.default=E},"./src/streaming/metrics/MetricsReportingEvents.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/events/EventsBase.js");function l(h){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l(h)}function u(h,f){for(var v=0;v<f.length;v++){var c=f[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,y(c.key),c)}}function m(h,f,v){return f&&u(h.prototype,f),v&&u(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h}function y(h){var f=T(h,"string");return l(f)==="symbol"?f:String(f)}function T(h,f){if(l(h)!=="object"||h===null)return h;var v=h[Symbol.toPrimitive];if(v!==void 0){var c=v.call(h,f||"default");if(l(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}function E(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function t(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),f&&e(h,f)}function e(h,f){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},e(h,f)}function n(h){var f=P();return function(){var c=b(h),S;if(f){var p=b(this).constructor;S=Reflect.construct(c,arguments,p)}else S=c.apply(this,arguments);return i(this,S)}}function i(h,f){if(f&&(l(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(h)}function d(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(h){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},b(h)}var A=function(h){t(v,h);var f=n(v);function v(){var c;return E(this,v),c=f.call(this),c.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",c.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",c.CMCD_DATA_GENERATED="cmcdDataGenerated",c}return m(v)}(o.default),_=new A;g.default=_},"./src/streaming/metrics/controllers/MetricsCollectionController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/controllers/MetricsController.js"),l=r("./src/streaming/metrics/utils/ManifestParsing.js"),u=r("./src/streaming/metrics/MetricsReportingEvents.js");function m(y){y=y||{};var T,E={},t=this.context,e=y.eventBus,n=y.events;function i(A){if(!A.error){var _=Object.keys(E),h=Object(l.default)(t).getInstance({adapter:y.adapter,constants:y.constants}).getMetrics(A.manifest);h.forEach(function(f){var v=JSON.stringify(f);if(E.hasOwnProperty(v))_.splice(v,1);else try{var c=Object(o.default)(t).create(y);c.initialize(f),E[v]=c}catch{}}),_.forEach(function(f){E[f].reset(),delete E[f]}),e.trigger(u.default.METRICS_INITIALISATION_COMPLETE)}}function d(){Object.keys(E).forEach(function(A){E[A].reset()}),E={}}function P(){e.on(n.MANIFEST_UPDATED,i,T),e.on(n.STREAM_TEARDOWN_COMPLETE,d,T)}function b(){e.off(n.MANIFEST_UPDATED,i,T),e.off(n.STREAM_TEARDOWN_COMPLETE,d,T)}return T={reset:b},P(),T}m.__dashjs_factory_name="MetricsCollectionController",g.default=dashjs.FactoryMaker.getClassFactory(m)},"./src/streaming/metrics/controllers/MetricsController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/controllers/RangeController.js"),l=r("./src/streaming/metrics/controllers/ReportingController.js"),u=r("./src/streaming/metrics/controllers/MetricsHandlersController.js");function m(y){y=y||{};var T,E,t,e,n=this.context;function i(P){try{t=Object(o.default)(n).create({mediaElement:y.mediaElement}),t.initialize(P.Range),E=Object(l.default)(n).create({debug:y.debug,metricsConstants:y.metricsConstants,mediaPlayerModel:y.mediaPlayerModel}),E.initialize(P.Reporting,t),T=Object(u.default)(n).create({debug:y.debug,eventBus:y.eventBus,metricsConstants:y.metricsConstants,events:y.events}),T.initialize(P.metrics,E)}catch(b){throw d(),b}}function d(){T&&T.reset(),E&&E.reset(),t&&t.reset()}return e={initialize:i,reset:d},e}m.__dashjs_factory_name="MetricsController",g.default=dashjs.FactoryMaker.getClassFactory(m)},"./src/streaming/metrics/controllers/MetricsHandlersController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/metrics/MetricsHandlerFactory.js");function l(u){u=u||{};var m=[],y,T=this.context,E=u.eventBus,t=u.events,e=Object(o.default)(T).getInstance({debug:u.debug,eventBus:u.eventBus,metricsConstants:u.metricsConstants});function n(P){m.forEach(function(b){b.handleNewMetric(P.metric,P.value,P.mediaType)})}function i(P,b){P.split(",").forEach(function(A,_,h){var f;if(A.indexOf("(")!==-1&&A.indexOf(")")===-1){var v=h[_+1];v&&v.indexOf("(")===-1&&v.indexOf(")")!==-1&&(A+=","+v,delete h[_+1])}f=e.create(A,b),f&&m.push(f)}),E.on(t.METRIC_ADDED,n,y),E.on(t.METRIC_UPDATED,n,y)}function d(){E.off(t.METRIC_ADDED,n,y),E.off(t.METRIC_UPDATED,n,y),m.forEach(function(P){return P.reset()}),m=[]}return y={initialize:i,reset:d},y}l.__dashjs_factory_name="MetricsHandlersController",g.default=dashjs.FactoryMaker.getClassFactory(l)},"./src/streaming/metrics/controllers/RangeController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/utils/CustomTimeRanges.js");function l(u){u=u||{};var m=!1,y=this.context,T,E,t=u.mediaElement;function e(P){P&&P.length&&(P.forEach(function(b){var A=b.starttime,_=A+b.duration;E.add(A,_)}),m=!!P[0]._useWallClockTime)}function n(){E.clear()}function i(){E=Object(o.default)(y).create()}function d(){var P=E.length,b;if(!P)return!0;b=m?new Date().getTime()/1e3:t.currentTime;for(var A=0;A<P;A+=1){var _=E.start(A),h=E.end(A);if(_<=b&&b<h)return!0}return!1}return T={initialize:e,reset:n,isEnabled:d},i(),T}l.__dashjs_factory_name="RangeController",g.default=dashjs.FactoryMaker.getClassFactory(l)},"./src/streaming/metrics/controllers/ReportingController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/reporting/ReportingFactory.js");function l(u){var m=[],y,T=Object(o.default)(this.context).getInstance(u);function E(n,i){n.some(function(d){var P=T.create(d,i);if(P)return m.push(P),!0})}function t(){m.forEach(function(n){return n.reset()}),m=[]}function e(n,i){m.forEach(function(d){return d.report(n,i)})}return y={initialize:E,reset:t,report:e},y}l.__dashjs_factory_name="ReportingController",g.default=dashjs.FactoryMaker.getClassFactory(l)},"./src/streaming/metrics/metrics/MetricsHandlerFactory.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js"),l=r("./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js"),u=r("./src/streaming/metrics/metrics/handlers/HttpListHandler.js"),m=r("./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js");function y(T){T=T||{};var E,t=T.debug?T.debug.getLogger(E):{},e=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,n=this.context,i={BufferLevel:o.default,DVBErrors:l.default,HttpList:u.default,PlayList:m.default,RepSwitchList:m.default,TcpList:m.default};function d(A,_){var h=A.match(e),f;if(h){try{f=i[h[1]](n).create({eventBus:T.eventBus,metricsConstants:T.metricsConstants}),f.initialize(h[1],_,h[3],h[5])}catch(v){f=null,t.error("MetricsHandlerFactory: Could not create handler for type ".concat(h[1]," with args ").concat(h[3],", ").concat(h[5]," (").concat(v.message,")"))}return f}}function P(A,_){i[A]=_}function b(A){delete i[A]}return E={create:d,register:P,unregister:b},E}y.__dashjs_factory_name="MetricsHandlerFactory",g.default=dashjs.FactoryMaker.getSingletonFactory(y)},"./src/streaming/metrics/metrics/handlers/BufferLevelHandler.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/utils/HandlerHelpers.js");function l(u){u=u||{};var m,y,T,E,t,e,n=this.context,i=Object(o.default)(n).getInstance(),d=[],P=u.metricsConstants;function b(){try{return Object.keys(d).map(function(v){return d[v]}).reduce(function(v,c){return v.level<c.level?v:c})}catch{return}}function A(){var v=b();v&&e!==v.t&&(e=v.t,y.report(E,v))}function _(v,c,S){c&&(T=i.validateN(S),y=c,E=i.reconstructFullMetricName(v,S),t=setInterval(A,T))}function h(){clearInterval(t),t=null,T=0,y=null,e=null}function f(v,c,S){v===P.BUFFER_LEVEL&&(d[S]=c)}return m={initialize:_,reset:h,handleNewMetric:f},m}l.__dashjs_factory_name="BufferLevelHandler",g.default=dashjs.FactoryMaker.getClassFactory(l)},"./src/streaming/metrics/metrics/handlers/DVBErrorsHandler.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/MetricsReportingEvents.js");function l(u){u=u||{};var m,y,T=u.eventBus,E=u.metricsConstants;function t(){T.off(o.default.METRICS_INITIALISATION_COMPLETE,t,this),T.trigger(o.default.BECAME_REPORTING_PLAYER)}function e(d,P){P&&(y=P,T.on(o.default.METRICS_INITIALISATION_COMPLETE,t,this))}function n(){y=null}function i(d,P){d===E.DVB_ERRORS&&y&&y.report(d,P)}return m={initialize:e,reset:n,handleNewMetric:i},m}g.default=dashjs.FactoryMaker.getClassFactory(l)},"./src/streaming/metrics/metrics/handlers/GenericMetricHandler.js":function(I,g,r){"use strict";r.r(g);function o(){var l,u,m;function y(t,e){u=t,m=e}function T(){m=null,u=void 0}function E(t,e){t===u&&m&&m.report(u,e)}return l={initialize:y,reset:T,handleNewMetric:E},l}o.__dashjs_factory_name="GenericMetricHandler",g.default=dashjs.FactoryMaker.getClassFactory(o)},"./src/streaming/metrics/metrics/handlers/HttpListHandler.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/utils/HandlerHelpers.js");function l(u){u=u||{};var m,y,T,E,t,e,n=[],i=Object(o.default)(this.context).getInstance(),d=u.metricsConstants;function P(){var h=n;h.length&&y&&y.report(t,h),n=[]}function b(h,f,v,c){f&&(T=i.validateN(v),y=f,c&&c.length&&(E=c),t=i.reconstructFullMetricName(h,v,c),e=setInterval(P,T))}function A(){clearInterval(e),e=null,T=null,E=null,n=[],y=null}function _(h,f){h===d.HTTP_REQUEST&&(!E||E===f.type)&&n.push(f)}return m={initialize:b,reset:A,handleNewMetric:_},m}l.__dashjs_factory_name="HttpListHandler",g.default=dashjs.FactoryMaker.getClassFactory(l)},"./src/streaming/metrics/reporting/ReportingFactory.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/reporting/reporters/DVBReporting.js");function l(u){u=u||{};var m={"urn:dvb:dash:reporting:2014":o.default},y=this.context,T,E=u.debug?u.debug.getLogger(T):{},t=u.metricsConstants,e=u.mediaPlayerModel||{};function n(P,b){var A;try{A=m[P.schemeIdUri](y).create({metricsConstants:t,mediaPlayerModel:e}),A.initialize(P,b)}catch(_){A=null,E.error("ReportingFactory: could not create Reporting with schemeIdUri ".concat(P.schemeIdUri," (").concat(_.message,")"))}return A}function i(P,b){m[P]=b}function d(P){delete m[P]}return T={create:n,register:i,unregister:d},T}l.__dashjs_factory_name="ReportingFactory",g.default=dashjs.FactoryMaker.getSingletonFactory(l)},"./src/streaming/metrics/reporting/reporters/DVBReporting.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/utils/MetricSerialiser.js"),l=r("./src/streaming/metrics/utils/RNG.js"),u=r("./src/streaming/models/CustomParametersModel.js");function m(y){y=y||{};var T,E=this.context,t,e,n,i,d,P,b,A=!0,_=!0,h=[],f=y.metricsConstants;function v(){t=Object(o.default)(E).getInstance(),n=Object(l.default)(E).getInstance(),e=Object(u.default)(E).getInstance(),C()}function c(V,H,te){var w=new XMLHttpRequest;w.withCredentials=e.getXHRWithCredentialsForType(f.HTTP_REQUEST_DVB_REPORTING_TYPE);var F=function(){var U=h.indexOf(w);U!==-1&&(h.splice(U,1),w.status>=200&&w.status<300?H&&H():te&&te())};h.push(w);try{w.open("GET",V),w.onloadend=F,w.onerror=F,w.send()}catch{w.onerror()}}function S(V,H){Array.isArray(H)||(H=[H]),d&&b.isEnabled()&&H.forEach(function(te){var w=t.serialise(te);A&&V!==f.DVB_ERRORS&&(w="metricname=".concat(V,"&").concat(w)),w="".concat(P,"?").concat(w),c(w,null,function(){d=!1})})}function p(V,H){var te;if(b=H,P=V.dvb_reportingUrl,!P)throw new Error("required parameter missing (dvb:reportingUrl)");i||(te=V.dvb_probability,te&&(te===1e3||te/1e3>=n.random())&&(d=!0),i=!0)}function C(){i=!1,d=!1,P=null,b=null}function x(){_||(h.forEach(function(V){return V.abort()}),h=[]),C()}return T={report:S,initialize:p,reset:x},v(),T}m.__dashjs_factory_name="DVBReporting",g.default=dashjs.FactoryMaker.getClassFactory(m)},"./src/streaming/metrics/utils/DVBErrorsTranslator.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/vo/DVBErrors.js"),l=r("./src/streaming/metrics/MetricsReportingEvents.js");function u(m){m=m||{};var y,T,E=m.eventBus,t=m.dashMetrics,e=m.metricsConstants,n=m.events;function i(c){var S=new o.default;if(T){for(var p in c)c.hasOwnProperty(p)&&(S[p]=c[p]);S.mpdurl||(S.mpdurl=T.originalUrl||T.url),S.terror||(S.terror=new Date),t.addDVBErrors(S)}}function d(c){c.error||(T=c.manifest)}function P(c){i({errorcode:o.default.BASE_URL_CHANGED,servicelocation:c.entry})}function b(){i({errorcode:o.default.BECAME_REPORTER})}function A(c){(c.responsecode===0||c.responsecode==null||c.responsecode>=400||c.responsecode<100||c.responsecode>=600)&&i({errorcode:c.responsecode||o.default.CONNECTION_ERROR,url:c.url,terror:c.tresponse,servicelocation:c._serviceLocation})}function _(c){switch(c.metric){case e.HTTP_REQUEST:A(c.value);break;default:break}}function h(c){var S=c.error?c.error.code:0,p;switch(S){case MediaError.MEDIA_ERR_NETWORK:p=o.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:p=o.default.CORRUPT_MEDIA_OTHER;break;default:return}i({errorcode:p})}function f(){E.on(n.MANIFEST_UPDATED,d,y),E.on(n.SERVICE_LOCATION_BLACKLIST_CHANGED,P,y),E.on(n.METRIC_ADDED,_,y),E.on(n.METRIC_UPDATED,_,y),E.on(n.PLAYBACK_ERROR,h,y),E.on(l.default.BECAME_REPORTING_PLAYER,b,y)}function v(){E.off(n.MANIFEST_UPDATED,d,y),E.off(n.SERVICE_LOCATION_BLACKLIST_CHANGED,P,y),E.off(n.METRIC_ADDED,_,y),E.off(n.METRIC_UPDATED,_,y),E.off(n.PLAYBACK_ERROR,h,y),E.off(l.default.BECAME_REPORTING_PLAYER,b,y)}return y={initialise:f,reset:v},y}u.__dashjs_factory_name="DVBErrorsTranslator",g.default=dashjs.FactoryMaker.getSingletonFactory(u)},"./src/streaming/metrics/utils/HandlerHelpers.js":function(I,g,r){"use strict";r.r(g);function o(){return{reconstructFullMetricName:function(u,m,y){var T=u;return m&&(T+="("+m,y&&y.length&&(T+=","+y),T+=")"),T},validateN:function(u){if(!u)throw new Error("missing n");if(isNaN(u))throw new Error("n is NaN");if(u<0)throw new Error("n must be positive");return u}}}o.__dashjs_factory_name="HandlerHelpers",g.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/metrics/utils/ManifestParsing.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/metrics/vo/Metrics.js"),l=r("./src/streaming/metrics/vo/Range.js"),u=r("./src/streaming/metrics/vo/Reporting.js");function m(y){y=y||{};var T,E=y.adapter,t=y.constants;function e(i,d,P){var b,A,_=0;return d?_=E.getAvailabilityStartTime(i)/1e3:(b=E.getRegularPeriods(i),b.length&&(_=b[0].start)),A=_,P&&P.hasOwnProperty(t.START_TIME)&&(A+=P.starttime),A}function n(i){var d=[];return i&&i.Metrics_asArray&&i.Metrics_asArray.forEach(function(P){var b=new o.default,A=E.getIsDynamic(i);if(P.hasOwnProperty("metrics"))b.metrics=P.metrics;else return;if(P.Range_asArray&&P.Range_asArray.forEach(function(_){var h=new l.default;h.starttime=e(i,A,_),_.hasOwnProperty("duration")?h.duration=_.duration:h.duration=E.getDuration(i),h._useWallClockTime=A,b.Range.push(h)}),P.Reporting_asArray)P.Reporting_asArray.forEach(function(_){var h=new u.default;if(_.hasOwnProperty(t.SCHEME_ID_URI))h.schemeIdUri=_.schemeIdUri;else return;_.hasOwnProperty("value")&&(h.value=_.value),_.hasOwnProperty(t.DVB_REPORTING_URL)&&(h.dvb_reportingUrl=_[t.DVB_REPORTING_URL]),_.hasOwnProperty(t.DVB_PROBABILITY)&&(h.dvb_probability=_[t.DVB_PROBABILITY]),b.Reporting.push(h)});else return;d.push(b)}),d}return T={getMetrics:n},T}m.__dashjs_factory_name="ManifestParsing",g.default=dashjs.FactoryMaker.getSingletonFactory(m)},"./src/streaming/metrics/utils/MetricSerialiser.js":function(I,g,r){"use strict";r.r(g);function o(){function l(u){var m=[],y=[],T,E;for(T in u)if(u.hasOwnProperty(T)&&T.indexOf("_")!==0){if(E=u[T],E==null&&(E=""),Array.isArray(E)){if(!E.length)continue;y=[],E.forEach(function(t){var e=Object.prototype.toString.call(t).slice(8,-1)!=="Object";y.push(e?t:l(t))}),E=y.map(encodeURIComponent).join(",")}else typeof E=="string"?E=encodeURIComponent(E):E instanceof Date?E=E.toISOString():typeof E=="number"&&(E=Math.round(E));m.push(T+"="+E)}return m.join("&")}return{serialise:l}}o.__dashjs_factory_name="MetricSerialiser",g.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/metrics/utils/RNG.js":function(I,g,r){"use strict";r.r(g);function o(){var l=window.crypto||window.msCrypto,u=Uint32Array,m=Math.pow(2,u.BYTES_PER_ELEMENT*8)-1,y=10,T,E,t;function e(){l&&(T||(T=new u(y)),l.getRandomValues(T),E=0)}function n(i,d){var P;return i||(i=0),d||(d=1),l?(E===T.length&&e(),P=T[E]/m,E+=1):P=Math.random(),P*(d-i)+i}return t={random:n},e(),t}o.__dashjs_factory_name="RNG",g.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/metrics/vo/DVBErrors.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null});E.SSL_CONNECTION_FAILED_PREFIX="SSL",E.DNS_RESOLUTION_FAILED="C00",E.HOST_UNREACHABLE="C01",E.CONNECTION_REFUSED="C02",E.CONNECTION_ERROR="C03",E.CORRUPT_MEDIA_ISOBMFF="M00",E.CORRUPT_MEDIA_OTHER="M01",E.BASE_URL_CHANGED="F00",E.BECAME_REPORTER="S00",g.default=E},"./src/streaming/metrics/vo/Metrics.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.metrics="",this.Range=[],this.Reporting=[]});g.default=E},"./src/streaming/metrics/vo/Range.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1});g.default=E},"./src/streaming/metrics/vo/Reporting.js":function(I,g,r){"use strict";r.r(g);function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}function l(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,m(d.key),d)}}function u(e,n,i){return n&&l(e.prototype,n),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var n=y(e,"string");return o(n)==="symbol"?n:String(n)}function y(e,n){if(o(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(o(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function T(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var E=1e3,t=u(function e(){T(this,e),this.schemeIdUri="",this.value="",this.dvb_reportingUrl="",this.dvb_probability=E});g.default=t},"./src/streaming/models/BaseURLTreeModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/utils/ObjectUtils.js"),l=r("./src/core/FactoryMaker.js");function u(d){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},u(d)}function m(d,P){for(var b=0;b<P.length;b++){var A=P[b];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(d,T(A.key),A)}}function y(d,P,b){return P&&m(d.prototype,P),b&&m(d,b),Object.defineProperty(d,"prototype",{writable:!1}),d}function T(d){var P=E(d,"string");return u(P)==="symbol"?P:String(P)}function E(d,P){if(u(d)!=="object"||d===null)return d;var b=d[Symbol.toPrimitive];if(b!==void 0){var A=b.call(d,P||"default");if(u(A)!=="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(d)}function t(d,P){if(!(d instanceof P))throw new TypeError("Cannot call a class as a function")}var e=NaN,n=y(function d(P,b){t(this,d),this.data={baseUrls:P||null,selectedIdx:b||e},this.children=[]});function i(){var d,P,b,A=this.context,_=Object(o.default)(A).getInstance();function h(){V()}function f(te){te.adapter&&(b=te.adapter)}function v(){if(!b||!b.hasOwnProperty("getBaseURLsFromElement")||!b.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}function c(te,w,F){var M=b.getBaseURLsFromElement(F);te[w]?_.areEqual(M,te[w].data.baseUrls)||(te[w].data.baseUrls=M,te[w].data.selectedIdx=e):te[w]=new n(M)}function S(te){v();var w=b.getBaseURLsFromElement(te);_.areEqual(w,P.data.baseUrls)||(P.data.baseUrls=w,P.data.selectedIdx=e),te&&te.Period_asArray&&te.Period_asArray.forEach(function(F,M){c(P.children,M,F),F.AdaptationSet_asArray&&F.AdaptationSet_asArray.forEach(function(U,j){c(P.children[M].children,j,U),U.Representation_asArray&&U.Representation_asArray.sort(b.getRepresentationSortFunction()).forEach(function(X,Y){c(P.children[M].children[j].children,Y,X)})})})}function p(te,w){var F=w||P;te(F.data),F.children&&F.children.forEach(function(M){return p(te,M)})}function C(te){p(function(w){isNaN(w.selectedIdx)||te===w.baseUrls[w.selectedIdx].serviceLocation&&(w.selectedIdx=e)})}function x(te){S(te)}function V(){P=new n}function H(te){var w=P,F=[w.data];return te&&te.forEach(function(M){w=w.children[M],w&&F.push(w.data)}),F.filter(function(M){return M.baseUrls.length})}return d={reset:V,update:x,getForPath:H,invalidateSelectedIndexes:C,setConfig:f},h(),d}i.__dashjs_factory_name="BaseURLTreeModel",g.default=l.default.getClassFactory(i)},"./src/streaming/models/CmcdModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/EventBus.js"),l=r("./src/streaming/MediaPlayerEvents.js"),u=r("./src/streaming/metrics/MetricsReportingEvents.js"),m=r("./src/core/FactoryMaker.js"),y=r("./src/core/Settings.js"),T=r("./src/streaming/constants/Constants.js"),E=r("./src/streaming/vo/metrics/HTTPRequest.js"),t=r("./src/dash/models/DashManifestModel.js"),e=r("./src/core/Utils.js");function n(c,S){var p=typeof Symbol<"u"&&c[Symbol.iterator]||c["@@iterator"];if(!p){if(Array.isArray(c)||(p=i(c))||S&&c&&typeof c.length=="number"){p&&(c=p);var C=0,x=function(){};return{s:x,n:function(){return C>=c.length?{done:!0}:{done:!1,value:c[C++]}},e:function(F){throw F},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var V=!0,H=!1,te;return{s:function(){p=p.call(c)},n:function(){var F=p.next();return V=F.done,F},e:function(F){H=!0,te=F},f:function(){try{!V&&p.return!=null&&p.return()}finally{if(H)throw te}}}}function i(c,S){if(c){if(typeof c=="string")return d(c,S);var p=Object.prototype.toString.call(c).slice(8,-1);if(p==="Object"&&c.constructor&&(p=c.constructor.name),p==="Map"||p==="Set")return Array.from(c);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return d(c,S)}}function d(c,S){(S==null||S>c.length)&&(S=c.length);for(var p=0,C=new Array(S);p<S;p++)C[p]=c[p];return C}var P="CMCD",b=1,A={MANIFEST:"m",AUDIO:"a",VIDEO:"v",INIT:"i",CAPTION:"c",ISOBMFF_TEXT_TRACK:"tt",ENCRYPTION_KEY:"k",OTHER:"o"},_={DASH:"d",MSS:"s"},h={VOD:"v",LIVE:"l"},f=5;function v(){var c,S,p,C,x,V,H,te,w,F,M=this.context,U=Object(o.default)(M).getInstance(),j=Object(y.default)(M).getInstance();function X(){c=Object(t.default)(M).getInstance(),G()}function Y(){U.on(l.default.PLAYBACK_RATE_CHANGED,q,S),U.on(l.default.MANIFEST_LOADED,me,S),U.on(l.default.BUFFER_LEVEL_STATE_CHANGED,de,S),U.on(l.default.PLAYBACK_SEEKED,ve,S),U.on(l.default.PERIOD_SWITCH_COMPLETED,ee,S)}function se(Ee){Ee&&(Ee.abrController&&(C=Ee.abrController),Ee.dashMetrics&&(x=Ee.dashMetrics),Ee.playbackController&&(V=Ee.playbackController))}function G(){p={pr:1,nor:null,st:null,sf:null,sid:"".concat(e.default.generateUuid()),cid:null},w={},te={},F={},J()}function ee(){J()}function J(){if(V){var Ee=V.getStreamController();if(Ee&&typeof Ee.getActiveStream=="function"){var Pe=Ee.getActiveStream();Pe&&(H=Pe.getProcessors())}}}function ie(Ee){try{if(j.get().streaming.cmcd&&j.get().streaming.cmcd.enabled){var Pe=ge(Ee),Ue=ue(Pe),Re=Se(Ue);return U.trigger(u.default.CMCD_DATA_GENERATED,{url:Ee.url,mediaType:Ee.mediaType,cmcdData:Pe,cmcdString:Re}),{key:P,value:Re}}return null}catch{return null}}function ue(Ee){try{var Pe=j.get().streaming.cmcd.enabledKeys;return Object.keys(Ee).filter(function(Ue){return Pe.includes(Ue)}).reduce(function(Ue,Re){return Ue[Re]=Ee[Re],Ue},{})}catch{return Ee}}function ae(Ee,Pe){var Ue={},Re=n(Pe),Ke;try{for(Re.s();!(Ke=Re.n()).done;){var Ne=Ke.value;Ee[Ne]&&(Ue[Ne]=Ee[Ne])}}catch(ze){Re.e(ze)}finally{Re.f()}return Ue}function oe(Ee){try{if(j.get().streaming.cmcd&&j.get().streaming.cmcd.enabled){var Pe=ge(Ee),Ue=ae(Pe,Z(["br","d","ot","tb"])),Re=ae(Pe,Z(["bl","dl","mtp","nor","nrr","su"])),Ke=ae(Pe,Z(["bs","rtp"])),Ne=ae(Pe,Z(["cid","pr","sf","sid","st","v"])),ze={"CMCD-Object":Se(Ue),"CMCD-Request":Se(Re),"CMCD-Status":Se(Ke),"CMCD-Session":Se(Ne)};return U.trigger(u.default.CMCD_DATA_GENERATED,{url:Ee.url,mediaType:Ee.mediaType,cmcdData:Pe,headers:ze}),ze}return null}catch{return null}}function Z(Ee){var Pe=j.get().streaming.cmcd.enabledKeys;return Ee.filter(function(Ue){return Pe.includes(Ue)})}function ge(Ee){try{var Pe=null;return Ee.type===E.HTTPRequest.MPD_TYPE?z(Ee):Ee.type===E.HTTPRequest.MEDIA_SEGMENT_TYPE?(R(Ee.mediaType),K(Ee)):Ee.type===E.HTTPRequest.INIT_SEGMENT_TYPE?L(Ee):Ee.type===E.HTTPRequest.OTHER_TYPE||Ee.type===E.HTTPRequest.XLINK_EXPANSION_TYPE?$(Ee):Ee.type===E.HTTPRequest.LICENSE?le(Ee):Pe}catch{return null}}function le(Ee){var Pe=O(Ee);return Pe.ot=A.ENCRYPTION_KEY,Pe}function z(){var Ee=O();return Ee.ot=A.MANIFEST,Ee}function K(Ee){var Pe=O(),Ue=Q(Ee),Re=ce(Ee),Ke=W(Ee.mediaType),Ne=B(Ee.mediaType),ze=D(Ee.mediaType),$e=ne(Ee.mediaType),tt=p.pr,ft=be(Ee.mediaType),bt;Ee.mediaType===T.default.VIDEO&&(bt=A.VIDEO),Ee.mediaType===T.default.AUDIO&&(bt=A.AUDIO),Ee.mediaType===T.default.TEXT&&(Ee.mediaInfo.mimeType==="application/mp4"?bt=A.ISOBMFF_TEXT_TRACK:bt=A.CAPTION);var Et=j.get().streaming.cmcd.rtp;return Et||(Et=Me(Ee)),Pe.rtp=Et,ft&&(Ee.url!==ft.url?Pe.nor=encodeURIComponent(e.default.getRelativeUrl(Ee.url,ft.url)):ft.range&&(Pe.nrr=ft.range)),Ue&&(Pe.br=Ue),bt&&(Pe.ot=bt),isNaN(Re)||(Pe.d=Re),isNaN(Ke)||(Pe.mtp=Ke),isNaN(Ne)||(Pe.dl=Ne),isNaN(ze)||(Pe.bl=ze),isNaN($e)||(Pe.tb=$e),!isNaN(tt)&&tt!==1&&(Pe.pr=tt),w[Ee.mediaType]&&(Pe.bs=!0,w[Ee.mediaType]=!1),(te[Ee.mediaType]||!F[Ee.mediaType])&&(Pe.su=!0,te[Ee.mediaType]=!1,F[Ee.mediaType]=!0),Pe}function R(Ee){F.hasOwnProperty(Ee)||(F[Ee]=!1),te.hasOwnProperty(Ee)||(te[Ee]=!1),w.hasOwnProperty(Ee)||(w[Ee]=!1)}function L(){var Ee=O();return Ee.ot=A.INIT,Ee.su=!0,Ee}function $(){var Ee=O();return Ee.ot=A.OTHER,Ee}function O(){var Ee={},Pe=j.get().streaming.cmcd.cid?j.get().streaming.cmcd.cid:p.cid;return Ee.v=b,Ee.sid=j.get().streaming.cmcd.sid?j.get().streaming.cmcd.sid:p.sid,Ee.sid="".concat(Ee.sid),Pe&&(Ee.cid="".concat(Pe)),!isNaN(p.pr)&&p.pr!==1&&p.pr!==null&&(Ee.pr=p.pr),p.st&&(Ee.st=p.st),p.sf&&(Ee.sf=p.sf),Ee}function Q(Ee){try{var Pe=Ee.quality,Ue=Ee.mediaInfo.bitrateList;return parseInt(Ue[Pe].bandwidth/1e3)}catch{return null}}function ne(Ee){try{var Pe=C.getTopBitrateInfoFor(Ee);return Math.round(Pe.bitrate/1e3)}catch{return null}}function ce(Ee){try{return isNaN(Ee.duration)?null:Math.round(Ee.duration*1e3)}catch{return null}}function W(Ee){try{return parseInt(C.getThroughputHistory().getSafeAverageThroughput(Ee)/100)*100}catch{return null}}function B(Ee){try{var Pe=p.pr,Ue=x.getCurrentBufferLevel(Ee);return!isNaN(Pe)&&!isNaN(Ue)?parseInt(Ue/Pe*10)*100:null}catch{return null}}function D(Ee){try{var Pe=x.getCurrentBufferLevel(Ee);return isNaN(Pe)?null:parseInt(Pe*10)*100}catch{return null}}function q(Ee){try{p.pr=Ee.playbackRate}catch{}}function me(Ee){try{var Pe=c.getIsDynamic(Ee.data),Ue=Pe?h.LIVE:h.VOD,Re=Ee.protocol&&Ee.protocol==="MSS"?_.MSS:_.DASH;p.st="".concat(Ue),p.sf="".concat(Re)}catch{}}function de(Ee){try{Ee.state&&Ee.mediaType&&Ee.state===l.default.BUFFER_EMPTY&&(w[Ee.mediaType]||(w[Ee.mediaType]=!0),te[Ee.mediaType]||(te[Ee.mediaType]=!0))}catch{}}function ve(){for(var Ee in w)w.hasOwnProperty(Ee)&&(w[Ee]=!0);for(var Pe in te)te.hasOwnProperty(Pe)&&(te[Pe]=!0)}function Se(Ee){try{if(!Ee)return null;var Pe=Object.keys(Ee).sort(function(Ke,Ne){return Ke.localeCompare(Ne)}),Ue=Pe.length,Re=Pe.reduce(function(Ke,Ne,ze){return Ne==="v"&&Ee[Ne]===1||(typeof Ee[Ne]=="string"&&Ne!=="ot"&&Ne!=="sf"&&Ne!=="st"?Ke+="".concat(Ne,"=").concat(JSON.stringify(Ee[Ne])):Ke+="".concat(Ne,"=").concat(Ee[Ne]),ze<Ue-1&&(Ke+=",")),Ke},"");return Re=Re.replace(/=true/g,""),Re=Re.replace(/,\s*$/,""),Re}catch{return null}}function be(Ee){if(!(!H||H.length===0)){var Pe=n(H),Ue;try{for(Pe.s();!(Ue=Pe.n()).done;){var Re=Ue.value;if(Re.getType()===Ee)return Re.probeNextRequest()}}catch(Ke){Pe.e(Ke)}finally{Pe.f()}}}function Me(Ee){var Pe=V.getPlaybackRate();Pe||(Pe=1);var Ue=Ee.quality,Re=Ee.mediaType,Ke=Ee.mediaInfo,Ne=Ee.duration,ze=D(Re);ze===0&&(ze=500);var $e=Ke.bitrateList[Ue].bandwidth,tt=$e*Ne/1e3,ft=ze/Pe/1e3,bt=tt/ft,Et=j.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(j.get().streaming.cmcd.rtpSafetyFactor)?j.get().streaming.cmcd.rtpSafetyFactor:f,St=bt*Et,Ct=(parseInt(St/100)+1)*100;return Ct}function Fe(){U.off(l.default.PLAYBACK_RATE_CHANGED,q,this),U.off(l.default.MANIFEST_LOADED,me,this),U.off(l.default.BUFFER_LEVEL_STATE_CHANGED,de,S),U.off(l.default.PLAYBACK_SEEKED,ve,S),G()}return S={getQueryParameter:ie,getHeaderParameters:oe,setConfig:se,reset:Fe,initialize:Y},X(),S}v.__dashjs_factory_name="CmcdModel",g.default=m.default.getSingletonFactory(v)},"./src/streaming/models/CustomParametersModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/vo/UTCTiming.js"),l=r("./src/core/FactoryMaker.js"),u=r("./src/core/Settings.js"),m=r("./src/streaming/utils/SupervisorTools.js"),y=r("./src/streaming/rules/abr/ABRRulesCollection.js"),T=r("./src/streaming/constants/Constants.js"),E=!1;function t(){var e,n,i,d,P,b,A,_,h=this.context,f=Object(u.default)(h).getInstance();function v(){i={default:E},c()}function c(){d=[],P=[],b=[],_=[],A=null,n=[]}function S(){c()}function p(){}function C(R){A=R}function x(){A=null}function V(){return A}function H(){return d}function te(){return P}function w(R){d.push(R)}function F(R){P.push(R)}function M(R){se(d,R)}function U(R){se(P,R)}function j(){return b}function X(R){b.push(R)}function Y(R){se(b,R)}function se(R,L){var $=-1;R.some(function(O,Q){if(O===L)return $=Q,!0}),!($<0)&&R.splice($,1)}function G(R){var L;for(L=0;L<_.length;L++)if(_[L].rulename===R)return L;return-1}function ee(R,L,$){if(typeof R!="string"||R!==y.default.ABANDON_FRAGMENT_RULES&&R!==y.default.QUALITY_SWITCH_RULES||typeof L!="string")throw T.default.BAD_ARGUMENT_ERROR;var O=G(L);O===-1?_.push({type:R,rulename:L,rule:$}):(_[O].type=R,_[O].rule=$)}function J(R){if(R){var L=G(R);L!==-1&&_.splice(L,1)}else _=[]}function ie(){_=[]}function ue(){return _}function ae(R,L){Z(R,L);var $=new o.default;$.schemeIdUri=R,$.value=L,n.push($)}function oe(){return n}function Z(R,L){Object(m.checkParameterType)(R,"string"),Object(m.checkParameterType)(L,"string"),n.forEach(function($,O){$.schemeIdUri===R&&$.value===L&&n.splice(O,1)})}function ge(){n=[]}function le(){var R=f.get().streaming.utcSynchronization.defaultTimingSource;ae(R.scheme,R.value)}function z(R,L){R?i[R]=!!L:Object.keys(i).forEach(function($){z($,L)})}function K(R){var L=i[R];return L===void 0?i.default:L}return e={getCustomInitialTrackSelectionFunction:V,setCustomInitialTrackSelectionFunction:C,resetCustomInitialTrackSelectionFunction:x,getLicenseResponseFilters:te,getLicenseRequestFilters:H,getCustomCapabilitiesFilters:j,registerCustomCapabilitiesFilter:X,registerLicenseResponseFilter:F,registerLicenseRequestFilter:w,unregisterCustomCapabilitiesFilter:Y,unregisterLicenseResponseFilter:U,unregisterLicenseRequestFilter:M,addAbrCustomRule:ee,removeAllAbrCustomRule:ie,removeAbrCustomRule:J,getAbrCustomRules:ue,addUTCTimingSource:ae,removeUTCTimingSource:Z,getUTCTimingSources:oe,clearDefaultUTCTimingSources:ge,restoreDefaultUTCTimingSources:le,setXHRWithCredentialsForType:z,getXHRWithCredentialsForType:K,setConfig:p,reset:S},v(),e}t.__dashjs_factory_name="CustomParametersModel",g.default=l.default.getSingletonFactory(t)},"./src/streaming/models/FragmentModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/vo/FragmentRequest.js"),u="loading",m="executed",y="canceled",T="failed";function E(e){e=e||{};var n=e.eventBus,i=e.events,d=e.dashMetrics,P=e.fragmentLoader,b=e.debug,A=e.streamInfo,_=e.type,h,f,v,c;function S(){f=b.getLogger(h),oe(),n.on(i.LOADING_COMPLETED,ie,h),n.on(i.LOADING_DATA_PROGRESS,ue,h),n.on(i.LOADING_ABANDONED,ae,h)}function p(){return A.id}function C(){return _}function x(le){var z=function(O,Q){return O.action===l.default.ACTION_COMPLETE&&O.action===Q.action},K=function(O,Q){return!isNaN(O.index)&&O.startTime===Q.startTime&&O.adaptationIndex===Q.adaptationIndex&&O.type===Q.type},R=function(O,Q){return isNaN(O.index)&&isNaN(Q.index)&&O.quality===Q.quality},L=function(O){var Q=!1;return O.some(function(ne){if(K(le,ne)||R(le,ne)||z(le,ne))return Q=!0,Q}),Q};return le?L(v):!1}function V(le){var z=!1,K=0,R;if(z=x(le),!z)for(K=0;K<c.length;K++)R=c[K],le.url===R.url&&le.startTime===R.startTime&&(z=!0);return z}function H(le){var z=le?le.state instanceof Array?le.state:[le.state]:[],K=[];return z.forEach(function(R){var L=ee(R);K=K.concat(G(L,le))}),K}function te(le){return isNaN(le.duration)?.25:Math.min(le.duration/8,.5)}function w(le){v=v.filter(function(z){var K=te(z);return isNaN(z.startTime)||(le!==void 0?z.startTime>=le-K:!1)})}function F(le){v=v.filter(function(z){return isNaN(z.startTime)||(le!==void 0?z.startTime<le:!1)})}function M(le,z){z<=le+.5||(v=v.filter(function(K){var R=te(K);return isNaN(K.startTime)||K.startTime>=z-R||isNaN(K.duration)||K.startTime+K.duration<=le+R}))}function U(le,z){if(!le||le.length===0){w();return}for(var K=0,R=0,L=le.length;R<L;R++)M(K,le.start(R)),K=le.end(R);z>0&&M(K,z)}function j(){f.debug("abort requests"),P.abort(),c=[]}function X(le){switch(le.action){case l.default.ACTION_DOWNLOAD:J(le,u),c.push(le),Y(le);break;default:f.warn("Unknown request action.")}}function Y(le){n.trigger(i.FRAGMENT_LOADING_STARTED,{request:le},{streamId:A.id,mediaType:_}),P.load(le)}function se(le,z,K){for(var R=le.length-1,L=R;L>=0;L--){var $=le[L],O=$.startTime,Q=O+$.duration;if(K=isNaN(K)?te($):K,!isNaN(O)&&!isNaN(Q)&&z+K>=O&&z-K<Q||isNaN(O)&&isNaN(z))return $}return null}function G(le,z){return z.hasOwnProperty("time")?[se(le,z.time,z.threshold)]:le.filter(function(K){for(var R in z)if(R!=="state"&&z.hasOwnProperty(R)&&K[R]!=z[R])return!1;return!0})}function ee(le){var z;switch(le){case u:z=c;break;case m:z=v;break;default:z=[]}return z}function J(le,z){d.addSchedulingInfo(le,z),d.addRequestsQueue(le.mediaType,c,v)}function ie(le){le.sender===P&&(c.splice(c.indexOf(le.request),1),le.response&&!le.error&&v.push(le.request),J(le.request,le.error?T:m),n.trigger(i.FRAGMENT_LOADING_COMPLETED,{request:le.request,response:le.response,error:le.error,sender:this},{streamId:A.id,mediaType:_}))}function ue(le){le.sender===P&&n.trigger(i.FRAGMENT_LOADING_PROGRESS,{request:le.request,response:le.response,error:le.error,sender:this},{streamId:A.id,mediaType:_})}function ae(le){le.sender===P&&n.trigger(i.FRAGMENT_LOADING_ABANDONED,{request:le.request},{streamId:A.id,mediaType:_})}function oe(){v=[],c=[]}function Z(){n.off(i.LOADING_COMPLETED,ie,this),n.off(i.LOADING_DATA_PROGRESS,ue,this),n.off(i.LOADING_ABANDONED,ae,this),P&&P.reset(),oe()}function ge(le){v.push(le)}return h={getStreamId:p,getType:C,getRequests:H,isFragmentLoaded:x,isFragmentLoadedOrPending:V,removeExecutedRequestsBeforeTime:w,removeExecutedRequestsAfterTime:F,syncExecutedRequestsWithBufferedRange:U,abortRequests:j,executeRequest:X,reset:Z,resetInitialSettings:oe,addExecutedRequest:ge},S(),h}E.__dashjs_factory_name="FragmentModel";var t=o.default.getClassFactory(E);t.FRAGMENT_MODEL_LOADING=u,t.FRAGMENT_MODEL_EXECUTED=m,t.FRAGMENT_MODEL_CANCELED=y,t.FRAGMENT_MODEL_FAILED=T,o.default.updateClassFactory(E.__dashjs_factory_name,t),g.default=t},"./src/streaming/models/LowLatencyThroughputModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/Debug.js"),l=r("./src/core/FactoryMaker.js");function u(){var m=10,y=.8,T=.6,E=1.05,t=250,e=this.context,n,i,d={};function P(){i=Object(o.default)(e).getInstance().getLogger(n)}function b(v){for(var c={},S=0,p=0,C=0,x=0,V=v.length,H=0;H<V;++H)S+=v[H].chunkDownloadTimeRelativeMS,p+=v[H].bufferLevel,C+=v[H].chunkDownloadTimeRelativeMS*v[H].bufferLevel,x+=v[H].chunkDownloadTimeRelativeMS*v[H].chunkDownloadTimeRelativeMS;return c.m=(C-S*p/V)/(x-S*S/V),c.b=p/V-c.m*S/V,function(te){return c.m*te+c.b}}function A(v){var c=!0,S,p=v.reduce(function(C,x){return C+x.bufferLevelAtSegmentEnd},0)/v.length;return v.forEach(function(C){Math.abs(C.bufferLevelAtSegmentEnd/C.bufferLevelAtSegmentStart)<.95&&(c=!1),C.bufferLevelAtSegmentEnd/p<.8&&(c=!1),S?S>C.bitrate&&(c=!1):S=C.bitrate}),c}function _(v){var c=d[v.mediaType].slice(-1).pop(),S=d[v.mediaType].slice(-3),p=c.chunkMeasurements.slice(-1).pop().chunkDownloadTimeRelativeMS;c.bufferLevelAtSegmentStart=c.getEstimatedBufferLevel(p/2),c.bufferLevelAtSegmentEnd=c.getEstimatedBufferLevel(p);var C=A(S),x=C?T:y;if(c.isBufferStable&&c.segDurationMS*E<c.fetchDownloadDurationMS)return c.fetchDownloadDurationMS;if(!C||c.segDurationMS<c.fetchDownloadDurationMS||c.adjustedAvailabilityStartTimeMS<=c.requestTimeMS+c.throughputCapacityDelayMS-c.segDurationMS)return c.fetchDownloadDurationMS*y;for(var V=c.requestTimeMS+c.throughputCapacityDelayMS-c.adjustedAvailabilityStartTimeMS,H=0,te=0,w=0,F=0;F<c.chunkMeasurements.length;F++){var M=c.chunkMeasurements[F];if(V<te+M.chunkDownloadDurationMS)break;te+=M.chunkDownloadDurationMS,H+=M.chunkBytes,w++}if(V<0&&i.warn("request time was before adjusted availibitly start time"),H&&te&&w>c.chunkMeasurements.length*.2){var U=H/te,j=c.segmentBytes/U;return c.fetchDownloadDurationMS<j?c.fetchDownloadDurationMS*x:j*x}var X=c.bitrate;return c.bitrateList.some(function(Y){if(Y.bandwidth>c.bitrate)return X=Y.bandwidth,!0}),X===c.bitrate?c.fetchDownloadDurationMS*x:x*c.segmentBytes*8*1e3/X}function h(v,c){var S=d[v.mediaType]&&d[v.mediaType].slice(-3);return!S||S.length<3||!A(S)?0:c/4>t?t:c/4}function f(v,c,S,p,C){v&&v.mediaType&&!d[v.mediaType]&&(d[v.mediaType]=[]);var x=v.mediaInfo.bitrateList.find(function(V){return V.id===v.representationId});d[v.mediaType].push({index:v.index,repId:v.representationId,mediaType:v.mediaType,requestTimeMS:p,adjustedAvailabilityStartTimeMS:v.availabilityStartTime.getTime(),segDurationMS:v.duration*1e3,chunksDurationMS:S.reduce(function(V,H){return V+H.chunkDownloadDurationMS},0),segmentBytes:S.reduce(function(V,H){return V+H.chunkBytes},0),bitrate:x&&x.bandwidth,bitrateList:v.mediaInfo.bitrateList,chunkMeasurements:S,fetchDownloadDurationMS:c,throughputCapacityDelayMS:C,getEstimatedBufferLevel:b(S.slice(1))}),d[v.mediaType].length>m&&d[v.mediaType].shift()}return n={setup:P,addMeasurement:f,getThroughputCapacityDelayMS:h,getEstimatedDownloadDurationMS:_},P(),n}u.__dashjs_factory_name="LowLatencyThroughputModel",g.default=l.default.getSingletonFactory(u)},"./src/streaming/models/ManifestModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/EventBus.js"),l=r("./src/core/events/Events.js"),u=r("./src/core/FactoryMaker.js");function m(){var y=this.context,T=Object(o.default)(y).getInstance(),E,t;function e(){return t}function n(i){t=i,i&&T.trigger(l.default.MANIFEST_LOADED,{data:i})}return E={getValue:e,setValue:n},E}m.__dashjs_factory_name="ManifestModel",g.default=u.default.getSingletonFactory(m)},"./src/streaming/models/MediaPlayerModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/Debug.js"),l=r("./src/core/FactoryMaker.js"),u=r("./src/core/Settings.js"),m=12,y=20,T=10,E=5,t=12,e=-.5,n=.5,i=-.5,d=1;function P(){var b,A,_,h,f=this.context,v=Object(u.default)(f).getInstance();function c(){A=Object(o.default)(f).getInstance().getLogger(b)}function S(X){X.playbackController&&(_=X.playbackController),X.serviceDescriptionController&&(h=X.serviceDescriptionController)}function p(X,Y){return isNaN(X)?0:X>0?(Y&&A.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):X<i?(Y&&A.warn("Supplied minimum playback rate is out of range and will be limited to ".concat(i,": ").concat(i*100,"% playback speed.")),i):X}function C(X,Y){return isNaN(X)?0:X<0?(Y&&A.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):X>d?(Y&&A.warn("Supplied maximum playback rate is out of range and will be limited to ".concat(d,": ").concat((1+d)*100,"% playback speed.")),d):X}function x(){if(!isNaN(v.get().streaming.liveCatchup.maxDrift)&&v.get().streaming.liveCatchup.maxDrift>0)return v.get().streaming.liveCatchup.maxDrift;var X=h.getServiceDescriptionSettings();return X&&X.liveCatchup&&!isNaN(X.liveCatchup.maxDrift)&&X.liveCatchup.maxDrift>0?X.liveCatchup.maxDrift:t}function V(X){var Y=v.get().streaming.liveCatchup.playbackRate;if(!isNaN(Y.min)||!isNaN(Y.max))return{min:p(Y.min,X),max:C(Y.max,X)};var se=h.getServiceDescriptionSettings();if(se&&se.liveCatchup&&(!isNaN(se.liveCatchup.playbackRate.min)||!isNaN(se.liveCatchup.playbackRate.max))){var G=se.liveCatchup.playbackRate;return{min:p(G.min,X),max:C(G.max,X)}}return{min:e,max:n}}function H(){return v.get().streaming.liveCatchup.enabled!==null?v.get().streaming.liveCatchup.enabled:_.getInitialCatchupModeActivated()}function te(X,Y){try{var se=v.get().streaming.abr[X][Y];if(!isNaN(se)&&se!==-1)return se;var G=h.getServiceDescriptionSettings();return G&&G[X]&&!isNaN(G[X][Y])?G[X][Y]:-1}catch{return-1}}function w(){var X=v.get().streaming.buffer.initialBufferLevel;return isNaN(X)||X<0?0:Math.min(F(),X)}function F(){var X=v.get().streaming.buffer.stableBufferTime>0?v.get().streaming.buffer.stableBufferTime:v.get().streaming.buffer.fastSwitchEnabled?y:m,Y=_.getLiveDelay();return!isNaN(Y)&&Y>0?Math.min(X,Y):X}function M(X){var Y=isNaN(v.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?E:v.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return _.getLowLatencyModeEnabled()?v.get().streaming.retryAttempts[X]*Y:v.get().streaming.retryAttempts[X]}function U(X){var Y=isNaN(v.get().streaming.retryIntervals.lowLatencyReductionFactor)?T:v.get().streaming.retryIntervals.lowLatencyReductionFactor;return _.getLowLatencyModeEnabled()?v.get().streaming.retryIntervals[X]/Y:v.get().streaming.retryIntervals[X]}function j(){}return b={getCatchupMaxDrift:x,getCatchupModeEnabled:H,getStableBufferTime:F,getInitialBufferLevel:w,getRetryAttemptsForType:M,getRetryIntervalsForType:U,getCatchupPlaybackRates:V,getAbrBitrateParameter:te,setConfig:S,reset:j},c(),b}P.__dashjs_factory_name="MediaPlayerModel",g.default=l.default.getSingletonFactory(P)},"./src/streaming/models/MetricsModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/constants/MetricsConstants.js"),u=r("./src/streaming/vo/MetricsList.js"),m=r("./src/streaming/vo/metrics/HTTPRequest.js"),y=r("./src/streaming/vo/metrics/RepresentationSwitch.js"),T=r("./src/streaming/vo/metrics/BufferLevel.js"),E=r("./src/streaming/vo/metrics/BufferState.js"),t=r("./src/streaming/vo/metrics/DVRInfo.js"),e=r("./src/streaming/vo/metrics/DroppedFrames.js"),n=r("./src/streaming/vo/metrics/ManifestUpdate.js"),i=r("./src/streaming/vo/metrics/SchedulingInfo.js"),d=r("./src/core/EventBus.js"),P=r("./src/streaming/vo/metrics/RequestsQueue.js"),b=r("./src/core/events/Events.js"),A=r("./src/core/FactoryMaker.js");function _(h){h=h||{};var f=h.settings,v=this.context,c=Object(d.default)(v).getInstance(),S,p;function C(){p={}}function x(){c.trigger(b.default.METRICS_CHANGED)}function V(R){c.trigger(b.default.METRIC_CHANGED,{mediaType:R}),x()}function H(R,L,$){c.trigger(b.default.METRIC_UPDATED,{mediaType:R,metric:L,value:$}),V(R)}function te(R,L,$){c.trigger(b.default.METRIC_ADDED,{mediaType:R,metric:L,value:$}),V(R)}function w(R){delete p[R],V(R)}function F(){p={},x()}function M(R,L){var $=null;return R&&(p.hasOwnProperty(R)?$=p[R]:L||($=new u.default,p[R]=$)),$}function U(R,L,$){var O=M(R);O!==null&&(O[L].push($),O[L].length>f.get().streaming.metrics.maxListDepth&&O[L].shift())}function j(R,L,$,O){var Q=new m.HTTPRequestTrace;return Q.s=L,Q.d=$,Q.b=O,R.trace.push(Q),R.interval||(R.interval=0),R.interval+=$,Q}function X(R,L,$,O,Q,ne,ce,W,B,D,q,me,de,ve,Se,be){var Me=new m.HTTPRequest;ne&&ne!==O&&(X(R,null,$,O,Q,null,null,W,B,null,null,null,de,null,null,be),Me.actualurl=ne),Me.tcpid=L,Me.type=$,Me.url=O,Me.range=W,Me.trequest=B,Me.tresponse=D,Me.responsecode=me,Me._tfinish=q,Me._stream=R,Me._mediaduration=de,Me._quality=Q,Me._responseHeaders=ve,Me._serviceLocation=ce,Me._fileLoaderType=be,Se?Se.forEach(function(Fe){j(Me,Fe.s,Fe.d,Fe.b)}):(delete Me.interval,delete Me.trace),se(R,l.default.HTTP_REQUEST,Me)}function Y(R,L,$,O,Q){var ne=new y.default;ne.t=L,ne.mt=$,ne.to=O,Q?ne.lto=Q:delete ne.lto,se(R,l.default.TRACK_SWITCH,ne)}function se(R,L,$){U(R,L,$),te(R,L,$)}function G(R,L,$){var O=new T.default;O.t=L,O.level=$,se(R,l.default.BUFFER_LEVEL,O)}function ee(R,L,$){var O=new E.default;O.target=$,O.state=L,se(R,l.default.BUFFER_STATE,O)}function J(R,L,$,O){var Q=new t.default;Q.time=L,Q.range=O,Q.manifestInfo=$,se(R,l.default.DVR_INFO,Q)}function ie(R,L){var $=new e.default,O=M(R).DroppedFrames;L&&($.time=L.creationTime,$.droppedFrames=L.droppedVideoFrames,!(O.length>0&&O[O.length-1]==$)&&se(R,l.default.DROPPED_FRAMES,$))}function ue(R,L,$,O,Q,ne,ce,W,B){var D=new i.default;D.mediaType=R,D.t=L,D.type=$,D.startTime=O,D.availabilityStartTime=Q,D.duration=ne,D.quality=ce,D.range=W,D.state=B,se(R,l.default.SCHEDULING_INFO,D)}function ae(R,L,$){var O=new P.default;O.loadingRequests=L,O.executedRequests=$,M(R).RequestsQueue=O,te(R,l.default.REQUESTS_QUEUE,O)}function oe(R,L,$,O,Q,ne,ce,W,B,D){var q=new n.ManifestUpdate;q.mediaType=R,q.type=L,q.requestTime=$,q.fetchTime=O,q.availabilityStartTime=Q,q.presentationStartTime=ne,q.clientTimeOffset=ce,q.currentTime=W,q.buffered=B,q.latency=D,U(o.default.STREAM,l.default.MANIFEST_UPDATE,q),te(R,l.default.MANIFEST_UPDATE,q)}function Z(R,L){if(R){for(var $ in L)R[$]=L[$];H(R.mediaType,l.default.MANIFEST_UPDATE,R)}}function ge(R,L,$,O,Q){if(R){var ne=new n.ManifestUpdateStreamInfo;ne.id=L,ne.index=$,ne.start=O,ne.duration=Q,R.streamInfo.push(ne),H(R.mediaType,l.default.MANIFEST_UPDATE_STREAM_INFO,R)}}function le(R,L,$,O,Q,ne,ce,W){if(R&&R.representationInfo){var B=new n.ManifestUpdateRepresentationInfo;B.id=L,B.index=$,B.streamIndex=O,B.mediaType=Q,B.startNumber=ce,B.fragmentInfoType=W,B.presentationTimeOffset=ne,R.representationInfo.push(B),H(R.mediaType,l.default.MANIFEST_UPDATE_TRACK_INFO,R)}}function z(R){R.trace&&Array.isArray(R.trace)?R.trace.forEach(function(L){L.hasOwnProperty("subreplevel")&&!L.subreplevel&&delete L.subreplevel}):delete R.trace,se(o.default.STREAM,l.default.PLAY_LIST,R)}function K(R){se(o.default.STREAM,l.default.DVB_ERRORS,R)}return S={clearCurrentMetricsForType:w,clearAllCurrentMetrics:F,getMetricsFor:M,addHttpRequest:X,addRepresentationSwitch:Y,addBufferLevel:G,addBufferState:ee,addDVRInfo:J,addDroppedFrames:ie,addSchedulingInfo:ue,addRequestsQueue:ae,addManifestUpdate:oe,updateManifestUpdateInfo:Z,addManifestUpdateStreamInfo:ge,addManifestUpdateRepresentationInfo:le,addPlayList:z,addDVBErrors:K},C(),S}_.__dashjs_factory_name="MetricsModel",g.default=A.default.getSingletonFactory(_)},"./src/streaming/models/URIFragmentModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/vo/URIFragmentData.js"),l=r("./src/core/FactoryMaker.js");function u(){var m,y;function T(t){if(y=new o.default,!t)return null;var e=t.indexOf("#");if(e!==-1)for(var n=t.substr(e+1).split("&"),i=0,d=n.length;i<d;++i){var P=n[i],b=P.indexOf("=");if(b!==-1){var A=P.substring(0,b);y.hasOwnProperty(A)&&(y[A]=P.substr(b+1))}}}function E(){return y}return m={initialize:T,getURIFragmentData:E},m}u.__dashjs_factory_name="URIFragmentModel",g.default=l.default.getSingletonFactory(u)},"./src/streaming/models/VideoModel.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/EventBus.js"),u=r("./src/core/events/Events.js"),m=r("./src/core/Debug.js"),y=r("./src/streaming/constants/Constants.js"),T=new Map([[y.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[y.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[y.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[y.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function E(){var t,e,n,i,d,P,b,A="element is not video or audio DOM type!",_=this.context,h=Object(l.default)(_).getInstance(),f=[];function v(){e=Object(m.default)(_).getInstance().getLogger(t),i=NaN}function c(){h.on(u.default.PLAYBACK_PLAYING,ie,this)}function S(){h.off(u.default.PLAYBACK_PLAYING,ie,this)}function p(){n&&(n.playbackRate=b||1,n.removeEventListener("canplay",p))}function C(Ee){var Pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;n&&(!Pe&&n.readyState<=2&&Ee>0?n.addEventListener("canplay",p):n.playbackRate=Ee)}function x(Ee,Pe){i=Ee,Me(y.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,function(){if(n){if(n.currentTime===i){i=NaN;return}try{i=Pe?V(i):i,n.currentTime=i,i=NaN}catch(Ue){n.readyState===0&&Ue.code===Ue.INVALID_STATE_ERR&&setTimeout(function(){n.currentTime=i,i=NaN},400)}}})}function V(Ee){var Pe=Q(),Ue=Ee,Re=9999999999;if(Pe)for(var Ke=0;Ke<Pe.length;Ke++){var Ne=Pe.start(Ke),ze=Pe.end(Ke),$e=Math.abs(Ne-Ee),tt=Math.abs(ze-Ee);if(Ee>=Ne&&Ee<=ze)return Ee;$e<Re&&(Re=$e,Ue=Ne),tt<Re&&(Re=tt,Ue=ze)}return Ue}function H(){return n}function te(Ee){if(Ee==null||Ee&&/^(VIDEO|AUDIO)$/i.test(Ee.nodeName))n=Ee,n&&(n.preload="auto");else throw A}function w(Ee){n&&(Ee?n.src=Ee:(n.removeAttribute("src"),n.load()))}function F(){return n?n.src:null}function M(){return d}function U(){return P}function j(Ee){d=Ee,d.style.position="absolute",d.style.display="flex",d.style.overflow="hidden",d.style.pointerEvents="none",d.style.top=0,d.style.left=0}function X(Ee){P=Ee}function Y(Ee,Pe){J(Ee,Pe)}function se(){return f.length>0}function G(Ee){Ee===null||!n||n.seeking||f.indexOf(Ee)!==-1||f.push(Ee)}function ee(Ee){var Pe=f.indexOf(Ee);Ee!==null&&Pe!==-1&&f.splice(Pe,1)}function J(Ee,Pe){Pe?G(Ee):ee(Ee)}function ie(){if(n&&se()&&n.playbackRate===0){var Ee=document.createEvent("Event");Ee.initEvent("waiting",!0,!1),n.dispatchEvent(Ee)}}function ue(){if(!n)return null;var Ee="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,Pe="getVideoPlaybackQuality"in n,Ue=null;return Pe?Ue=n.getVideoPlaybackQuality():Ee&&(Ue={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),Ue}function ae(){if(n){n.autoplay=!0;var Ee=n.play();Ee&&Ee.catch&&typeof Promise<"u"&&Ee.catch(function(Pe){Pe.name==="NotAllowedError"&&h.trigger(u.default.PLAYBACK_NOT_ALLOWED),e.warn("Caught pending play exception - continuing (".concat(Pe,")"))})}}function oe(){return n?n.paused:null}function Z(){n&&(n.pause(),n.autoplay=!1)}function ge(){return n?n.seeking||!isNaN(i):null}function le(){return n?isNaN(i)?n.currentTime:i:null}function z(){return n?n.playbackRate:null}function K(){return n?n.played:null}function R(){return n?n.ended:null}function L(Ee,Pe){n&&n.addEventListener(Ee,Pe)}function $(Ee,Pe){n&&n.removeEventListener(Ee,Pe)}function O(){return n?n.readyState:NaN}function Q(){return n?n.buffered:null}function ne(){return n?n.clientWidth:NaN}function ce(){return n?n.clientHeight:NaN}function W(){return n?n.videoWidth:NaN}function B(){return n?n.videoHeight:NaN}function D(){var Ee=n.parentNode.host||n.parentNode;return Ee?n.getBoundingClientRect().top-Ee.getBoundingClientRect().top:NaN}function q(){var Ee=n.parentNode.host||n.parentNode;return Ee?n.getBoundingClientRect().left-Ee.getBoundingClientRect().left:NaN}function me(){return n?n.textTracks:[]}function de(Ee,Pe,Ue,Re,Ke){if(n){for(var Ne=0;Ne<n.textTracks.length;Ne++)if(n.textTracks[Ne].kind===Ee&&(!Pe||n.textTracks[Ne].label==Pe)&&n.textTracks[Ne].language===Ue&&n.textTracks[Ne].isTTML===Re&&n.textTracks[Ne].isEmbedded===Ke)return n.textTracks[Ne]}return null}function ve(Ee,Pe,Ue,Re,Ke){if(!n)return null;var Ne=de(Ee,Pe,Ue,Re,Ke);return Ne||(Ne=n.addTextTrack(Ee,Pe,Ue),Ne.isEmbedded=Ke,Ne.isTTML=Re),Ne}function Se(Ee){n&&(n.appendChild(Ee),Ee.isTTML!==void 0&&(n.textTracks[n.textTracks.length-1].isTTML=Ee.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=Ee.isEmbedded))}function be(Ee){n&&n.removeChild(Ee)}function Me(Ee,Pe){if(Ee===y.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||O()>=Ee)Pe();else{var Ue=T.get(Ee);Fe(Ue,Pe)}}function Fe(Ee,Pe){var Ue=function Re(){$(Ee,Re),Pe(Ee)};L(Ee,Ue)}return t={initialize:c,setCurrentTime:x,play:ae,isPaused:oe,pause:Z,isStalled:se,isSeeking:ge,getTime:le,getPlaybackRate:z,setPlaybackRate:C,getPlayedRanges:K,getEnded:R,setStallState:Y,getElement:H,setElement:te,setSource:w,getSource:F,getTTMLRenderingDiv:M,setTTMLRenderingDiv:j,getVttRenderingDiv:U,setVttRenderingDiv:X,getPlaybackQuality:ue,addEventListener:L,removeEventListener:$,getReadyState:O,getBufferRange:Q,getClientWidth:ne,getClientHeight:ce,getTextTracks:me,getTextTrack:de,addTextTrack:ve,appendChild:Se,removeChild:be,getVideoWidth:W,getVideoHeight:B,getVideoRelativeOffsetTop:D,getVideoRelativeOffsetLeft:q,waitForReadyState:Me,reset:S},v(),t}E.__dashjs_factory_name="VideoModel",g.default=o.default.getSingletonFactory(E)},"./src/streaming/net/FetchLoader.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Settings.js"),u=r("./src/streaming/constants/Constants.js"),m=r("./src/streaming/utils/RequestModifier.js");function y(b,A){return t(b)||E(b,A)||n(b,A)||T()}function T(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E(b,A){var _=b==null?null:typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(_!=null){var h,f,v,c,S=[],p=!0,C=!1;try{if(v=(_=_.call(b)).next,A===0){if(Object(_)!==_)return;p=!1}else for(;!(p=(h=v.call(_)).done)&&(S.push(h.value),S.length!==A);p=!0);}catch(x){C=!0,f=x}finally{try{if(!p&&_.return!=null&&(c=_.return(),Object(c)!==c))return}finally{if(C)throw f}}return S}}function t(b){if(Array.isArray(b))return b}function e(b,A){var _=typeof Symbol<"u"&&b[Symbol.iterator]||b["@@iterator"];if(!_){if(Array.isArray(b)||(_=n(b))||A&&b&&typeof b.length=="number"){_&&(b=_);var h=0,f=function(){};return{s:f,n:function(){return h>=b.length?{done:!0}:{done:!1,value:b[h++]}},e:function(C){throw C},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var v=!0,c=!1,S;return{s:function(){_=_.call(b)},n:function(){var C=_.next();return v=C.done,C},e:function(C){c=!0,S=C},f:function(){try{!v&&_.return!=null&&_.return()}finally{if(c)throw S}}}}function n(b,A){if(b){if(typeof b=="string")return i(b,A);var _=Object.prototype.toString.call(b).slice(8,-1);if(_==="Object"&&b.constructor&&(_=b.constructor.name),_==="Map"||_==="Set")return Array.from(b);if(_==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return i(b,A)}}function i(b,A){(A==null||A>b.length)&&(A=b.length);for(var _=0,h=new Array(A);_<A;_++)h[_]=b[_];return h}function d(b){b=b||{};var A=this.context,_=b.requestModifier,h=b.lowLatencyThroughputModel,f=b.boxParser,v=Object(l.default)(A).getInstance(),c,S;function p(M){S=M.dashMetrics}function C(M){_&&_.modifyRequest?Object(m.modifyRequest)(M,_).then(function(){return x(M)}):x(M)}function x(M){var U=new Date,j=M.request,X=new Headers;if(j.range&&X.append("Range","bytes="+j.range),M.headers)for(var Y in M.headers){var se=M.headers[Y];se&&X.append(Y,se)}j.requestStartDate||(j.requestStartDate=U),_&&_.modifyRequestHeader&&_.modifyRequestHeader({setRequestHeader:function(oe,Z){X.append(oe,Z)}},{url:M.url});var G;typeof window.AbortController=="function"&&(G=new AbortController,M.abortController=G,G.signal.onabort=M.onabort);var ee={method:M.method,headers:X,credentials:M.withCredentials?"include":void 0,signal:G?G.signal:void 0},J=v.get().streaming.abr.fetchThroughputCalculationMode,ie=Date.now(),ue=0;new Promise(function(ae){if(J===u.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&h&&(ue=h.getThroughputCapacityDelayMS(j,S.getCurrentBufferLevel(j.mediaType)*1e3),ue))return setTimeout(ae,ue);ae()}).then(function(){var ae=Date.now();fetch(M.url,ee).then(function(oe){M.response||(M.response={}),M.response.status=oe.status,M.response.statusText=oe.statusText,M.response.responseURL=oe.url,oe.ok||M.onerror();var Z="",ge=e(oe.headers.keys()),le;try{for(ge.s();!(le=ge.n()).done;){var z=le.value;Z+=z+": "+oe.headers.get(z)+`\r
`}}catch(Me){ge.e(Me)}finally{ge.f()}if(M.response.responseHeaders=Z,!oe.body)return oe.arrayBuffer().then(function(Me){M.response.response=Me;var Fe={loaded:Me.byteLength,total:Me.byteLength,stream:!1};M.progress(Fe),M.onload(),M.onend()});var K=parseInt(oe.headers.get("Content-Length"),10),R=0,L=!1,$=new Uint8Array,O=0;if(J===u.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST&&h){var Q=function(Fe){var Ee=Fe.getReader(),Pe=[];Ee.read().then(function Ue(Re){var Ke=Re.value,Ne=Re.done;if(ce=Date.now(),Ke&&Ke.length){var ze=ce-ne,$e=Ke.length;Pe.push({chunkDownloadTimeRelativeMS:ce-ae,chunkDownloadDurationMS:ze,chunkBytes:$e,kbps:Math.round(8*$e/(ze/1e3)),bufferLevel:S.getCurrentBufferLevel(j.mediaType)})}if(Ne){var tt=ce-ae,ft=Pe.reduce(function(bt,Et){return bt+Et.chunkBytes},0);h.addMeasurement(j,tt,Pe,ie,ue,Z),M.progress({loaded:ft,total:ft,lengthComputable:!0,time:h.getEstimatedDownloadDurationMS(j),stream:!0});return}return ne=Date.now(),Ee.read().then(Ue)})},ne=ae,ce=0,W=oe.body.tee(),B=y(W,2),D=B[0],q=B[1];Q(D),M.reader=q.getReader()}else M.reader=oe.body.getReader();var me=[],de=[],ve=[],Se=!0,be=function Me(Fe){var Ee=Fe.value,Pe=Fe.done;if(Pe){if($){if(J!==u.default.ABR_FETCH_THROUGHPUT_CALCULATION_AAST){var Ue=null,Re=null;J===u.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING?(Ue=F(de,ve),Ue&&(Re=R*8/Ue)):J===u.default.ABR_FETCH_THROUGHPUT_CALCULATION_DOWNLOADED_DATA&&(Re=w(me,R)),M.progress({loaded:R,total:isNaN(K)?R:K,lengthComputable:!0,time:Re,stream:!0})}M.response.response=$.buffer}M.onload(),M.onend();return}if(Ee&&Ee.length>0){if($=H($,Ee),R+=Ee.length,me.push({ts:Date.now(),bytes:Ee.length}),J===u.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&Se){var Ke=f.findLastTopIsoBoxCompleted(["moof"],$,O);Ke.found&&(Se=!1,de.push({ts:performance.now(),bytes:Ee.length}))}var Ne=f.findLastTopIsoBoxCompleted(["moov","mdat"],$,O);if(Ne.found){var ze=Ne.lastCompletedOffset+Ne.size;J===u.default.ABR_FETCH_THROUGHPUT_CALCULATION_MOOF_PARSING&&!Se&&(Se=!0,ve.push({ts:performance.now(),bytes:$.length}));var $e;ze===$.length?($e=$,$=new Uint8Array):($e=new Uint8Array($.subarray(0,ze)),$=$.subarray(ze)),M.progress({data:$e.buffer,lengthComputable:!1,noTrace:!0}),O=0}else O=Ne.lastCompletedOffset,L||(M.progress({lengthComputable:!1,noTrace:!0}),L=!0)}V(M,Me)};V(M,be)}).catch(function(oe){M.onerror&&M.onerror(oe)})})}function V(M,U){M.reader.read().then(U).catch(function(j){M.onerror&&M.response.status===200&&M.onerror(j)})}function H(M,U){if(M.length===0)return U;var j=new Uint8Array(M.length+U.length);return j.set(M),j.set(U,M.length),j}function te(M){if(M.abortController)M.abortController.abort();else if(M.reader)try{M.reader.cancel(),M.onabort()}catch{}}function w(M,U){try{if(M=M.filter(function(Y){return Y.bytes>U/4/M.length}),M.length>1){var j=0,X=(M[M.length-1].ts-M[0].ts)/M.length;return M.forEach(function(Y,se){var G=M[se+1];if(G){var ee=G.ts-Y.ts;j+=ee<X?ee:0}}),j}return null}catch{return null}}function F(M,U){try{var j,X;j=M.filter(function(ae,oe){return oe<M.length-1}),X=U.filter(function(ae,oe){return oe<U.length-1});var Y=[];if(j.length>1){for(var se=0,G=0,ee=0;ee<j.length;ee++)if(j[ee]&&X[ee]){var J=X[ee].ts-j[ee].ts;if(J>1)Y.push(8*X[ee].bytes/J);else{G===0&&(G=j[ee].ts);var ie=X[ee].ts-G;ie>1?(Y.push(8*se/ie),se=0,G=0):se+=X[ee].bytes}}if(Y.length>0){var ue=Y.reduce(function(ae,oe){return ae+oe},0);return ue/Y.length}}return null}catch{return null}}return c={load:C,abort:te,calculateDownloadedTime:w,setup:p},c}d.__dashjs_factory_name="FetchLoader";var P=o.default.getClassFactory(d);g.default=P},"./src/streaming/net/HTTPLoader.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/net/XHRLoader.js"),l=r("./src/streaming/net/FetchLoader.js"),u=r("./src/streaming/vo/metrics/HTTPRequest.js"),m=r("./src/core/FactoryMaker.js"),y=r("./src/streaming/vo/DashJSError.js"),T=r("./src/streaming/models/CmcdModel.js"),E=r("./src/core/Utils.js"),t=r("./src/core/Debug.js"),e=r("./src/core/EventBus.js"),n=r("./src/core/events/Events.js"),i=r("./src/core/Settings.js"),d=r("./src/streaming/constants/Constants.js"),P=r("./src/streaming/models/LowLatencyThroughputModel.js"),b=r("./src/streaming/models/CustomParametersModel.js");function A(S){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(p){return typeof p}:function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},A(S)}function _(S,p,C){return p=h(p),p in S?Object.defineProperty(S,p,{value:C,enumerable:!0,configurable:!0,writable:!0}):S[p]=C,S}function h(S){var p=f(S,"string");return A(p)==="symbol"?p:String(p)}function f(S,p){if(A(S)!=="object"||S===null)return S;var C=S[Symbol.toPrimitive];if(C!==void 0){var x=C.call(S,p||"default");if(A(x)!=="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(S)}function v(S){S=S||{};var p=this.context,C=S.errHandler,x=S.dashMetrics,V=S.mediaPlayerModel,H=S.requestModifier,te=S.boxParser,w=S.errors,F=S.requestTimeout||0,M=Object(e.default)(p).getInstance(),U=Object(i.default)(p).getInstance(),j,X,Y,se,G,ee,J,ie,ue;function ae(){var z;ue=Object(t.default)(p).getInstance().getLogger(j),X=[],Y=[],se=[],ee=Object(T.default)(p).getInstance(),ie=Object(P.default)(p).getInstance(),J=Object(b.default)(p).getInstance(),G=(z={},_(z,u.HTTPRequest.MPD_TYPE,w.DOWNLOAD_ERROR_ID_MANIFEST_CODE),_(z,u.HTTPRequest.XLINK_EXPANSION_TYPE,w.DOWNLOAD_ERROR_ID_XLINK_CODE),_(z,u.HTTPRequest.INIT_SEGMENT_TYPE,w.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),_(z,u.HTTPRequest.MEDIA_SEGMENT_TYPE,w.DOWNLOAD_ERROR_ID_CONTENT_CODE),_(z,u.HTTPRequest.INDEX_SEGMENT_TYPE,w.DOWNLOAD_ERROR_ID_CONTENT_CODE),_(z,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,w.DOWNLOAD_ERROR_ID_CONTENT_CODE),_(z,u.HTTPRequest.OTHER_TYPE,w.DOWNLOAD_ERROR_ID_CONTENT_CODE),z)}function oe(z,K){var R=z.request,L=[],$=!0,O=!0,Q=new Date,ne=Q,ce=0,W=null,B;if(!H||!x||!C)throw new Error("config object is not correct or missing");var D=function($e){if(O=!1,R.requestStartDate=Q,R.requestEndDate=new Date,R.firstByteDate=R.firstByteDate||Q,R.fileLoaderType=W,!R.checkExistenceOnly){var tt=B.response?B.response.responseURL:null,ft=B.response?B.response.status:null,bt=B.response&&B.response.getAllResponseHeaders?B.response.getAllResponseHeaders():B.response?B.response.responseHeaders:[];x.addHttpRequest(R,tt,ft,bt,$e?L:null),R.type===u.HTTPRequest.MPD_TYPE&&x.addManifestUpdate(R)}},q=function(){if(X.indexOf(B)!==-1&&(X.splice(X.indexOf(B),1),O))if(D(!1),K>0){try{if(U.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&R.type===u.HTTPRequest.MEDIA_SEGMENT_TYPE){var $e=V.getRetryAttemptsForType(u.HTTPRequest.MEDIA_SEGMENT_TYPE);$e===K&&M.trigger(n.default.ATTEMPT_BACKGROUND_SYNC)}}catch{}K--;var tt={config:z};se.push(tt),tt.timeout=setTimeout(function(){se.indexOf(tt)!==-1&&(se.splice(se.indexOf(tt),1),oe(z,K))},V.getRetryIntervalsForType(R.type))}else{if(R.type===u.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;C.error(new y.default(G[R.type],R.url+" is not available",{request:R,response:B.response})),z.error&&z.error(R,"error",B.response.statusText),z.complete&&z.complete(R,B.response.statusText)}},me=function($e){var tt=new Date;$&&($=!1,(!$e.lengthComputable||$e.lengthComputable&&$e.total!==$e.loaded)&&(R.firstByteDate=tt)),$e.lengthComputable&&(R.bytesLoaded=$e.loaded,R.bytesTotal=$e.total),$e.noTrace||(L.push({s:ne,d:$e.time?$e.time:tt.getTime()-ne.getTime(),b:[$e.loaded?$e.loaded-ce:0]}),ne=tt,ce=$e.loaded),z.progress&&$e&&z.progress($e)},de=function(){B.response.status>=200&&B.response.status<=299&&(D(!0),z.success&&z.success(B.response.response,B.response.statusText,B.response.responseURL),z.complete&&z.complete(R,B.response.statusText))},ve=function(){z.abort&&z.abort(R)},Se=function($e){var tt;if($e.lengthComputable){var ft=$e.loaded/$e.total*100;tt="Request timeout: loaded: "+$e.loaded+", out of: "+$e.total+" : "+ft.toFixed(3)+"% Completed"}else tt="Request timeout: non-computable download size";ue.warn(tt)},be;R.hasOwnProperty("availabilityTimeComplete")&&R.availabilityTimeComplete===!1&&window.fetch&&R.responseType==="arraybuffer"&&R.type===u.HTTPRequest.MEDIA_SEGMENT_TYPE?(be=Object(l.default)(p).create({requestModifier:H,lowLatencyThroughputModel:ie,boxParser:te}),be.setup({dashMetrics:x}),W=d.default.FILE_LOADER_TYPES.FETCH):(be=Object(o.default)(p).create({requestModifier:H}),W=d.default.FILE_LOADER_TYPES.XHR);var Me=null,Fe=H.modifyRequestURL?H.modifyRequestURL(R.url):R.url;if(U.get().streaming.cmcd&&U.get().streaming.cmcd.enabled){var Ee=U.get().streaming.cmcd.mode;if(Ee===d.default.CMCD_MODE_QUERY){var Pe=Z(R);Fe=E.default.addAditionalQueryParameterToUrl(Fe,Pe)}else Ee===d.default.CMCD_MODE_HEADER&&(Me=ee.getHeaderParameters(R))}R.url=Fe;var Ue=R.checkExistenceOnly?u.HTTPRequest.HEAD:u.HTTPRequest.GET,Re=J.getXHRWithCredentialsForType(R.type);B={url:Fe,method:Ue,withCredentials:Re,request:R,onload:de,onend:q,onerror:q,progress:me,onabort:ve,ontimeout:Se,loader:be,timeout:F,headers:Me};var Ke=new Date().getTime();if(isNaN(R.delayLoadingTime)||Ke>=R.delayLoadingTime)X.push(B),be.load(B);else{var Ne={httpRequest:B};Y.push(Ne),Ne.delayTimeout=setTimeout(function(){if(Y.indexOf(Ne)!==-1){Y.splice(Y.indexOf(Ne),1);try{Q=new Date,ne=Q,X.push(Ne.httpRequest),be.load(Ne.httpRequest)}catch{Ne.httpRequest.onerror()}}},R.delayLoadingTime-Ke)}}function Z(z){try{var K=[],R=ee.getQueryParameter(z);return R&&K.push(R),K}catch{return[]}}function ge(z){z.request?oe(z,V.getRetryAttemptsForType(z.request.type)):z.error&&z.error(z.request,"error")}function le(){se.forEach(function(z){clearTimeout(z.timeout),z.config.request&&z.config.abort&&z.config.abort(z.config.request)}),se=[],Y.forEach(function(z){return clearTimeout(z.delayTimeout)}),Y=[],X.forEach(function(z){z.request.type!==u.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE&&(z.onloadend=z.onerror=z.onprogress=void 0,z.loader.abort(z))}),X=[]}return j={load:ge,abort:le},ae(),j}v.__dashjs_factory_name="HTTPLoader";var c=m.default.getClassFactory(v);g.default=c},"./src/streaming/net/SchemeLoaderFactory.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/net/HTTPLoader.js");function u(){var y,T;function E(P,b){T[P]=b}function t(P){T[P]&&delete T[P]}function e(){T={}}function n(P){for(var b in T)if(T.hasOwnProperty(b)&&P.startsWith(b))return T[b];return l.default}function i(){e()}function d(){i()}return d(),y={getLoader:n,registerLoader:E,unregisterLoader:t,unregisterAllLoader:e,reset:i},y}u.__dashjs_factory_name="SchemeLoaderFactory";var m=o.default.getSingletonFactory(u);g.default=m},"./src/streaming/net/URLLoader.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/net/SchemeLoaderFactory.js");function u(y){y=y||{};var T=this.context,E,t,e;t=Object(l.default)(T).getInstance();function n(d){if(!e){var P=t.getLoader(d&&d.request?d.request.url:null);e=P(T).create({errHandler:y.errHandler,mediaPlayerModel:y.mediaPlayerModel,requestModifier:y.requestModifier,dashMetrics:y.dashMetrics,boxParser:y.boxParser?y.boxParser:null,constants:y.constants?y.constants:null,dashConstants:y.dashConstants?y.dashConstants:null,urlUtils:y.urlUtils?y.urlUtils:null,requestTimeout:isNaN(y.requestTimeout)?0:y.requestTimeout,errors:y.errors})}e.load(d)}function i(){e&&e.abort()}return E={load:n,abort:i},E}u.__dashjs_factory_name="URLLoader";var m=o.default.getClassFactory(u);g.default=m},"./src/streaming/net/XHRLoader.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/utils/RequestModifier.js");function u(y){y=y||{};var T=y.requestModifier,E;function t(i){T&&T.modifyRequest?Object(l.modifyRequest)(i,T).then(function(){return e(i)}):e(i)}function e(i){var d=new Date,P=i.request,b=new XMLHttpRequest;if(b.open(i.method,i.url,!0),P.responseType&&(b.responseType=P.responseType),P.range&&b.setRequestHeader("Range","bytes="+P.range),P.requestStartDate||(P.requestStartDate=d),T&&T.modifyRequestHeader&&(b=T.modifyRequestHeader(b,{url:i.url})),i.headers)for(var A in i.headers){var _=i.headers[A];_&&b.setRequestHeader(A,_)}b.withCredentials=i.withCredentials,b.onload=i.onload,b.onloadend=i.onend,b.onerror=i.onerror,b.onprogress=i.progress,b.onabort=i.onabort,b.ontimeout=i.ontimeout,b.timeout=i.timeout,b.send(),i.response=b}function n(i){var d=i.response;d.onloadend=d.onerror=d.onprogress=void 0,d.abort()}return E={load:t,abort:n},E}u.__dashjs_factory_name="XHRLoader";var m=o.default.getClassFactory(u);g.default=m},"./src/streaming/protection/CommonEncryption.js":function(I,g,r){"use strict";r.r(g);function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}function l(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,y(d.key),d)}}function m(e,n,i){return n&&u(e.prototype,n),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var n=T(e,"string");return o(n)==="symbol"?n:String(n)}function T(e,n){if(o(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(o(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var E={attributes:["Laurl","laurl"],prefixes:["clearkey","dashif"]},t=function(){function e(){l(this,e)}return m(e,null,[{key:"findCencContentProtection",value:function(i){for(var d=null,P=0;P<i.length;++P){var b=i[P];b.schemeIdUri.toLowerCase()==="urn:mpeg:dash:mp4protection:2011"&&(b.value.toLowerCase()==="cenc"||b.value.toLowerCase()==="cbcs")&&(d=b)}return d}},{key:"getPSSHData",value:function(i){var d=8,P=new DataView(i),b=P.getUint8(d);return d+=20,b>0&&(d+=4+16*P.getUint32(d)),d+=4,i.slice(d)}},{key:"getPSSHForKeySystem",value:function(i,d){var P=e.parsePSSHList(d);return i&&P.hasOwnProperty(i.uuid.toLowerCase())?P[i.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(i,d){return"pssh"in i?(i.pssh.__text=i.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),d.decodeArray(i.pssh.__text).buffer):null}},{key:"parsePSSHList",value:function(i){if(i==null)return[];for(var d=new DataView(i.buffer||i),P=!1,b={},A=0;!P;){var _=void 0,h=void 0,f=void 0,v=void 0,c=A;if(A>=d.buffer.byteLength)break;if(_=d.getUint32(A),h=A+_,A+=4,d.getUint32(A)!==1886614376){A=h;continue}if(A+=4,f=d.getUint8(A),f!==0&&f!==1){A=h;continue}A++,A+=3,v="";var S=void 0,p=void 0;for(S=0;S<4;S++)p=d.getUint8(A+S).toString(16),v+=p.length===1?"0"+p:p;for(A+=4,v+="-",S=0;S<2;S++)p=d.getUint8(A+S).toString(16),v+=p.length===1?"0"+p:p;for(A+=2,v+="-",S=0;S<2;S++)p=d.getUint8(A+S).toString(16),v+=p.length===1?"0"+p:p;for(A+=2,v+="-",S=0;S<2;S++)p=d.getUint8(A+S).toString(16),v+=p.length===1?"0"+p:p;for(A+=2,v+="-",S=0;S<6;S++)p=d.getUint8(A+S).toString(16),v+=p.length===1?"0"+p:p;A+=6,v=v.toLowerCase(),A+=4,b[v]=d.buffer.slice(c,h),A=h}return b}},{key:"getLicenseServerUrlFromMediaInfo",value:function(i,d){try{if(!i||i.length===0)return null;for(var P=0,b=null;P<i.length&&!b;){var A=i[P];if(A&&A.contentProtection&&A.contentProtection.length>0){var _=A.contentProtection.filter(function(C){return C.schemeIdUri&&C.schemeIdUri===d});if(_&&_.length>0)for(var h=0;h<_.length&&!b;){for(var f=_[h],v=0;v<E.attributes.length&&!b;){for(var c=0,S=E.attributes[v];c<E.prefixes.length&&!b;){var p=E.prefixes[c];f[S]&&f[S].__prefix&&f[S].__prefix===p&&f[S].__text&&(b=f[S].__text),c+=1}v+=1}h+=1}}P+=1}return b}catch{return null}}}]),e}();g.default=t},"./src/streaming/protection/Protection.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/controllers/ProtectionController.js"),l=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),u=r("./src/streaming/protection/ProtectionEvents.js"),m=r("./src/streaming/protection/errors/ProtectionErrors.js"),y=r("./src/streaming/protection/models/ProtectionModel_21Jan2015.js"),T=r("./src/streaming/protection/models/ProtectionModel_3Feb2014.js"),E=r("./src/streaming/protection/models/ProtectionModel_01b.js"),t=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],e=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function n(){var d,P=this.context;function b(h){var f=null,v=Object(l.default)(P).getInstance();v.setConfig({debug:h.debug,BASE64:h.BASE64,settings:h.settings}),v.initialize();var c=A(h);return!f&&c&&(f=Object(o.default)(P).create({protectionModel:c,protectionKeyController:v,eventBus:h.eventBus,debug:h.debug,events:h.events,BASE64:h.BASE64,constants:h.constants,cmcdModel:h.cmcdModel,customParametersModel:h.customParametersModel,settings:h.settings}),h.capabilities.setEncryptedMediaSupported(!0)),f}function A(h){var f=h.debug,v=f.getLogger(d),c=h.eventBus,S=h.errHandler,p=h.videoModel?h.videoModel.getElement():null;return(!p||p.onencrypted!==void 0)&&(!p||p.mediaKeys!==void 0)?(v.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),Object(y.default)(P).create({debug:f,eventBus:c,events:h.events})):_(p,e)?(v.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Object(T.default)(P).create({debug:f,eventBus:c,events:h.events,api:_(p,e)})):_(p,t)?(v.info("EME detected on this user agent! (ProtectionModel_01b)"),Object(E.default)(P).create({debug:f,eventBus:c,errHandler:S,events:h.events,api:_(p,t)})):(v.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null)}function _(h,f){for(var v=0;v<f.length;v++){var c=f[v];if(typeof h[c[Object.keys(c)[0]]]=="function")return c}return null}return d={createProtectionSystem:b},d}n.__dashjs_factory_name="Protection";var i=dashjs.FactoryMaker.getClassFactory(n);i.events=u.default,i.errors=m.default,dashjs.FactoryMaker.updateClassFactory(n.__dashjs_factory_name,i),g.default=i},"./src/streaming/protection/ProtectionEvents.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/events/EventsBase.js");function l(h){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l(h)}function u(h,f){for(var v=0;v<f.length;v++){var c=f[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,y(c.key),c)}}function m(h,f,v){return f&&u(h.prototype,f),v&&u(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h}function y(h){var f=T(h,"string");return l(f)==="symbol"?f:String(f)}function T(h,f){if(l(h)!=="object"||h===null)return h;var v=h[Symbol.toPrimitive];if(v!==void 0){var c=v.call(h,f||"default");if(l(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}function E(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function t(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),f&&e(h,f)}function e(h,f){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},e(h,f)}function n(h){var f=P();return function(){var c=b(h),S;if(f){var p=b(this).constructor;S=Reflect.construct(c,arguments,p)}else S=c.apply(this,arguments);return i(this,S)}}function i(h,f){if(f&&(l(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(h)}function d(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(h){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},b(h)}var A=function(h){t(v,h);var f=n(v);function v(){var c;return E(this,v),c=f.call(this),c.INTERNAL_KEY_MESSAGE="internalKeyMessage",c.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",c.KEY_ADDED="public_keyAdded",c.KEY_ERROR="public_keyError",c.KEY_MESSAGE="public_keyMessage",c.KEY_SESSION_CLOSED="public_keySessionClosed",c.KEY_SESSION_CREATED="public_keySessionCreated",c.KEY_SESSION_REMOVED="public_keySessionRemoved",c.KEY_STATUSES_CHANGED="public_keyStatusesChanged",c.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",c.KEY_SYSTEM_SELECTED="public_keySystemSelected",c.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",c.LICENSE_REQUEST_SENDING="public_licenseRequestSending",c.NEED_KEY="needkey",c.PROTECTION_CREATED="public_protectioncreated",c.PROTECTION_DESTROYED="public_protectiondestroyed",c.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",c.TEARDOWN_COMPLETE="protectionTeardownComplete",c.VIDEO_ELEMENT_SELECTED="videoElementSelected",c.KEY_SESSION_UPDATED="public_keySessionUpdated",c}return m(v)}(o.default),_=new A;g.default=_},"./src/streaming/protection/controllers/ProtectionController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/CommonEncryption.js"),l=r("./src/streaming/protection/vo/MediaCapability.js"),u=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),m=r("./src/streaming/protection/errors/ProtectionErrors.js"),y=r("./src/streaming/vo/DashJSError.js"),T=r("./src/streaming/protection/vo/LicenseRequest.js"),E=r("./src/streaming/protection/vo/LicenseResponse.js"),t=r("./src/streaming/vo/metrics/HTTPRequest.js"),e=r("./src/core/Utils.js"),n=r("./src/streaming/constants/Constants.js"),i=r("./src/core/FactoryMaker.js");function d(v){return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},d(v)}var P=5,b=500,A=3,_=1e3,h=8e3;function f(v){v=v||{};var c=v.protectionKeyController,S=v.protectionModel,p=v.eventBus,C=v.events,x=v.debug,V=v.BASE64,H=v.constants,te=[],w=v.cmcdModel,F=v.settings,M=v.customParametersModel,U,j,X,Y,se,G,ee,J,ie,ue,ae;function oe(){j=x.getLogger(U),X=[],Y=[],G="temporary",ee="",ue=null,ae=null,p.on(C.INTERNAL_KEY_MESSAGE,Re,U),p.on(C.INTERNAL_KEY_STATUS_CHANGED,Ue,U)}function Z(){if(!p||!p.hasOwnProperty("on")||!c||!c.hasOwnProperty("getSupportedKeySystemsFromContentProtection"))throw new Error("Missing config parameter(s)")}function ge(he){if(!he)throw new Error("mediaInfo can not be null or undefined");Z(),Y.push(he)}function le(){if(!(!Y||Y.length===0)){var he=[];Y.forEach(function(Ae){var ke=c.getSupportedKeySystemsFromContentProtection(Ae.contentProtection,se,G);ke.length>0&&(he.length===0&&(he=ke),X.push(ke))}),he&&he.length>0&&K(he,!0)}}function z(he){X.push(he),K(he,!1)}function K(he,Ae){!J&&!ie?R(he,Ae):J&&L()}function R(he,Ae){if(!ie){ie=!0;var ke=[];he=he.sort(function(at,it){var Ie=se&&se[at.ks.systemString]&&se[at.ks.systemString].priority>=0?se[at.ks.systemString].priority:he.length,He=se&&se[it.ks.systemString]&&se[it.ks.systemString].priority>=0?se[it.ks.systemString].priority:he.length;return Ie-He});for(var Qe=0;Qe<he.length;Qe++){var Ge=Pe(he[Qe]);ke.push({ks:he[Qe].ks,configs:[Ge],protData:he[Qe].protData})}var qe;S.requestKeySystemAccess(ke).then(function(at){qe=at.data;var it=qe.mksa&&qe.mksa.selectedSystemString?qe.mksa.selectedSystemString:qe.keySystem.systemString;return j.info("DRM: KeySystem Access Granted for system string ("+it+")!  Selecting key system..."),S.selectKeySystem(qe)}).then(function(at){if(J=at,ie=!1,!!S){p.trigger(C.KEY_SYSTEM_SELECTED,{data:qe});var it=ne(J);it&&it.serverCertificate&&it.serverCertificate.length>0&&S.setServerCertificate(V.decodeArray(it.serverCertificate).buffer),L()}}).catch(function(at){J=null,ie=!1,Ae||p.trigger(C.KEY_SYSTEM_SELECTED,{data:null,error:new y.default(m.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,m.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+at.error)})})}}function L(){for(var he,Ae=0;Ae<X.length;Ae++)for(he=0;he<X[Ae].length;he++)if(J===X[Ae][he].ks){var ke=X[Ae][he];$(ke);break}X=[]}function $(he){if(c.isClearKey(J)&&he.protData&&he.protData.hasOwnProperty("clearkeys")&&Object.keys(he.protData.clearkeys).length!==0){var Ae={kids:Object.keys(he.protData.clearkeys)};he.initData=new TextEncoder().encode(JSON.stringify(Ae))}he.sessionId?O(he):he.initData!==null&&Q(he)}function O(he){Z(),S.loadKeySession(he)}function Q(he){var Ae=o.default.getPSSHForKeySystem(J,he?he.initData:null);if(Ae){if(B(he.keyId)||D(Ae))return;try{he.initData=Ae,S.createKeySession(he)}catch(ke){p.trigger(C.KEY_SESSION_CREATED,{data:null,error:new y.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+ke.message)})}}else he&&he.initData?S.createKeySession(he):p.trigger(C.KEY_SESSION_CREATED,{data:null,error:new y.default(m.default.KEY_SESSION_CREATED_ERROR_CODE,m.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(J?J.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function ne(he){if(he){var Ae=he.systemString;if(se)return Ae in se?se[Ae]:null}return null}function ce(){Y=[]}function W(he){return Z(),c.getSupportedKeySystemsFromContentProtection(he,se,G)}function B(he){if(!he)return!1;try{for(var Ae=S.getSessions(),ke=0;ke<Ae.length;ke++)if(Ae[ke].getKeyId()===he)return!0;return!1}catch{return!1}}function D(he){if(!he)return!1;try{for(var Ae=S.getAllInitData(),ke=0;ke<Ae.length;ke++)if(c.initDataEquals(he,Ae[ke]))return j.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function q(he){Z(),S.removeKeySession(he)}function me(he){Z(),S.closeKeySession(he)}function de(he){Z(),S.setServerCertificate(he)}function ve(he){Z(),he?(S.setMediaElement(he),p.on(C.NEED_KEY,St,U)):he===null&&(S.setMediaElement(he),p.off(C.NEED_KEY,St,U))}function Se(he){G=he}function be(he){ee=he}function Me(he){se=he,c.setProtectionData(he)}function Fe(){$e(),S&&S.stop()}function Ee(){p.off(C.INTERNAL_KEY_MESSAGE,Re,U),p.off(C.INTERNAL_KEY_STATUS_CHANGED,Ue,U),Z(),$e(),ve(null),J=null,ie=!1,S&&(S.reset(),S=null),te.forEach(function(he){return clearTimeout(he)}),te=[],Y=[],X=[]}function Pe(he){var Ae=he.protData,ke=[],Qe=[],Ge=Ae&&Ae.audioRobustness&&Ae.audioRobustness.length>0?Ae.audioRobustness:ee,qe=Ae&&Ae.videoRobustness&&Ae.videoRobustness.length>0?Ae.videoRobustness:ee,at=he.sessionType,it=Ae&&Ae.distinctiveIdentifier?Ae.distinctiveIdentifier:"optional",Ie=Ae&&Ae.persistentState?Ae.persistentState:at==="temporary"?"optional":"required";return Y.forEach(function(He){He.type===H.AUDIO?ke.push(new l.default(He.codec,Ge)):He.type===H.VIDEO&&Qe.push(new l.default(He.codec,qe))}),new u.default(ke,Qe,it,Ie,[at])}function Ue(he){he.error?p.trigger(C.KEY_STATUSES_CHANGED,{data:null,error:he.error}):j.debug("DRM: key status = "+he.status)}function Re(he){j.debug("DRM: onKeyMessage");var Ae=he.data;p.trigger(C.KEY_MESSAGE,{data:Ae});var ke=Ae.messageType?Ae.messageType:"license-request",Qe=Ae.message,Ge=Ae.sessionToken,qe=ne(J),at=c.getLicenseServerModelInstance(J,qe,ke),it={sessionToken:Ge,messageType:ke};if(!Qe||Qe.byteLength===0){Ke(it,new y.default(m.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE));return}if(!at){j.debug("DRM: License server request not required for this message (type = "+he.data.messageType+").  Session ID = "+Ge.getSessionId()),Ke(it);return}if(c.isClearKey(J)){var Ie=c.processClearKeyLicenseRequest(J,qe,Qe);if(Ie&&Ie.keyPairs&&Ie.keyPairs.length>0){j.debug("DRM: ClearKey license request handled by application!"),Ke(it),S.updateKeySession(Ge,Ie);return}}Ne(Ae,at,qe)}function Ke(he,Ae){p.trigger(C.LICENSE_REQUEST_COMPLETE,{data:he,error:Ae})}function Ne(he,Ae,ke){var Qe=he.sessionToken,Ge=he.messageType?he.messageType:"license-request",qe={sessionToken:Qe,messageType:Ge},at=J?J.systemString:null,it=tt(ke,Ge,Qe,he,Ae);if(!it){Ke(qe,new y.default(m.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));return}var Ie={},He=!1;ke&&ft(Ie,ke.httpRequestHeaders);var Xe=he.message,nt=J.getRequestHeadersFromMessage(Xe);ft(Ie,nt),Object.keys(Ie).forEach(function(je){je.toLowerCase()==="authorization"&&(He=!0)}),ke&&typeof ke.withCredentials=="boolean"&&(He=ke.withCredentials);var mt=function(Ze){if(S)if(Ze.status>=200&&Ze.status<=299){var ut=e.default.parseHttpHeaders(Ze.getAllResponseHeaders?Ze.getAllResponseHeaders():null),Ot=new E.default(Ze.responseURL,ut,Ze.response),At=M.getLicenseResponseFilters();Et(At,Ot).then(function(){var we=Ae.getLicenseMessage(Ot.data,at,Ge);we!==null?(Ke(qe),S.updateKeySession(Qe,we)):bt(Ze,qe,at,Ge,Ae)})}else bt(Ze,qe,at,Ge,Ae)},ht=function(Ze){Ke(qe,new y.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+at+' update, XHR aborted. status is "'+Ze.statusText+'" ('+Ze.status+"), readyState is "+Ze.readyState))},_t=function(Ze){Ke(qe,new y.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+at+' update, XHR error. status is "'+Ze.statusText+'" ('+Ze.status+"), readyState is "+Ze.readyState))},wt=J.getLicenseRequestFromMessage(Xe),ot=Ae.getHTTPMethod(Ge),Wt=Ae.getResponseType(at,Ge),$t=ke&&!isNaN(ke.httpTimeout)?ke.httpTimeout:h,pe=Qe.getSessionId()||null,Ye=new T.default(it,ot,Wt,Ie,He,Ge,pe,wt),lt=isNaN(F.get().streaming.retryAttempts[t.HTTPRequest.LICENSE])?A:F.get().streaming.retryAttempts[t.HTTPRequest.LICENSE],De=M.getLicenseRequestFilters();Et(De,Ye).then(function(){ze(Ye,lt,$t,mt,ht,_t)})}function ze(he,Ae,ke,Qe,Ge,qe){var at=new XMLHttpRequest;if(F.get().streaming.cmcd&&F.get().streaming.cmcd.enabled){var it=F.get().streaming.cmcd.mode;if(it===n.default.CMCD_MODE_QUERY){var Ie=w.getQueryParameter({url:he.url,type:t.HTTPRequest.LICENSE});Ie&&(he.url=e.default.addAditionalQueryParameterToUrl(he.url,[Ie]))}}at.open(he.method,he.url,!0),at.responseType=he.responseType,at.withCredentials=he.withCredentials,ke>0&&(at.timeout=ke);for(var He in he.headers)at.setRequestHeader(He,he.headers[He]);if(F.get().streaming.cmcd&&F.get().streaming.cmcd.enabled){var Xe=F.get().streaming.cmcd.mode;if(Xe===n.default.CMCD_MODE_HEADER){var nt=w.getHeaderParameters({url:he.url,type:t.HTTPRequest.LICENSE});if(nt)for(var mt in nt){var ht=nt[mt];ht&&at.setRequestHeader(mt,ht)}}}var _t=function(){Ae--;var ot=isNaN(F.get().streaming.retryIntervals[t.HTTPRequest.LICENSE])?_:F.get().streaming.retryIntervals[t.HTTPRequest.LICENSE];ae=setTimeout(function(){ze(he,Ae,ke,Qe,Ge,qe)},ot)};at.onload=function(){ue=null,this.status>=200&&this.status<=299||Ae<=0?Qe(this):(j.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+Ae),_t())},at.ontimeout=at.onerror=function(){ue=null,Ae<=0?qe(this):(j.warn("License request network request failed . Retrying it... Pending retries: "+Ae),_t())},at.onabort=function(){Ge(this)},p.trigger(C.LICENSE_REQUEST_SENDING,{url:he.url,headers:he.headers,payload:he.data,sessionId:he.sessionId}),ue=at,at.send(he.data)}function $e(){ue&&(ue.onloadend=ue.onerror=ue.onprogress=void 0,ue.abort(),ue=null),ae&&(clearTimeout(ae),ae=null)}function tt(he,Ae,ke,Qe,Ge){var qe=null,at=Qe.message;if(he&&he.serverURL){var it=he.serverURL;typeof it=="string"&&it!==""?qe=it:d(it)==="object"&&it.hasOwnProperty(Ae)&&(qe=it[Ae])}else if(he&&he.laURL&&he.laURL!=="")qe=he.laURL;else if(qe=o.default.getLicenseServerUrlFromMediaInfo(Y,J.schemeIdURI),!qe&&!c.isClearKey(J)){var Ie=o.default.getPSSHData(ke.initData);qe=J.getLicenseServerURLFromInitData(Ie),qe||(qe=Qe.laURL)}return qe=Ge.getServerURLFromMessage(qe,at,Ae),qe}function ft(he,Ae){if(Ae)for(var ke in Ae)he[ke]=Ae[ke]}function bt(he,Ae,ke,Qe,Ge){var qe="NONE",at=null;he.response&&(qe=Ge.getErrorResponse(he.response,ke,Qe),at={serverResponse:he.response||null,responseCode:he.status||null,responseText:he.statusText||null}),Ke(Ae,new y.default(m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,m.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ke+' update, XHR complete. status is "'+he.statusText+'" ('+he.status+"), readyState is "+he.readyState+".  Response is "+qe,at))}function Et(he,Ae){return he?he.reduce(function(ke,Qe){return ke.then(function(){return Qe(Ae)})},Promise.resolve()):Promise.resolve()}function St(he,Ae){if(!F.get().streaming.protection.ignoreEmeEncryptedEvent){if(j.debug("DRM: onNeedKey"),he.key.initDataType!=="cenc"){j.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+he.key.initDataType);return}if(Y.length===0&&(j.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),Ae=typeof Ae>"u"?1:Ae+1,Ae<P)){te.push(setTimeout(function(){St(he,Ae)},b));return}var ke=he.key.initData;if(ArrayBuffer.isView(ke)&&(ke=ke.buffer),J){var Qe=o.default.getPSSHForKeySystem(J,ke);if(Qe&&D(Qe))return}j.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(ke)));var Ge=c.getSupportedKeySystemsFromSegmentPssh(ke,se,G);if(Ge.length===0){j.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!");return}z(Ge)}}function Ct(){return c?c.getKeySystems():[]}function ye(he){c&&c.setKeySystems(he)}return U={initializeForMedia:ge,clearMediaInfoArray:ce,handleKeySystemFromManifest:le,createKeySession:Q,loadKeySession:O,removeKeySession:q,closeKeySession:me,setServerCertificate:de,setMediaElement:ve,setSessionType:Se,setRobustnessLevel:be,setProtectionData:Me,getSupportedKeySystemsFromContentProtection:W,getKeySystems:Ct,setKeySystems:ye,stop:Fe,reset:Ee},oe(),U}f.__dashjs_factory_name="ProtectionController",g.default=i.default.getClassFactory(f)},"./src/streaming/protection/controllers/ProtectionKeyController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/CommonEncryption.js"),l=r("./src/streaming/protection/drm/KeySystemClearKey.js"),u=r("./src/streaming/protection/drm/KeySystemW3CClearKey.js"),m=r("./src/streaming/protection/drm/KeySystemWidevine.js"),y=r("./src/streaming/protection/drm/KeySystemPlayReady.js"),T=r("./src/streaming/protection/servers/DRMToday.js"),E=r("./src/streaming/protection/servers/PlayReady.js"),t=r("./src/streaming/protection/servers/Widevine.js"),e=r("./src/streaming/protection/servers/ClearKey.js"),n=r("./src/streaming/constants/ProtectionConstants.js");function i(){var d=this.context,P,b,A,_,h,f,v,c;function S(G){G&&(G.debug&&(b=G.debug,A=b.getLogger(P)),G.BASE64&&(h=G.BASE64),G.settings&&(f=G.settings))}function p(){_=[];var G;G=Object(y.default)(d).getInstance({BASE64:h,settings:f}),_.push(G),G=Object(m.default)(d).getInstance({BASE64:h}),_.push(G),G=Object(l.default)(d).getInstance({BASE64:h}),_.push(G),v=G,G=Object(u.default)(d).getInstance({BASE64:h,debug:b}),_.push(G),c=G}function C(){return _}function x(G){_=G}function V(G){for(var ee=0;ee<_.length;ee++)if(_[ee].systemString===G)return _[ee];return null}function H(G){return G===v||G===c}function te(G,ee){if(G.byteLength===ee.byteLength){for(var J=new Uint8Array(G),ie=new Uint8Array(ee),ue=0;ue<J.length;ue++)if(J[ue]!==ie[ue])return!1;return!0}return!1}function w(G,ee,J){var ie,ue,ae,oe,Z=[];if(G){var ge=o.default.findCencContentProtection(G);for(ae=0;ae<_.length;++ae){ue=_[ae];var le=X(ue.systemString,ee);for(oe=0;oe<G.length;++oe)if(ie=G[oe],ie.schemeIdUri.toLowerCase()===ue.schemeIdURI){var z=ue.getInitData(ie,ge);Z.push({ks:_[ae],keyId:ie.keyId,initData:z,protData:le,cdmData:ue.getCDMData(le?le.cdmData:null),sessionId:Y(le,ie),sessionType:se(le,J)})}}}return Z}function F(G,ee,J){for(var ie=[],ue=o.default.parsePSSHList(G),ae,oe,Z=0;Z<_.length;++Z){ae=_[Z],oe=ae.systemString;var ge=X(oe,ee);ae.uuid in ue&&ie.push({ks:ae,initData:ue[ae.uuid],protData:ge,cdmData:ae.getCDMData(ge?ge.cdmData:null),sessionId:Y(ge),sessionType:se(ge,J)})}return ie}function M(G,ee,J){if(J==="license-release"||J==="individualization-request")return null;var ie=null;return ee&&ee.hasOwnProperty("drmtoday")?ie=Object(T.default)(d).getInstance({BASE64:h}):G.systemString===n.default.WIDEVINE_KEYSTEM_STRING?ie=Object(t.default)(d).getInstance():G.systemString===n.default.PLAYREADY_KEYSTEM_STRING?ie=Object(E.default)(d).getInstance():G.systemString===n.default.CLEARKEY_KEYSTEM_STRING&&(ie=Object(e.default)(d).getInstance()),ie}function U(G,ee,J){try{return G.getClearKeysFromProtectionData(ee,J)}catch{return A.error("Failed to retrieve clearkeys from ProtectionData"),null}}function j(G){for(var ee=function(ae){var oe=null;return G&&(oe=ae in G?G[ae]:null),oe},J=0;J<_.length;J++){var ie=_[J];ie.hasOwnProperty("init")&&ie.init(ee(ie.systemString))}}function X(G,ee){return ee&&G in ee?ee[G]:null}function Y(G,ee){return G&&G.sessionId?G.sessionId:ee&&ee.sessionId?ee.sessionId:null}function se(G,ee){return G&&G.sessionType?G.sessionType:ee}return P={initialize:p,setProtectionData:j,isClearKey:H,initDataEquals:te,getKeySystems:C,setKeySystems:x,getKeySystemBySystemString:V,getSupportedKeySystemsFromContentProtection:w,getSupportedKeySystemsFromSegmentPssh:F,getLicenseServerModelInstance:M,processClearKeyLicenseRequest:U,setConfig:S},P}i.__dashjs_factory_name="ProtectionKeyController",g.default=dashjs.FactoryMaker.getSingletonFactory(i)},"./src/streaming/protection/drm/KeySystemClearKey.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/vo/KeyPair.js"),l=r("./src/streaming/protection/vo/ClearKeyKeySet.js"),u=r("./src/streaming/protection/CommonEncryption.js"),m=r("./src/streaming/constants/ProtectionConstants.js"),y="e2719d58-a985-b3c9-781a-b030af78d30e",T=m.default.CLEARKEY_KEYSTEM_STRING,E="urn:uuid:"+y;function t(e){e=e||{};var n,i=e.BASE64;function d(v,c){var S=null;if(v){for(var p=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(c))),C=[],x=0;x<p.kids.length;x++){var V=p.kids[x],H=v.clearkeys&&v.clearkeys.hasOwnProperty(V)?v.clearkeys[V]:null;if(!H)throw new Error("DRM: ClearKey keyID ("+V+") is not known!");C.push(new o.default(V,H))}S=new l.default(C)}return S}function P(v,c){try{var S=u.default.parseInitDataFromContentProtection(v,i);if(!S&&c){var p=b(c["cenc:default_KID"]),C={kids:[p]};S=new TextEncoder().encode(JSON.stringify(C))}return S}catch{return null}}function b(v){try{var c=v.replace(/-/g,"");return c=btoa(c.match(/\w{2}/g).map(function(S){return String.fromCharCode(parseInt(S,16))}).join("")),c.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}function A(){return{"Content-Type":"application/json"}}function _(v){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(v))))}function h(){return null}function f(){return null}return n={uuid:y,schemeIdURI:E,systemString:T,getInitData:P,getRequestHeadersFromMessage:A,getLicenseRequestFromMessage:_,getLicenseServerURLFromInitData:h,getCDMData:f,getClearKeysFromProtectionData:d},n}t.__dashjs_factory_name="KeySystemClearKey",g.default=dashjs.FactoryMaker.getSingletonFactory(t)},"./src/streaming/protection/drm/KeySystemPlayReady.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/CommonEncryption.js"),l=r("./src/streaming/constants/ProtectionConstants.js"),u="9a04f079-9840-4286-ab92-e65be0885f95",m=l.default.PLAYREADY_KEYSTEM_STRING,y="urn:uuid:"+u,T='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>';function E(t){t=t||{};var e,n="utf-16",i=t.BASE64,d=t.settings;function P(){if(!i||!i.hasOwnProperty("decodeArray")||!i.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}function b(c){var S,p,C={},x=new DOMParser;if(d&&d.get().streaming.protection.detectPlayreadyMessageFormat&&n==="utf-16"&&c&&c.byteLength%2===1)return C["Content-Type"]="text/xml; charset=utf-8",C;var V=n==="utf-16"?new Uint16Array(c):new Uint8Array(c);S=String.fromCharCode.apply(null,V),p=x.parseFromString(S,"application/xml");for(var H=p.getElementsByTagName("name"),te=p.getElementsByTagName("value"),w=0;w<H.length;w++)C[H[w].childNodes[0].nodeValue]=te[w].childNodes[0].nodeValue;return C.hasOwnProperty("Content")&&(C["Content-Type"]=C.Content,delete C.Content),C.hasOwnProperty("Content-Type")||(C["Content-Type"]="text/xml; charset=utf-8"),C}function A(c){var S=null,p=new DOMParser;if(d&&d.get().streaming.protection.detectPlayreadyMessageFormat&&n==="utf-16"&&c&&c.byteLength%2===1)return c;var C=n==="utf-16"?new Uint16Array(c):new Uint8Array(c);P();var x=String.fromCharCode.apply(null,C),V=p.parseFromString(x,"application/xml");if(V.getElementsByTagName("PlayReadyKeyMessage")[0]){var H=V.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;H&&(S=i.decode(H))}else return c;return S}function _(c){if(c)for(var S=new DataView(c),p=S.getUint16(4,!0),C=6,x=new DOMParser,V=0;V<p;V++){var H=S.getUint16(C,!0);C+=2;var te=S.getUint16(C,!0);if(C+=2,H!==1){C+=te;continue}var w=c.slice(C,C+te),F=String.fromCharCode.apply(null,new Uint16Array(w)),M=x.parseFromString(F,"application/xml");if(M.getElementsByTagName("LA_URL")[0]){var U=M.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(U)return U}if(M.getElementsByTagName("LUI_URL")[0]){var j=M.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(j)return j}}return null}function h(c){var S=new Uint8Array([112,115,115,104,0,0,0,0]),p=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),C=0,x=null,V,H,te,w,F;if(P(),!c)return null;if("pssh"in c)return o.default.parseInitDataFromContentProtection(c,i);if("pro"in c)x=i.decodeArray(c.pro.__text);else if("prheader"in c)x=i.decodeArray(c.prheader.__text);else return null;return V=x.length,H=4+S.length+p.length+4+V,te=new ArrayBuffer(H),w=new Uint8Array(te),F=new DataView(te),F.setUint32(C,H),C+=4,w.set(S,C),C+=S.length,w.set(p,C),C+=p.length,F.setUint32(C,V),C+=4,w.set(x,C),C+=V,w.buffer}function f(c){if(c!=="utf-8"&&c!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');n=c}function v(c){var S,p,C,x;if(P(),!c)return null;for(S=[],x=0;x<c.length;++x)S.push(c.charCodeAt(x)),S.push(0);for(S=String.fromCharCode.apply(null,S),S=i.encode(S),p=T.replace("%CUSTOMDATA%",S),C=[],x=0;x<p.length;++x)C.push(p.charCodeAt(x)),C.push(0);return new Uint8Array(C).buffer}return e={uuid:u,schemeIdURI:y,systemString:m,getInitData:h,getRequestHeadersFromMessage:b,getLicenseRequestFromMessage:A,getLicenseServerURLFromInitData:_,getCDMData:v,setPlayReadyMessageFormat:f},e}E.__dashjs_factory_name="KeySystemPlayReady",g.default=dashjs.FactoryMaker.getSingletonFactory(E)},"./src/streaming/protection/drm/KeySystemW3CClearKey.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/vo/KeyPair.js"),l=r("./src/streaming/protection/vo/ClearKeyKeySet.js"),u=r("./src/streaming/protection/CommonEncryption.js"),m=r("./src/streaming/constants/ProtectionConstants.js"),y="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",T=m.default.CLEARKEY_KEYSTEM_STRING,E="urn:uuid:"+y;function t(e){var n,i=e.BASE64,d=e.debug.getLogger(n);function P(v,c){var S=null;if(v){for(var p=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(c))),C=[],x=0;x<p.kids.length;x++){var V=p.kids[x],H=v.clearkeys&&v.clearkeys.hasOwnProperty(V)?v.clearkeys[V]:null;if(!H)throw new Error("DRM: ClearKey keyID ("+V+") is not known!");C.push(new o.default(V,H))}S=new l.default(C),d.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return S}function b(v){return u.default.parseInitDataFromContentProtection(v,i)}function A(){return null}function _(v){return new Uint8Array(v)}function h(){return null}function f(){return null}return n={uuid:y,schemeIdURI:E,systemString:T,getInitData:b,getRequestHeadersFromMessage:A,getLicenseRequestFromMessage:_,getLicenseServerURLFromInitData:h,getCDMData:f,getClearKeysFromProtectionData:P},n}t.__dashjs_factory_name="KeySystemW3CClearKey",g.default=dashjs.FactoryMaker.getSingletonFactory(t)},"./src/streaming/protection/drm/KeySystemWidevine.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/CommonEncryption.js"),l=r("./src/streaming/constants/ProtectionConstants.js"),u="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",m=l.default.WIDEVINE_KEYSTEM_STRING,y="urn:uuid:"+u;function T(E){E=E||{};var t,e=E.BASE64;function n(A){return o.default.parseInitDataFromContentProtection(A,e)}function i(){return null}function d(A){return new Uint8Array(A)}function P(){return null}function b(){return null}return t={uuid:u,schemeIdURI:y,systemString:m,getInitData:n,getRequestHeadersFromMessage:i,getLicenseRequestFromMessage:d,getLicenseServerURLFromInitData:P,getCDMData:b},t}T.__dashjs_factory_name="KeySystemWidevine",g.default=dashjs.FactoryMaker.getSingletonFactory(T)},"./src/streaming/protection/errors/ProtectionErrors.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/errors/ErrorsBase.js");function l(h){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l(h)}function u(h,f){for(var v=0;v<f.length;v++){var c=f[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,y(c.key),c)}}function m(h,f,v){return f&&u(h.prototype,f),v&&u(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h}function y(h){var f=T(h,"string");return l(f)==="symbol"?f:String(f)}function T(h,f){if(l(h)!=="object"||h===null)return h;var v=h[Symbol.toPrimitive];if(v!==void 0){var c=v.call(h,f||"default");if(l(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}function E(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function t(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),f&&e(h,f)}function e(h,f){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},e(h,f)}function n(h){var f=P();return function(){var c=b(h),S;if(f){var p=b(this).constructor;S=Reflect.construct(c,arguments,p)}else S=c.apply(this,arguments);return i(this,S)}}function i(h,f){if(f&&(l(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(h)}function d(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(h){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},b(h)}var A=function(h){t(v,h);var f=n(v);function v(){var c;return E(this,v),c=f.call(this),c.MEDIA_KEYERR_CODE=100,c.MEDIA_KEYERR_UNKNOWN_CODE=101,c.MEDIA_KEYERR_CLIENT_CODE=102,c.MEDIA_KEYERR_SERVICE_CODE=103,c.MEDIA_KEYERR_OUTPUT_CODE=104,c.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,c.MEDIA_KEYERR_DOMAIN_CODE=106,c.MEDIA_KEY_MESSAGE_ERROR_CODE=107,c.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,c.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,c.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,c.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,c.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,c.KEY_SESSION_CREATED_ERROR_CODE=113,c.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,c.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",c.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",c.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",c.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",c.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",c.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",c.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",c.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",c.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",c.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",c.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",c.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",c.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",c.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",c}return m(v)}(o.default),_=new A;g.default=_},"./src/streaming/protection/models/ProtectionModel_01b.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),l=r("./src/streaming/protection/vo/NeedKey.js"),u=r("./src/streaming/vo/DashJSError.js"),m=r("./src/streaming/protection/vo/KeyMessage.js"),y=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),T=r("./src/streaming/protection/vo/KeySystemAccess.js"),E=r("./src/streaming/protection/errors/ProtectionErrors.js");function t(e){e=e||{};var n=this.context,i=e.eventBus,d=e.events,P=e.debug,b=e.api,A=e.errHandler,_,h,f,v,c,S,p,C,x;function V(){h=P.getLogger(_),f=null,v=null,S=[],p=[],c=Object(o.default)(n).getInstance(),x=J()}function H(){f&&ue();for(var ae=0;ae<p.length;ae++)Y(p[ae]);i.trigger(d.TEARDOWN_COMPLETE)}function te(){for(var ae=[],oe=0;oe<S.length;oe++)ae.push(S[oe].initData);for(var Z=0;Z<p.length;Z++)ae.push(p[Z].initData);return ae}function w(){return p.concat(S)}function F(ae){return new Promise(function(oe,Z){var ge=f;ge||(ge=document.createElement("video"));for(var le=!1,z=0;z<ae.length;z++)for(var K=ae[z].ks.systemString,R=ae[z].configs,L=null,$=null,O=0;O<R.length;O++){var Q=R[O].videoCapabilities;if(Q&&Q.length!==0){$=[];for(var ne=0;ne<Q.length;ne++)ge.canPlayType(Q[ne].contentType,K)!==""&&$.push(Q[ne])}if(!(!L&&!$||L&&L.length===0||$&&$.length===0)){le=!0;var ce=new y.default(L,$),W=c.getKeySystemBySystemString(K),B=new T.default(W,ce);i.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE,{data:B}),oe({data:B});break}}if(!le){var D="Key system access denied! -- No valid audio/video content configurations detected!";i.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE,{error:D}),Z({error:D})}})}function M(ae){return v=ae.keySystem,Promise.resolve(v)}function U(ae){if(f!==ae){if(f){ue();for(var oe=0;oe<p.length;oe++)Y(p[oe]);p=[]}f=ae,f&&(f.addEventListener(b.keyerror,x),f.addEventListener(b.needkey,x),f.addEventListener(b.keymessage,x),f.addEventListener(b.keyadded,x),i.trigger(d.VIDEO_ELEMENT_SELECTED))}}function j(ae){if(!v)throw new Error("Can not create sessions until you have selected a key system");if(C||p.length===0){var oe={sessionId:null,keyId:ae.keyId,initData:ae.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return S.push(oe),f[b.generateKeyRequest](v.systemString,new Uint8Array(ae.initData)),oe}else throw new Error("Multiple sessions not allowed!")}function X(ae,oe){var Z=ae.sessionId;if(!c.isClearKey(v))f[b.addKey](v.systemString,new Uint8Array(oe),new Uint8Array(ae.initData),Z);else for(var ge=0;ge<oe.keyPairs.length;ge++)f[b.addKey](v.systemString,oe.keyPairs[ge].key,oe.keyPairs[ge].keyID,Z);i.trigger(d.KEY_SESSION_UPDATED)}function Y(ae){try{f[b.cancelKeyRequest](v.systemString,ae.sessionId)}catch(oe){i.trigger(d.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+ae.sessionId+") "+oe.message})}}function se(){}function G(){}function ee(){}function J(){return{handleEvent:function(oe){var Z=null;switch(oe.type){case b.needkey:var ge=ArrayBuffer.isView(oe.initData)?oe.initData.buffer:oe.initData;i.trigger(d.NEED_KEY,{key:new l.default(ge,"cenc")});break;case b.keyerror:if(Z=ie(p,oe.sessionId),Z||(Z=ie(S,oe.sessionId)),Z){var le=E.default.MEDIA_KEYERR_CODE,z="";switch(oe.errorCode.code){case 1:le=E.default.MEDIA_KEYERR_UNKNOWN_CODE,z+="MEDIA_KEYERR_UNKNOWN - "+E.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:le=E.default.MEDIA_KEYERR_CLIENT_CODE,z+="MEDIA_KEYERR_CLIENT - "+E.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:le=E.default.MEDIA_KEYERR_SERVICE_CODE,z+="MEDIA_KEYERR_SERVICE - "+E.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:le=E.default.MEDIA_KEYERR_OUTPUT_CODE,z+="MEDIA_KEYERR_OUTPUT - "+E.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:le=E.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,z+="MEDIA_KEYERR_HARDWARECHANGE - "+E.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:le=E.default.MEDIA_KEYERR_DOMAIN_CODE,z+="MEDIA_KEYERR_DOMAIN - "+E.default.MEDIA_KEYERR_DOMAIN_MESSAGE;break}z+="  System Code = "+oe.systemCode,i.trigger(d.KEY_ERROR,{error:new u.default(le,z,Z)})}else h.error("No session token found for key error");break;case b.keyadded:Z=ie(p,oe.sessionId),Z||(Z=ie(S,oe.sessionId)),Z?(h.debug("DRM: Key added."),i.trigger(d.KEY_ADDED,{data:Z})):h.debug("No session token found for key added");break;case b.keymessage:if(C=oe.sessionId!==null&&oe.sessionId!==void 0,C?(Z=ie(p,oe.sessionId),!Z&&S.length>0&&(Z=S.shift(),p.push(Z),Z.sessionId=oe.sessionId,i.trigger(d.KEY_SESSION_CREATED,{data:Z}))):S.length>0&&(Z=S.shift(),p.push(Z),S.length!==0&&A.error(new u.default(E.default.MEDIA_KEY_MESSAGE_ERROR_CODE,E.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Z){var K=ArrayBuffer.isView(oe.message)?oe.message.buffer:oe.message;Z.keyMessage=K,i.trigger(d.INTERNAL_KEY_MESSAGE,{data:new m.default(Z,K,oe.defaultURL)})}else h.warn("No session token found for key message");break}}}}function ie(ae,oe){if(!oe||!ae)return null;for(var Z=ae.length,ge=0;ge<Z;ge++)if(ae[ge].sessionId==oe)return ae[ge];return null}function ue(){f.removeEventListener(b.keyerror,x),f.removeEventListener(b.needkey,x),f.removeEventListener(b.keymessage,x),f.removeEventListener(b.keyadded,x)}return _={getAllInitData:te,getSessions:w,requestKeySystemAccess:F,selectKeySystem:M,setMediaElement:U,createKeySession:j,updateKeySession:X,closeKeySession:Y,setServerCertificate:se,loadKeySession:G,removeKeySession:ee,stop:H,reset:H},V(),_}t.__dashjs_factory_name="ProtectionModel_01b",g.default=dashjs.FactoryMaker.getClassFactory(t)},"./src/streaming/protection/models/ProtectionModel_21Jan2015.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),l=r("./src/streaming/protection/vo/NeedKey.js"),u=r("./src/streaming/protection/errors/ProtectionErrors.js"),m=r("./src/streaming/vo/DashJSError.js"),y=r("./src/streaming/protection/vo/KeyMessage.js"),T=r("./src/streaming/protection/vo/KeySystemAccess.js"),E=r("./src/streaming/constants/ProtectionConstants.js"),t={};t[E.default.PLAYREADY_KEYSTEM_STRING]=[E.default.PLAYREADY_KEYSTEM_STRING,E.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],t[E.default.WIDEVINE_KEYSTEM_STRING]=[E.default.WIDEVINE_KEYSTEM_STRING],t[E.default.CLEARKEY_KEYSTEM_STRING]=[E.default.CLEARKEY_KEYSTEM_STRING];function e(n){n=n||{};var i=this.context,d=n.eventBus,P=n.events,b=n.debug,A,_,h,f,v,c,S,p;function C(){_=b.getLogger(A),h=null,f=null,v=null,c=[],p=Object(o.default)(i).getInstance(),S=ae()}function x(){var le=c.length,z;le!==0?function(){for(var K=function($){oe($),c.length===0&&(f?(f.removeEventListener("encrypted",S),f.setMediaKeys(null).then(function(){d.trigger(P.TEARDOWN_COMPLETE)})):d.trigger(P.TEARDOWN_COMPLETE))},R=0;R<le;R++)z=c[R],function(L){z.session.closed.then(function(){K(L)}),ue(z).catch(function(){K(L)})}(z)}():d.trigger(P.TEARDOWN_COMPLETE)}function V(){for(var le,z=0;z<c.length;z++)le=c[z],le.getUsable()||ue(le).catch(function(){oe(le)})}function H(){for(var le=[],z=0;z<c.length;z++)c[z].initData&&le.push(c[z].initData);return le}function te(){return c}function w(le){return new Promise(function(z,K){F(le,0,z,K)})}function F(le,z,K,R){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){var L="Insecure origins are not allowed";d.trigger(P.KEY_SYSTEM_ACCESS_COMPLETE,{error:L}),R({error:L});return}var $=le[z].protData&&le[z].protData.systemStringPriority?le[z].protData.systemStringPriority:null,O=le[z].configs,Q=le[z].ks,ne=Q.systemString,ce=$||(t[ne]?t[ne]:[ne]);M(ce,O).then(function(W){var B=typeof W.getConfiguration=="function"?W.getConfiguration():null,D=new T.default(Q,B);D.mksa=W,d.trigger(P.KEY_SYSTEM_ACCESS_COMPLETE,{data:D}),K({data:D})}).catch(function(W){if(z+1<le.length)F(le,z+1,K,R);else{var B="Key system access denied! ";d.trigger(P.KEY_SYSTEM_ACCESS_COMPLETE,{error:B+W.message}),R({error:B+W.message})}})}function M(le,z){return new Promise(function(K,R){U(le,z,0,K,R)})}function U(le,z,K,R,L){var $=le[K];_.debug("Requesting key system access for system string ".concat($)),navigator.requestMediaKeySystemAccess($,z).then(function(O){O.selectedSystemString=$,R(O)}).catch(function(O){K+1<le.length?U(le,z,K+1,R,L):L(O)})}function j(le){return new Promise(function(z,K){le.mksa.createMediaKeys().then(function(R){return h=le.keySystem,v=R,f?f.setMediaKeys(v):Promise.resolve()}).then(function(){z(h)}).catch(function(){K({error:"Error selecting keys system ("+le.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})}function X(le){f!==le&&(f&&(f.removeEventListener("encrypted",S),f.setMediaKeys&&f.setMediaKeys(null)),f=le,f&&(f.addEventListener("encrypted",S),f.setMediaKeys&&v&&f.setMediaKeys(v)))}function Y(le){if(!h||!v)throw new Error("Can not set server certificate until you have selected a key system");v.setServerCertificate(le).then(function(){_.info("DRM: License server certificate successfully updated."),d.trigger(P.SERVER_CERTIFICATE_UPDATED)}).catch(function(z){d.trigger(P.SERVER_CERTIFICATE_UPDATED,{error:new m.default(u.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,u.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+z.name)})})}function se(le){if(!h||!v)throw new Error("Can not create sessions until you have selected a key system");var z=v.createSession(le.sessionType),K=ge(z,le),R=h.systemString===E.default.CLEARKEY_KEYSTEM_STRING&&(le.initData||le.protData&&le.protData.clearkeys)?E.default.INITIALIZATION_DATA_TYPE_KEYIDS:E.default.INITIALIZATION_DATA_TYPE_CENC;z.generateRequest(R,le.initData).then(function(){_.debug("DRM: Session created.  SessionID = "+K.getSessionId()),d.trigger(P.KEY_SESSION_CREATED,{data:K})}).catch(function(L){oe(K),d.trigger(P.KEY_SESSION_CREATED,{data:null,error:new m.default(u.default.KEY_SESSION_CREATED_ERROR_CODE,u.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+L.name)})})}function G(le,z){var K=le.session;p.isClearKey(h)&&(z=z.toJWK()),K.update(z).then(function(){d.trigger(P.KEY_SESSION_UPDATED)}).catch(function(R){d.trigger(P.KEY_ERROR,{error:new m.default(u.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+R.name,le)})})}function ee(le){if(!h||!v)throw new Error("Can not load sessions until you have selected a key system");for(var z=le.sessionId,K=0;K<c.length;K++)if(z===c[K].sessionId){_.warn("DRM: Ignoring session ID because we have already seen it!");return}var R=v.createSession(le.sessionType),L=ge(R,le);R.load(z).then(function($){$?(_.debug("DRM: Session loaded.  SessionID = "+L.getSessionId()),d.trigger(P.KEY_SESSION_CREATED,{data:L})):(oe(L),d.trigger(P.KEY_SESSION_CREATED,{data:null,error:new m.default(u.default.KEY_SESSION_CREATED_ERROR_CODE,u.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+z+")")}))}).catch(function($){oe(L),d.trigger(P.KEY_SESSION_CREATED,{data:null,error:new m.default(u.default.KEY_SESSION_CREATED_ERROR_CODE,u.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+z+")! "+$.name)})})}function J(le){var z=le.session;z.remove().then(function(){_.debug("DRM: Session removed.  SessionID = "+le.getSessionId()),d.trigger(P.KEY_SESSION_REMOVED,{data:le.getSessionId()})},function(K){d.trigger(P.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+le.getSessionId()+"). "+K.name})})}function ie(le){ue(le).catch(function(z){oe(le),d.trigger(P.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+le.getSessionId()+") "+z.name})})}function ue(le){var z=le.session;return z.removeEventListener("keystatuseschange",le),z.removeEventListener("message",le),z.close()}function ae(){return{handleEvent:function(z){switch(z.type){case"encrypted":if(z.initData){var K=ArrayBuffer.isView(z.initData)?z.initData.buffer:z.initData;d.trigger(P.NEED_KEY,{key:new l.default(K,z.initDataType)})}break}}}}function oe(le){for(var z=0;z<c.length;z++)if(c[z]===le){c.splice(z,1);break}}function Z(le){var z,K;return le&&le.length>0&&(le[0]&&(typeof le[0]=="string"?z=le[0]:K=le[0]),le[1]&&(typeof le[1]=="string"?z=le[1]:K=le[1])),{status:z,keyId:K}}function ge(le,z){var K={session:le,keyId:z.keyId,initData:z.initData,sessionId:z.sessionId,sessionType:z.sessionType,handleEvent:function(L){switch(L.type){case"keystatuseschange":d.trigger(P.KEY_STATUSES_CHANGED,{data:this}),L.target.keyStatuses.forEach(function(){var O=Z(arguments);switch(O.status){case"expired":d.trigger(P.INTERNAL_KEY_STATUS_CHANGED,{error:new m.default(u.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,u.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:d.trigger(P.INTERNAL_KEY_STATUS_CHANGED,O);break}});break;case"message":var $=ArrayBuffer.isView(L.message)?L.message.buffer:L.message;d.trigger(P.INTERNAL_KEY_MESSAGE,{data:new y.default(this,$,void 0,L.messageType)});break}},getKeyId:function(){return this.keyId},getSessionId:function(){return le.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return le.expiration},getKeyStatuses:function(){return le.keyStatuses},getUsable:function(){var L=!1;return le.keyStatuses.forEach(function(){var $=Z(arguments);$.status==="usable"&&(L=!0)}),L}};return le.addEventListener("keystatuseschange",K),le.addEventListener("message",K),le.closed.then(function(){oe(K),_.debug("DRM: Session closed.  SessionID = "+K.getSessionId()),d.trigger(P.KEY_SESSION_CLOSED,{data:K.getSessionId()})}),c.push(K),K}return A={getAllInitData:H,getSessions:te,requestKeySystemAccess:w,selectKeySystem:j,setMediaElement:X,setServerCertificate:Y,createKeySession:se,updateKeySession:G,loadKeySession:ee,removeKeySession:J,closeKeySession:ie,stop:V,reset:x},C(),A}e.__dashjs_factory_name="ProtectionModel_21Jan2015",g.default=dashjs.FactoryMaker.getClassFactory(e)},"./src/streaming/protection/models/ProtectionModel_3Feb2014.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/controllers/ProtectionKeyController.js"),l=r("./src/streaming/protection/vo/NeedKey.js"),u=r("./src/streaming/vo/DashJSError.js"),m=r("./src/streaming/protection/errors/ProtectionErrors.js"),y=r("./src/streaming/protection/vo/KeyMessage.js"),T=r("./src/streaming/protection/vo/KeySystemConfiguration.js"),E=r("./src/streaming/protection/vo/KeySystemAccess.js");function t(e){e=e||{};var n=this.context,i=e.eventBus,d=e.events,P=e.debug,b=e.api,A,_,h,f,v,c,S,p,C;function x(){_=P.getLogger(A),h=null,f=null,v=null,c=null,S=[],C=Object(o.default)(n).getInstance(),p=ee()}function V(){try{for(var ue=0;ue<S.length;ue++)X(S[ue]);h&&h.removeEventListener(b.needkey,p),i.trigger(d.TEARDOWN_COMPLETE)}catch(ae){i.trigger(d.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+ae.message})}}function H(){for(var ue=[],ae=0;ae<S.length;ae++)ue.push(S[ae].initData);return ue}function te(){return S}function w(ue){return new Promise(function(ae,oe){for(var Z=!1,ge=0;ge<ue.length;ge++)for(var le=ue[ge].ks.systemString,z=ue[ge].configs,K=null,R=null,L=0;L<z.length;L++){var $=z[L].audioCapabilities,O=z[L].videoCapabilities;if($&&$.length!==0){K=[];for(var Q=0;Q<$.length;Q++)window[b.MediaKeys].isTypeSupported(le,$[Q].contentType)&&K.push($[Q])}if(O&&O.length!==0){R=[];for(var ne=0;ne<O.length;ne++)window[b.MediaKeys].isTypeSupported(le,O[ne].contentType)&&R.push(O[ne])}if(!(!K&&!R||K&&K.length===0||R&&R.length===0)){Z=!0;var ce=new T.default(K,R),W=C.getKeySystemBySystemString(le),B=new E.default(W,ce);i.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE,{data:B}),ae({data:B});break}}if(!Z){var D="Key system access denied! -- No valid audio/video content configurations detected!";i.trigger(d.KEY_SYSTEM_ACCESS_COMPLETE,{error:D}),oe({error:D})}})}function F(ue){return new Promise(function(ae,oe){try{v=ue.mediaKeys=new window[b.MediaKeys](ue.keySystem.systemString),f=ue.keySystem,c=ue,h&&J(),ae(f)}catch{oe({error:"Error selecting keys system ("+f.systemString+")! Could not create MediaKeys -- TODO"})}})}function M(ue){h!==ue&&(h&&h.removeEventListener(b.needkey,p),h=ue,h&&(h.addEventListener(b.needkey,p),v&&J()))}function U(ue){if(!f||!v||!c)throw new Error("Can not create sessions until you have selected a key system");var ae=null;if(c.ksConfiguration.videoCapabilities&&c.ksConfiguration.videoCapabilities.length>0&&(ae=c.ksConfiguration.videoCapabilities[0]),ae===null&&c.ksConfiguration.audioCapabilities&&c.ksConfiguration.audioCapabilities.length>0&&(ae=c.ksConfiguration.audioCapabilities[0]),ae===null)throw new Error("Can not create sessions for unknown content types.");var oe=ae.contentType,Z=v.createSession(oe,new Uint8Array(ue.initData),ue.cdmData?new Uint8Array(ue.cdmData):null),ge=ie(Z,ue);Z.addEventListener(b.error,ge),Z.addEventListener(b.message,ge),Z.addEventListener(b.ready,ge),Z.addEventListener(b.close,ge),S.push(ge),_.debug("DRM: Session created.  SessionID = "+ge.getSessionId()),i.trigger(d.KEY_SESSION_CREATED,{data:ge})}function j(ue,ae){var oe=ue.session;C.isClearKey(f)?oe.update(new Uint8Array(ae.toJWK())):oe.update(new Uint8Array(ae)),i.trigger(d.KEY_SESSION_UPDATED)}function X(ue){var ae=ue.session;ae.removeEventListener(b.error,ue),ae.removeEventListener(b.message,ue),ae.removeEventListener(b.ready,ue),ae.removeEventListener(b.close,ue);for(var oe=0;oe<S.length;oe++)if(S[oe]===ue){S.splice(oe,1);break}ae[b.release]()}function Y(){}function se(){}function G(){}function ee(){return{handleEvent:function(ae){switch(ae.type){case b.needkey:if(ae.initData){var oe=ArrayBuffer.isView(ae.initData)?ae.initData.buffer:ae.initData;i.trigger(d.NEED_KEY,{key:new l.default(oe,"cenc")})}break}}}}function J(){var ue=null,ae=function(){h.removeEventListener("loadedmetadata",ue),h[b.setMediaKeys](v),i.trigger(d.VIDEO_ELEMENT_SELECTED)};h.readyState>=1?ae():(ue=ae.bind(this),h.addEventListener("loadedmetadata",ue))}function ie(ue,ae){return{session:ue,keyId:ae.keyId,initData:ae.initData,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(Z){switch(Z.type){case b.error:var ge="KeyError";i.trigger(d.KEY_ERROR,{error:new u.default(m.default.MEDIA_KEYERR_CODE,ge,this)});break;case b.message:var le=ArrayBuffer.isView(Z.message)?Z.message.buffer:Z.message;i.trigger(d.INTERNAL_KEY_MESSAGE,{data:new y.default(this,le,Z.destinationURL)});break;case b.ready:_.debug("DRM: Key added."),i.trigger(d.KEY_ADDED);break;case b.close:_.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),i.trigger(d.KEY_SESSION_CLOSED,{data:this.getSessionId()});break}}}}return A={getAllInitData:H,getSessions:te,requestKeySystemAccess:w,selectKeySystem:F,setMediaElement:M,createKeySession:U,updateKeySession:j,closeKeySession:X,setServerCertificate:Y,loadKeySession:se,removeKeySession:G,stop:V,reset:V},x(),A}t.__dashjs_factory_name="ProtectionModel_3Feb2014",g.default=dashjs.FactoryMaker.getClassFactory(t)},"./src/streaming/protection/servers/ClearKey.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/protection/vo/KeyPair.js"),l=r("./src/streaming/protection/vo/ClearKeyKeySet.js");function u(){var m;function y(n){return n}function T(){return"POST"}function E(){return"json"}function t(n){if(!n.hasOwnProperty("keys"))return null;for(var i=[],d=0;d<n.keys.length;d++){var P=n.keys[d],b=P.kid.replace(/=/g,""),A=P.k.replace(/=/g,"");i.push(new o.default(b,A))}return new l.default(i)}function e(n){return String.fromCharCode.apply(null,new Uint8Array(n))}return m={getServerURLFromMessage:y,getHTTPMethod:T,getResponseType:E,getLicenseMessage:t,getErrorResponse:e},m}u.__dashjs_factory_name="ClearKey",g.default=dashjs.FactoryMaker.getSingletonFactory(u)},"./src/streaming/protection/servers/DRMToday.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/ProtectionConstants.js");function l(u){u=u||{};var m=u.BASE64,y={};y[o.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(b){return m.decodeArray(b.license)},getErrorResponse:function(b){return b}},y[o.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(b){return b},getErrorResponse:function(b){return String.fromCharCode.apply(null,new Uint8Array(b))}};var T;function E(){if(!m||!m.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}function t(P){return P}function e(){return"POST"}function n(P){return y[P].responseType}function i(P,b){return E(),y[b].getLicenseMessage(P)}function d(P,b){return y[b].getErrorResponse(P)}return T={getServerURLFromMessage:t,getHTTPMethod:e,getResponseType:n,getLicenseMessage:i,getErrorResponse:d},T}l.__dashjs_factory_name="DRMToday",g.default=dashjs.FactoryMaker.getSingletonFactory(l)},"./src/streaming/protection/servers/PlayReady.js":function(I,g,r){"use strict";r.r(g);function o(){var l,u="http://schemas.xmlsoap.org/soap/envelope/";function m(d){var P=String.fromCharCode.apply(null,new Uint8Array(d)),b=decodeURIComponent(escape(P));return b}function y(d){if(window.DOMParser){var P=m(d),b=new window.DOMParser,A=b.parseFromString(P,"text/xml"),_=A?A.getElementsByTagNameNS(u,"Envelope")[0]:null,h=_?_.getElementsByTagNameNS(u,"Body")[0]:null,f=h?h.getElementsByTagNameNS(u,"Fault")[0]:null;if(f)return null}return d}function T(d){var P="",b="",A="",_=-1,h=-1;if(window.DOMParser){var f=m(d),v=new window.DOMParser,c=v.parseFromString(f,"text/xml"),S=c?c.getElementsByTagNameNS(u,"Envelope")[0]:null,p=S?S.getElementsByTagNameNS(u,"Body")[0]:null,C=p?p.getElementsByTagNameNS(u,"Fault")[0]:null,x=C?C.getElementsByTagName("detail")[0]:null,V=x?x.getElementsByTagName("Exception")[0]:null,H=null;if(C===null)return f;H=C.getElementsByTagName("faultstring")[0].firstChild,P=H?H.nodeValue:null,V!==null&&(H=V.getElementsByTagName("StatusCode")[0],b=H?H.firstChild.nodeValue:null,H=V.getElementsByTagName("Message")[0],A=H?H.firstChild.nodeValue:null,_=A?A.lastIndexOf("[")+1:-1,h=A?A.indexOf("]"):-1,A=A?A.substring(_,h):"")}var te="code: ".concat(b,", name: ").concat(P);return A&&(te+=", message: ".concat(A)),te}function E(d){return d}function t(){return"POST"}function e(){return"arraybuffer"}function n(d){return y.call(this,d)}function i(d){return T.call(this,d)}return l={getServerURLFromMessage:E,getHTTPMethod:t,getResponseType:e,getLicenseMessage:n,getErrorResponse:i},l}o.__dashjs_factory_name="PlayReady",g.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/protection/servers/Widevine.js":function(I,g,r){"use strict";r.r(g);function o(){var l;function u(t){return t}function m(){return"POST"}function y(){return"arraybuffer"}function T(t){return t}function E(t){return String.fromCharCode.apply(null,new Uint8Array(t))}return l={getServerURLFromMessage:u,getHTTPMethod:m,getResponseType:y,getLicenseMessage:T,getErrorResponse:E},l}o.__dashjs_factory_name="Widevine",g.default=dashjs.FactoryMaker.getSingletonFactory(o)},"./src/streaming/protection/vo/ClearKeyKeySet.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function m(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=T(t,"string");return o(e)==="symbol"?e:String(e)}function T(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E=function(){function t(e,n){if(l(this,t),n&&n!=="persistent"&&n!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=e,this.type=n}return m(t,[{key:"toJWK",value:function(){var n,i=this.keyPairs.length,d={keys:[]};for(n=0;n<i;n++){var P={kty:"oct",alg:"A128KW",kid:this.keyPairs[n].keyID,k:this.keyPairs[n].key};d.keys.push(P)}this.type&&(d.type=this.type);var b=JSON.stringify(d),A=b.length,_=new ArrayBuffer(A),h=new Uint8Array(_);for(n=0;n<A;n++)h[n]=b.charCodeAt(n);return _}}]),t}();g.default=E},"./src/streaming/protection/vo/KeyMessage.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(e,n,i,d){T(this,t),this.sessionToken=e,this.message=n,this.defaultURL=i,this.messageType=d||"license-request"});g.default=E},"./src/streaming/protection/vo/KeyPair.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(e,n){T(this,t),this.keyID=e,this.key=n});g.default=E},"./src/streaming/protection/vo/KeySystemAccess.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(e,n){T(this,t),this.keySystem=e,this.ksConfiguration=n});g.default=E},"./src/streaming/protection/vo/KeySystemConfiguration.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(e,n,i,d,P){T(this,t),this.initDataTypes=["cenc"],e&&e.length&&(this.audioCapabilities=e),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=i,this.persistentState=d,this.sessionTypes=P});g.default=E},"./src/streaming/protection/vo/LicenseRequest.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(e,n,i,d,P,b,A,_){T(this,t),this.url=e,this.method=n,this.responseType=i,this.headers=d,this.withCredentials=P,this.messageType=b,this.sessionId=A,this.data=_});g.default=E},"./src/streaming/protection/vo/LicenseResponse.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(e,n,i){T(this,t),this.url=e,this.headers=n,this.data=i});g.default=E},"./src/streaming/protection/vo/MediaCapability.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(e,n){T(this,t),this.contentType=e,this.robustness=n});g.default=E},"./src/streaming/protection/vo/NeedKey.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(e,n){T(this,t),this.initData=e,this.initDataType=n});g.default=E},"./src/streaming/rules/DroppedFramesHistory.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(){var m={},y={},T={};function E(i,d,P){if(d){m[i]||(m[i]=[],y[i]=0,T[i]=0);var b=P&&P.droppedVideoFrames?P.droppedVideoFrames:0,A=P&&P.totalVideoFrames?P.totalVideoFrames:0,_=b-y[i];y[i]=b;var h=A-T[i];T[i]=A;var f=m[i];isNaN(d)||(f[d]?(f[d].droppedVideoFrames+=_,f[d].totalVideoFrames+=h):f[d]={droppedVideoFrames:_,totalVideoFrames:h})}}function t(i){return m[i]}function e(i){try{delete m[i],delete y[i],delete T[i]}catch{}}function n(){m={},y={},T={}}return{push:E,getFrameHistory:t,clearForStream:e,reset:n}}l.__dashjs_factory_name="DroppedFramesHistory";var u=o.default.getClassFactory(l);g.default=u},"./src/streaming/rules/RulesContext.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(u){u=u||{};var m,y=u.abrController,T=u.switchHistory,E=u.droppedFramesHistory,t=u.currentRequest,e=u.useBufferOccupancyABR,n=u.useL2AABR,i=u.useLoLPABR,d=u.streamProcessor?u.streamProcessor.getScheduleController():null,P=u.streamProcessor?u.streamProcessor.getRepresentationInfo():null,b=u.videoModel?u.videoModel:null;function A(){var w=h();return w?w.type:null}function _(){var w=h();return w?w.streamInfo:null}function h(){return P?P.mediaInfo:null}function f(){return P}function v(){return d}function c(){return y}function S(){return T}function p(){return b}function C(){return E}function x(){return t}function V(){return e}function H(){return n}function te(){return i}return m={getMediaType:A,getMediaInfo:h,getDroppedFramesHistory:C,getCurrentRequest:x,getSwitchHistory:S,getStreamInfo:_,getScheduleController:v,getAbrController:c,getRepresentationInfo:f,useBufferOccupancyABR:V,useL2AABR:H,useLoLPABR:te,getVideoModel:p},m}l.__dashjs_factory_name="RulesContext",g.default=o.default.getClassFactory(l)},"./src/streaming/rules/SwitchRequest.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=-1,u={DEFAULT:.5,STRONG:1,WEAK:0};function m(T,E,t){var e,n,i,d;function P(b){var A=u.DEFAULT;return(b===u.DEFAULT||b===u.STRONG||b===u.WEAK)&&(A=b),A}return n=T===void 0?l:T,i=P(t),d=E===void 0?null:E,e={quality:n,reason:d,priority:i},e}m.__dashjs_factory_name="SwitchRequest";var y=o.default.getClassFactory(m);y.NO_CHANGE=l,y.PRIORITY=u,o.default.updateClassFactory(m.__dashjs_factory_name,y),g.default=y},"./src/streaming/rules/SwitchRequestHistory.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/rules/SwitchRequest.js"),u=8;function m(){var T=[],E=[];function t(i){i.newValue===l.default.NO_CHANGE&&(i.newValue=i.oldValue),T[i.oldValue]||(T[i.oldValue]={noDrops:0,drops:0,dropSize:0});var d=i.newValue-i.oldValue,P=d<0?1:0,b=P?-d:0,A=P?0:1;if(T[i.oldValue].drops+=P,T[i.oldValue].dropSize+=b,T[i.oldValue].noDrops+=A,E.push({idx:i.oldValue,noDrop:A,drop:P,dropSize:b}),E.length>u){var _=E.shift();T[_.idx].drops-=_.drop,T[_.idx].dropSize-=_.dropSize,T[_.idx].noDrops-=_.noDrop}}function e(){return T}function n(){T=[],E=[]}return{push:t,getSwitchRequests:e,reset:n}}m.__dashjs_factory_name="SwitchRequestHistory";var y=o.default.getClassFactory(m);g.default=y},"./src/streaming/rules/ThroughputHistory.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/core/FactoryMaker.js");function u(m){m=m||{};var y=20,T=3,E=4,t=4,e=1.3,n=1.3,i=8,d=3,P=2,b=1,A=m.settings,_,h,f,v,c;function S(){c={throughputHalfLife:{fast:d,slow:i},latencyHalfLife:{fast:b,slow:P}},Y()}function p(G,ee,J){if(G===o.default.VIDEO)return J<A.get().streaming.cacheLoadThresholds[o.default.VIDEO];if(G===o.default.AUDIO)return J<A.get().streaming.cacheLoadThresholds[o.default.AUDIO]}function C(G,ee,J){if(!(!ee.trace||!ee.trace.length)){var ie=ee.tresponse.getTime()-ee.trequest.getTime()||1,ue=ee._tfinish.getTime()-ee.tresponse.getTime()||1,ae=ee.trace.reduce(function(ge,le){return ge+le.b[0]},0),oe=0,Z=0;if(ee._fileLoaderType&&ee._fileLoaderType===o.default.FILE_LOADER_TYPES.FETCH?oe=ee.trace.reduce(function(ge,le){return ge+le.d},0):oe=J?ue:ie+ue,oe!==0&&(Z=Math.round(8*ae/oe)),j(G),p(G,ie,ue)){if(_[G].length>0&&!_[G].hasCachedEntries)return;_[G].hasCachedEntries=!0}else _[G]&&_[G].hasCachedEntries&&X(G);_[G].push(Z),_[G].length>y&&_[G].shift(),h[G].push(ie),h[G].length>y&&h[G].shift(),x(f[G],Z,.001*ue,c.throughputHalfLife),x(v[G],ie,1,c.latencyHalfLife)}}function x(G,ee,J,ie){var ue=Math.pow(.5,J/ie.fast);G.fastEstimate=(1-ue)*ee+ue*G.fastEstimate;var ae=Math.pow(.5,J/ie.slow);G.slowEstimate=(1-ae)*ee+ae*G.slowEstimate,G.totalWeight+=J}function V(G,ee,J){var ie,ue;if(G?(ie=_[ee],ue=J?T:E):(ie=h[ee],ue=t),!ie)ue=0;else if(ue>=ie.length)ue=ie.length;else if(G)for(var ae=1;ae<ue;++ae){var oe=ie[ie.length-ae]/ie[ie.length-ae-1];if((oe>=n||oe<=1/e)&&(ue+=1,ue===ie.length))break}return ue}function H(G,ee,J){return A.get().streaming.abr.movingAverageMethod!==o.default.MOVING_AVERAGE_SLIDING_WINDOW?w(G,ee):te(G,ee,J)}function te(G,ee,J){var ie=V(G,ee,J),ue=G?_:h,ae=ue[ee];return ie===0||!ae||ae.length===0?NaN:(ae=ae.slice(-ie),ae.reduce(function(oe,Z){return oe+Z})/ae.length)}function w(G,ee){var J=G?c.throughputHalfLife:c.latencyHalfLife,ie=G?f[ee]:v[ee];if(!ie||ie.totalWeight<=0)return NaN;var ue=ie.fastEstimate/(1-Math.pow(.5,ie.totalWeight/J.fast)),ae=ie.slowEstimate/(1-Math.pow(.5,ie.totalWeight/J.slow));return G?Math.min(ue,ae):Math.max(ue,ae)}function F(G,ee){return H(!0,G,ee)}function M(G,ee){var J=F(G,ee);return isNaN(J)||(J*=A.get().streaming.abr.bandwidthSafetyFactor),J}function U(G){return H(!1,G)}function j(G){_[G]=_[G]||[],h[G]=h[G]||[],f[G]=f[G]||{fastEstimate:0,slowEstimate:0,totalWeight:0},v[G]=v[G]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function X(G){delete _[G],delete h[G],delete f[G],delete v[G],j(G)}function Y(){_={},h={},f={},v={}}var se={push:C,getAverageThroughput:F,getSafeAverageThroughput:M,getAverageLatency:U,reset:Y};return S(),se}u.__dashjs_factory_name="ThroughputHistory",g.default=l.default.getClassFactory(u)},"./src/streaming/rules/abr/ABRRulesCollection.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/rules/abr/ThroughputRule.js"),l=r("./src/streaming/rules/abr/InsufficientBufferRule.js"),u=r("./src/streaming/rules/abr/AbandonRequestsRule.js"),m=r("./src/streaming/rules/abr/DroppedFramesRule.js"),y=r("./src/streaming/rules/abr/SwitchHistoryRule.js"),T=r("./src/streaming/rules/abr/BolaRule.js"),E=r("./src/streaming/rules/abr/L2ARule.js"),t=r("./src/streaming/rules/abr/lolp/LoLpRule.js"),e=r("./src/core/FactoryMaker.js"),n=r("./src/streaming/rules/SwitchRequest.js"),i=r("./src/streaming/constants/Constants.js"),d="qualitySwitchRules",P="abandonFragmentRules";function b(_){_=_||{};var h=this.context,f=_.mediaPlayerModel,v=_.customParametersModel,c=_.dashMetrics,S=_.settings,p,C,x;function V(){C=[],x=[],S.get().streaming.abr.useDefaultABRRules&&(S.get().streaming.abr.ABRStrategy===i.default.ABR_STRATEGY_L2A?C.push(Object(E.default)(h).create({dashMetrics:c,settings:S})):S.get().streaming.abr.ABRStrategy===i.default.ABR_STRATEGY_LoLP?C.push(Object(t.default)(h).create({dashMetrics:c})):(C.push(Object(T.default)(h).create({dashMetrics:c,mediaPlayerModel:f,settings:S})),C.push(Object(o.default)(h).create({dashMetrics:c})),S.get().streaming.abr.additionalAbrRules.insufficientBufferRule&&C.push(Object(l.default)(h).create({dashMetrics:c,settings:S})),S.get().streaming.abr.additionalAbrRules.switchHistoryRule&&C.push(Object(y.default)(h).create()),S.get().streaming.abr.additionalAbrRules.droppedFramesRule&&C.push(Object(m.default)(h).create()),S.get().streaming.abr.additionalAbrRules.abandonRequestsRule&&x.push(Object(u.default)(h).create({dashMetrics:c,mediaPlayerModel:f,settings:S}))));var j=v.getAbrCustomRules();j.forEach(function(X){X.type===d&&C.push(X.rule(h).create()),X.type===P&&x.push(X.rule(h).create())})}function H(j){return j.filter(function(X){return X.quality>n.default.NO_CHANGE})}function te(j){var X={},Y=null,se,G,ee,J,ie;if(j.length!==0){for(X[n.default.PRIORITY.STRONG]={quality:n.default.NO_CHANGE,reason:null},X[n.default.PRIORITY.WEAK]={quality:n.default.NO_CHANGE,reason:null},X[n.default.PRIORITY.DEFAULT]={quality:n.default.NO_CHANGE,reason:null},se=0,G=j.length;se<G;se+=1)ee=j[se],ee.quality!==n.default.NO_CHANGE&&(X[ee.priority].quality===n.default.NO_CHANGE||X[ee.priority].quality>ee.quality)&&(X[ee.priority].quality=ee.quality,X[ee.priority].reason=ee.reason||null);return X[n.default.PRIORITY.WEAK].quality!==n.default.NO_CHANGE&&(Y=X[n.default.PRIORITY.WEAK]),X[n.default.PRIORITY.DEFAULT].quality!==n.default.NO_CHANGE&&(Y=X[n.default.PRIORITY.DEFAULT]),X[n.default.PRIORITY.STRONG].quality!==n.default.NO_CHANGE&&(Y=X[n.default.PRIORITY.STRONG]),Y&&(J=Y.quality,ie=Y.reason),Object(n.default)(h).create(J,ie)}}function w(j){var X=C.map(function(G){return G.getMaxIndex(j)}),Y=H(X),se=te(Y);return se||Object(n.default)(h).create()}function F(j,X){var Y=x.map(function(ee){return ee.shouldAbandon(j,X)}),se=H(Y),G=te(se);return G||Object(n.default)(h).create()}function M(){[C,x].forEach(function(j){j&&j.length&&j.forEach(function(X){return X.reset&&X.reset()})}),C=[],x=[]}function U(){return C}return p={initialize:V,reset:M,getMaxQuality:w,getMinSwitchRequest:te,shouldAbandonFragment:F,getQualitySwitchRules:U},p}b.__dashjs_factory_name="ABRRulesCollection";var A=e.default.getClassFactory(b);A.QUALITY_SWITCH_RULES=d,A.ABANDON_FRAGMENT_RULES=P,e.default.updateSingletonFactory(b.__dashjs_factory_name,A),g.default=A},"./src/streaming/rules/abr/AbandonRequestsRule.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/rules/SwitchRequest.js"),l=r("./src/core/FactoryMaker.js"),u=r("./src/core/Debug.js");function m(y){y=y||{};var T=1.8,E=500,t=5,e=this.context,n=y.mediaPlayerModel,i=y.dashMetrics,d=y.settings,P,b,A,_,h;function f(){b=Object(u.default)(e).getInstance().getLogger(P),p()}function v(C,x){A[C]=A[C]||{},A[C][x]=A[C][x]||{}}function c(C,x){h[C]=h[C]||[],h[C].push(x)}function S(C){var x=Object(o.default)(e).create(o.default.NO_CHANGE,{name:m.__dashjs_factory_name});if(!C||!C.hasOwnProperty("getMediaInfo")||!C.hasOwnProperty("getMediaType")||!C.hasOwnProperty("getCurrentRequest")||!C.hasOwnProperty("getRepresentationInfo")||!C.hasOwnProperty("getAbrController"))return x;var V=C.getMediaInfo(),H=C.getMediaType(),te=C.getStreamInfo(),w=te?te.id:null,F=C.getCurrentRequest();if(!isNaN(F.index)){v(H,F.index);var M=n.getStableBufferTime(),U=i.getCurrentBufferLevel(H);if(U>M)return x;var j=A[H][F.index];if(j===null||F.firstByteDate===null||_.hasOwnProperty(j.id))return x;if(j.firstByteTime===void 0&&(h[H]=[],j.firstByteTime=F.firstByteDate.getTime(),j.segmentDuration=F.duration,j.bytesTotal=F.bytesTotal,j.id=F.index),j.bytesLoaded=F.bytesLoaded,j.elapsedTime=new Date().getTime()-j.firstByteTime,j.bytesLoaded>0&&j.elapsedTime>0&&c(H,Math.round(j.bytesLoaded*8/j.elapsedTime)),h[H].length>=t&&j.elapsedTime>E&&j.bytesLoaded<j.bytesTotal){var X=h[H].reduce(function(ae,oe){return ae+oe},0);if(j.measuredBandwidthInKbps=Math.round(X/h[H].length),j.estimatedTimeOfDownload=+(j.bytesTotal*8/j.measuredBandwidthInKbps/1e3).toFixed(2),j.estimatedTimeOfDownload<j.segmentDuration*T||C.getRepresentationInfo().quality===0)return x;if(!_.hasOwnProperty(j.id)){var Y=C.getAbrController(),se=j.bytesTotal-j.bytesLoaded,G=Y.getBitrateList(V),ee=Y.getQualityForBitrate(V,j.measuredBandwidthInKbps*d.get().streaming.abr.bandwidthSafetyFactor,w),J=Y.getMinAllowedIndexFor(H,w),ie=J!==void 0?Math.max(J,ee):ee,ue=j.bytesTotal*G[ie].bitrate/G[Y.getQualityFor(H,w)].bitrate;se>ue&&(x.quality=ie,x.reason.throughput=j.measuredBandwidthInKbps,x.reason.fragmentID=j.id,_[j.id]=j,b.debug("["+H+"] frag id",j.id," is asking to abandon and switch to quality to ",ie," measured bandwidth was",j.measuredBandwidthInKbps),delete A[H][j.id])}}else j.bytesLoaded===j.bytesTotal&&delete A[H][j.id]}return x}function p(){A={},_={},h=[]}return P={shouldAbandon:S,reset:p},f(),P}m.__dashjs_factory_name="AbandonRequestsRule",g.default=l.default.getClassFactory(m)},"./src/streaming/rules/abr/BolaRule.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/MetricsConstants.js"),l=r("./src/streaming/rules/SwitchRequest.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/streaming/vo/metrics/HTTPRequest.js"),y=r("./src/core/EventBus.js"),T=r("./src/core/events/Events.js"),E=r("./src/core/Debug.js"),t=r("./src/streaming/MediaPlayerEvents.js"),e=r("./src/streaming/constants/Constants.js"),n=0,i=1,d=2,P=10,b=2,A=.99;function _(h){h=h||{};var f=this.context,v=h.dashMetrics,c=h.mediaPlayerModel,S=Object(y.default)(f).getInstance(),p,C,x;function V(){C=Object(E.default)(f).getInstance().getLogger(p),ge(),S.on(t.default.BUFFER_EMPTY,G,p),S.on(t.default.PLAYBACK_SEEKING,ee,p),S.on(t.default.METRIC_ADDED,ie,p),S.on(t.default.QUALITY_CHANGE_REQUESTED,ae,p),S.on(t.default.FRAGMENT_LOADING_ABANDONED,oe,p),S.on(T.default.MEDIA_FRAGMENT_LOADED,J,p)}function H(z){return z.map(function(K){return Math.log(K)})}function te(z,K,R){var L=R.reduce(function(ne,ce,W){return ce>R[ne]?W:ne},0);if(L===0)return null;var $=Math.max(z,P+b*K.length),O=(R[L]-1)/($/P-1),Q=P/O;return{gp:O,Vp:Q}}function w(z){var K={},R=z.getMediaInfo(),L=R.bitrateList.map(function(ne){return ne.bandwidth}),$=H(L);$=$.map(function(ne){return ne-$[0]+1});var O=c.getStableBufferTime(),Q=te(O,L,$);return Q?(K.state=i,K.bitrates=L,K.utilities=$,K.stableBufferTime=O,K.Vp=Q.Vp,K.gp=Q.gp,K.lastQuality=0,F(K)):K.state=n,K}function F(z){z.placeholderBuffer=0,z.mostAdvancedSegmentStart=NaN,z.lastSegmentWasReplacement=!1,z.lastSegmentStart=NaN,z.lastSegmentDurationS=NaN,z.lastSegmentRequestTimeMs=NaN,z.lastSegmentFinishTimeMs=NaN}function M(z,K){var R=c.getStableBufferTime();if(z.stableBufferTime!==R){var L=te(R,z.bitrates,z.utilities);if(L.Vp!==z.Vp||L.gp!==z.gp){var $=v.getCurrentBufferLevel(K),O=$+z.placeholderBuffer;O-=P,O*=L.Vp/z.Vp,O+=P,z.stableBufferTime=R,z.Vp=L.Vp,z.gp=L.gp,z.placeholderBuffer=Math.max(0,O-$)}}}function U(z){var K=z.getMediaType(),R=x[K];return R?R.state!==n&&M(R,K):(R=w(z),x[K]=R),R}function j(z,K){for(var R=z.bitrates.length,L=NaN,$=NaN,O=0;O<R;++O){var Q=(z.Vp*(z.utilities[O]+z.gp)-K)/z.bitrates[O];(isNaN($)||Q>=$)&&($=Q,L=O)}return L}function X(z,K){return z.Vp*(z.utilities[K]+z.gp)}function Y(z,K){for(var R=z.bitrates[K],L=z.utilities[K],$=0,O=K-1;O>=0;--O)if(z.utilities[O]<z.utilities[K]){var Q=z.bitrates[O],ne=z.utilities[O],ce=z.Vp*(z.gp+(R*ne-Q*L)/(R-Q));$=Math.max($,ce)}return $}function se(z,K){var R=Date.now();if(isNaN(z.lastSegmentFinishTimeMs)){if(!isNaN(z.lastCallTimeMs)){var $=.001*(R-z.lastCallTimeMs);z.placeholderBuffer+=Math.max(0,$)}}else{var L=.001*(R-z.lastSegmentFinishTimeMs);z.placeholderBuffer+=Math.max(0,L)}z.lastCallTimeMs=R,z.lastSegmentStart=NaN,z.lastSegmentRequestTimeMs=NaN,z.lastSegmentFinishTimeMs=NaN,M(z,K)}function G(z){var K=z.mediaType,R=K===e.default.AUDIO?[e.default.AUDIO]:x;for(var L in R)x.hasOwnProperty(L)&&x[L].state===d&&(x[L].placeholderBuffer=0)}function ee(){for(var z in x)if(x.hasOwnProperty(z)){var K=x[z];K.state!==n&&(K.state=i,F(K))}}function J(z){if(z&&z.chunk&&z.chunk.mediaInfo){var K=x[z.chunk.mediaInfo.type];if(K&&K.state!==n){var R=z.chunk.start;isNaN(K.mostAdvancedSegmentStart)||R>K.mostAdvancedSegmentStart?(K.mostAdvancedSegmentStart=R,K.lastSegmentWasReplacement=!1):K.lastSegmentWasReplacement=!0,K.lastSegmentStart=R,K.lastSegmentDurationS=z.chunk.duration,K.lastQuality=z.chunk.quality,ue(K,z.chunk.mediaInfo.type)}}}function ie(z){if(z&&z.metric===o.default.HTTP_REQUEST&&z.value&&z.value.type===m.HTTPRequest.MEDIA_SEGMENT_TYPE&&z.value.trace&&z.value.trace.length){var K=x[z.mediaType];K&&K.state!==n&&(K.lastSegmentRequestTimeMs=z.value.trequest.getTime(),K.lastSegmentFinishTimeMs=z.value._tfinish.getTime(),ue(K,z.mediaType))}}function ue(z,K){if(!isNaN(z.lastSegmentStart)&&!isNaN(z.lastSegmentRequestTimeMs)&&!isNaN(z.placeholderBuffer)){if(z.placeholderBuffer*=A,!isNaN(z.lastSegmentFinishTimeMs)){var R=v.getCurrentBufferLevel(K),L=R+.001*(z.lastSegmentFinishTimeMs-z.lastSegmentRequestTimeMs),$=X(z,z.lastQuality),O=Math.max(0,$-L);z.placeholderBuffer=Math.min(O,z.placeholderBuffer)}z.lastSegmentWasReplacement&&!isNaN(z.lastSegmentDurationS)&&(z.placeholderBuffer+=z.lastSegmentDurationS),z.lastSegmentStart=NaN,z.lastSegmentRequestTimeMs=NaN}}function ae(z){if(z){var K=x[z.mediaType];K&&K.state!==n&&(K.abrQuality=z.newQuality)}}function oe(z){if(z){var K=x[z.mediaType];if(K&&K.state!==n){var R=v.getCurrentBufferLevel(z.mediaType),L;K.abrQuality>0?L=Y(K,K.abrQuality):L=P;var $=Math.max(0,L-R);K.placeholderBuffer=Math.min(K.placeholderBuffer,$)}}}function Z(z){var K=Object(l.default)(f).create();if(!z||!z.hasOwnProperty("getMediaInfo")||!z.hasOwnProperty("getMediaType")||!z.hasOwnProperty("getScheduleController")||!z.hasOwnProperty("getStreamInfo")||!z.hasOwnProperty("getAbrController")||!z.hasOwnProperty("useBufferOccupancyABR"))return K;var R=z.getMediaInfo(),L=z.getMediaType(),$=z.getScheduleController(),O=z.getStreamInfo(),Q=z.getAbrController(),ne=Q.getThroughputHistory(),ce=O?O.id:null,W=O&&O.manifestInfo&&O.manifestInfo.isDynamic,B=z.useBufferOccupancyABR();if(K.reason=K.reason||{},!B)return K;$.setTimeToLoadDelay(0);var D=U(z);if(D.state===n)return K;var q=v.getCurrentBufferLevel(L),me=ne.getAverageThroughput(L,W),de=ne.getSafeAverageThroughput(L,W),ve=ne.getAverageLatency(L),Se;if(K.reason.state=D.state,K.reason.throughput=me,K.reason.latency=ve,isNaN(me))return K;switch(D.state){case i:Se=Q.getQualityForBitrate(R,de,ce,ve),K.quality=Se,K.reason.throughput=de,D.placeholderBuffer=Math.max(0,Y(D,Se)-q),D.lastQuality=Se,!isNaN(D.lastSegmentDurationS)&&q>=D.lastSegmentDurationS&&(D.state=d);break;case d:se(D,L),Se=j(D,q+D.placeholderBuffer);var be=Q.getQualityForBitrate(R,de,ce,ve);Se>D.lastQuality&&Se>be&&(Se=Math.max(be,D.lastQuality));var Me=Math.max(0,q+D.placeholderBuffer-X(D,Se));Me<=D.placeholderBuffer?(D.placeholderBuffer-=Me,Me=0):(Me-=D.placeholderBuffer,D.placeholderBuffer=0,Se<Q.getMaxAllowedIndexFor(L,ce)?$.setTimeToLoadDelay(1e3*Me):Me=0),K.quality=Se,K.reason.throughput=me,K.reason.latency=ve,K.reason.bufferLevel=q,K.reason.placeholderBuffer=D.placeholderBuffer,K.reason.delay=Me,D.lastQuality=Se;break;default:C.debug("BOLA ABR rule invoked in bad state."),K.quality=Q.getQualityForBitrate(R,de,ce,ve),K.reason.state=D.state,K.reason.throughput=de,K.reason.latency=ve,D.state=i,F(D)}return K}function ge(){x={}}function le(){ge(),S.off(t.default.BUFFER_EMPTY,G,p),S.off(t.default.PLAYBACK_SEEKING,ee,p),S.off(t.default.METRIC_ADDED,ie,p),S.off(t.default.QUALITY_CHANGE_REQUESTED,ae,p),S.off(t.default.FRAGMENT_LOADING_ABANDONED,oe,p),S.off(T.default.MEDIA_FRAGMENT_LOADED,J,p)}return p={getMaxIndex:Z,reset:le},V(),p}_.__dashjs_factory_name="BolaRule",g.default=u.default.getClassFactory(_)},"./src/streaming/rules/abr/DroppedFramesRule.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/rules/SwitchRequest.js"),u=r("./src/core/Debug.js");function m(){var y=this.context,T,E,t=.15,e=375;function n(){E=Object(u.default)(y).getInstance().getLogger(T)}function i(d){var P=Object(l.default)(y).create();if(!d||!d.hasOwnProperty("getDroppedFramesHistory"))return P;var b=d.getDroppedFramesHistory(),A=d.getStreamInfo().id;if(b){var _=b.getFrameHistory(A);if(!_||_.length===0)return P;for(var h=0,f=0,v=l.default.NO_CHANGE,c=1;c<_.length;c++)if(_[c]&&(h=_[c].droppedVideoFrames,f=_[c].totalVideoFrames,f>e&&h/f>t)){v=c-1,E.debug("index: "+v+" Dropped Frames: "+h+" Total Frames: "+f);break}return Object(l.default)(y).create(v,{droppedFrames:h})}return P}return T={getMaxIndex:i},n(),T}m.__dashjs_factory_name="DroppedFramesRule",g.default=o.default.getClassFactory(m)},"./src/streaming/rules/abr/InsufficientBufferRule.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/EventBus.js"),l=r("./src/core/events/Events.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/core/Debug.js"),y=r("./src/streaming/rules/SwitchRequest.js"),T=r("./src/streaming/constants/Constants.js"),E=r("./src/streaming/constants/MetricsConstants.js"),t=r("./src/streaming/MediaPlayerEvents.js");function e(n){n=n||{};var i=.5,d=2,P=this.context,b=Object(o.default)(P).getInstance(),A=n.dashMetrics,_,h,f;function v(){h=Object(m.default)(P).getInstance().getLogger(_),C(),b.on(t.default.PLAYBACK_SEEKING,x,_),b.on(l.default.BYTES_APPENDED_END_FRAGMENT,V,_)}function c(){if(!A||!A.hasOwnProperty("getCurrentBufferLevel")||!A.hasOwnProperty("getCurrentBufferState"))throw new Error(T.default.MISSING_CONFIG_ERROR)}function S(te){var w=Object(y.default)(P).create();if(!te||!te.hasOwnProperty("getMediaType"))return w;c();var F=te.getMediaType(),M=A.getCurrentBufferState(F),U=te.getRepresentationInfo(),j=U.fragmentDuration,X=te.getStreamInfo(),Y=X?X.id:null,se=te.getScheduleController(),G=X&&X.manifestInfo&&X.manifestInfo.isDynamic,ee=se.getPlaybackController(),J=ee.getLowLatencyModeEnabled();if(p(J,F)||!j)return w;if(M&&M.state===E.default.BUFFER_EMPTY)h.debug("["+F+"] Switch to index 0; buffer is empty."),w.quality=0,w.reason="InsufficientBufferRule: Buffer is empty";else{var ie=te.getMediaInfo(),ue=te.getAbrController(),ae=ue.getThroughputHistory(),oe=A.getCurrentBufferLevel(F),Z=ae.getAverageThroughput(F,G),ge=ae.getAverageLatency(F),le=Z*(oe/j)*i;w.quality=ue.getQualityForBitrate(ie,le,Y,ge),w.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return w}function p(te,w){return!te&&f[w].ignoreCount>0}function C(){f={},f[T.default.VIDEO]={ignoreCount:d},f[T.default.AUDIO]={ignoreCount:d}}function x(){C()}function V(te){!isNaN(te.startTime)&&(te.mediaType===T.default.AUDIO||te.mediaType===T.default.VIDEO)&&f[te.mediaType].ignoreCount>0&&f[te.mediaType].ignoreCount--}function H(){C(),b.off(t.default.PLAYBACK_SEEKING,x,_),b.off(l.default.BYTES_APPENDED_END_FRAGMENT,V,_)}return _={getMaxIndex:S,reset:H},v(),_}e.__dashjs_factory_name="InsufficientBufferRule",g.default=u.default.getClassFactory(e)},"./src/streaming/rules/abr/L2ARule.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/MetricsConstants.js"),l=r("./src/streaming/rules/SwitchRequest.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/streaming/vo/metrics/HTTPRequest.js"),y=r("./src/core/EventBus.js"),T=r("./src/core/events/Events.js"),E=r("./src/core/Debug.js"),t=r("./src/streaming/constants/Constants.js"),e=0,n=1,i=2;function d(P){P=P||{};var b=this.context,A=P.dashMetrics,_=Object(y.default)(b).getInstance(),h,f,v,c;function S(){c=Object(E.default)(b).getInstance().getLogger(h),Y(),_.on(T.default.PLAYBACK_SEEKING,H,h),_.on(T.default.MEDIA_FRAGMENT_LOADED,te,h),_.on(T.default.METRIC_ADDED,w,h),_.on(T.default.QUALITY_CHANGE_REQUESTED,M,h)}function p(G){var ee={},J=G.getMediaInfo(),ie=J.bitrateList.map(function(ue){return ue.bandwidth/1e3});return ee.state=n,ee.bitrates=ie,ee.lastQuality=0,C(J),x(ee),ee}function C(G){!G||!G.type||(v[G.type]={},v[G.type].w=[],v[G.type].prev_w=[],v[G.type].Q=0,v[G.type].segment_request_start_s=0,v[G.type].segment_download_finish_s=0,v[G.type].B_target=1.5)}function x(G){G.placeholderBuffer=0,G.mostAdvancedSegmentStart=NaN,G.lastSegmentWasReplacement=!1,G.lastSegmentStart=NaN,G.lastSegmentDurationS=NaN,G.lastSegmentRequestTimeMs=NaN,G.lastSegmentFinishTimeMs=NaN}function V(G){var ee=G.getMediaType(),J=f[ee];return J||(J=p(G),f[ee]=J),J}function H(){for(var G in f)if(f.hasOwnProperty(G)){var ee=f[G];ee.state!==e&&(ee.state=n,x(ee))}}function te(G){if(G&&G.chunk&&G.chunk.mediaInfo){var ee=f[G.chunk.mediaInfo.type],J=v[G.chunk.mediaInfo.type];if(ee&&ee.state!==e){var ie=G.chunk.start;isNaN(ee.mostAdvancedSegmentStart)||ie>ee.mostAdvancedSegmentStart?(ee.mostAdvancedSegmentStart=ie,ee.lastSegmentWasReplacement=!1):ee.lastSegmentWasReplacement=!0,ee.lastSegmentStart=ie,ee.lastSegmentDurationS=G.chunk.duration,ee.lastQuality=G.chunk.quality,F(ee,J)}}}function w(G){if(G&&G.metric===o.default.HTTP_REQUEST&&G.value&&G.value.type===m.HTTPRequest.MEDIA_SEGMENT_TYPE&&G.value.trace&&G.value.trace.length){var ee=f[G.mediaType],J=v[G.mediaType];ee&&ee.state!==e&&(ee.lastSegmentRequestTimeMs=G.value.trequest.getTime(),ee.lastSegmentFinishTimeMs=G.value._tfinish.getTime(),F(ee,J))}}function F(G,ee){!isNaN(G.lastSegmentStart)&&!isNaN(G.lastSegmentRequestTimeMs)&&(ee.segment_request_start_s=.001*G.lastSegmentRequestTimeMs,ee.segment_download_finish_s=.001*G.lastSegmentFinishTimeMs,G.lastSegmentStart=NaN,G.lastSegmentRequestTimeMs=NaN)}function M(G){if(G&&G.mediaType){var ee=f[G.mediaType];ee&&ee.state!==e&&(ee.abrQuality=G.newQuality)}}function U(G,ee){if(G.length!==ee.length)return-1;for(var J=0,ie=0;ie<G.length;ie++)J=J+G[ie]*ee[ie];return J}function j(G){for(var ee=G.length,J=!1,ie=[],ue=0;ue<ee;++ue)ie[ue]=G[ue];for(var ae=G.sort(function(K,R){return R-K}),oe=0,Z=0,ge=[],le=0;le<ee-1;++le)if(oe=oe+ae[le],Z=(oe-1)/(le+1),Z>=ae[le+1]){J=!0;break}J||(Z=(oe+ae[ee-1]-1)/ee);for(var z=0;z<ee;++z)ge[z]=Math.max(ie[z]-Z,0);return ge}function X(G){var ee=Object(l.default)(b).create(),J=4,ie=Math.pow(J,.99),ue=Math.max(Math.pow(J,1),ie*Math.sqrt(J)),ae=G.getMediaInfo(),oe=G.getMediaType(),Z=ae.bitrateList.map(function(ze){return ze.bandwidth}),ge=Z.length,le=G.getScheduleController(),z=G.getStreamInfo(),K=G.getAbrController(),R=K.getThroughputHistory(),L=z&&z.manifestInfo&&z.manifestInfo.isDynamic,$=G.useL2AABR(),O=A.getCurrentBufferLevel(oe,!0),Q=R.getSafeAverageThroughput(oe,L),ne=R.getAverageThroughput(oe,L),ce=2,W=R.getAverageLatency(oe),B=G.getVideoModel(),D,q=B.getPlaybackRate();if(!G||!G.hasOwnProperty("getMediaInfo")||!G.hasOwnProperty("getMediaType")||!G.hasOwnProperty("getScheduleController")||!G.hasOwnProperty("getStreamInfo")||!G.hasOwnProperty("getAbrController")||!G.hasOwnProperty("useL2AABR")||(ee.reason=ee.reason||{},!$||oe===t.default.AUDIO))return ee;le.setTimeToLoadDelay(0);var me=V(G);if(me.state===e)return ee;var de=v[oe];if(!de||(ee.reason.state=me.state,ee.reason.throughput=ne,ee.reason.latency=W,isNaN(ne)))return ee;switch(me.state){case n:if(D=K.getQualityForBitrate(ae,Q,z.id,W),ee.quality=D,ee.reason.throughput=Q,me.lastQuality=D,!isNaN(me.lastSegmentDurationS)&&O>=de.B_target){me.state=i,de.Q=ie;for(var ve=0;ve<ge;++ve)ve===me.lastQuality?de.prev_w[ve]=1:de.prev_w[ve]=0}break;case i:var Se=[],be=A.getCurrentHttpRequest(oe).trace.reduce(function(ze,$e){return ze+$e.d},0),Me=A.getCurrentHttpRequest(oe).trace.reduce(function(ze,$e){return ze+$e.b[0]},0),Fe=Math.round(8*Me/be);Fe<1&&(Fe=1);for(var Ee=me.lastSegmentDurationS,Pe=1,Ue=0;Ue<ge;++Ue)Z[Ue]=Z[Ue]/1e3,q*Z[Ue]>Fe&&(Pe=-1),de.w[Ue]=de.prev_w[Ue]+Pe*(Ee/(2*ue))*((de.Q+ie)*(q*Z[Ue]/Fe));de.w=j(de.w);for(var Re=0;Re<ge;++Re)Se[Re]=de.w[Re]-de.prev_w[Re],de.prev_w[Re]=de.w[Re];de.Q=Math.max(0,de.Q-Ee+Ee*q*((U(Z,de.prev_w)+U(Z,Se))/Fe));for(var Ke=[],Ne=0;Ne<ge;++Ne)Ke[Ne]=Math.abs(Z[Ne]-U(de.w,Z));D=Ke.indexOf(Math.min.apply(Math,Ke)),D>me.lastQuality&&Z[me.lastQuality+1]<=Fe&&(D=me.lastQuality+1),Z[D]>=Fe&&(de.Q=ce*Math.max(ie,de.Q)),ee.quality=D,ee.reason.throughput=ne,ee.reason.latency=W,ee.reason.bufferLevel=O,me.lastQuality=ee.quality;break;default:c.debug("L2A ABR rule invoked in bad state."),ee.quality=K.getQualityForBitrate(ae,Q,z.id,W),ee.reason.state=me.state,ee.reason.throughput=Q,ee.reason.latency=W,me.state=n,x(me)}return ee}function Y(){f={},v={}}function se(){Y(),_.off(T.default.PLAYBACK_SEEKING,H,h),_.off(T.default.MEDIA_FRAGMENT_LOADED,te,h),_.off(T.default.METRIC_ADDED,w,h),_.off(T.default.QUALITY_CHANGE_REQUESTED,M,h)}return h={getMaxIndex:X,reset:se},S(),h}d.__dashjs_factory_name="L2ARule",g.default=u.default.getClassFactory(d)},"./src/streaming/rules/abr/SwitchHistoryRule.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u=r("./src/streaming/rules/SwitchRequest.js");function m(){var y=this.context,T,E,t=.075,e=6;function n(){E=Object(l.default)(y).getInstance().getLogger(T)}function i(d){for(var P=d?d.getSwitchHistory():null,b=P?P.getSwitchRequests():[],A=0,_=0,h=0,f=Object(u.default)(y).create(),v=0;v<b.length;v++)if(b[v]!==void 0&&(A+=b[v].drops,_+=b[v].noDrops,h+=b[v].dropSize,A+_>=e&&A/_>t)){f.quality=v>0&&b[v].drops>0?v-1:v,f.reason={index:f.quality,drops:A,noDrops:_,dropSize:h},E.debug("Switch history rule index: "+f.quality+" samples: "+(A+_)+" drops: "+A);break}return f}return T={getMaxIndex:i},n(),T}m.__dashjs_factory_name="SwitchHistoryRule",g.default=o.default.getClassFactory(m)},"./src/streaming/rules/abr/ThroughputRule.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/rules/SwitchRequest.js"),u=r("./src/streaming/constants/Constants.js"),m=r("./src/streaming/constants/MetricsConstants.js");function y(T){T=T||{};var E=this.context,t=T.dashMetrics,e;function n(){}function i(){if(!t||!t.hasOwnProperty("getCurrentBufferState"))throw new Error(u.default.MISSING_CONFIG_ERROR)}function d(b){var A=Object(l.default)(E).create();if(!b||!b.hasOwnProperty("getMediaInfo")||!b.hasOwnProperty("getMediaType")||!b.hasOwnProperty("useBufferOccupancyABR")||!b.hasOwnProperty("getAbrController")||!b.hasOwnProperty("getScheduleController"))return A;i();var _=b.getMediaInfo(),h=b.getMediaType(),f=t.getCurrentBufferState(h),v=b.getScheduleController(),c=b.getAbrController(),S=b.getStreamInfo(),p=S?S.id:null,C=S&&S.manifestInfo?S.manifestInfo.isDynamic:null,x=c.getThroughputHistory(),V=x.getSafeAverageThroughput(h,C),H=x.getAverageLatency(h),te=b.useBufferOccupancyABR();return isNaN(V)||!f||te||c.getAbandonmentStateFor(p,h)!==m.default.ABANDON_LOAD&&(f.state===m.default.BUFFER_LOADED||C)&&(A.quality=c.getQualityForBitrate(_,V,p,H),v.setTimeToLoadDelay(0),A.reason={throughput:V,latency:H}),A}function P(){}return e={getMaxIndex:d,reset:P},e}y.__dashjs_factory_name="ThroughputRule",g.default=o.default.getClassFactory(y)},"./src/streaming/rules/abr/lolp/LearningAbrController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u={MANUAL:"manual_weight_selection",RANDOM:"random_weight_selection",DYNAMIC:"dynamic_weight_selection"};function m(){var y=this.context,T,E,t,e,n,i,d,P,b;function A(){E=Object(l.default)(y).getInstance().getLogger(T),h()}function _(){h()}function h(){t=null,e=1,n=100,i=0,d=null,P=null,b=u.DYNAMIC}function f(){var X=0;if(t)for(var Y=0;Y<t.length;Y++){var se=t[Y];se.state.throughput>X&&(X=se.state.throughput)}return X}function v(X){var Y=X.map(function(se){return Math.pow(se,2)}).reduce(function(se,G){return se+G});return Math.sqrt(Y)}function c(X,Y,se){var G=X.map(function(J,ie){return se[ie]*Math.pow(J-Y[ie],2)}).reduce(function(J,ie){return J+ie}),ee=G<0?-1:1;return ee*Math.sqrt(Math.abs(G))}function S(X,Y){var se=[X.state.throughput,X.state.latency,X.state.rebuffer,X.state.switch],G=[Y.state.throughput,Y.state.latency,Y.state.rebuffer,Y.state.switch];return c(se,G,[1,1,1,1])}function p(X,Y,se){for(var G=0;G<Y.length;G++){var ee=Y[G],J=.1,ie=S(ee,X),ue=Math.exp(-1*Math.pow(ie,2)/(2*Math.pow(J,2)));C(ee,se,ue)}}function C(X,Y,se){var G=X.state,ee=[.01,.01,.01,.01];G.throughput=G.throughput+(Y[0]-G.throughput)*ee[0]*se,G.latency=G.latency+(Y[1]-G.latency)*ee[1]*se,G.rebuffer=G.rebuffer+(Y[2]-G.rebuffer)*ee[2]*se,G.switch=G.switch+(Y[3]-G.switch)*ee[3]*se}function x(X,Y){var se=0,G=X;if(t)for(var ee=0;ee<t.length;ee++){var J=t[ee];J.bitrate<X.bitrate&&J.bitrate>se&&Y>J.bitrate&&(se=J.bitrate,G=J)}return G}function V(X,Y,se,G,ee,J,ie){var ue=se,ae=G,oe=Y,Z=M(X),ge=Y/e;ge>1&&(ge=f()),se=se/n;var le=0,z=0,K=0,R=1e4;E.debug("getNextQuality called throughput:".concat(ge," latency:").concat(se," bufferSize:").concat(G," currentQualityIndex:").concat(J," playbackRate:").concat(ee));var L=Z[J],$=L.bitrate*ie.getSegmentDuration()/oe,O=Math.max(0,$-ae);if(ae-$<ie.getMinBuffer())return E.debug("Buffer is low for bitrate= ".concat(L.bitrate," downloadTime=").concat($," currentBuffer=").concat(ae," rebuffer=").concat(O)),x(L,oe).qualityIndex;switch(b){case u.MANUAL:H();break;case u.RANDOM:te(Z);break;case u.DYNAMIC:w(ie,Z,ue,ae,O,oe,ee);break;default:w(ie,Z,ue,ae,O,oe,ee)}for(var Q=null,ne=null,ce=null,W=0;W<Z.length;W++){var B=Z[W],D=B.state,q=[D.throughput,D.latency,D.rebuffer,D.switch],me=d.slice(),de=ie.getNextBufferWithBitrate(B.bitrate,ae,oe),ve=de<ie.getMinBuffer();ve&&E.debug("Buffer is low for bitrate=".concat(B.bitrate," downloadTime=").concat($," currentBuffer=").concat(ae," nextBuffer=").concat(de)),(B.bitrate>Y-R||ve)&&B.bitrate!==i&&(me[0]=100);var Se=c(q,[ge,le,z,K],me);(Q===null||Se<Q)&&(Q=Se,ne=B.qualityIndex,ce=B)}var be=Math.abs(L.bitrate-ce.bitrate)/e;return p(L,Z,[ge,se,O,be]),p(ce,Z,[ge,le,z,be]),ne}function H(){var X=.4,Y=.4,se=.4,G=.4;d=[X,Y,se,G]}function te(X){d=F(X.length,4)}function w(X,Y,se,G,ee,J,ie){d||(d=P[P.length-1]);var ue=X.findWeightVector(Y,se,G,ee,J,ie);ue!==null&&ue!==-1&&(d=ue)}function F(X,Y){for(var se=[],G=Math.sqrt(2/X),ee=0;ee<Y;ee++)se.push(Math.random()*G);return d=se,d}function M(X){if(!t){t=[];var Y=X.bitrateList,se=[];i=Y[0].bandwidth,Y.forEach(function(J){se.push(J.bandwidth),J.bandwidth<i&&(i=J.bandwidth)}),e=v(se);for(var G=0;G<Y.length;G++){var ee={qualityIndex:G,bitrate:Y[G].bandwidth,state:{throughput:Y[G].bandwidth/e,latency:0,rebuffer:0,switch:0}};t.push(ee)}P=j(t)}return t}function U(X){for(var Y=[],se=0;se<X;se++){var G=[Math.random()*f(),Math.random(),Math.random(),Math.random()];Y.push(G)}return Y}function j(X){var Y=[],se=U(Math.pow(X.length,2));Y.push(se[0]);for(var G=[1,1,1,1],ee=1;ee<X.length;ee++){for(var J=null,ie=null,ue=0;ue<se.length;ue++){for(var ae=se[ue],oe=null,Z=0;Z<Y.length;Z++){var ge=c(ae,Y[Z],G);(oe===null||ge<oe)&&(oe=ge)}(ie===null||oe>ie)&&(J=ae,ie=oe)}Y.push(J)}for(var le=null,z=null,K=0;K<Y.length;K++){for(var R=0,L=0;L<Y.length;L++)K!==L&&(R+=c(Y[K],Y[L],G));(le===null||R>le)&&(le=R,z=K)}var $=[];for($.push(Y[z]),Y.splice(z,1);Y.length>0;){for(var O=null,Q=null,ne=0;ne<Y.length;ne++){var ce=c($[0],Y[ne],G);(O===null||ce<O)&&(O=ce,Q=ne)}$.push(Y[Q]),Y.splice(Q,1)}return $}return T={getNextQuality:V,reset:_},A(),T}m.__dashjs_factory_name="LearningAbrController",g.default=o.default.getClassFactory(m)},"./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/rules/abr/lolp/QoeInfo.js");function u(){var m,y,T,E,t;function e(){n()}function n(){y=null,T=null,E=null,t=null}function i(f,v,c){y=d("segment",f,v,c),T=f,E=v,t=c}function d(f,v,c,S){var p=new l.default;return p.type=f,v?p.weights.bitrateReward=v:p.weights.bitrateReward=1,p.weights.bitrateSwitchPenalty=1,c?p.weights.rebufferPenalty=c:p.weights.rebufferPenalty=1e3,p.weights.latencyPenalty=[],p.weights.latencyPenalty.push({threshold:1.1,penalty:S*.05}),p.weights.latencyPenalty.push({threshold:1e8,penalty:c*.1}),S?p.weights.playbackSpeedPenalty=S:p.weights.playbackSpeedPenalty=200,p}function P(f,v,c,S){y&&b(f,v,c,S,y)}function b(f,v,c,S,p){p.bitrateWSum+=p.weights.bitrateReward*f,p.lastBitrate&&(p.bitrateSwitchWSum+=p.weights.bitrateSwitchPenalty*Math.abs(f-p.lastBitrate)),p.lastBitrate=f,p.rebufferWSum+=p.weights.rebufferPenalty*v;for(var C=0;C<p.weights.latencyPenalty.length;C++){var x=p.weights.latencyPenalty[C];if(c<=x.threshold){p.latencyWSum+=x.penalty*c;break}}p.playbackSpeedWSum+=p.weights.playbackSpeedPenalty*Math.abs(1-S),p.totalQoe=p.bitrateWSum-p.bitrateSwitchWSum-p.rebufferWSum-p.latencyWSum-p.playbackSpeedWSum}function A(){return y}function _(f,v,c,S){var p=null;return T&&E&&t&&(p=d("segment",T,E,t)),p?(b(f,v,c,S,p),p.totalQoe):0}function h(){n()}return m={setupPerSegmentQoe:i,logSegmentMetrics:P,getPerSegmentQoe:A,calculateSingleUseQoe:_,reset:h},e(),m}u.__dashjs_factory_name="LoLpQoeEvaluator",g.default=o.default.getClassFactory(u)},"./src/streaming/rules/abr/lolp/LoLpRule.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/Debug.js"),l=r("./src/core/FactoryMaker.js"),u=r("./src/streaming/rules/abr/lolp/LearningAbrController.js"),m=r("./src/streaming/rules/abr/lolp/LoLpQoEEvaluator.js"),y=r("./src/streaming/rules/SwitchRequest.js"),T=r("./src/streaming/constants/MetricsConstants.js"),E=r("./src/streaming/rules/abr/lolp/LoLpWeightSelector.js"),t=r("./src/streaming/constants/Constants.js"),e=1.5,n=.3;function i(d){d=d||{};var P=d.dashMetrics,b=this.context,A,_,h,f;function v(){A=Object(o.default)(b).getInstance().getLogger(_),h=Object(u.default)(b).create(),f=Object(m.default)(b).create()}function c(C){try{var x=Object(y.default)(b).create(),V=C.getMediaInfo().type,H=C.getAbrController(),te=C.getStreamInfo(),w=H.getQualityFor(V,te.id),F=C.getMediaInfo(),M=P.getCurrentBufferState(V),U=C.getScheduleController(),j=P.getCurrentBufferLevel(V,!0),X=te&&te.manifestInfo?te.manifestInfo.isDynamic:null,Y=U.getPlaybackController(),se=Y.getCurrentLiveLatency();if(!C.useLoLPABR()||V===t.default.AUDIO)return x;se||(se=0);var G=Y.getPlaybackRate(),ee=H.getThroughputHistory(),J=ee.getSafeAverageThroughput(V,X);if(A.debug("Throughput ".concat(Math.round(J)," kbps")),isNaN(J)||!M||H.getAbandonmentStateFor(te.id,V)===T.default.ABANDON_LOAD)return x;for(var ie=F.bitrateList,ue=C.getRepresentationInfo().fragmentDuration,ae=ie[0].bandwidth/1e3,oe=ie[ie.length-1].bandwidth/1e3,Z=0;Z<ie.length;Z++){var ge=ie[Z].bandwidth/1e3;ge>oe?oe=ge:ge<ae&&(ae=ge)}var le=ie[w].bandwidth,z=le/1e3,K=P.getCurrentHttpRequest(V,!0),R=(K.tresponse.getTime()-K.trequest.getTime())/1e3,L=R>ue?R-ue:0;f.setupPerSegmentQoe(ue,oe,ae),f.logSegmentMetrics(z,L,se,G);var $=Object(E.default)(b).create({targetLatency:e,bufferMin:n,segmentDuration:ue,qoeEvaluator:f});return x.quality=h.getNextQuality(F,J*1e3,se,j,G,w,$),x.reason={throughput:J,latency:se},x.priority=y.default.PRIORITY.STRONG,U.setTimeToLoadDelay(0),x.quality!==w&&console.log("[TgcLearningRule]["+V+"] requesting switch to index: ",x.quality,"Average throughput",Math.round(J),"kbps"),x}catch(O){throw O}}function S(){h.reset(),f.reset()}function p(){S()}return _={getMaxIndex:c,reset:p},v(),_}i.__dashjs_factory_name="LoLPRule",g.default=l.default.getClassFactory(i)},"./src/streaming/rules/abr/lolp/LoLpWeightSelector.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(u){var m=u.targetLatency,y=u.bufferMin,T=u.segmentDuration,E=u.qoeEvaluator,t,e,n,i,d;function P(){b()}function b(){e=[.2,.4,.6,.8,1],n=4,i=h(e,n),d=0}function A(p,C,x,V,H,te){var w=null,F=null,M=null,U=Math.abs(C-d);return p.forEach(function(j){i.forEach(function(X){var Y={throughput:X[0],latency:X[1],buffer:X[2],switch:X[3]},se=j.bitrate*T/H,G=S(x,se),ee=Math.max(1e-5,se-G),J;Y.buffer===0?J=10:J=1/Y.buffer;var ie=J*ee;Y.latency===0?J=10:J=1/Y.latency;var ue=J*j.state.latency,ae=E.calculateSingleUseQoe(j.bitrate,ie,ue,te);(w===null||ae>w)&&_(C,G,U)&&(w=ae,F=X,M=j.bitrate)})}),F===null&&M===null&&(F=-1),d=C,F}function _(p,C,x){return p>m+x?!1:C>=y}function h(p,C){var x=p.map(function(H){return[H]}),V=function H(te,w,F){if(F===w)return te;for(var M=te.length,U=0;U<M;U++)for(var j=te.shift(),X=0;X<p.length;X++)te.push(j.concat(p[X]));return H(te,w,F+1)};return V(x,C,1)}function f(){return y}function v(){return T}function c(p,C,x){var V=p*T/x;return S(C,V)}function S(p,C){var x=v(),V;return C>x?V=p-x:V=p+x-C,V}return t={getMinBuffer:f,getSegmentDuration:v,getNextBufferWithBitrate:c,getNextBuffer:S,findWeightVector:A},P(),t}l.__dashjs_factory_name="LoLpWeightSelector",g.default=o.default.getClassFactory(l)},"./src/streaming/rules/abr/lolp/QoeInfo.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0});g.default=E},"./src/streaming/text/EmbeddedTextHtmlRender.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(){var u=0,m;function y(d){for(var P="",b=0;b<d.length;++b){var A=d[b];P+=A.uchar}var _=P.length,h=P.replace(/^\s+/,"").length;return _-h}function T(d){return"left: "+d.x*3.125+"%; top: "+d.y1*6.66+"%; width: "+(100-d.x*3.125)+"%; height: "+Math.max(d.y2-1-d.y1,1)*6.66+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function E(d){return d==="red"?"rgb(255, 0, 0)":d==="green"?"rgb(0, 255, 0)":d==="blue"?"rgb(0, 0, 255)":d==="cyan"?"rgb(0, 255, 255)":d==="magenta"?"rgb(255, 0, 255)":d==="yellow"?"rgb(255, 255, 0)":d==="white"?"rgb(255, 255, 255)":d==="black"?"rgb(0, 0, 0)":d}function t(d,P){var b=d.videoHeight/15;return P?"font-size: "+b+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(P.foreground?E(P.foreground):"rgb(255, 255, 255)")+"; font-style: "+(P.italics?"italic":"normal")+"; text-decoration: "+(P.underline?"underline":"none")+"; white-space: pre; background-color: "+(P.background?E(P.background):"transparent")+";":"font-size: "+b+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function e(d){return d.replace(/^\s+/g,"")}function n(d){return d.replace(/\s+$/g,"")}function i(d,P,b,A){var _=null,h=null,f=!1,v=-1,c={start:P,end:b,spans:[]},S="style_cea608_white_black",p={},C={},x=[],V,H;for(V=0;V<15;++V){var te=A.rows[V],w="",F=null;if(te.isEmpty()===!1){var M=y(te.chars);_===null&&(_={x:M,y1:V,y2:V+1,p:[]}),M!==v&&f&&(_.p.push(c),c={start:P,end:b,spans:[]},_.y2=V,_.name="region_"+_.x+"_"+_.y1+"_"+_.y2,p.hasOwnProperty(_.name)===!1?(x.push(_),p[_.name]=_):(h=p[_.name],h.p.contat(_.p)),_={x:M,y1:V,y2:V+1,p:[]});for(var U=0;U<te.chars.length;++U){var j=te.chars[U],X=j.penState;if(F===null||!X.equals(F)){w.trim().length>0&&(c.spans.push({name:S,line:w,row:V}),w="");var Y="style_cea608_"+X.foreground+"_"+X.background;X.underline&&(Y+="_underline"),X.italics&&(Y+="_italics"),C.hasOwnProperty(Y)||(C[Y]=JSON.parse(JSON.stringify(X))),F=X,S=Y}w+=j.uchar}w.trim().length>0&&c.spans.push({name:S,line:w,row:V}),f=!0,v=M}else f=!1,v=-1,_&&(_.p.push(c),c={start:P,end:b,spans:[]},_.y2=V,_.name="region_"+_.x+"_"+_.y1+"_"+_.y2,p.hasOwnProperty(_.name)===!1?(x.push(_),p[_.name]=_):(h=p[_.name],h.p.contat(_.p)),_=null)}_&&(_.p.push(c),_.y2=V+1,_.name="region_"+_.x+"_"+_.y1+"_"+_.y2,p.hasOwnProperty(_.name)===!1?(x.push(_),p[_.name]=_):(h=p[_.name],h.p.contat(_.p)),_=null);var se=[];for(V=0;V<x.length;++V){var G=x[V],ee="sub_cea608_"+u++,J=document.createElement("div");J.id=ee;var ie=T(G);J.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+ie;var ue=document.createElement("div");ue.className="paragraph bodyStyle",ue.style.cssText=t(d);var ae=document.createElement("div");ae.className="cueUniWrapper",ae.style.cssText="unicode-bidi: normal; direction: ltr;";for(var oe=0;oe<G.p.length;++oe){var Z=G.p[oe],ge=0;for(H=0;H<Z.spans.length;++H){var le=Z.spans[H];if(le.line.length>0){if(H!==0&&ge!=le.row){var z=document.createElement("br");z.className="lineBreak",ae.appendChild(z)}var K=!1;ge===le.row&&(K=!0),ge=le.row;var R=C[le.name],L=document.createElement("span");L.className="spanPadding "+le.name+" customSpanColor",L.style.cssText=t(d,R),H!==0&&K?H===Z.spans.length-1?L.textContent=n(le.line):L.textContent=le.line:Z.spans.length>1&&H<Z.spans.length-1&&le.row===Z.spans[H+1].row?L.textContent=e(le.line):L.textContent=le.line.trim(),ae.appendChild(L)}}}ue.appendChild(ae),J.appendChild(ue);var $={bodyStyle:["%",90]};for(var O in C)C.hasOwnProperty(O)&&($[O]=["%",90]);se.push({type:"html",start:P,end:b,cueHTMLElement:J,cueID:ee,cellResolution:[32,15],isFromCEA608:!0,fontSize:$,lineHeight:{},linePadding:{}})}return se}return m={createHTMLCaptionsFromScreen:i},m}l.__dashjs_factory_name="EmbeddedTextHtmlRender",g.default=o.default.getSingletonFactory(l)},"./src/streaming/text/NotFragmentedTextBufferController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/EventBus.js"),l=r("./src/core/events/Events.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/streaming/utils/InitCache.js"),y=r("./src/streaming/SourceBufferSink.js"),T=r("./src/streaming/vo/DashJSError.js"),E=r("./src/core/errors/Errors.js"),t="NotFragmentedTextBufferController";function e(n){n=n||{};var i=this.context,d=Object(o.default)(i).getInstance(),P=n.textController,b=n.errHandler,A=n.streamInfo,_=n.type,h,f,v,c,S,p;function C(){v=!1,c=null,f=!1,p=Object(m.default)(i).getInstance(),d.on(l.default.INIT_FRAGMENT_LOADED,J,h)}function x(){return t}function V(ne){M(ne)}function H(ne){return new Promise(function(ce,W){try{S=Object(y.default)(i).create({mediaSource:c,textController:P,eventBus:d}),S.initializeForFirstUse(A,ne),v||(S.getBuffer()&&typeof S.getBuffer().initialize=="function"&&S.getBuffer().initialize(),v=!0),ce(S)}catch(B){b.error(new T.default(E.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,E.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+_)),W(B)}})}function te(){return A.id}function w(){return _}function F(){return S}function M(ne){c=ne}function U(){return c}function j(){return!1}function X(){return 0}function Y(){return f}function se(ne){f!==ne&&(f=ne,f&&Q(l.default.BUFFERING_COMPLETED))}function G(ne){d.off(l.default.INIT_FRAGMENT_LOADED,J,h),!ne&&S&&(S.abort(),S.reset(),S=null)}function ee(ne){return p.extract(A.id,ne)!==null}function J(ne){!ne.chunk.bytes||f||(p.save(ne.chunk),S.append(ne.chunk),se(!0))}function ie(){return null}function ue(){return!0}function ae(){return[]}function oe(){return Number.POSITIVE_INFINITY}function Z(){return Promise.resolve()}function ge(){}function le(){return Promise.resolve()}function z(){return Promise.resolve()}function K(){return f=!1,Promise.resolve()}function R(){return Promise.resolve()}function L(){}function $(){}function O(){return Promise.resolve()}function Q(ne,ce){var W=ce||{};d.trigger(ne,W,{streamId:A.id,mediaType:_})}return h={initialize:V,getStreamId:te,getType:w,getBufferControllerType:x,createBufferSink:H,getBuffer:F,getBufferLevel:X,getRangeAt:ie,pruneBuffer:ge,hasBufferAtTime:ue,getAllRangesWithSafetyFactor:ae,getContinuousBufferTimeForTargetTime:oe,setMediaSource:M,getMediaSource:U,appendInitSegmentFromCache:ee,getIsBufferingCompleted:Y,setIsBufferingCompleted:se,getIsPruningInProgress:j,reset:G,clearBuffers:Z,prepareForPlaybackSeek:z,prepareForReplacementTrackSwitch:K,setSeekTarget:L,updateAppendWindow:R,pruneAllSafely:O,updateBufferTimestampOffset:le,segmentRequestingCompleted:$},C(),h}e.__dashjs_factory_name=t,g.default=u.default.getClassFactory(e)},"./src/streaming/text/TextController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/core/FactoryMaker.js"),u=r("./src/streaming/text/TextSourceBuffer.js"),m=r("./src/streaming/text/TextTracks.js"),y=r("./src/streaming/utils/VTTParser.js"),T=r("./src/streaming/utils/VttCustomRenderingParser.js"),E=r("./src/streaming/utils/TTMLParser.js"),t=r("./src/core/EventBus.js"),e=r("./src/core/events/Events.js"),n=r("./src/streaming/MediaPlayerEvents.js"),i=r("./src/streaming/utils/SupervisorTools.js");function d(P){var b=this.context,A=P.adapter,_=P.errHandler,h=P.manifestModel,f=P.mediaController,v=P.videoModel,c=P.settings,S,p,C,x,V,H,te,w,F,M,U,j;function X(){M=!1,U=!1,j=!1,V=Object(y.default)(b).getInstance(),H=Object(T.default)(b).getInstance(),te=Object(E.default)(b).getInstance(),w=Object(t.default)(b).getInstance(),Q()}function Y(){w.on(e.default.TEXT_TRACKS_QUEUE_INITIALIZED,ae,S),c.get().streaming.text.webvtt.customRenderingEnabled&&(w.on(e.default.PLAYBACK_TIME_UPDATED,oe,S),w.on(e.default.PLAYBACK_SEEKING,Z,S))}function se(ce){var W=ce.id,B=Object(m.default)(b).create({videoModel:v,settings:c,streamInfo:ce});B.initialize(),x[W]=B;var D=Object(u.default)(b).create({errHandler:_,adapter:A,manifestModel:h,mediaController:f,videoModel:v,textTracks:B,vttParser:V,vttCustomRenderingParser:H,ttmlParser:te,streamInfo:ce,settings:c});D.initialize(),C[W]=D,p[W]={},p[W].lastEnabledIndex=-1}function G(ce){var W=ce.id;x[W]&&x[W].createTracks()}function ee(ce,W,B){var D=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,q=ce.id;C[q]&&C[q].addMediaInfos(W,B,D)}function J(ce){var W=ce.id;if(C&&C[W])return C[W]}function ie(){return F}function ue(ce,W){var B=ce.id;C[B]&&C[B].addEmbeddedTrack(W)}function ae(ce){var W=ce.tracks,B=ce.index,D=ce.streamId,q=c.get().streaming.text.defaultEnabled;if(q===!1&&!le()||j)K(D,-1);else{var me=f.getCurrentTrackFor(o.default.TEXT,D);if(me){var de={lang:me.lang,role:me.roles[0],index:me.index,codec:me.codec,accessibility:me.accessibility[0]};W.some(function(ve,Se){if(f.matchSettings(de,ve))return K(D,Se),B=Se,!0})}F=!1}p[D].lastEnabledIndex=B,w.trigger(n.default.TEXT_TRACKS_ADDED,{enabled:le(),index:B,tracks:W,streamId:D}),U=!0}function oe(ce){try{var W=ce.streamId;if(!x[W]||isNaN(ce.time))return;x[W].manualCueProcessing(ce.time)}catch{}}function Z(ce){try{var W=ce.streamId;if(!x[W])return;x[W].disableManualTracks()}catch{}}function ge(ce,W){Object(i.checkParameterType)(W,"boolean"),le()!==W&&(W&&K(ce,p[ce].lastEnabledIndex),W||(p[ce].lastEnabledIndex=$(ce),U?K(ce,-1):j=!0))}function le(){var ce=!0;return F&&!M&&(ce=!1),ce}function z(ce){Object(i.checkParameterType)(ce,"boolean"),M=ce}function K(ce,W){F=W===-1,F&&f&&f.saveTextSettingsDisabled();var B=$(ce);if(!(B===W||!x[ce])){x[ce].disableManualTracks(),x[ce].setModeForTrackIdx(B,o.default.TEXT_HIDDEN),x[ce].setCurrentTrackIdx(W),x[ce].setModeForTrackIdx(W,o.default.TEXT_SHOWING);var D=x[ce].getCurrentTrackInfo();D&&D.isFragmented&&!D.isEmbedded?R(ce,D,B):D&&!D.isFragmented&&L(ce,D),f.setTrack(D)}}function R(ce,W,B){if(C[ce])for(var D=C[ce].getConfig(),q=D.fragmentedTracks,me=0;me<q.length;me++){var de=q[me];if(W.lang===de.lang&&(de.id?W.id===de.id:W.index===de.index)){var ve=f.getCurrentTrackFor(o.default.TEXT,ce);(de.id?ve.id!==de.id:ve.index!==de.index)?(x[ce].deleteCuesFromTrackIdx(B),C[ce].setCurrentFragmentedTrackIdx(me)):B===-1&&w.trigger(e.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:ce,mediaType:o.default.TEXT})}}}function L(ce,W){w.trigger(e.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:W},{streamId:ce,mediaType:o.default.TEXT})}function $(ce){return x[ce].getCurrentTrackIdx()}function O(ce){if(ce){var W=ce.id;C[W]&&C[W].resetMediaInfos(),x[W]&&x[W].deleteAllTextTracks()}}function Q(){C={},x={},p={},F=!0,U=!1,j=!1}function ne(){Q(),w.off(e.default.TEXT_TRACKS_QUEUE_INITIALIZED,ae,S),c.get().streaming.text.webvtt.customRenderingEnabled&&(w.off(e.default.PLAYBACK_TIME_UPDATED,oe,S),w.off(e.default.PLAYBACK_SEEKING,Z,S)),Object.keys(C).forEach(function(ce){C[ce].resetEmbedded(),C[ce].reset()})}return S={deactivateStream:O,initialize:Y,initializeForStream:se,createTracks:G,getTextSourceBuffer:J,getAllTracksAreDisabled:ie,addEmbeddedTrack:ue,enableText:ge,isTextEnabled:le,setTextTrack:K,getCurrentTrackIdx:$,enableForcedTextStreaming:z,addMediaInfosToBuffer:ee,reset:ne},X(),S}d.__dashjs_factory_name="TextController",g.default=l.default.getClassFactory(d)},"./src/streaming/text/TextSourceBuffer.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/vo/metrics/HTTPRequest.js"),u=r("./src/streaming/vo/TextTrackInfo.js"),m=r("./src/streaming/utils/BoxParser.js"),y=r("./src/streaming/utils/CustomTimeRanges.js"),T=r("./src/core/FactoryMaker.js"),E=r("./src/core/Debug.js"),t=r("./src/streaming/text/EmbeddedTextHtmlRender.js"),e=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),n=r.n(e),i=r("./externals/cea608-parser.js"),d=r.n(i),P=r("./src/core/EventBus.js"),b=r("./src/core/events/Events.js"),A=r("./src/streaming/vo/DashJSError.js"),_=r("./src/core/errors/Errors.js");function h(f){var v=f.errHandler,c=f.manifestModel,S=f.mediaController,p=f.videoModel,C=f.textTracks,x=f.vttParser,V=f.vttCustomRenderingParser,H=f.ttmlParser,te=f.streamInfo,w=f.settings,F=this.context,M=Object(P.default)(F).getInstance(),U=!1,j,X,Y,se,G,ee,J,ie,ue,ae,oe,Z,ge,le,z,K;function R(){X=Object(E.default)(F).getInstance().getLogger(j),Y=Object(m.default)(F).getInstance(),O()}function L(){return te.id}function $(){ee=null,ie=NaN,ue=[],ae=null,J=!1}function O(){$(),G=[],se=null}function Q(){U||q()}function ne(ye,he,Ae){if(G=G.concat(he),ye===o.default.TEXT&&he[0].isFragmented&&!he[0].isEmbedded){ee=Ae,j.buffered=Object(y.default)(F).create(),ue=S.getTracksFor(o.default.TEXT,te.id).filter(function(qe){return qe.isFragmented});for(var ke=S.getCurrentTrackFor(o.default.TEXT,te.id),Qe=0;Qe<ue.length;Qe++)if(ue[Qe]===ke){Se(Qe);break}}for(var Ge=0;Ge<he.length;Ge++)ce(he[Ge])}function ce(ye){var he=new u.default,Ae={subtitle:"subtitles",caption:"captions"};for(var ke in ye)he[ke]=ye[ke];he.labels=ye.labels,he.defaultTrack=ft(ye),he.isFragmented=ye.isFragmented,he.isEmbedded=!!ye.isEmbedded,he.isTTML=be(ye),he.kind=Me(ye,Ae),C.addTextTrack(he)}function W(){}function B(){O(),G=[],Y=null}function D(ye){var he=ye.chunk;he.mediaInfo.embeddedCaptions&&Fe(he.bytes,he)}function q(){Z=[],oe=null,ge=0,z=[],le=null,U=!0,K=Object(t.default)(F).getInstance(),M.on(b.default.VIDEO_CHUNK_RECEIVED,D,j),M.on(b.default.BUFFER_CLEARED,St,j)}function me(){M.off(b.default.VIDEO_CHUNK_RECEIVED,D,j),M.off(b.default.BUFFER_CLEARED,St,j),C&&C.deleteAllTextTracks(),U=!1,Z=[],z=[null,null],le=null}function de(ye){if(U&&ye)if(ye.id===o.default.CC1||ye.id===o.default.CC3){for(var he=0;he<Z.length;he++)if(Z[he].id===ye.id)return;Z.push(ye)}else X.warn("Embedded track "+ye.id+" not supported!")}function ve(){var ye={fragmentModel:ee,fragmentedTracks:ue,videoModel:p};return ye}function Se(ye){oe=ye}function be(ye){return ye.codec&&ye.codec.search(o.default.STPP)>=0||ye.mimeType&&ye.mimeType.search(o.default.TTML)>=0}function Me(ye,he){var Ae=ye.roles&&ye.roles.length>0?he[ye.roles[0]]:he.caption;return Ae=Ae===he.caption||Ae===he.subtitle?Ae:he.caption,Ae}function Fe(ye,he){var Ae=he.mediaInfo,ke=Ae.type,Qe=Ae.mimeType,Ge=Ae.codec||Qe;if(!Ge){X.error("No text type defined");return}Ae.codec.indexOf("application/mp4")!==-1?Ee(ye,he,Ge):ke===o.default.VIDEO?Ke(ye,he):Re(ye,he,Ge)}function Ee(ye,he,Ae){var ke,Qe;if(he.segmentType==="InitializationSegment")J=!0,ie=Y.getMediaTimescaleFromMoov(ye);else{if(!J)return;Qe=Y.getSamplesInfo(ye),ke=Qe.sampleList,ke.length>0&&(ae=ke[0].cts-he.start*ie),Ae.search(o.default.STPP)>=0?Pe(ye,ke,Ae):Ue(ye,ke)}}function Pe(ye,he,Ae){var ke,Qe;for(se=se!==null?se:bt(Ae),ke=0;ke<he.length;ke++){var Ge=he[ke],qe=Ge.cts,at=tt(),it=at+qe/ie,Ie=it+Ge.duration/ie;j.buffered.add(it,Ie);var He=new DataView(ye,Ge.offset,Ge.subSizes[0]),Xe=n.a.Utils.dataViewToString(He,o.default.UTF8),nt=[],mt=Ge.offset+Ge.subSizes[0];for(Qe=1;Qe<Ge.subSizes.length;Qe++){var ht=new Uint8Array(ye,mt,Ge.subSizes[Qe]),_t=String.fromCharCode.apply(null,ht);nt.push(_t),mt+=Ge.subSizes[Qe]}try{var wt=c.getValue(),ot=wt.ttmlTimeIsRelative?qe/ie:0,Wt=se.parse(Xe,ot,qe/ie,(qe+Ge.duration)/ie,nt);C.addCaptions(oe,at,Wt)}catch($t){ee.removeExecutedRequestsBeforeTime(),this.remove(),X.error("TTML parser error: "+$t.message)}}}function Ue(ye,he){var Ae,ke,Qe,Ge=[];for(Ae=0;Ae<he.length;Ae++){var qe=he[Ae];qe.cts-=ae;var at=tt(),it=at+qe.cts/ie,Ie=it+qe.duration/ie;j.buffered.add(it,Ie);var He=ye.slice(qe.offset,qe.offset+qe.size),Xe=n.a.parseBuffer(He);for(ke=0;ke<Xe.boxes.length;ke++){var nt=Xe.boxes[ke];if(X.debug("VTT box1: "+nt.type),nt.type!=="vtte"&&nt.type==="vttc")for(X.debug("VTT vttc boxes.length = "+nt.boxes.length),Qe=0;Qe<nt.boxes.length;Qe++){var mt=nt.boxes[Qe];if(X.debug("VTT box2: "+mt.type),mt.type==="payl"){var ht=mt.cue_text;X.debug("VTT cue_text = "+ht);var _t=qe.cts/ie,wt=(qe.cts+qe.duration)/ie;Ge.push({start:_t,end:wt,data:ht,styles:{}}),X.debug("VTT "+_t+"-"+wt+" : "+ht)}}}}Ge.length>0&&C.addCaptions(oe,0,Ge)}function Re(ye,he,Ae){var ke,Qe,Ge=new DataView(ye,0,ye.byteLength);Qe=n.a.Utils.dataViewToString(Ge,o.default.UTF8);try{ke=bt(Ae).parse(Qe,0),C.addCaptions(C.getCurrentTrackIdx(),0,ke),j.buffered&&j.buffered.add(he.start,he.end)}catch(qe){v.error(new A.default(_.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,_.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+qe.message,Qe))}}function Ke(ye,he){var Ae,ke;if(he.segmentType===l.HTTPRequest.INIT_SEGMENT_TYPE)ge===0&&(ge=Y.getMediaTimescaleFromMoov(ye));else if(he.segmentType===l.HTTPRequest.MEDIA_SEGMENT_TYPE){if(ge===0){X.warn("CEA-608: No timescale for embeddedTextTrack yet");return}ke=Y.getSamplesInfo(ye);var Qe=ke.lastSequenceNumber;if(!z[0]&&!z[1]&&Ne(),ge){if(le!==null&&Qe!==le+ke.numSequences)for(Ae=0;Ae<z.length;Ae++)z[Ae]&&z[Ae].reset();for(var Ge=$e(ye,ke.sampleList),qe=0;qe<z.length;qe++){var at=Ge.fields[qe],it=z[qe];if(it)for(Ae=0;Ae<at.length;Ae++)it.addData(at[Ae][0]/ge,at[Ae][1])}le=Qe}}}function Ne(){for(var ye,he=0;he<Z.length;he++){if(ye=C.getTrackIdxForId(Z[he].id),ye===-1){X.warn("CEA-608: data before track is ready.");return}var Ae=ze(ye);z[he]=new d.a.Cea608Parser(he+1,{newCue:Ae},null)}}function ze(ye){function he(Ae,ke,Qe){var Ge;if(p.getTTMLRenderingDiv())Ge=K.createHTMLCaptionsFromScreen(p.getElement(),Ae,ke,Qe);else{var qe=Qe.getDisplayText();Ge=[{start:Ae,end:ke,data:qe,styles:{}}]}Ge&&C.addCaptions(ye,0,Ge)}return he}function $e(ye,he){if(he.length===0)return null;for(var Ae={splits:[],fields:[[],[]]},ke=new DataView(ye),Qe=0;Qe<he.length;Qe++)for(var Ge=he[Qe],qe=d.a.findCea608Nalus(ke,Ge.offset,Ge.size),at=null,it=0,Ie=0;Ie<qe.length;Ie++)for(var He=d.a.extractCea608DataFromRange(ke,qe[Ie]),Xe=0;Xe<2;Xe++)if(He[Xe].length>0){Ge.cts!==at?it=0:it+=1;var nt=tt();Ae.fields[Xe].push([Ge.cts+nt*ge,He[Xe],it]),at=Ge.cts}return Ae.fields.forEach(function(ht){ht.sort(function(_t,wt){return _t[0]===wt[0]?_t[2]-wt[2]:_t[0]-wt[0]})}),Ae}function tt(){return isNaN(j.timestampOffset)?0:j.timestampOffset}function ft(ye){var he=!1;return Z.length>1&&ye.isEmbedded?he=ye.id&&ye.id===o.default.CC1:Z.length===1?ye.id&&typeof ye.id=="string"&&ye.id.substring(0,2)==="CC"&&(he=!0):Z.length===0&&(he=ye.index===G[0].index),he}function bt(ye){var he;return ye.search(o.default.VTT)>=0?he=w.get().streaming.text.webvtt.customRenderingEnabled&&V?V:x:(ye.search(o.default.TTML)>=0||ye.search(o.default.STPP)>=0)&&(he=H),he}function Et(ye,he){ye===void 0&&ye===he&&(ye=j.buffered.start(0),he=j.buffered.end(j.buffered.length-1)),j.buffered.remove(ye,he),C.deleteCuesFromTrackIdx(oe,ye,he)}function St(ye){Z.forEach(function(he){var Ae=C.getTrackIdxForId(he.id);Ae>=0&&C.deleteCuesFromTrackIdx(Ae,ye.from,ye.to)})}function Ct(){G=[]}return j={initialize:Q,addMediaInfos:ne,resetMediaInfos:Ct,getStreamId:L,append:Fe,abort:W,addEmbeddedTrack:de,resetEmbedded:me,getConfig:ve,setCurrentFragmentedTrackIdx:Se,remove:Et,reset:B},R(),j}h.__dashjs_factory_name="TextSourceBuffer",g.default=T.default.getClassFactory(h)},"./src/streaming/text/TextTracks.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/core/EventBus.js"),u=r("./src/core/events/Events.js"),m=r("./src/streaming/MediaPlayerEvents.js"),y=r("./src/core/FactoryMaker.js"),T=r("./src/core/Debug.js"),E=r("./node_modules/imsc/src/main/js/main.js"),t=r.n(E);function e(P,b){var A=typeof Symbol<"u"&&P[Symbol.iterator]||P["@@iterator"];if(!A){if(Array.isArray(P)||(A=n(P))||b&&P&&typeof P.length=="number"){A&&(P=A);var _=0,h=function(){};return{s:h,n:function(){return _>=P.length?{done:!0}:{done:!1,value:P[_++]}},e:function(p){throw p},f:h}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var f=!0,v=!1,c;return{s:function(){A=A.call(P)},n:function(){var p=A.next();return f=p.done,p},e:function(p){v=!0,c=p},f:function(){try{!f&&A.return!=null&&A.return()}finally{if(v)throw c}}}}function n(P,b){if(P){if(typeof P=="string")return i(P,b);var A=Object.prototype.toString.call(P).slice(8,-1);if(A==="Object"&&P.constructor&&(A=P.constructor.name),A==="Map"||A==="Set")return Array.from(P);if(A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A))return i(P,b)}}function i(P,b){(b==null||b>P.length)&&(b=P.length);for(var A=0,_=new Array(b);A<b;A++)_[A]=P[A];return _}function d(P){var b=this.context,A=Object(l.default)(b).getInstance(),_=P.videoModel,h=P.streamInfo,f=P.settings,v,c,S,p,C,x,V,H,te,w,F,M,U,j,X,Y,se,G;function ee(){c=Object(T.default)(b).getInstance().getLogger(v)}function J(){typeof window>"u"||typeof navigator>"u"||(S=window.VTTCue||window.TextTrackCue,p=[],C=[],x=-1,V=0,H=0,te=0,w=0,F=null,M=null,U=null,X=!1,se=2147483647,Y=null,document.fullscreenElement!==void 0?j="fullscreenElement":document.webkitIsFullScreen!==void 0?j="webkitIsFullScreen":document.msFullscreenElement?j="msFullscreenElement":document.mozFullScreen&&(j="mozFullScreen"))}function ie(){return h.id}function ue(Re){var Ke=Re.kind,Ne=Re.id!==void 0?Re.id:Re.lang,ze=Re.lang,$e=Re.isTTML,tt=Re.isEmbedded,ft=_.addTextTrack(Ke,Ne,ze,$e,tt);return ft}function ae(Re){p.push(Re)}function oe(){p.sort(function(bt,Et){return bt.index-Et.index}),F=_.getTTMLRenderingDiv(),M=_.getVttRenderingDiv();for(var Re=-1,Ke=0;Ke<p.length;Ke++){var Ne=ue(p[Ke]);C.push(Ne),p[Ke].defaultTrack&&(Ne.default=!0,Re=Ke);var ze=ne(Ke);ze&&(ze.mode=o.default.TEXT_SHOWING,F&&(p[Ke].isTTML||p[Ke].isEmbedded)?ze.renderingType="html":ze.renderingType="default"),K(Ke,0,p[Ke].captionData),A.trigger(m.default.TEXT_TRACK_ADDED)}if(B.call(this,Re),Re>=0){var $e=function bt(){var Et=ne(Re);Et&&Et.renderingType==="html"&&ge.call(this,Et,!0),A.off(m.default.PLAYBACK_METADATA_LOADED,bt,this)};A.on(m.default.PLAYBACK_METADATA_LOADED,$e,this);for(var tt=0;tt<p.length;tt++){var ft=ne(tt);ft&&(ft.mode=tt===Re?o.default.TEXT_SHOWING:o.default.TEXT_HIDDEN,ft.manualMode=tt===Re?o.default.TEXT_SHOWING:o.default.TEXT_HIDDEN)}}A.trigger(u.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:x,tracks:p,streamId:h.id})}function Z(Re,Ke,Ne,ze,$e,tt){var ft=Re/Ke,bt=Ne/ze,Et=0,St=0;ft>bt?(St=Ke,Et=St/ze*Ne):(Et=Re,St=Et/Ne*ze);var Ct=0,ye=0,he=0,Ae=0,ke=Et/St;return ke>$e?(Ae=St,he=St*$e):(he=Et,Ae=Et/$e),Ct=(Re-he)/2,ye=(Ke-Ae)/2,tt?{x:Ct+he*.1,y:ye+Ae*.1,w:he*.8,h:Ae*.8}:{x:Ct,y:ye,w:he,h:Ae}}function ge(Re,Ke){var Ne=_.getClientWidth(),ze=_.getClientHeight(),$e=_.getVideoWidth(),tt=_.getVideoHeight(),ft=_.getVideoRelativeOffsetTop(),bt=_.getVideoRelativeOffsetLeft();if($e!==0&&tt!==0){var Et=$e/tt,St=!1;Re.isFromCEA608&&(Et=3.5/3,St=!0);var Ct=Z.call(this,Ne,ze,$e,tt,Et,St),ye=Ct.w,he=Ct.h,Ae=Ct.x,ke=Ct.y;if(ye!=te||he!=w||Ae!=V||ke!=H||Ke){if(V=Ae+bt,H=ke+ft,te=ye,w=he,F){var Qe=F.style;Qe&&(Qe.left=V+"px",Qe.top=H+"px",Qe.width=te+"px",Qe.height=w+"px",Qe.zIndex=j&&document[j]||X?se:null,A.trigger(m.default.CAPTION_CONTAINER_RESIZE))}var Ge=Re.activeCues;if(Ge)for(var qe=Ge.length,at=0;at<qe;++at){var it=Ge[at];it.scaleCue(it)}}}}function le(Re){var Ke=te,Ne=w,ze,$e,tt,ft,bt;if(Re.cellResolution){var Et=[Ke/Re.cellResolution[0],Ne/Re.cellResolution[1]];if(Re.linePadding){for(ze in Re.linePadding)if(Re.linePadding.hasOwnProperty(ze)){var St=Re.linePadding[ze];$e=(St*Et[0]).toString();for(var Ct=document.getElementsByClassName("spanPadding"),ye=0;ye<Ct.length;ye++)Ct[ye].style.cssText=Ct[ye].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+$e),Ct[ye].style.cssText=Ct[ye].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+$e)}}if(Re.fontSize){for(ze in Re.fontSize)if(Re.fontSize.hasOwnProperty(ze)){Re.fontSize[ze][0]==="%"?tt=Re.fontSize[ze][1]/100:Re.fontSize[ze][0]==="c"&&(tt=Re.fontSize[ze][1]),$e=(tt*Et[1]).toString(),ze!=="defaultFontSize"?bt=document.getElementsByClassName(ze):bt=document.getElementsByClassName("paragraph");for(var he=0;he<bt.length;he++)bt[he].style.cssText=bt[he].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+$e)}if(Re.lineHeight){for(ze in Re.lineHeight)if(Re.lineHeight.hasOwnProperty(ze)){Re.lineHeight[ze][0]==="%"?ft=Re.lineHeight[ze][1]/100:Re.fontSize[ze][0]==="c"&&(ft=Re.lineHeight[ze][1]),$e=(ft*Et[1]).toString(),bt=document.getElementsByClassName(ze);for(var Ae=0;Ae<bt.length;Ae++)bt[Ae].style.cssText=bt[Ae].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+$e)}}}}if(Re.isd){var ke=document.getElementById(Re.cueID);ke&&F.removeChild(ke),z(Re)}}function z(Re){if(F){var Ke=document.createElement("div");F.appendChild(Ke),Y=Object(E.renderHTML)(Re.isd,Ke,function(Ne){var ze=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,$e=/^#(.*)$/;if(ze.test(Ne)){var tt=ze.exec(Ne),ft=parseInt(tt[4],10)-1,bt=btoa(Re.images[ft]),Et="data:image/png;base64,"+bt;return Et}else if($e.test(Ne)){var St=$e.exec(Ne),Ct=St[1],ye="data:image/png;base64,"+Re.embeddedImages[Ct];return ye}else return null},F.clientHeight,F.clientWidth,!1,function(Ne){c.info("renderCaption :",Ne)},Y,!0),Ke.id=Re.cueID,A.trigger(m.default.CAPTION_RENDERED,{captionDiv:Ke,currentTrackIdx:x})}}function K(Re,Ke,Ne){var ze=ne(Re);if(ze&&!(!Array.isArray(Ne)||Ne.length===0))for(var $e=0;$e<Ne.length;$e++){var tt=void 0,ft=Ne[$e];ze.cellResolution=ft.cellResolution,ze.isFromCEA608=ft.isFromCEA608,!isNaN(ft.start)&&!isNaN(ft.end)&&(tt=ft.type==="html"&&F?R(ft,Ke,ze):ft.data?L(ft,Ke,ze):null);try{tt?q(ze,tt)||(f.get().streaming.text.webvtt.customRenderingEnabled?(ze.manualCueList||(ze.manualCueList=[]),ze.manualCueList.push(tt)):ze.addCue(tt)):c.error("impossible to display subtitles.")}catch(bt){throw de(ze),ze.addCue(tt),bt}}}function R(Re,Ke,Ne){var ze=this,$e=new S(Re.start+Ke,Re.end+Ke,"");return $e.cueHTMLElement=Re.cueHTMLElement,$e.isd=Re.isd,$e.images=Re.images,$e.embeddedImages=Re.embeddedImages,$e.cueID=Re.cueID,$e.scaleCue=le.bind(ze),$e.cellResolution=Re.cellResolution,$e.lineHeight=Re.lineHeight,$e.linePadding=Re.linePadding,$e.fontSize=Re.fontSize,F.style.left=V+"px",F.style.top=H+"px",F.style.width=te+"px",F.style.height=w+"px",$e.onenter=function(){Ne.mode===o.default.TEXT_SHOWING&&(this.isd?(z(this),c.debug("Cue enter id:"+this.cueID)):(F.appendChild(this.cueHTMLElement),le.call(ze,this),A.trigger(m.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:x})))},$e.onexit=function(){if(F)for(var tt=F.childNodes,ft=0;ft<tt.length;++ft)tt[ft].id===this.cueID&&(c.debug("Cue exit id:"+tt[ft].id),F.removeChild(tt[ft]),--ft)},$e}function L(Re,Ke,Ne){var ze=new S(Re.start-Ke,Re.end-Ke,Re.data);if(ze.cueID="".concat(ze.startTime,"_").concat(ze.endTime),ze.isActive=!1,Re.styles)try{Re.styles.align!==void 0&&"align"in ze&&(ze.align=Re.styles.align),Re.styles.line!==void 0&&"line"in ze&&(ze.line=Re.styles.line),Re.styles.position!==void 0&&"position"in ze&&(ze.position=Re.styles.position),Re.styles.size!==void 0&&"size"in ze&&(ze.size=Re.styles.size)}catch($e){c.error($e)}return ze.onenter=function(){Ne.mode===o.default.TEXT_SHOWING&&A.trigger(m.default.CAPTION_RENDERED,{currentTrackIdx:x})},ze}function $(Re){var Ke=Q();if(Ke&&Ke.length>0){var Ne=Ke[0],ze=Ne.manualCueList;ze&&ze.length>0&&ze.forEach(function($e){if($e.startTime<=Re&&$e.endTime>=Re&&!$e.isActive)$e.isActive=!0,WebVTT.processCues(window,[$e],M,$e.cueID);else if($e.isActive&&($e.startTime>Re||$e.endTime<Re)&&($e.isActive=!1,M))for(var tt=M.childNodes,ft=0;ft<tt.length;++ft)tt[ft].id===$e.cueID&&(M.removeChild(tt[ft]),--ft)})}}function O(){var Re=Q();if(Re&&Re.length>0){var Ke=Re[0],Ne=Ke.manualCueList;Ne&&Ne.length>0&&Ne.forEach(function(ze){if(ze.isActive&&(ze.isActive=!1,M))for(var $e=M.childNodes,tt=0;tt<$e.length;++tt)$e[tt].id===ze.cueID&&(M.removeChild($e[tt]),--tt)})}}function Q(){var Re=_.getTextTracks(),Ke=[],Ne=e(Re),ze;try{for(Ne.s();!(ze=Ne.n()).done;){var $e=ze.value;$e.manualMode===o.default.TEXT_SHOWING&&Ke.push($e)}}catch(tt){Ne.e(tt)}finally{Ne.f()}return Ke}function ne(Re){return Re>=0&&p[Re]?_.getTextTrack(p[Re].kind,p[Re].id,p[Re].lang,p[Re].isTTML,p[Re].isEmbedded):null}function ce(){return x}function W(Re){for(var Ke=-1,Ne=0;Ne<p.length;Ne++)if(p[Ne].id===Re){Ke=Ne;break}return Ke}function B(Re){var Ke=this;if(Re!==x){x=Re;var Ne=ne(x);D.call(this,Ne),U&&(clearInterval(U),U=null),Ne&&Ne.renderingType==="html"&&(ge.call(this,Ne,!0),window.ResizeObserver?(G=new window.ResizeObserver(function(){ge.call(Ke,Ne,!0)}),G.observe(_.getElement())):U=setInterval(ge.bind(this,Ne),500))}}function D(Re){Ee.call(this),Re?Re.renderingType==="html"?Me.call(this):Fe.call(this):Fe.call(this)}function q(Re,Ke){if(!Re.cues)return!1;for(var Ne=0;Ne<Re.cues.length;Ne++)if(Re.cues[Ne].startTime===Ke.startTime&&Re.cues[Ne].endTime===Ke.endTime)return!0;return!1}function me(Re,Ke,Ne){var ze=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return(isNaN(Ke)||(ze?Re.startTime:Re.endTime)>=Ke)&&(isNaN(Ne)||(ze?Re.endTime:Re.startTime)<=Ne)}function de(Re,Ke,Ne){var ze=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;if(Re.cues)for(var $e=Re.cues,tt=$e.length-1,ft=tt;ft>=0;ft--)me($e[ft],Ke,Ne,ze)&&($e[ft].onexit&&$e[ft].onexit(),Re.removeCue($e[ft]))}function ve(Re,Ke,Ne){var ze=ne(Re);ze&&de(ze,Ke,Ne)}function Se(){for(var Re=C?C.length:0,Ke=0;Ke<Re;Ke++){var Ne=ne(Ke);Ne&&de.call(this,Ne,h.start,h.start+h.duration,!1)}C=[],p=[],U&&(clearInterval(U),U=null),G&&_&&(G.unobserve(_.getElement()),G=null),x=-1,Ee.call(this)}function be(Re){_.removeChild(C[Re]),C.splice(Re,1)}function Me(){var Re=document.getElementById("native-cue-style");if(!Re){Re=document.createElement("style"),Re.id="native-cue-style",document.head.appendChild(Re);var Ke=Re.sheet,Ne=_.getElement();try{Ne&&(Ne.id?Ke.insertRule("#"+Ne.id+"::cue {background: transparent}",0):Ne.classList.length!==0?Ke.insertRule("."+Ne.className+"::cue {background: transparent}",0):Ke.insertRule("video::cue {background: transparent}",0))}catch(ze){c.info(""+ze.message)}}}function Fe(){var Re=document.getElementById("native-cue-style");Re&&document.head.removeChild(Re)}function Ee(){if(F)for(;F.firstChild;)F.removeChild(F.firstChild)}function Pe(Re,Ke){var Ne=ne(Re);Ne&&Ne.mode!==Ke&&(Ne.mode=Ke),Ne&&Ne.manualMode!==Ke&&(Ne.manualMode=Ke)}function Ue(){return p[x]}return v={initialize:J,getStreamId:ie,addTextTrack:ae,addCaptions:K,createTracks:oe,getCurrentTrackIdx:ce,setCurrentTrackIdx:B,getTrackIdxForId:W,getCurrentTrackInfo:Ue,setModeForTrackIdx:Pe,deleteCuesFromTrackIdx:ve,deleteAllTextTracks:Se,deleteTextTrack:be,manualCueProcessing:$,disableManualTracks:O},ee(),v}d.__dashjs_factory_name="TextTracks",g.default=y.default.getClassFactory(d)},"./src/streaming/thumbnail/ThumbnailController.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/constants/Constants.js"),u=r("./src/streaming/vo/Thumbnail.js"),m=r("./src/streaming/thumbnail/ThumbnailTracks.js"),y=r("./src/streaming/vo/BitrateInfo.js"),T=r("./src/dash/utils/SegmentsUtils.js");function E(t){var e=this.context,n=t.streamInfo,i,d;function P(){S(),d=Object(m.default)(e).create({streamInfo:n,adapter:t.adapter,baseURLController:t.baseURLController,timelineConverter:t.timelineConverter,debug:t.debug,eventBus:t.eventBus,events:t.events,dashConstants:t.dashConstants,dashMetrics:t.dashMetrics,segmentBaseController:t.segmentBaseController})}function b(){d.addTracks();var p=d.getTracks();p&&p.length>0&&f(0)}function A(){return n.id}function _(p,C){if(typeof C=="function"){var x=d.getCurrentTrack(),V,H;if(!x||x.segmentDuration<=0||p===void 0||p===null){C(null);return}H=d.getThumbnailRequestForTime(p),H&&(x.segmentDuration=H.duration),V=p%x.segmentDuration;var te=Math.floor(V*x.tilesHor*x.tilesVert/x.segmentDuration),w=new u.default;if(w.width=Math.floor(x.widthPerTile),w.height=Math.floor(x.heightPerTile),w.x=Math.floor(te%x.tilesHor)*x.widthPerTile,w.y=Math.floor(te/x.tilesHor)*x.heightPerTile,"readThumbnail"in x)return x.readThumbnail(p,function(M){w.url=M,C(w)});if(H)w.url=H.url,x.segmentDuration=NaN;else{var F=Math.floor(p/x.segmentDuration);w.url=h(x,F)}C(w)}}function h(p,C){var x=C+p.startNumber,V=Object(T.replaceTokenForTemplate)(p.templateUrl,"Number",x);return V=Object(T.replaceTokenForTemplate)(V,"Time",(x-1)*p.segmentDuration*p.timescale),V=Object(T.replaceTokenForTemplate)(V,"Bandwidth",p.bandwidth),Object(T.unescapeDollarsInTemplate)(V)}function f(p){d.setTrackByIndex(p)}function v(){return d.getCurrentTrackIndex()}function c(){var p=d.getTracks(),C=0;return p.map(function(x){var V=new y.default;return V.mediaType=l.default.IMAGE,V.qualityIndex=C++,V.bitrate=x.bitrate,V.width=x.width,V.height=x.height,V})}function S(){d&&d.reset()}return i={getStreamId:A,initialize:b,provide:_,setTrackByIndex:f,getCurrentTrackIndex:v,getBitrateList:c,reset:S},P(),i}E.__dashjs_factory_name="ThumbnailController",g.default=o.default.getClassFactory(E)},"./src/streaming/thumbnail/ThumbnailTracks.js":function(I,g,r){"use strict";r.r(g),r.d(g,"THUMBNAILS_SCHEME_ID_URIS",function(){return i});var o=r("./src/streaming/constants/Constants.js"),l=r("./src/dash/constants/DashConstants.js"),u=r("./src/core/FactoryMaker.js"),m=r("./src/streaming/vo/ThumbnailTrackInfo.js"),y=r("./src/streaming/utils/URLUtils.js"),T=r("./src/dash/utils/SegmentsUtils.js"),E=r("./src/streaming/utils/BoxParser.js"),t=r("./src/streaming/net/XHRLoader.js"),e=r("./src/dash/DashHandler.js"),n=r("./src/dash/controllers/SegmentsController.js"),i=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function d(P){var b=this.context,A=P.adapter,_=P.baseURLController,h=P.streamInfo,f=P.timelineConverter,v=P.debug,c=P.eventBus,S=P.events,p=P.dashConstants,C=Object(y.default)(b).getInstance(),x,V,H,te,w,F,M,U;function j(){Z(),M=Object(t.default)(b).create({}),U=Object(E.default)(b).getInstance(),F=Object(n.default)(b).create({events:S,eventBus:c,streamInfo:h,timelineConverter:f,dashConstants:p,dashMetrics:P.dashMetrics,segmentBaseController:P.segmentBaseController,type:o.default.IMAGE}),H=Object(e.default)(b).create({streamInfo:h,type:o.default.IMAGE,timelineConverter:f,segmentsController:F,baseURLController:_,debug:v,eventBus:c,events:S,dashConstants:p,urlUtils:C}),H.initialize(A?A.getIsDynamic():!1)}function X(){if(!(!h||!A)&&(w=A.getMediaInfoForType(h,o.default.IMAGE),!!w)){var ge=A.getVoRepresentations(w);ge&&ge.length>0&&ge.forEach(function(le){(le.segmentInfoType===l.default.SEGMENT_TEMPLATE&&le.segmentDuration>0&&le.media||le.segmentInfoType===l.default.SEGMENT_TIMELINE)&&Y(le),le.segmentInfoType===l.default.SEGMENT_BASE&&Y(le,!0)}),V.length>0&&V.sort(function(le,z){return le.bitrate-z.bitrate})}}function Y(ge,le){var z=new m.default;z.id=ge.id,z.bitrate=ge.bandwidth,z.width=ge.width,z.height=ge.height,z.tilesHor=1,z.tilesVert=1,ge.essentialProperties&&ge.essentialProperties.forEach(function(K){if(i.indexOf(K.schemeIdUri)>=0&&K.value){var R=K.value.split("x");R.length===2&&!isNaN(R[0])&&!isNaN(R[1])&&(z.tilesHor=parseInt(R[0],10),z.tilesVert=parseInt(R[1],10))}}),le?F.updateSegmentData(ge).then(function(K){se(z,ge,K)}):(z.startNumber=ge.startNumber,z.segmentDuration=ge.segmentDuration,z.timescale=ge.timescale,z.templateUrl=ee(ge)),z.tilesHor>0&&z.tilesVert>0&&(z.widthPerTile=z.width/z.tilesHor,z.heightPerTile=z.height/z.tilesVert,V.push(z))}function se(ge,le,z){var K=[],R=G(z,le);le.segments=R,ge.segmentDuration=le.segments[0].duration,ge.readThumbnail=function(L,$){var O=null;K.some(function(Q){if(Q.start<=L&&Q.end>L)return O=Q.url,!0}),O?$(O):le.segments.some(function(Q){if(Q.mediaStartTime<=L&&Q.mediaStartTime+Q.duration>L){var ne=_.resolve(le.path);return M.load({method:"get",url:ne.url,request:{range:Q.mediaRange,responseType:"arraybuffer"},onload:function(W){var B=U.getSamplesInfo(W.target.response),D=new Blob([W.target.response.slice(B.sampleList[0].offset,B.sampleList[0].offset+B.sampleList[0].size)],{type:"image/jpeg"}),q=window.URL.createObjectURL(D);K.push({start:Q.mediaStartTime,end:Q.mediaStartTime+Q.duration,url:q}),$&&$(q)}}),!0}})}}function G(ge,le){var z=[],K=0,R,L,$,O;for(R=0,L=ge.segments.length;R<L;R++)$=ge.segments[R],O=Object(T.getTimeBasedSegment)(f,A.getIsDynamic(),le,$.startTime,$.duration,$.timescale,$.media,$.mediaRange,K),O&&(z.push(O),O=null,K++);return z}function ee(ge){var le=C.isRelative(ge.media)?C.resolve(ge.media,_.resolve(ge.path).url):ge.media;return le?Object(T.replaceIDForTemplate)(le,ge.id):""}function J(){return V}function ie(){return te}function ue(){return te<0?null:V[te]}function ae(ge){!V||V.length===0||(ge>=V.length&&(ge=V.length-1),te=ge)}function oe(ge){for(var le,z=A.getVoRepresentations(w),K=0;K<z.length;K++)if(V[te].id===z[K].id){le=z[K];break}return H.getSegmentRequestForTime(w,le,ge)}function Z(){V=[],te=-1,w=null}return x={getTracks:J,addTracks:X,reset:Z,setTrackByIndex:ae,getCurrentTrack:ue,getCurrentTrackIndex:ie,getThumbnailRequestForTime:oe},j(),x}d.__dashjs_factory_name="ThumbnailTracks",g.default=u.default.getClassFactory(d)},"./src/streaming/utils/BaseURLSelector.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/errors/Errors.js"),l=r("./src/core/EventBus.js"),u=r("./src/core/events/Events.js"),m=r("./src/streaming/controllers/BlacklistController.js"),y=r("./src/streaming/utils/baseUrlResolution/DVBSelector.js"),T=r("./src/streaming/utils/baseUrlResolution/BasicSelector.js"),E=r("./src/core/FactoryMaker.js"),t=r("./src/streaming/vo/DashJSError.js"),e=r("./src/streaming/utils/SupervisorTools.js"),n=r("./src/streaming/utils/baseUrlResolution/ContentSteeringSelector.js"),i=r("./src/core/Settings.js");function d(){var P=this.context,b=Object(l.default)(P).getInstance(),A=Object(i.default)(P).getInstance(),_,h,f,v,c,S;function p(){h=Object(m.default)(P).create({updateEventName:u.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:u.default.SERVICE_LOCATION_BLACKLIST_ADD}),f=Object(T.default)(P).create({blacklistController:h}),v=Object(y.default)(P).create({blacklistController:h}),c=Object(n.default)(P).create(),c.setConfig({blacklistController:h}),S=f}function C(te){te.selector&&(S=te.selector),te.contentSteeringSelector&&(c=te.contentSteeringSelector)}function x(te){Object(e.checkParameterType)(te,"boolean"),S=te?v:f}function V(te){if(te){if(A.get().streaming.applyContentSteering){var w=c.selectBaseUrlIndex(te);!isNaN(w)&&w!==-1&&(te.selectedIdx=w)}if(!isNaN(te.selectedIdx))return te.baseUrls[te.selectedIdx];var F=S.select(te.baseUrls);if(!F){b.trigger(u.default.URL_RESOLUTION_FAILED,{error:new t.default(o.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,o.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),S===f&&H();return}return te.selectedIdx=te.baseUrls.indexOf(F),F}}function H(){h.reset()}return _={chooseSelector:x,select:V,reset:H,setConfig:C},p(),_}d.__dashjs_factory_name="BaseURLSelector",g.default=E.default.getClassFactory(d)},"./src/streaming/utils/BoxParser.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/Debug.js"),l=r("./src/streaming/utils/IsoFile.js"),u=r("./src/core/FactoryMaker.js"),m=r("./node_modules/codem-isoboxer/dist/iso_boxer.js"),y=r.n(m),T=r("./src/streaming/vo/IsoBoxSearchInfo.js");function E(){var t,e,n=this.context;function i(){t=Object(o.default)(n).getInstance().getLogger(e)}function d(c){if(!c)return null;c.fileStart===void 0&&(c.fileStart=0);var S=y.a.parseBuffer(c),p=Object(l.default)(n).create();return p.setData(S),p}function P(c,S,p){if(p===void 0&&(p=0),!S||p+8>=S.byteLength)return new T.default(0,!1);for(var C=S instanceof ArrayBuffer?new Uint8Array(S):S,x,V=0;p<C.byteLength;){var H=_(C,p),te=h(C,p+4);if(H===0)break;p+H<=C.byteLength&&(c.indexOf(te)>=0?x=new T.default(p,!0,H):V=p+H),p+=H}return x||new T.default(V,!1)}function b(c){if(!c||c.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var S=d(c),p=S.getBoxes("moof"),C=S.getBoxes("mfhd"),x,V,H,te,w,F,M,U,j,X,Y,se,G,ee,J,ie,ue;ie=S.getBoxes("moof").length,J=C[C.length-1].sequence_number,H=0,F=[];var ae=-1,oe=-1;for(Y=0;Y<p.length;Y++){var Z=p[Y],ge=Z.getChildBoxes("traf");for(j=0;j<ge.length;j++){var le=ge[j],z=le.getChildBox("tfhd"),K=le.getChildBox("tfdt");w=K.baseMediaDecodeTime;var R=le.getChildBoxes("trun"),L=le.getChildBoxes("subs");for(X=0;X<R.length;X++){var $=R[X];for(H=$.sample_count,ee=(z.base_data_offset||0)+($.data_offset||0),U=0;U<H;U++){M=$.samples[U],x=M.sample_duration!==void 0?M.sample_duration:z.default_sample_duration,te=M.sample_size!==void 0?M.sample_size:z.default_sample_size,V=M.sample_composition_time_offset!==void 0?M.sample_composition_time_offset:0;var O={dts:w,cts:w+V,duration:x,offset:Z.offset+ee,size:te,subSizes:[te]};if(L)for(se=0;se<L.length;se++){var Q=L[se];if(ae<Q.entry_count-1&&U>oe&&(ae++,oe+=Q.entries[ae].sample_delta),U==oe){O.subSizes=[];var ne=Q.entries[ae];for(G=0;G<ne.subsample_count;G++)O.subSizes.push(ne.subsamples[G].subsample_size)}}F.push(O),ee+=te,w+=x}}ue=w-K.baseMediaDecodeTime}}return{sampleList:F,lastSequenceNumber:J,totalDuration:ue,numSequences:ie}}function A(c){var S=d(c),p=S?S.getBox("mdhd"):void 0;return p?p.timescale:NaN}function _(c,S){return c[S+3]>>>0|c[S+2]<<8>>>0|c[S+1]<<16>>>0|c[S]<<24>>>0}function h(c,S){return String.fromCharCode(c[S++])+String.fromCharCode(c[S++])+String.fromCharCode(c[S++])+String.fromCharCode(c[S])}function f(c){var S=null,p,C,x=d(c);if(!x)return S;var V=x.getBox("ftyp"),H=x.getBox("moov");return t.debug("Searching for initialization."),H&&H.isComplete&&(p=V?V.offset:H.offset,C=H.offset+H.size-1,S=p+"-"+C,t.debug("Found the initialization.  Range: "+S)),S}function v(c,S,p){if(p===void 0&&(p=0),!S||p+8>=S.byteLength)return new T.default(0,!1);for(var C=S instanceof ArrayBuffer?new Uint8Array(S):S,x,V=0;p<C.byteLength;){var H=_(C,p),te=h(C,p+4);if(H===0)break;p+H<=C.byteLength&&(c.indexOf(te)>=0?x=new T.default(p,!0,H,te):V=p+H),p+=H}return x||new T.default(V,!1)}return e={parse:d,findLastTopIsoBoxCompleted:P,getMediaTimescaleFromMoov:A,getSamplesInfo:b,findInitRange:f,parsePayload:v},i(),e}E.__dashjs_factory_name="BoxParser",g.default=u.default.getSingletonFactory(E)},"./src/streaming/utils/Capabilities.js":function(I,g,r){"use strict";r.r(g),r.d(g,"supportsMediaSource",function(){return y});var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/thumbnail/ThumbnailTracks.js"),u=r("./src/streaming/constants/Constants.js"),m=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function y(){var E="WebKitMediaSource"in window,t="MediaSource"in window;return E||t}function T(){var E,t,e;function n(){e=!1}function i(c){c&&c.settings&&(t=c.settings)}function d(){return e}function P(c){e=c}function b(c,S){return S!==u.default.AUDIO&&S!==u.default.VIDEO?Promise.resolve(!0):A(c,S)?h(c,S):_(c)}function A(c,S){return t.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(c.codec&&S===u.default.AUDIO||S===u.default.VIDEO&&c.codec&&c.width&&c.height&&c.bitrate&&c.framerate)}function _(c){return new Promise(function(S){if(!c||!c.codec){S(!1);return}var p=c.codec;if(c.width&&c.height&&(p+=';width="'+c.width+'";height="'+c.height+'"'),"MediaSource"in window&&MediaSource.isTypeSupported(p)){S(!0);return}else if("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(p)){S(!0);return}S(!1)})}function h(c,S){return new Promise(function(p){if(!c||!c.codec){p(!1);return}var C={type:"media-source"};C[S]={},C[S].contentType=c.codec,C[S].width=c.width,C[S].height=c.height,C[S].bitrate=parseInt(c.bitrate),C[S].framerate=parseFloat(c.framerate),navigator.mediaCapabilities.decodingInfo(C).then(function(x){p(x.supported)}).catch(function(){p(!1)})})}function f(c){try{return l.THUMBNAILS_SCHEME_ID_URIS.indexOf(c.schemeIdUri)!==-1}catch{return!0}}function v(c,S){for(var p=c.split(".")[0],C=S.indexOf(p)===0,x,V=0;V<m.length;V++)if(m[V].codec===p){x=m[V];break}return x?C||x.compatibleCodecs.some(function(H){return S.indexOf(H)===0}):C}return E={setConfig:i,supportsMediaSource:y,supportsEncryptedMedia:d,supportsCodec:b,setEncryptedMediaSupported:P,supportsEssentialProperty:f,codecRootCompatibleWithCodec:v},n(),E}T.__dashjs_factory_name="Capabilities",g.default=o.default.getSingletonFactory(T)},"./src/streaming/utils/CapabilitiesFilter.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u=r("./src/streaming/constants/Constants.js"),m=r("./src/core/EventBus.js"),y=r("./src/core/events/Events.js");function T(){var E=this.context,t=Object(m.default)(E).getInstance(),e,n,i,d,P,b;function A(){b=Object(l.default)(E).getInstance().getLogger(e)}function _(H){H&&(H.adapter&&(n=H.adapter),H.capabilities&&(i=H.capabilities),H.settings&&(d=H.settings),H.customParametersModel&&(P=H.customParametersModel))}function h(H){return new Promise(function(te){var w=[];w.push(f(u.default.VIDEO,H)),w.push(f(u.default.AUDIO,H)),Promise.all(w).then(function(){d.get().streaming.capabilities.filterUnsupportedEssentialProperties&&x(H),V(H),te()}).catch(function(){te()})})}function f(H,te){if(!te||!te.Period_asArray||te.Period_asArray.length===0)return Promise.resolve();var w=[];return te.Period_asArray.forEach(function(F){w.push(v(F,H))}),Promise.all(w)}function v(H,te){return new Promise(function(w){if(!H||!H.AdaptationSet_asArray||H.AdaptationSet_asArray.length===0){w();return}var F=[];H.AdaptationSet_asArray.forEach(function(M){n.getIsTypeOf(M,te)&&F.push(c(M,te))}),Promise.all(F).then(function(){H.AdaptationSet_asArray=H.AdaptationSet_asArray.filter(function(M){var U=M.Representation_asArray&&M.Representation_asArray.length>0;return U||(t.trigger(y.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:M}),b.warn("AdaptationSet has been removed because of no supported Representation")),U}),w()}).catch(function(){w()})})}function c(H,te){return new Promise(function(w){if(!H.Representation_asArray||H.Representation_asArray.length===0){w();return}var F=[],M=[];H.Representation_asArray.forEach(function(U,j){var X=n.getCodec(H,j,!1),Y=S(te,U,X);M.push(Y),F.push(i.supportsCodec(Y,te))}),Promise.all(F).then(function(U){H.Representation_asArray=H.Representation_asArray.filter(function(j,X){return U[X]||b.debug("[Stream] Codec ".concat(M[X].codec," not supported ")),U[X]}),w()}).catch(function(){w()})})}function S(H,te,w){switch(H){case u.default.VIDEO:return p(te,w);case u.default.AUDIO:return C(te,w);default:return null}}function p(H,te){var w=H.width||null,F=H.height||null,M=H.frameRate||null,U=H.bandwidth||null;return{codec:te,width:w,height:F,framerate:M,bitrate:U}}function C(H,te){var w=H.audioSamplingRate||null,F=H.bandwidth||null;return{codec:te,bitrate:F,samplerate:w}}function x(H){!H||!H.Period_asArray||H.Period_asArray.length===0||H.Period_asArray.forEach(function(te){te.AdaptationSet_asArray=te.AdaptationSet_asArray.filter(function(w){return!w.Representation_asArray||w.Representation_asArray.length===0?!0:(w.Representation_asArray=w.Representation_asArray.filter(function(F){var M=n.getEssentialPropertiesForRepresentation(F);if(M&&M.length>0)for(var U=0;U<M.length;){if(!i.supportsEssentialProperty(M[U]))return b.debug("[Stream] EssentialProperty not supported: "+M[U].schemeIdUri),!1;U+=1}return!0}),w.Representation_asArray&&w.Representation_asArray.length>0)})})}function V(H){var te=P.getCustomCapabilitiesFilters();!te||te.length===0||!H||!H.Period_asArray||H.Period_asArray.length===0||H.Period_asArray.forEach(function(w){w.AdaptationSet_asArray=w.AdaptationSet_asArray.filter(function(F){return!F.Representation_asArray||F.Representation_asArray.length===0?!0:(F.Representation_asArray=F.Representation_asArray.filter(function(M){return!te.some(function(U){return!U(M)})}),F.Representation_asArray&&F.Representation_asArray.length>0)})})}return e={setConfig:_,filterUnsupportedFeatures:h},A(),e}T.__dashjs_factory_name="CapabilitiesFilter",g.default=o.default.getSingletonFactory(T)},"./src/streaming/utils/CustomTimeRanges.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/utils/SupervisorTools.js");function u(){var m=[],y=0;function T(d,P){var b=0;for(b=0;b<this.customTimeRangeArray.length&&d>this.customTimeRangeArray[b].start;b++);for(this.customTimeRangeArray.splice(b,0,{start:d,end:P}),b=0;b<this.customTimeRangeArray.length-1;b++)this.mergeRanges(b,b+1)&&b--;this.length=this.customTimeRangeArray.length}function E(){this.customTimeRangeArray=[],this.length=0}function t(d,P){for(var b=0;b<this.customTimeRangeArray.length;b++)if(d<=this.customTimeRangeArray[b].start&&P>=this.customTimeRangeArray[b].end)this.customTimeRangeArray.splice(b,1),b--;else if(d>this.customTimeRangeArray[b].start&&P<this.customTimeRangeArray[b].end){this.customTimeRangeArray.splice(b+1,0,{start:P,end:this.customTimeRangeArray[b].end}),this.customTimeRangeArray[b].end=d;break}else d>this.customTimeRangeArray[b].start&&d<this.customTimeRangeArray[b].end?this.customTimeRangeArray[b].end=d:P>this.customTimeRangeArray[b].start&&P<this.customTimeRangeArray[b].end&&(this.customTimeRangeArray[b].start=P);this.length=this.customTimeRangeArray.length}function e(d,P){var b=this.customTimeRangeArray[d],A=this.customTimeRangeArray[P];return b.start<=A.start&&A.start<=b.end&&b.end<=A.end?(b.end=A.end,this.customTimeRangeArray.splice(P,1),!0):A.start<=b.start&&b.start<=A.end&&A.end<=b.end?(b.start=A.start,this.customTimeRangeArray.splice(P,1),!0):A.start<=b.start&&b.start<=A.end&&b.end<=A.end?(this.customTimeRangeArray.splice(d,1),!0):b.start<=A.start&&A.start<=b.end&&A.end<=b.end?(this.customTimeRangeArray.splice(P,1),!0):!1}function n(d){return Object(l.checkInteger)(d),d>=this.customTimeRangeArray.length||d<0?NaN:this.customTimeRangeArray[d].start}function i(d){return Object(l.checkInteger)(d),d>=this.customTimeRangeArray.length||d<0?NaN:this.customTimeRangeArray[d].end}return{customTimeRangeArray:m,length:y,add:T,clear:E,remove:t,mergeRanges:e,start:n,end:i}}u.__dashjs_factory_name="CustomTimeRanges",g.default=o.default.getClassFactory(u)},"./src/streaming/utils/DOMStorage.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u=r("./src/streaming/constants/Constants.js"),m=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],y="dashjs_?_bitrate",T="dashjs_?_settings",E="localStorage",t="sessionStorage",e="lastBitrate",n="lastMediaSettings";function i(P){P=P||{};var b=this.context,A=P.settings,_,h,f;function v(){h=Object(l.default)(b).getInstance().getLogger(_),S()}function c(F){if(f!==void 0)return f;f=!1;var M="1",U="1",j;try{typeof window<"u"&&(j=window[F])}catch(X){return h.warn("DOMStorage access denied: "+X.message),f}if(!j||F!==E&&F!==t)return f;try{j.setItem(M,U),j.removeItem(M),f=!0}catch(X){h.warn("DOMStorage is supported, but cannot be used: "+X.message)}return f}function S(){c(E)&&m.forEach(function(F){var M=localStorage.getItem(F.oldKey);if(M){localStorage.removeItem(F.oldKey);try{localStorage.setItem(F.newKey,M)}catch(U){h.error(U.message)}}})}function p(){var F=6e5;return Math.round(new Date().getTime()/F)*F}function C(F,M){return c(F)&&A.get().streaming[M+"CachingInfo"].enabled}function x(){if(!A)throw new Error(u.default.MISSING_CONFIG_ERROR)}function V(F){if(x(),!A.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;var M=null;if(C(E,n)){var U=T.replace(/\?/,F);try{var j=JSON.parse(localStorage.getItem(U))||{},X=new Date().getTime()-parseInt(j.timestamp,10)>=A.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;M=j.settings,X&&(localStorage.removeItem(U),M=null)}catch{return null}}return M}function H(F){if(x(),!A.get().streaming.lastBitrateCachingInfo.enabled)return NaN;var M=NaN;if(C(E,e)){var U=y.replace(/\?/,F);try{var j=JSON.parse(localStorage.getItem(U))||{},X=new Date().getTime()-parseInt(j.timestamp,10)>=A.get().streaming.lastBitrateCachingInfo.ttl||!1,Y=parseFloat(j.bitrate);!isNaN(Y)&&!X?(M=Y,h.debug("Last saved bitrate for "+F+" was "+Y)):X&&localStorage.removeItem(U)}catch{return null}}return M}function te(F,M){if(C(E,n)){var U=T.replace(/\?/,F);try{localStorage.setItem(U,JSON.stringify({settings:M,timestamp:p()}))}catch(j){h.error(j.message)}}}function w(F,M){if(C(E,e)&&M){var U=y.replace(/\?/,F);try{localStorage.setItem(U,JSON.stringify({bitrate:M.toFixed(3),timestamp:p()}))}catch(j){h.error(j.message)}}}return _={getSavedBitrateSettings:H,setSavedBitrateSettings:w,getSavedMediaSettings:V,setSavedMediaSettings:te},v(),_}i.__dashjs_factory_name="DOMStorage";var d=o.default.getSingletonFactory(i);g.default=d},"./src/streaming/utils/DefaultURLUtils.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(){var u,m=/^[a-z][a-z0-9+\-_.]*:/i,y=/^https?:\/\//i,T=/^https:\/\//i,E=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,t=function(C,x){try{return new window.URL(C,x).toString()}catch{return C}},e=function(C,x){var V=i;if(!x||!A(C))return C;_(C)&&(V=d),h(C)&&(V=b);var H=V(x),te=H.charAt(H.length-1)!=="/"&&C.charAt(0)!=="/"?"/":"";return[H,C].join(te)};function n(){try{var p=new window.URL("x","http://y");u=t}catch{}finally{u=u||e}}function i(p){var C=p.indexOf("/"),x=p.lastIndexOf("/");return C!==-1?x===C+1?p:(p.indexOf("?")!==-1&&(p=p.substring(0,p.indexOf("?"))),p.substring(0,x+1)):""}function d(p){var C=p.match(E);return C?C[1]:""}function P(p){var C=/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(p);return C[2].substring(1)}function b(p){var C=p.match(m);return C?C[0]:""}function A(p){return!m.test(p)}function _(p){return A(p)&&p.charAt(0)==="/"}function h(p){return p.indexOf("//")===0}function f(p){return y.test(p)}function v(p){return T.test(p)}function c(p,C){return u(p,C)}n();var S={parseBaseUrl:i,parseOrigin:d,parseScheme:b,isRelative:A,isPathAbsolute:_,isSchemeRelative:h,isHTTPURL:f,isHTTPS:v,removeHostname:P,resolve:c};return S}l.__dashjs_factory_name="DefaultURLUtils",g.default=o.default.getSingletonFactory(l)},"./src/streaming/utils/EBMLParser.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(u){u=u||{};var m,y=new DataView(u.data),T=0;function E(){return T}function t(h){T=h}function e(h,f){var v=!0,c=0,S,p;if(f===void 0&&(f=!1),h.tag>16777215?(y.getUint32(T)!==h.tag&&(v=!1),c=4):h.tag>65535?(S=y.getUint16(T),p=y.getUint8(T+2),S*256+p!==h.tag&&(v=!1),c=3):h.tag>255?(y.getUint16(T)!==h.tag&&(v=!1),c=2):(y.getUint8(T)!==h.tag&&(v=!1),c=1),!v&&h.required&&!f)throw new Error("required tag not found");return v&&(T+=c),v}function n(h,f){var v=e(h,f);return v&&P(),v}function i(h){var f;return e(h),f=P(),m[h.parse](f)}function d(h,f){var v=e(h,f),c;return v&&(c=P(),T+=c),v}function P(h){var f=1,v=128,c=8,S=-1,p=0,C=y.getUint8(T),x=0;for(x=0;x<c;x+=1){if((C&v)===v){p=h===void 0?C&~v:C,S=x;break}v>>=1}for(x=0;x<S;x+=1,f+=1)p=p<<8|255&y.getUint8(T+f);return T+=f,p}function b(h){var f;switch(h){case 4:f=y.getFloat32(T),T+=4;break;case 8:f=y.getFloat64(T),T+=8;break}return f}function A(h){for(var f=0,v=0;v<h;v+=1)f<<=8,f|=y.getUint8(T+v)&255;return T+=h,f}function _(){return T<y.byteLength}return m={getPos:E,setPos:t,consumeTag:e,consumeTagAndSize:n,parseTag:i,skipOverElement:d,getMatroskaCodedNum:P,getMatroskaFloat:b,getMatroskaUint:A,moreData:_},m}l.__dashjs_factory_name="EBMLParser",g.default=o.default.getClassFactory(l)},"./src/streaming/utils/ErrorHandler.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/EventBus.js"),l=r("./src/core/events/Events.js"),u=r("./src/core/FactoryMaker.js");function m(){var y,T=this.context,E=Object(o.default)(T).getInstance();function t(e){E.trigger(l.default.ERROR,{error:e})}return y={error:t},y}m.__dashjs_factory_name="ErrorHandler",g.default=u.default.getSingletonFactory(m)},"./src/streaming/utils/InitCache.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(){var u={};function m(t){var e=t.streamId,n=t.representationId;u[e]=u[e]||{},u[e][n]=t}function y(t,e){return u&&u[t]&&u[t][e]?u[t][e]:null}function T(){u={}}var E={save:m,extract:y,reset:T};return E}l.__dashjs_factory_name="InitCache",g.default=o.default.getSingletonFactory(l)},"./src/streaming/utils/IsoFile.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/vo/IsoBox.js"),l=r("./src/core/FactoryMaker.js");function u(){var m,y;function T(i){return!i||!y||!y.boxes||y.boxes.length===0||typeof y.fetch!="function"?null:n(y.fetch(i))}function E(i){var d=[];if(!i||!y||typeof y.fetchAll!="function")return d;for(var P=y.fetchAll(i),b,A=0,_=P.length;A<_;A++)b=n(P[A]),b&&d.push(b);return d}function t(i){y=i}function e(){if(!y||!y.boxes||!y.boxes.length)return null;var i=y.boxes[y.boxes.length-1].type,d=E(i);return d.length>0?d[d.length-1]:null}function n(i){if(!i)return null;var d=new o.default(i);return i.hasOwnProperty("_incomplete")&&(d.isComplete=!i._incomplete),d}return m={getBox:T,getBoxes:E,setData:t,getLastBox:e},m}u.__dashjs_factory_name="IsoFile",g.default=l.default.getClassFactory(u)},"./src/streaming/utils/ObjectUtils.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./node_modules/fast-deep-equal/index.js"),u=r.n(l);function m(){var y;function T(E,t){return u()(E,t)}return y={areEqual:T},y}m.__dashjs_factory_name="ObjectUtils",g.default=o.default.getSingletonFactory(m)},"./src/streaming/utils/RequestModifier.js":function(I,g,r){"use strict";r.r(g),r.d(g,"modifyRequest",function(){return l});var o=r("./src/core/FactoryMaker.js");function l(m,y){var T={url:m.url,method:m.method,headers:Object.assign({},m.headers),credentials:m.withCredentials?"include":void 0};return Promise.resolve(y.modifyRequest(T)).then(function(){return Object.assign(m,T,{withCredentials:T.credentials==="include"})})}function u(){var m;function y(E){return E}function T(E,t){var e=t.url;return E}return m={modifyRequest:null,modifyRequestURL:y,modifyRequestHeader:T},m}u.__dashjs_factory_name="RequestModifier",g.default=o.default.getSingletonFactory(u)},"./src/streaming/utils/SupervisorTools.js":function(I,g,r){"use strict";r.r(g),r.d(g,"checkParameterType",function(){return u}),r.d(g,"checkInteger",function(){return m}),r.d(g,"checkRange",function(){return y}),r.d(g,"checkIsVideoOrAudioType",function(){return T});var o=r("./src/streaming/constants/Constants.js");function l(E){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(E)}function u(E,t){if(l(E)!==t)throw o.default.BAD_ARGUMENT_ERROR}function m(E){var t=E!==null&&!isNaN(E)&&E%1===0;if(!t)throw o.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function y(E,t,e){if(E<t||E>e)throw o.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function T(E){if(typeof E!="string"||E!==o.default.AUDIO&&E!==o.default.VIDEO)throw o.default.BAD_ARGUMENT_ERROR}},"./src/streaming/utils/TTMLParser.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u=r("./src/core/EventBus.js"),m=r("./src/core/events/Events.js"),y=r("./node_modules/imsc/src/main/js/main.js"),T=r.n(y),E=r("./src/streaming/MediaPlayerEvents.js"),t=r("./src/streaming/constants/ConformanceViolationConstants.js");function e(){var n=this.context,i=Object(u.default)(n).getInstance(),d,P,b=0;function A(){P=Object(l.default)(n).getInstance().getLogger(d)}function _(){var f="cue_TTML_"+b;return b++,f}function h(f,v,c,S,p){var C="",x=[],V,H,te,w={},F={},M="",U="",j={onOpenTag:function(ee,J,ie){if(ie[" imagetype"]&&!ie[" imageType"]&&(i.trigger(E.default.CONFORMANCE_VIOLATION,{level:t.default.LEVELS.ERROR,event:t.default.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),ie[" imageType"]=ie[" imagetype"]),J==="image"&&(ee==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||ee==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!ie[" imageType"]||ie[" imageType"].value!=="PNG"){P.warn("smpte-tt imageType != PNG. Discarded");return}M=ie["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){M&&(F[M]=U.trim()),U="",M=""},onText:function(ee){M&&(U=U+ee)}};if(!f)throw C="no ttml data to parse",new Error(C);w.data=f,i.trigger(m.default.TTML_TO_PARSE,w);var X=Object(y.fromXML)(w.data,function(G){C=G},j);i.trigger(m.default.TTML_PARSED,{ttmlString:w.data,ttmlDoc:X});var Y=X.getMediaTimeEvents();for(te=0;te<Y.length;te++){var se=Object(y.generateISD)(X,Y[te],function(G){C=G});se.contents.some(function(G){return G.contents.length})&&(V=Y[te]+v<c?c:Y[te]+v,H=Y[te+1]+v>S?S:Y[te+1]+v,V<H&&x.push({start:V,end:H,type:"html",cueID:_(),isd:se,images:p,embeddedImages:F}))}if(C!=="")throw P.error(C),new Error(C);return x}return d={parse:h},A(),d}e.__dashjs_factory_name="TTMLParser",g.default=o.default.getSingletonFactory(e)},"./src/streaming/utils/URLUtils.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/streaming/utils/DefaultURLUtils.js");function u(){var y,T,E=[],t=this.context;function e(C){var x;for(x=0;x<E.length;x++){var V=E[x].regex;if(V.test(C))return E[x].utils}return T}function n(){T=Object(l.default)(t).getInstance()}function i(C,x){E.push({regex:C,utils:x})}function d(C,x,V){var H=e(V||x);return H&&typeof H[C]=="function"?H[C](x,V):T[C](x,V)}function P(C){return d("parseBaseUrl",C)}function b(C){return d("parseOrigin",C)}function A(C){return d("removeHostname",C)}function _(C){return d("parseScheme",C)}function h(C){return d("isRelative",C)}function f(C){return d("isPathAbsolute",C)}function v(C){return d("isSchemeRelative",C)}function c(C){return d("isHTTPURL",C)}function S(C){return d("isHTTPS",C)}function p(C,x){return d("resolve",C,x)}return n(),y={registerUrlRegex:i,parseBaseUrl:P,parseOrigin:b,parseScheme:_,isRelative:h,isPathAbsolute:f,isSchemeRelative:v,isHTTPURL:c,isHTTPS:S,removeHostname:A,resolve:p},y}u.__dashjs_factory_name="URLUtils";var m=o.default.getSingletonFactory(u);g.default=m},"./src/streaming/utils/VTTParser.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/core/Debug.js"),u="WEBVTT";function m(){var y=this.context,T,E,t,e,n,i;function d(){E=Object(l.default)(y).getInstance().getLogger(T),t=/(?:\r\n|\r|\n)/gm,e=/-->/,n=/(^[\s]+|[\s]+$)/g,i=/\s\b/g}function P(f){var v=[],c,S;if(!f)return v;f=f.split(t),c=f.length,S=-1;for(var p=0;p<c;p++){var C=f[p];if(C.length>0&&C!==u&&C.match(e)){var x=A(C),V=x.cuePoints,H=x.styles,te=h(f,p+1),w=b(V[0].replace(n,"")),F=b(V[1].replace(n,""));!isNaN(w)&&!isNaN(F)&&w>=S&&F>w?te!==""?(S=w,v.push({start:w,end:F,data:te,styles:H})):E.error("Skipping cue due to empty/malformed cue text"):E.error("Skipping cue due to incorrect cue timing")}}return v}function b(f){var v=f.split(":"),c=v.length-1;return f=parseInt(v[c-1],10)*60+parseFloat(v[c]),c===2&&(f+=parseInt(v[0],10)*3600),f}function A(f){var v=f.split(e),c=v[1].split(i);return c.shift(),v[1]=c[0],c.shift(),{cuePoints:v,styles:_(c)}}function _(f){var v={};return f.forEach(function(c){if(c.split(/:/).length>1){var S=c.split(/:/)[1];S&&S.search(/%/)!=-1&&(S=parseInt(S.replace(/%/,""),10)),(c.match(/align/)||c.match(/A/))&&(v.align=S),(c.match(/line/)||c.match(/L/))&&(v.line=S),(c.match(/position/)||c.match(/P/))&&(v.position=S),(c.match(/size/)||c.match(/S/))&&(v.size=S)}}),v}function h(f,v){for(var c=v,S="",p="",C;f[c]!==""&&c<f.length;)c++;if(C=c-v,C>1)for(var x=0;x<C;x++)if(p=f[v+x],!p.match(e))S+=p,x!==C-1&&(S+=`
`);else{S="";break}else p=f[v],p.match(e)||(S=p);return S}return T={parse:P},d(),T}m.__dashjs_factory_name="VTTParser",g.default=o.default.getSingletonFactory(m)},"./src/streaming/utils/VttCustomRenderingParser.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(){var u,m;function y(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(m=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}function T(E){var t=[];return m.oncue=function(e){e.start=e.startTime,e.end=e.endTime,e.data=e.text,e.styles={align:e.align,line:e.line,position:e.position,size:e.size},t.push(e)},m.parse(E),t}return u={parse:T},y(),u}l.__dashjs_factory_name="VttCustomRenderingParser",g.default=o.default.getSingletonFactory(l)},"./src/streaming/utils/baseUrlResolution/BasicSelector.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(u){u=u||{};var m,y=u.blacklistController;function T(E){var t=0,e;return E&&E.some(function(n,i){return t=i,!y.contains(n.serviceLocation)})&&(e=E[t]),e}return m={select:T},m}l.__dashjs_factory_name="BasicSelector",g.default=o.default.getClassFactory(l)},"./src/streaming/utils/baseUrlResolution/ContentSteeringSelector.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js"),l=r("./src/dash/controllers/ContentSteeringController.js");function u(){var m=this.context,y,T,E;function t(){T=Object(l.default)(m).getInstance()}function e(d){d.blacklistController&&(E=d.blacklistController),d.contentSteeringController&&(T=d.contentSteeringController)}function n(d){var P=NaN;if(isNaN(d.selectedIdx)){var b=T.getSteeringDataFromManifest();b&&b.defaultServiceLocation&&(P=i([b.defaultServiceLocation],d.baseUrls))}var A=T.getCurrentSteeringResponseData();return d.baseUrls&&d.baseUrls.length&&A&&A.serviceLocationPriority&&A.serviceLocationPriority.length&&(P=i(A.serviceLocationPriority,d.baseUrls)),P}function i(){for(var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=0,A=NaN,_=function(){var v=d[b],c=P.findIndex(function(S){return S.serviceLocation&&S.serviceLocation===v});if(c!==-1&&!E.contains(P[c].serviceLocation))return A=c,"break";b+=1};b<d.length;){var h=_();if(h==="break")break}return A}return y={selectBaseUrlIndex:n,setConfig:e},t(),y}u.__dashjs_factory_name="ContentSteeringSelector",g.default=o.default.getClassFactory(u)},"./src/streaming/utils/baseUrlResolution/DVBSelector.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/core/FactoryMaker.js");function l(u){u=u||{};var m,y=u.blacklistController;function T(e){var n=[],i=function(b){return!(n.length&&b.dvb_priority&&n.indexOf(b.dvb_priority)!==-1)},d=function(b){return y.contains(b.serviceLocation)?(b.dvb_priority&&n.push(b.dvb_priority),!1):!0};return e.filter(d).filter(i)}function E(e){var n=function(f,v){var c=f.dvb_priority-v.dvb_priority;return isNaN(c)?0:c},i=function(f,v,c){return!v||c[0].dvb_priority&&f.dvb_priority&&c[0].dvb_priority===f.dvb_priority},d=0,P=[],b=0,A,_;if(_=e.sort(n).filter(i),_.length)return _.length>1&&(_.forEach(function(h){d+=h.dvb_weight,P.push(d)}),A=Math.floor(Math.random()*(d-1)),P.every(function(h,f){return b=f,!(A<h)})),_[b]}function t(e){return e&&E(T(e))}return m={select:t},m}l.__dashjs_factory_name="DVBSelector",g.default=o.default.getClassFactory(l)},"./src/streaming/vo/BitrateInfo.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN});g.default=E},"./src/streaming/vo/DashJSError.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(e,n,i){T(this,t),this.code=e||null,this.message=n||null,this.data=i||null});g.default=E},"./src/streaming/vo/DataChunk.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null});g.default=E},"./src/streaming/vo/FragmentRequest.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/vo/metrics/HTTPRequest.js");function l(e){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l(e)}function u(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function m(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,T(d.key),d)}}function y(e,n,i){return n&&m(e.prototype,n),i&&m(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function T(e){var n=E(e,"string");return l(n)==="symbol"?n:String(n)}function E(e,n){if(l(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(l(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}var t=function(){function e(n){u(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=n||null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}return y(e,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===o.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(i){this.type=i&&i.init?o.HTTPRequest.INIT_SEGMENT_TYPE:o.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=i&&i.url?i.url:null,this.range=i&&i.range?i.range.start+"-"+i.range.end:null,this.mediaType=i&&i.mediaType?i.mediaType:null}}]),e}();t.ACTION_DOWNLOAD="download",t.ACTION_COMPLETE="complete",g.default=t},"./src/streaming/vo/HeadRequest.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/vo/FragmentRequest.js");function l(_){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},l(_)}function u(_,h){for(var f=0;f<h.length;f++){var v=h[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,y(v.key),v)}}function m(_,h,f){return h&&u(_.prototype,h),f&&u(_,f),Object.defineProperty(_,"prototype",{writable:!1}),_}function y(_){var h=T(_,"string");return l(h)==="symbol"?h:String(h)}function T(_,h){if(l(_)!=="object"||_===null)return _;var f=_[Symbol.toPrimitive];if(f!==void 0){var v=f.call(_,h||"default");if(l(v)!=="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(_)}function E(_,h){if(!(_ instanceof h))throw new TypeError("Cannot call a class as a function")}function t(_,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(h&&h.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),h&&e(_,h)}function e(_,h){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,c){return v.__proto__=c,v},e(_,h)}function n(_){var h=P();return function(){var v=b(_),c;if(h){var S=b(this).constructor;c=Reflect.construct(v,arguments,S)}else c=v.apply(this,arguments);return i(this,c)}}function i(_,h){if(h&&(l(h)==="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(_)}function d(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(_){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},b(_)}var A=function(_){t(f,_);var h=n(f);function f(v){var c;return E(this,f),c=h.call(this,v),c.checkForExistenceOnly=!0,c}return m(f)}(o.default);g.default=A},"./src/streaming/vo/IsoBox.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function m(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=T(t,"string");return o(e)==="symbol"?e:String(e)}function T(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E=function(){function t(e){if(l(this,t),this.offset=e._offset,this.type=e.type,this.size=e.size,this.boxes=[],e.boxes)for(var n=0;n<e.boxes.length;n++)this.boxes.push(new t(e.boxes[n]));switch(this.isComplete=!0,e.type){case"sidx":if(this.timescale=e.timescale,this.earliest_presentation_time=e.earliest_presentation_time,this.first_offset=e.first_offset,this.references=e.references,e.references){this.references=[];for(var i=0;i<e.references.length;i++){var d={reference_type:e.references[i].reference_type,referenced_size:e.references[i].referenced_size,subsegment_duration:e.references[i].subsegment_duration};this.references.push(d)}}break;case"emsg":this.id=e.id,this.version=e.version===1?1:0,this.value=e.value,this.timescale=e.timescale,this.scheme_id_uri=e.scheme_id_uri,this.presentation_time_delta=e.version===1?e.presentation_time:e.presentation_time_delta,this.event_duration=e.event_duration,this.message_data=e.message_data;break;case"mdhd":this.timescale=e.timescale;break;case"mfhd":this.sequence_number=e.sequence_number;break;case"subs":this.entry_count=e.entry_count,this.entries=e.entries;break;case"tfhd":this.base_data_offset=e.base_data_offset,this.sample_description_index=e.sample_description_index,this.default_sample_duration=e.default_sample_duration,this.default_sample_size=e.default_sample_size,this.default_sample_flags=e.default_sample_flags,this.flags=e.flags;break;case"tfdt":this.version=e.version,this.baseMediaDecodeTime=e.baseMediaDecodeTime,this.flags=e.flags;break;case"trun":if(this.sample_count=e.sample_count,this.first_sample_flags=e.first_sample_flags,this.data_offset=e.data_offset,this.flags=e.flags,this.samples=e.samples,e.samples){this.samples=[];for(var P=0,b=e.samples.length;P<b;P++){var A={sample_size:e.samples[P].sample_size,sample_duration:e.samples[P].sample_duration,sample_composition_time_offset:e.samples[P].sample_composition_time_offset};this.samples.push(A)}}break}}return m(t,[{key:"getChildBox",value:function(n){for(var i=0;i<this.boxes.length;i++)if(this.boxes[i].type===n)return this.boxes[i]}},{key:"getChildBoxes",value:function(n){for(var i=[],d=0;d<this.boxes.length;d++)this.boxes[d].type===n&&i.push(this.boxes[d]);return i}}]),t}();g.default=E},"./src/streaming/vo/IsoBoxSearchInfo.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(e,n,i){T(this,t),this.lastCompletedOffset=e,this.found=n,this.size=i});g.default=E},"./src/streaming/vo/MetricsList.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]});g.default=E},"./src/streaming/vo/TextRequest.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/Constants.js"),l=r("./src/streaming/vo/FragmentRequest.js");function u(h){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},u(h)}function m(h,f){for(var v=0;v<f.length;v++){var c=f[v];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(h,T(c.key),c)}}function y(h,f,v){return f&&m(h.prototype,f),v&&m(h,v),Object.defineProperty(h,"prototype",{writable:!1}),h}function T(h){var f=E(h,"string");return u(f)==="symbol"?f:String(f)}function E(h,f){if(u(h)!=="object"||h===null)return h;var v=h[Symbol.toPrimitive];if(v!==void 0){var c=v.call(h,f||"default");if(u(c)!=="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}function t(h,f){if(!(h instanceof f))throw new TypeError("Cannot call a class as a function")}function e(h,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");h.prototype=Object.create(f&&f.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),f&&n(h,f)}function n(h,f){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(c,S){return c.__proto__=S,c},n(h,f)}function i(h){var f=b();return function(){var c=A(h),S;if(f){var p=A(this).constructor;S=Reflect.construct(c,arguments,p)}else S=c.apply(this,arguments);return d(this,S)}}function d(h,f){if(f&&(u(f)==="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return P(h)}function P(h){if(h===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(h){return A=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(v){return v.__proto__||Object.getPrototypeOf(v)},A(h)}var _=function(h){e(v,h);var f=i(v);function v(c,S){var p;return t(this,v),p=f.call(this),p.url=c||null,p.type=S||null,p.mediaType=o.default.STREAM,p.responseType="",p}return y(v)}(l.default);g.default=_},"./src/streaming/vo/TextTrackInfo.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/dash/vo/MediaInfo.js");function l(_){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},l(_)}function u(_,h){for(var f=0;f<h.length;f++){var v=h[f];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,y(v.key),v)}}function m(_,h,f){return h&&u(_.prototype,h),f&&u(_,f),Object.defineProperty(_,"prototype",{writable:!1}),_}function y(_){var h=T(_,"string");return l(h)==="symbol"?h:String(h)}function T(_,h){if(l(_)!=="object"||_===null)return _;var f=_[Symbol.toPrimitive];if(f!==void 0){var v=f.call(_,h||"default");if(l(v)!=="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(h==="string"?String:Number)(_)}function E(_,h){if(!(_ instanceof h))throw new TypeError("Cannot call a class as a function")}function t(_,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(h&&h.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),h&&e(_,h)}function e(_,h){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,c){return v.__proto__=c,v},e(_,h)}function n(_){var h=P();return function(){var v=b(_),c;if(h){var S=b(this).constructor;c=Reflect.construct(v,arguments,S)}else c=v.apply(this,arguments);return i(this,c)}}function i(_,h){if(h&&(l(h)==="object"||typeof h=="function"))return h;if(h!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return d(_)}function d(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function P(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function b(_){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(f){return f.__proto__||Object.getPrototypeOf(f)},b(_)}var A=function(_){t(f,_);var h=n(f);function f(){var v;return E(this,f),v=h.call(this),v.captionData=null,v.label=null,v.defaultTrack=!1,v.kind=null,v.isFragmented=!1,v.isEmbedded=!1,v.isTTML=null,v}return m(f)}(o.default);g.default=A},"./src/streaming/vo/Thumbnail.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null});g.default=E},"./src/streaming/vo/ThumbnailTrackInfo.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""});g.default=E},"./src/streaming/vo/URIFragmentData.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null});g.default=E},"./src/streaming/vo/metrics/BufferLevel.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.t=null,this.level=null});g.default=E},"./src/streaming/vo/metrics/BufferState.js":function(I,g,r){"use strict";r.r(g);var o=r("./src/streaming/constants/MetricsConstants.js");function l(e){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},l(e)}function u(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,y(d.key),d)}}function m(e,n,i){return n&&u(e.prototype,n),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var n=T(e,"string");return l(n)==="symbol"?n:String(n)}function T(e,n){if(l(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(l(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function E(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var t=m(function e(){E(this,e),this.target=null,this.state=o.default.BUFFER_EMPTY});g.default=t},"./src/streaming/vo/metrics/DVRInfo.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.time=null,this.range=null,this.manifestInfo=null});g.default=E},"./src/streaming/vo/metrics/DroppedFrames.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.time=null,this.droppedFrames=null});g.default=E},"./src/streaming/vo/metrics/HTTPRequest.js":function(I,g,r){"use strict";r.r(g),r.d(g,"HTTPRequest",function(){return E}),r.d(g,"HTTPRequestTrace",function(){return t});function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}function l(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,m(d.key),d)}}function u(e,n,i){return n&&l(e.prototype,n),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var n=y(e,"string");return o(n)==="symbol"?n:String(n)}function y(e,n){if(o(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(o(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function T(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var E=u(function e(){T(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null}),t=u(function e(){T(this,e),this.s=null,this.d=null,this.b=[]});E.GET="GET",E.HEAD="HEAD",E.MPD_TYPE="MPD",E.XLINK_EXPANSION_TYPE="XLinkExpansion",E.INIT_SEGMENT_TYPE="InitializationSegment",E.INDEX_SEGMENT_TYPE="IndexSegment",E.MEDIA_SEGMENT_TYPE="MediaSegment",E.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",E.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",E.DVB_REPORTING_TYPE="DVBReporting",E.LICENSE="license",E.CONTENT_STEERING_TYPE="ContentSteering",E.OTHER_TYPE="other"},"./src/streaming/vo/metrics/ManifestUpdate.js":function(I,g,r){"use strict";r.r(g),r.d(g,"ManifestUpdate",function(){return E}),r.d(g,"ManifestUpdateStreamInfo",function(){return t}),r.d(g,"ManifestUpdateRepresentationInfo",function(){return e});function o(n){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o(n)}function l(n,i){for(var d=0;d<i.length;d++){var P=i[d];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(n,m(P.key),P)}}function u(n,i,d){return i&&l(n.prototype,i),d&&l(n,d),Object.defineProperty(n,"prototype",{writable:!1}),n}function m(n){var i=y(n,"string");return o(i)==="symbol"?i:String(i)}function y(n,i){if(o(n)!=="object"||n===null)return n;var d=n[Symbol.toPrimitive];if(d!==void 0){var P=d.call(n,i||"default");if(o(P)!=="object")return P;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(n)}function T(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var E=u(function n(){T(this,n),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}),t=u(function n(){T(this,n),this.id=null,this.index=null,this.start=null,this.duration=null}),e=u(function n(){T(this,n),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null})},"./src/streaming/vo/metrics/PlayList.js":function(I,g,r){"use strict";r.r(g),r.d(g,"PlayList",function(){return E}),r.d(g,"PlayListTrace",function(){return t});function o(e){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o(e)}function l(e,n){for(var i=0;i<n.length;i++){var d=n[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,m(d.key),d)}}function u(e,n,i){return n&&l(e.prototype,n),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e){var n=y(e,"string");return o(n)==="symbol"?n:String(n)}function y(e,n){if(o(e)!=="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var d=i.call(e,n||"default");if(o(d)!=="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function T(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var E=u(function e(){T(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]});E.INITIAL_PLAYOUT_START_REASON="initial_playout",E.SEEK_START_REASON="seek",E.RESUME_FROM_PAUSE_START_REASON="resume",E.METRICS_COLLECTION_START_REASON="metrics_collection_start";var t=u(function e(){T(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null});t.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",t.REBUFFERING_REASON="rebuffering",t.USER_REQUEST_STOP_REASON="user_request",t.END_OF_PERIOD_STOP_REASON="end_of_period",t.END_OF_CONTENT_STOP_REASON="end_of_content",t.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",t.FAILURE_STOP_REASON="failure"},"./src/streaming/vo/metrics/RepresentationSwitch.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.t=null,this.mt=null,this.to=null,this.lto=null});g.default=E},"./src/streaming/vo/metrics/RequestsQueue.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.loadingRequests=[],this.executedRequests=[]});g.default=E},"./src/streaming/vo/metrics/SchedulingInfo.js":function(I,g,r){"use strict";r.r(g);function o(t){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function u(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var e=y(t,"string");return o(e)==="symbol"?e:String(e)}function y(t,e){if(o(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(o(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function T(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var E=u(function t(){T(this,t),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null});g.default=E},0:function(I,g){},1:function(I,g){}}).default})});var Gi=fr((Mn,Pn)=>{typeof navigator=="object"&&function(I,g){typeof Mn=="object"&&typeof Pn<"u"?Pn.exports=g():typeof define=="function"&&define.amd?define("Plyr",g):(I=typeof globalThis<"u"?globalThis:I||self).Plyr=g()}(Mn,function(){"use strict";function I(N,re,k){return re in N?Object.defineProperty(N,re,{value:k,enumerable:!0,configurable:!0,writable:!0}):N[re]=k,N}function g(N,re){for(var k=0;k<re.length;k++){var fe=re[k];fe.enumerable=fe.enumerable||!1,fe.configurable=!0,"value"in fe&&(fe.writable=!0),Object.defineProperty(N,fe.key,fe)}}function r(N,re,k){return re in N?Object.defineProperty(N,re,{value:k,enumerable:!0,configurable:!0,writable:!0}):N[re]=k,N}function o(N,re){var k=Object.keys(N);if(Object.getOwnPropertySymbols){var fe=Object.getOwnPropertySymbols(N);re&&(fe=fe.filter(function(_e){return Object.getOwnPropertyDescriptor(N,_e).enumerable})),k.push.apply(k,fe)}return k}function l(N){for(var re=1;re<arguments.length;re++){var k=arguments[re]!=null?arguments[re]:{};re%2?o(Object(k),!0).forEach(function(fe){r(N,fe,k[fe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(k)):o(Object(k)).forEach(function(fe){Object.defineProperty(N,fe,Object.getOwnPropertyDescriptor(k,fe))})}return N}var u={addCSS:!0,thumbWidth:15,watch:!0};function m(N,re){return function(){return Array.from(document.querySelectorAll(re)).includes(this)}.call(N,re)}var y=function(N){return N!=null?N.constructor:null},T=function(N,re){return!!(N&&re&&N instanceof re)},E=function(N){return N==null},t=function(N){return y(N)===Object},e=function(N){return y(N)===String},n=function(N){return Array.isArray(N)},i=function(N){return T(N,NodeList)},d=e,P=n,b=i,A=function(N){return T(N,Element)},_=function(N){return T(N,Event)},h=function(N){return E(N)||(e(N)||n(N)||i(N))&&!N.length||t(N)&&!Object.keys(N).length};function f(N,re){if(1>re){var k=function(fe){var _e="".concat(fe).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return _e?Math.max(0,(_e[1]?_e[1].length:0)-(_e[2]?+_e[2]:0)):0}(re);return parseFloat(N.toFixed(k))}return Math.round(N/re)*re}var v=function(){function N(re,k){(function(fe,_e){if(!(fe instanceof _e))throw new TypeError("Cannot call a class as a function")})(this,N),A(re)?this.element=re:d(re)&&(this.element=document.querySelector(re)),A(this.element)&&h(this.element.rangeTouch)&&(this.config=l({},u,{},k),this.init())}return function(re,k,fe){k&&g(re.prototype,k),fe&&g(re,fe)}(N,[{key:"init",value:function(){N.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){N.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(re){var k=this,fe=re?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(_e){k.element[fe](_e,function(Te){return k.set(Te)},!1)})}},{key:"get",value:function(re){if(!N.enabled||!_(re))return null;var k,fe=re.target,_e=re.changedTouches[0],Te=parseFloat(fe.getAttribute("min"))||0,Le=parseFloat(fe.getAttribute("max"))||100,Ve=parseFloat(fe.getAttribute("step"))||1,rt=fe.getBoundingClientRect(),st=100/rt.width*(this.config.thumbWidth/2)/100;return 0>(k=100/rt.width*(_e.clientX-rt.left))?k=0:100<k&&(k=100),50>k?k-=(100-2*k)*st:50<k&&(k+=2*(k-50)*st),Te+f(k/100*(Le-Te),Ve)}},{key:"set",value:function(re){N.enabled&&_(re)&&!re.target.disabled&&(re.preventDefault(),re.target.value=this.get(re),function(k,fe){if(k&&fe){var _e=new Event(fe,{bubbles:!0});k.dispatchEvent(_e)}}(re.target,re.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(re){var k=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},fe=null;if(h(re)||d(re)?fe=Array.from(document.querySelectorAll(d(re)?re:'input[type="range"]')):A(re)?fe=[re]:b(re)?fe=Array.from(re):P(re)&&(fe=re.filter(A)),h(fe))return null;var _e=l({},u,{},k);if(d(re)&&_e.watch){var Te=new MutationObserver(function(Le){Array.from(Le).forEach(function(Ve){Array.from(Ve.addedNodes).forEach(function(rt){A(rt)&&m(rt,re)&&new N(rt,_e)})})});Te.observe(document.body,{childList:!0,subtree:!0})}return fe.map(function(Le){return new N(Le,k)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),N}();let c=N=>N!=null?N.constructor:null,S=(N,re)=>Boolean(N&&re&&N instanceof re),p=N=>N==null,C=N=>c(N)===Object,x=N=>c(N)===String,V=N=>typeof N=="function",H=N=>Array.isArray(N),te=N=>S(N,NodeList),w=N=>p(N)||(x(N)||H(N)||te(N))&&!N.length||C(N)&&!Object.keys(N).length;var F=p,M=C,U=N=>c(N)===Number&&!Number.isNaN(N),j=x,X=N=>c(N)===Boolean,Y=V,se=H,G=te,ee=N=>N!==null&&typeof N=="object"&&N.nodeType===1&&typeof N.style=="object"&&typeof N.ownerDocument=="object",J=N=>S(N,Event),ie=N=>S(N,KeyboardEvent),ue=N=>S(N,TextTrack)||!p(N)&&x(N.kind),ae=N=>S(N,Promise)&&V(N.then),oe=N=>{if(S(N,window.URL))return!0;if(!x(N))return!1;let re=N;N.startsWith("http://")&&N.startsWith("https://")||(re=`http://${N}`);try{return!w(new URL(re).hostname)}catch{return!1}},Z=w;let ge=(()=>{let N=document.createElement("span"),re={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},k=Object.keys(re).find(fe=>N.style[fe]!==void 0);return!!j(k)&&re[k]})();function le(N,re){setTimeout(()=>{try{N.hidden=!0,N.offsetHeight,N.hidden=!1}catch{}},re)}let z={isIE:Boolean(window.document.documentMode),isEdge:/Edge/g.test(navigator.userAgent),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone:/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIos:/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1};function K(N,re){return re.split(".").reduce((k,fe)=>k&&k[fe],N)}function R(N={},...re){if(!re.length)return N;let k=re.shift();return M(k)?(Object.keys(k).forEach(fe=>{M(k[fe])?(Object.keys(N).includes(fe)||Object.assign(N,{[fe]:{}}),R(N[fe],k[fe])):Object.assign(N,{[fe]:k[fe]})}),R(N,...re)):N}function L(N,re){let k=N.length?N:[N];Array.from(k).reverse().forEach((fe,_e)=>{let Te=_e>0?re.cloneNode(!0):re,Le=fe.parentNode,Ve=fe.nextSibling;Te.appendChild(fe),Ve?Le.insertBefore(Te,Ve):Le.appendChild(Te)})}function $(N,re){ee(N)&&!Z(re)&&Object.entries(re).filter(([,k])=>!F(k)).forEach(([k,fe])=>N.setAttribute(k,fe))}function O(N,re,k){let fe=document.createElement(N);return M(re)&&$(fe,re),j(k)&&(fe.innerText=k),fe}function Q(N,re,k,fe){ee(re)&&re.appendChild(O(N,k,fe))}function ne(N){G(N)||se(N)?Array.from(N).forEach(ne):ee(N)&&ee(N.parentNode)&&N.parentNode.removeChild(N)}function ce(N){if(!ee(N))return;let{length:re}=N.childNodes;for(;re>0;)N.removeChild(N.lastChild),re-=1}function W(N,re){return ee(re)&&ee(re.parentNode)&&ee(N)?(re.parentNode.replaceChild(N,re),N):null}function B(N,re){if(!j(N)||Z(N))return{};let k={},fe=R({},re);return N.split(",").forEach(_e=>{let Te=_e.trim(),Le=Te.replace(".",""),Ve=Te.replace(/[[\]]/g,"").split("="),[rt]=Ve,st=Ve.length>1?Ve[1].replace(/["']/g,""):"";switch(Te.charAt(0)){case".":j(fe.class)?k.class=`${fe.class} ${Le}`:k.class=Le;break;case"#":k.id=Te.replace("#","");break;case"[":k[rt]=st}}),R(fe,k)}function D(N,re){if(!ee(N))return;let k=re;X(k)||(k=!N.hidden),N.hidden=k}function q(N,re,k){if(G(N))return Array.from(N).map(fe=>q(fe,re,k));if(ee(N)){let fe="toggle";return k!==void 0&&(fe=k?"add":"remove"),N.classList[fe](re),N.classList.contains(re)}return!1}function me(N,re){return ee(N)&&N.classList.contains(re)}function de(N,re){let{prototype:k}=Element;return(k.matches||k.webkitMatchesSelector||k.mozMatchesSelector||k.msMatchesSelector||function(){return Array.from(document.querySelectorAll(re)).includes(this)}).call(N,re)}function ve(N){return this.elements.container.querySelectorAll(N)}function Se(N){return this.elements.container.querySelector(N)}function be(N=null,re=!1){ee(N)&&(N.focus({preventScroll:!0}),re&&q(N,this.config.classNames.tabFocus))}let Me={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},Fe={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(N,re,k){let fe=z.isIPhone&&k&&Fe.playsinline,_e=Fe[N]||re!=="html5";return{api:_e,ui:_e&&Fe.rangeInput&&(N!=="video"||!z.isIPhone||fe)}},pip:!(z.isIPhone||!Y(O("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||O("video").disablePictureInPicture)),airplay:Y(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(N){if(Z(N))return!1;let[re]=N.split("/"),k=N;if(!this.isHTML5||re!==this.type)return!1;Object.keys(Me).includes(k)&&(k+=`; codecs="${Me[N]}"`);try{return Boolean(k&&this.media.canPlayType(k).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{let N=document.createElement("input");return N.type="range",N.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:ge!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},Ee=(()=>{let N=!1;try{let re=Object.defineProperty({},"passive",{get:()=>(N=!0,null)});window.addEventListener("test",null,re),window.removeEventListener("test",null,re)}catch{}return N})();function Pe(N,re,k,fe=!1,_e=!0,Te=!1){if(!N||!("addEventListener"in N)||Z(re)||!Y(k))return;let Le=re.split(" "),Ve=Te;Ee&&(Ve={passive:_e,capture:Te}),Le.forEach(rt=>{this&&this.eventListeners&&fe&&this.eventListeners.push({element:N,type:rt,callback:k,options:Ve}),N[fe?"addEventListener":"removeEventListener"](rt,k,Ve)})}function Ue(N,re="",k,fe=!0,_e=!1){Pe.call(this,N,re,k,!0,fe,_e)}function Re(N,re="",k,fe=!0,_e=!1){Pe.call(this,N,re,k,!1,fe,_e)}function Ke(N,re="",k,fe=!0,_e=!1){let Te=(...Le)=>{Re(N,re,Te,fe,_e),k.apply(this,Le)};Pe.call(this,N,re,Te,!0,fe,_e)}function Ne(N,re="",k=!1,fe={}){if(!ee(N)||Z(re))return;let _e=new CustomEvent(re,{bubbles:k,detail:{...fe,plyr:this}});N.dispatchEvent(_e)}function ze(){this&&this.eventListeners&&(this.eventListeners.forEach(N=>{let{element:re,type:k,callback:fe,options:_e}=N;re.removeEventListener(k,fe,_e)}),this.eventListeners=[])}function $e(){return new Promise(N=>this.ready?setTimeout(N,0):Ue.call(this,this.elements.container,"ready",N)).then(()=>{})}function tt(N){ae(N)&&N.then(null,()=>{})}function ft(N){return se(N)?N.filter((re,k)=>N.indexOf(re)===k):N}function bt(N,re){return se(N)&&N.length?N.reduce((k,fe)=>Math.abs(fe-re)<Math.abs(k-re)?fe:k):null}function Et(N){return!(!window||!window.CSS)&&window.CSS.supports(N)}let St=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((N,[re,k])=>({...N,[re/k]:[re,k]}),{});function Ct(N){return se(N)||j(N)&&N.includes(":")?(se(N)?N:N.split(":")).map(Number).every(U):!1}function ye(N){if(!se(N)||!N.every(U))return null;let[re,k]=N,fe=(Te,Le)=>Le===0?Te:fe(Le,Te%Le),_e=fe(re,k);return[re/_e,k/_e]}function he(N){let re=fe=>Ct(fe)?fe.split(":").map(Number):null,k=re(N);if(k===null&&(k=re(this.config.ratio)),k===null&&!Z(this.embed)&&se(this.embed.ratio)&&({ratio:k}=this.embed),k===null&&this.isHTML5){let{videoWidth:fe,videoHeight:_e}=this.media;k=[fe,_e]}return ye(k)}function Ae(N){if(!this.isVideo)return{};let{wrapper:re}=this.elements,k=he.call(this,N);if(!se(k))return{};let[fe,_e]=ye(k),Te=100/fe*_e;if(Et(`aspect-ratio: ${fe}/${_e}`)?re.style.aspectRatio=`${fe}/${_e}`:re.style.paddingBottom=`${Te}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){let Le=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),Ve=(Le-Te)/(Le/50);this.fullscreen.active?re.style.paddingBottom=null:this.media.style.transform=`translateY(-${Ve}%)`}else this.isHTML5&&re.classList.add(this.config.classNames.videoFixedRatio);return{padding:Te,ratio:k}}function ke(N,re,k=.05){let fe=N/re,_e=bt(Object.keys(St),fe);return Math.abs(_e-fe)<=k?St[_e]:[N,re]}let Qe={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(N=>{let re=N.getAttribute("type");return!!Z(re)||Fe.mime.call(this,re)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Qe.getSources.call(this).map(N=>Number(N.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;let N=this;N.options.speed=N.config.speed.options,Z(this.config.ratio)||Ae.call(N),Object.defineProperty(N.media,"quality",{get(){let re=Qe.getSources.call(N).find(k=>k.getAttribute("src")===N.source);return re&&Number(re.getAttribute("size"))},set(re){if(N.quality!==re){if(N.config.quality.forced&&Y(N.config.quality.onChange))N.config.quality.onChange(re);else{let k=Qe.getSources.call(N).find(rt=>Number(rt.getAttribute("size"))===re);if(!k)return;let{currentTime:fe,paused:_e,preload:Te,readyState:Le,playbackRate:Ve}=N.media;N.media.src=k.getAttribute("src"),(Te!=="none"||Le)&&(N.once("loadedmetadata",()=>{N.speed=Ve,N.currentTime=fe,_e||tt(N.play())}),N.media.load())}Ne.call(N,N.media,"qualitychange",!1,{quality:re})}}})},cancelRequests(){this.isHTML5&&(ne(Qe.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Ge(N,...re){return Z(N)?N:N.toString().replace(/{(\d+)}/g,(k,fe)=>re[fe].toString())}let qe=(N="",re="",k="")=>N.replace(new RegExp(re.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),k.toString()),at=(N="")=>N.toString().replace(/\w\S*/g,re=>re.charAt(0).toUpperCase()+re.slice(1).toLowerCase());function it(N=""){let re=N.toString();return re=function(k=""){let fe=k.toString();return fe=qe(fe,"-"," "),fe=qe(fe,"_"," "),fe=at(fe),qe(fe," ","")}(re),re.charAt(0).toLowerCase()+re.slice(1)}function Ie(N){let re=document.createElement("div");return re.appendChild(N),re.innerHTML}let He={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Xe={get(N="",re={}){if(Z(N)||Z(re))return"";let k=K(re.i18n,N);if(Z(k))return Object.keys(He).includes(N)?He[N]:"";let fe={"{seektime}":re.seekTime,"{title}":re.title};return Object.entries(fe).forEach(([_e,Te])=>{k=qe(k,_e,Te)}),k}};class nt{constructor(re){I(this,"get",k=>{if(!nt.supported||!this.enabled)return null;let fe=window.localStorage.getItem(this.key);if(Z(fe))return null;let _e=JSON.parse(fe);return j(k)&&k.length?_e[k]:_e}),I(this,"set",k=>{if(!nt.supported||!this.enabled||!M(k))return;let fe=this.get();Z(fe)&&(fe={}),R(fe,k);try{window.localStorage.setItem(this.key,JSON.stringify(fe))}catch{}}),this.enabled=re.config.storage.enabled,this.key=re.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;let re="___test";return window.localStorage.setItem(re,re),window.localStorage.removeItem(re),!0}catch{return!1}}}function mt(N,re="text"){return new Promise((k,fe)=>{try{let _e=new XMLHttpRequest;if(!("withCredentials"in _e))return;_e.addEventListener("load",()=>{if(re==="text")try{k(JSON.parse(_e.responseText))}catch{k(_e.responseText)}else k(_e.response)}),_e.addEventListener("error",()=>{throw new Error(_e.status)}),_e.open("GET",N,!0),_e.responseType=re,_e.send()}catch(_e){fe(_e)}})}function ht(N,re){if(!j(N))return;let k=j(re),fe=!1,_e=()=>document.getElementById(re)!==null,Te=(Le,Ve)=>{Le.innerHTML=Ve,k&&_e()||document.body.insertAdjacentElement("afterbegin",Le)};if(!k||!_e()){let Le=nt.supported,Ve=document.createElement("div");if(Ve.setAttribute("hidden",""),k&&Ve.setAttribute("id",re),Le){let rt=window.localStorage.getItem(`cache-${re}`);if(fe=rt!==null,fe){let st=JSON.parse(rt);Te(Ve,st.content)}}mt(N).then(rt=>{if(!Z(rt)){if(Le)try{window.localStorage.setItem(`cache-${re}`,JSON.stringify({content:rt}))}catch{}Te(Ve,rt)}}).catch(()=>{})}}let _t=N=>Math.trunc(N/60/60%60,10);function wt(N=0,re=!1,k=!1){if(!U(N))return wt(void 0,re,k);let fe=rt=>`0${rt}`.slice(-2),_e=_t(N),Te=(Le=N,Math.trunc(Le/60%60,10));var Le;let Ve=(rt=>Math.trunc(rt%60,10))(N);return _e=re||_e>0?`${_e}:`:"",`${k&&N>0?"-":""}${_e}${fe(Te)}:${fe(Ve)}`}let ot={getIconUrl(){let N=new URL(this.config.iconUrl,window.location),re=window.location.host?window.location.host:window.top.location.host,k=N.host!==re||z.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:k}},findElements(){try{return this.elements.controls=Se.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:ve.call(this,this.config.selectors.buttons.play),pause:Se.call(this,this.config.selectors.buttons.pause),restart:Se.call(this,this.config.selectors.buttons.restart),rewind:Se.call(this,this.config.selectors.buttons.rewind),fastForward:Se.call(this,this.config.selectors.buttons.fastForward),mute:Se.call(this,this.config.selectors.buttons.mute),pip:Se.call(this,this.config.selectors.buttons.pip),airplay:Se.call(this,this.config.selectors.buttons.airplay),settings:Se.call(this,this.config.selectors.buttons.settings),captions:Se.call(this,this.config.selectors.buttons.captions),fullscreen:Se.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=Se.call(this,this.config.selectors.progress),this.elements.inputs={seek:Se.call(this,this.config.selectors.inputs.seek),volume:Se.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:Se.call(this,this.config.selectors.display.buffer),currentTime:Se.call(this,this.config.selectors.display.currentTime),duration:Se.call(this,this.config.selectors.display.duration)},ee(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(N){return this.debug.warn("It looks like there is a problem with your custom controls HTML",N),this.toggleNativeControls(!0),!1}},createIcon(N,re){let k="http://www.w3.org/2000/svg",fe=ot.getIconUrl.call(this),_e=`${fe.cors?"":fe.url}#${this.config.iconPrefix}`,Te=document.createElementNS(k,"svg");$(Te,R(re,{"aria-hidden":"true",focusable:"false"}));let Le=document.createElementNS(k,"use"),Ve=`${_e}-${N}`;return"href"in Le&&Le.setAttributeNS("http://www.w3.org/1999/xlink","href",Ve),Le.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Ve),Te.appendChild(Le),Te},createLabel(N,re={}){let k=Xe.get(N,this.config);return O("span",{...re,class:[re.class,this.config.classNames.hidden].filter(Boolean).join(" ")},k)},createBadge(N){if(Z(N))return null;let re=O("span",{class:this.config.classNames.menu.value});return re.appendChild(O("span",{class:this.config.classNames.menu.badge},N)),re},createButton(N,re){let k=R({},re),fe=it(N),_e={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(Le=>{Object.keys(k).includes(Le)&&(_e[Le]=k[Le],delete k[Le])}),_e.element!=="button"||Object.keys(k).includes("type")||(k.type="button"),Object.keys(k).includes("class")?k.class.split(" ").some(Le=>Le===this.config.classNames.control)||R(k,{class:`${k.class} ${this.config.classNames.control}`}):k.class=this.config.classNames.control,N){case"play":_e.toggle=!0,_e.label="play",_e.labelPressed="pause",_e.icon="play",_e.iconPressed="pause";break;case"mute":_e.toggle=!0,_e.label="mute",_e.labelPressed="unmute",_e.icon="volume",_e.iconPressed="muted";break;case"captions":_e.toggle=!0,_e.label="enableCaptions",_e.labelPressed="disableCaptions",_e.icon="captions-off",_e.iconPressed="captions-on";break;case"fullscreen":_e.toggle=!0,_e.label="enterFullscreen",_e.labelPressed="exitFullscreen",_e.icon="enter-fullscreen",_e.iconPressed="exit-fullscreen";break;case"play-large":k.class+=` ${this.config.classNames.control}--overlaid`,fe="play",_e.label="play",_e.icon="play";break;default:Z(_e.label)&&(_e.label=fe),Z(_e.icon)&&(_e.icon=N)}let Te=O(_e.element);return _e.toggle?(Te.appendChild(ot.createIcon.call(this,_e.iconPressed,{class:"icon--pressed"})),Te.appendChild(ot.createIcon.call(this,_e.icon,{class:"icon--not-pressed"})),Te.appendChild(ot.createLabel.call(this,_e.labelPressed,{class:"label--pressed"})),Te.appendChild(ot.createLabel.call(this,_e.label,{class:"label--not-pressed"}))):(Te.appendChild(ot.createIcon.call(this,_e.icon)),Te.appendChild(ot.createLabel.call(this,_e.label))),R(k,B(this.config.selectors.buttons[fe],k)),$(Te,k),fe==="play"?(se(this.elements.buttons[fe])||(this.elements.buttons[fe]=[]),this.elements.buttons[fe].push(Te)):this.elements.buttons[fe]=Te,Te},createRange(N,re){let k=O("input",R(B(this.config.selectors.inputs[N]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Xe.get(N,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},re));return this.elements.inputs[N]=k,ot.updateRangeFill.call(this,k),v.setup(k),k},createProgress(N,re){let k=O("progress",R(B(this.config.selectors.display[N]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},re));if(N!=="volume"){k.appendChild(O("span",null,"0"));let fe={played:"played",buffer:"buffered"}[N],_e=fe?Xe.get(fe,this.config):"";k.innerText=`% ${_e.toLowerCase()}`}return this.elements.display[N]=k,k},createTime(N,re){let k=B(this.config.selectors.display[N],re),fe=O("div",R(k,{class:`${k.class?k.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Xe.get(N,this.config)}),"00:00");return this.elements.display[N]=fe,fe},bindMenuItemShortcuts(N,re){Ue.call(this,N,"keydown keyup",k=>{if(!["Space","ArrowUp","ArrowDown","ArrowRight"].includes(k.key)||(k.preventDefault(),k.stopPropagation(),k.type==="keydown"))return;let fe=de(N,'[role="menuitemradio"]');if(!fe&&["Space","ArrowRight"].includes(k.key))ot.showMenuPanel.call(this,re,!0);else{let _e;k.key!=="Space"&&(k.key==="ArrowDown"||fe&&k.key==="ArrowRight"?(_e=N.nextElementSibling,ee(_e)||(_e=N.parentNode.firstElementChild)):(_e=N.previousElementSibling,ee(_e)||(_e=N.parentNode.lastElementChild)),be.call(this,_e,!0))}},!1),Ue.call(this,N,"keyup",k=>{k.key==="Return"&&ot.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:N,list:re,type:k,title:fe,badge:_e=null,checked:Te=!1}){let Le=B(this.config.selectors.inputs[k]),Ve=O("button",R(Le,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${Le.class?Le.class:""}`.trim(),"aria-checked":Te,value:N})),rt=O("span");rt.innerHTML=fe,ee(_e)&&rt.appendChild(_e),Ve.appendChild(rt),Object.defineProperty(Ve,"checked",{enumerable:!0,get:()=>Ve.getAttribute("aria-checked")==="true",set(st){st&&Array.from(Ve.parentNode.children).filter(It=>de(It,'[role="menuitemradio"]')).forEach(It=>It.setAttribute("aria-checked","false")),Ve.setAttribute("aria-checked",st?"true":"false")}}),this.listeners.bind(Ve,"click keyup",st=>{if(!ie(st)||st.key==="Space"){switch(st.preventDefault(),st.stopPropagation(),Ve.checked=!0,k){case"language":this.currentTrack=Number(N);break;case"quality":this.quality=N;break;case"speed":this.speed=parseFloat(N)}ot.showMenuPanel.call(this,"home",ie(st))}},k,!1),ot.bindMenuItemShortcuts.call(this,Ve,k),re.appendChild(Ve)},formatTime(N=0,re=!1){return U(N)?wt(N,_t(this.duration)>0,re):N},updateTimeDisplay(N=null,re=0,k=!1){ee(N)&&U(re)&&(N.innerText=ot.formatTime(re,k))},updateVolume(){this.supported.ui&&(ee(this.elements.inputs.volume)&&ot.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),ee(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(N,re=0){ee(N)&&(N.value=re,ot.updateRangeFill.call(this,N))},updateProgress(N){if(!this.supported.ui||!J(N))return;let re=0,k=(Te,Le)=>{let Ve=U(Le)?Le:0,rt=ee(Te)?Te:this.elements.display.buffer;if(ee(rt)){rt.value=Ve;let st=rt.getElementsByTagName("span")[0];ee(st)&&(st.childNodes[0].nodeValue=Ve)}};if(N)switch(N.type){case"timeupdate":case"seeking":case"seeked":fe=this.currentTime,_e=this.duration,re=fe===0||_e===0||Number.isNaN(fe)||Number.isNaN(_e)?0:(fe/_e*100).toFixed(2),N.type==="timeupdate"&&ot.setRange.call(this,this.elements.inputs.seek,re);break;case"playing":case"progress":k(this.elements.display.buffer,100*this.buffered)}var fe,_e},updateRangeFill(N){let re=J(N)?N.target:N;if(ee(re)&&re.getAttribute("type")==="range"){if(de(re,this.config.selectors.inputs.seek)){re.setAttribute("aria-valuenow",this.currentTime);let k=ot.formatTime(this.currentTime),fe=ot.formatTime(this.duration),_e=Xe.get("seekLabel",this.config);re.setAttribute("aria-valuetext",_e.replace("{currentTime}",k).replace("{duration}",fe))}else if(de(re,this.config.selectors.inputs.volume)){let k=100*re.value;re.setAttribute("aria-valuenow",k),re.setAttribute("aria-valuetext",`${k.toFixed(1)}%`)}else re.setAttribute("aria-valuenow",re.value);z.isWebkit&&re.style.setProperty("--value",re.value/re.max*100+"%")}},updateSeekTooltip(N){var re,k;if(!this.config.tooltips.seek||!ee(this.elements.inputs.seek)||!ee(this.elements.display.seekTooltip)||this.duration===0)return;let fe=this.elements.display.seekTooltip,_e=`${this.config.classNames.tooltip}--visible`,Te=It=>q(fe,_e,It);if(this.touch)return void Te(!1);let Le=0,Ve=this.elements.progress.getBoundingClientRect();if(J(N))Le=100/Ve.width*(N.pageX-Ve.left);else{if(!me(fe,_e))return;Le=parseFloat(fe.style.left,10)}Le<0?Le=0:Le>100&&(Le=100);let rt=this.duration/100*Le;fe.innerText=ot.formatTime(rt);let st=(re=this.config.markers)===null||re===void 0||(k=re.points)===null||k===void 0?void 0:k.find(({time:It})=>It===Math.round(rt));st&&fe.insertAdjacentHTML("afterbegin",`${st.label}<br>`),fe.style.left=`${Le}%`,J(N)&&["mouseenter","mouseleave"].includes(N.type)&&Te(N.type==="mouseenter")},timeUpdate(N){let re=!ee(this.elements.display.duration)&&this.config.invertTime;ot.updateTimeDisplay.call(this,this.elements.display.currentTime,re?this.duration-this.currentTime:this.currentTime,re),N&&N.type==="timeupdate"&&this.media.seeking||ot.updateProgress.call(this,N)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return D(this.elements.display.currentTime,!0),void D(this.elements.progress,!0);ee(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);let N=ee(this.elements.display.duration);!N&&this.config.displayDuration&&this.paused&&ot.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),N&&ot.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&ot.setMarkers.call(this),ot.updateSeekTooltip.call(this)},toggleMenuButton(N,re){D(this.elements.settings.buttons[N],!re)},updateSetting(N,re,k){let fe=this.elements.settings.panels[N],_e=null,Te=re;if(N==="captions")_e=this.currentTrack;else{if(_e=Z(k)?this[N]:k,Z(_e)&&(_e=this.config[N].default),!Z(this.options[N])&&!this.options[N].includes(_e))return void this.debug.warn(`Unsupported value of '${_e}' for ${N}`);if(!this.config[N].options.includes(_e))return void this.debug.warn(`Disabled value of '${_e}' for ${N}`)}if(ee(Te)||(Te=fe&&fe.querySelector('[role="menu"]')),!ee(Te))return;this.elements.settings.buttons[N].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=ot.getLabel.call(this,N,_e);let Le=Te&&Te.querySelector(`[value="${_e}"]`);ee(Le)&&(Le.checked=!0)},getLabel(N,re){switch(N){case"speed":return re===1?Xe.get("normal",this.config):`${re}&times;`;case"quality":if(U(re)){let k=Xe.get(`qualityLabel.${re}`,this.config);return k.length?k:`${re}p`}return at(re);case"captions":return pe.getLabel.call(this);default:return null}},setQualityMenu(N){if(!ee(this.elements.settings.panels.quality))return;let re="quality",k=this.elements.settings.panels.quality.querySelector('[role="menu"]');se(N)&&(this.options.quality=ft(N).filter(Te=>this.config.quality.options.includes(Te)));let fe=!Z(this.options.quality)&&this.options.quality.length>1;if(ot.toggleMenuButton.call(this,re,fe),ce(k),ot.checkMenu.call(this),!fe)return;let _e=Te=>{let Le=Xe.get(`qualityBadge.${Te}`,this.config);return Le.length?ot.createBadge.call(this,Le):null};this.options.quality.sort((Te,Le)=>{let Ve=this.config.quality.options;return Ve.indexOf(Te)>Ve.indexOf(Le)?1:-1}).forEach(Te=>{ot.createMenuItem.call(this,{value:Te,list:k,type:re,title:ot.getLabel.call(this,"quality",Te),badge:_e(Te)})}),ot.updateSetting.call(this,re,k)},setCaptionsMenu(){if(!ee(this.elements.settings.panels.captions))return;let N="captions",re=this.elements.settings.panels.captions.querySelector('[role="menu"]'),k=pe.getTracks.call(this),fe=Boolean(k.length);if(ot.toggleMenuButton.call(this,N,fe),ce(re),ot.checkMenu.call(this),!fe)return;let _e=k.map((Te,Le)=>({value:Le,checked:this.captions.toggled&&this.currentTrack===Le,title:pe.getLabel.call(this,Te),badge:Te.language&&ot.createBadge.call(this,Te.language.toUpperCase()),list:re,type:"language"}));_e.unshift({value:-1,checked:!this.captions.toggled,title:Xe.get("disabled",this.config),list:re,type:"language"}),_e.forEach(ot.createMenuItem.bind(this)),ot.updateSetting.call(this,N,re)},setSpeedMenu(){if(!ee(this.elements.settings.panels.speed))return;let N="speed",re=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(fe=>fe>=this.minimumSpeed&&fe<=this.maximumSpeed);let k=!Z(this.options.speed)&&this.options.speed.length>1;ot.toggleMenuButton.call(this,N,k),ce(re),ot.checkMenu.call(this),k&&(this.options.speed.forEach(fe=>{ot.createMenuItem.call(this,{value:fe,list:re,type:N,title:ot.getLabel.call(this,"speed",fe)})}),ot.updateSetting.call(this,N,re))},checkMenu(){let{buttons:N}=this.elements.settings,re=!Z(N)&&Object.values(N).some(k=>!k.hidden);D(this.elements.settings.menu,!re)},focusFirstMenuItem(N,re=!1){if(this.elements.settings.popup.hidden)return;let k=N;ee(k)||(k=Object.values(this.elements.settings.panels).find(_e=>!_e.hidden));let fe=k.querySelector('[role^="menuitem"]');be.call(this,fe,re)},toggleMenu(N){let{popup:re}=this.elements.settings,k=this.elements.buttons.settings;if(!ee(re)||!ee(k))return;let{hidden:fe}=re,_e=fe;if(X(N))_e=N;else if(ie(N)&&N.key==="Escape")_e=!1;else if(J(N)){let Te=Y(N.composedPath)?N.composedPath()[0]:N.target,Le=re.contains(Te);if(Le||!Le&&N.target!==k&&_e)return}k.setAttribute("aria-expanded",_e),D(re,!_e),q(this.elements.container,this.config.classNames.menu.open,_e),_e&&ie(N)?ot.focusFirstMenuItem.call(this,null,!0):_e||fe||be.call(this,k,ie(N))},getMenuSize(N){let re=N.cloneNode(!0);re.style.position="absolute",re.style.opacity=0,re.removeAttribute("hidden"),N.parentNode.appendChild(re);let k=re.scrollWidth,fe=re.scrollHeight;return ne(re),{width:k,height:fe}},showMenuPanel(N="",re=!1){let k=this.elements.container.querySelector(`#plyr-settings-${this.id}-${N}`);if(!ee(k))return;let fe=k.parentNode,_e=Array.from(fe.children).find(Te=>!Te.hidden);if(Fe.transitions&&!Fe.reducedMotion){fe.style.width=`${_e.scrollWidth}px`,fe.style.height=`${_e.scrollHeight}px`;let Te=ot.getMenuSize.call(this,k),Le=Ve=>{Ve.target===fe&&["width","height"].includes(Ve.propertyName)&&(fe.style.width="",fe.style.height="",Re.call(this,fe,ge,Le))};Ue.call(this,fe,ge,Le),fe.style.width=`${Te.width}px`,fe.style.height=`${Te.height}px`}D(_e,!0),D(k,!1),ot.focusFirstMenuItem.call(this,k,re)},setDownloadUrl(){let N=this.elements.buttons.download;ee(N)&&N.setAttribute("href",this.download)},create(N){let{bindMenuItemShortcuts:re,createButton:k,createProgress:fe,createRange:_e,createTime:Te,setQualityMenu:Le,setSpeedMenu:Ve,showMenuPanel:rt}=ot;this.elements.controls=null,se(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(k.call(this,"play-large"));let st=O("div",B(this.config.selectors.controls.wrapper));this.elements.controls=st;let It={class:"plyr__controls__item"};return ft(se(this.config.controls)?this.config.controls:[]).forEach(Nt=>{if(Nt==="restart"&&st.appendChild(k.call(this,"restart",It)),Nt==="rewind"&&st.appendChild(k.call(this,"rewind",It)),Nt==="play"&&st.appendChild(k.call(this,"play",It)),Nt==="fast-forward"&&st.appendChild(k.call(this,"fast-forward",It)),Nt==="progress"){let yt=O("div",{class:`${It.class} plyr__progress__container`}),Ft=O("div",B(this.config.selectors.progress));if(Ft.appendChild(_e.call(this,"seek",{id:`plyr-seek-${N.id}`})),Ft.appendChild(fe.call(this,"buffer")),this.config.tooltips.seek){let kt=O("span",{class:this.config.classNames.tooltip},"00:00");Ft.appendChild(kt),this.elements.display.seekTooltip=kt}this.elements.progress=Ft,yt.appendChild(this.elements.progress),st.appendChild(yt)}if(Nt==="current-time"&&st.appendChild(Te.call(this,"currentTime",It)),Nt==="duration"&&st.appendChild(Te.call(this,"duration",It)),Nt==="mute"||Nt==="volume"){let{volume:yt}=this.elements;if(ee(yt)&&st.contains(yt)||(yt=O("div",R({},It,{class:`${It.class} plyr__volume`.trim()})),this.elements.volume=yt,st.appendChild(yt)),Nt==="mute"&&yt.appendChild(k.call(this,"mute")),Nt==="volume"&&!z.isIos){let Ft={max:1,step:.05,value:this.config.volume};yt.appendChild(_e.call(this,"volume",R(Ft,{id:`plyr-volume-${N.id}`})))}}if(Nt==="captions"&&st.appendChild(k.call(this,"captions",It)),Nt==="settings"&&!Z(this.config.settings)){let yt=O("div",R({},It,{class:`${It.class} plyr__menu`.trim(),hidden:""}));yt.appendChild(k.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${N.id}`,"aria-expanded":!1}));let Ft=O("div",{class:"plyr__menu__container",id:`plyr-settings-${N.id}`,hidden:""}),kt=O("div"),Kt=O("div",{id:`plyr-settings-${N.id}-home`}),Xt=O("div",{role:"menu"});Kt.appendChild(Xt),kt.appendChild(Kt),this.elements.settings.panels.home=Kt,this.config.settings.forEach(Bt=>{let Qt=O("button",R(B(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));re.call(this,Qt,Bt),Ue.call(this,Qt,"click",()=>{rt.call(this,Bt,!1)});let Mt=O("span",null,Xe.get(Bt,this.config)),Ce=O("span",{class:this.config.classNames.menu.value});Ce.innerHTML=N[Bt],Mt.appendChild(Ce),Qt.appendChild(Mt),Xt.appendChild(Qt);let Je=O("div",{id:`plyr-settings-${N.id}-${Bt}`,hidden:""}),dt=O("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});dt.appendChild(O("span",{"aria-hidden":!0},Xe.get(Bt,this.config))),dt.appendChild(O("span",{class:this.config.classNames.hidden},Xe.get("menuBack",this.config))),Ue.call(this,Je,"keydown",Pt=>{Pt.key==="ArrowLeft"&&(Pt.preventDefault(),Pt.stopPropagation(),rt.call(this,"home",!0))},!1),Ue.call(this,dt,"click",()=>{rt.call(this,"home",!1)}),Je.appendChild(dt),Je.appendChild(O("div",{role:"menu"})),kt.appendChild(Je),this.elements.settings.buttons[Bt]=Qt,this.elements.settings.panels[Bt]=Je}),Ft.appendChild(kt),yt.appendChild(Ft),st.appendChild(yt),this.elements.settings.popup=Ft,this.elements.settings.menu=yt}if(Nt==="pip"&&Fe.pip&&st.appendChild(k.call(this,"pip",It)),Nt==="airplay"&&Fe.airplay&&st.appendChild(k.call(this,"airplay",It)),Nt==="download"){let yt=R({},It,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(yt.download="");let{download:Ft}=this.config.urls;!oe(Ft)&&this.isEmbed&&R(yt,{icon:`logo-${this.provider}`,label:this.provider}),st.appendChild(k.call(this,"download",yt))}Nt==="fullscreen"&&st.appendChild(k.call(this,"fullscreen",It))}),this.isHTML5&&Le.call(this,Qe.getQualityOptions.call(this)),Ve.call(this),st},inject(){if(this.config.loadSprite){let _e=ot.getIconUrl.call(this);_e.cors&&ht(_e.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let N=null;this.elements.controls=null;let re={id:this.id,seektime:this.config.seekTime,title:this.config.title},k=!0;Y(this.config.controls)&&(this.config.controls=this.config.controls.call(this,re)),this.config.controls||(this.config.controls=[]),ee(this.config.controls)||j(this.config.controls)?N=this.config.controls:(N=ot.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:pe.getLabel.call(this)}),k=!1);let fe;if(k&&j(this.config.controls)&&(N=(_e=>{let Te=_e;return Object.entries(re).forEach(([Le,Ve])=>{Te=qe(Te,`{${Le}}`,Ve)}),Te})(N)),j(this.config.selectors.controls.container)&&(fe=document.querySelector(this.config.selectors.controls.container)),ee(fe)||(fe=this.elements.container),fe[ee(N)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",N),ee(this.elements.controls)||ot.findElements.call(this),!Z(this.elements.buttons)){let _e=Te=>{let Le=this.config.classNames.controlPressed;Te.setAttribute("aria-pressed","false"),Object.defineProperty(Te,"pressed",{configurable:!0,enumerable:!0,get:()=>me(Te,Le),set(Ve=!1){q(Te,Le,Ve),Te.setAttribute("aria-pressed",Ve?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(Te=>{se(Te)||G(Te)?Array.from(Te).filter(Boolean).forEach(_e):_e(Te)})}if(z.isEdge&&le(fe),this.config.tooltips.controls){let{classNames:_e,selectors:Te}=this.config,Le=`${Te.controls.wrapper} ${Te.labels} .${_e.hidden}`,Ve=ve.call(this,Le);Array.from(Ve).forEach(rt=>{q(rt,this.config.classNames.hidden,!1),q(rt,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var N,re;if(!this.duration||this.elements.markers)return;let k=(N=this.config.markers)===null||N===void 0||(re=N.points)===null||re===void 0?void 0:re.filter(({time:rt})=>rt>0&&rt<this.duration);if(k==null||!k.length)return;let fe=document.createDocumentFragment(),_e=document.createDocumentFragment(),Te=null,Le=`${this.config.classNames.tooltip}--visible`,Ve=rt=>q(Te,Le,rt);k.forEach(rt=>{let st=O("span",{class:this.config.classNames.marker},""),It=rt.time/this.duration*100+"%";Te&&(st.addEventListener("mouseenter",()=>{rt.label||(Te.style.left=It,Te.innerHTML=rt.label,Ve(!0))}),st.addEventListener("mouseleave",()=>{Ve(!1)})),st.addEventListener("click",()=>{this.currentTime=rt.time}),st.style.left=It,_e.appendChild(st)}),fe.appendChild(_e),this.config.tooltips.seek||(Te=O("span",{class:this.config.classNames.tooltip},""),fe.appendChild(Te)),this.elements.markers={points:_e,tip:Te},this.elements.progress.appendChild(fe)}};function Wt(N,re=!0){let k=N;if(re){let fe=document.createElement("a");fe.href=k,k=fe.href}try{return new URL(k)}catch{return null}}function $t(N){let re=new URLSearchParams;return M(N)&&Object.entries(N).forEach(([k,fe])=>{re.set(k,fe)}),re}let pe={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!Fe.textTracks)return void(se(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&ot.setCaptionsMenu.call(this));var N,re;if(ee(this.elements.captions)||(this.elements.captions=O("div",B(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),N=this.elements.captions,re=this.elements.wrapper,ee(N)&&ee(re)&&re.parentNode.insertBefore(N,re.nextSibling)),z.isIE&&window.URL){let Te=this.media.querySelectorAll("track");Array.from(Te).forEach(Le=>{let Ve=Le.getAttribute("src"),rt=Wt(Ve);rt!==null&&rt.hostname!==window.location.href.hostname&&["http:","https:"].includes(rt.protocol)&&mt(Ve,"blob").then(st=>{Le.setAttribute("src",window.URL.createObjectURL(st))}).catch(()=>{ne(Le)})})}let k=ft((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(Te=>Te.split("-")[0])),fe=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();fe==="auto"&&([fe]=k);let _e=this.storage.get("captions");if(X(_e)||({active:_e}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:_e,language:fe,languages:k}),this.isHTML5){let Te=this.config.captions.update?"addtrack removetrack":"removetrack";Ue.call(this,this.media.textTracks,Te,pe.update.bind(this))}setTimeout(pe.update.bind(this),0)},update(){let N=pe.getTracks.call(this,!0),{active:re,language:k,meta:fe,currentTrackNode:_e}=this.captions,Te=Boolean(N.find(Le=>Le.language===k));this.isHTML5&&this.isVideo&&N.filter(Le=>!fe.get(Le)).forEach(Le=>{this.debug.log("Track added",Le),fe.set(Le,{default:Le.mode==="showing"}),Le.mode==="showing"&&(Le.mode="hidden"),Ue.call(this,Le,"cuechange",()=>pe.updateCues.call(this))}),(Te&&this.language!==k||!N.includes(_e))&&(pe.setLanguage.call(this,k),pe.toggle.call(this,re&&Te)),this.elements&&q(this.elements.container,this.config.classNames.captions.enabled,!Z(N)),se(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&ot.setCaptionsMenu.call(this)},toggle(N,re=!0){if(!this.supported.ui)return;let{toggled:k}=this.captions,fe=this.config.classNames.captions.active,_e=F(N)?!k:N;if(_e!==k){if(re||(this.captions.active=_e,this.storage.set({captions:_e})),!this.language&&_e&&!re){let Te=pe.getTracks.call(this),Le=pe.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=Le.language,void pe.set.call(this,Te.indexOf(Le))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=_e),q(this.elements.container,fe,_e),this.captions.toggled=_e,ot.updateSetting.call(this,"captions"),Ne.call(this,this.media,_e?"captionsenabled":"captionsdisabled")}setTimeout(()=>{_e&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(N,re=!0){let k=pe.getTracks.call(this);if(N!==-1)if(U(N))if(N in k){if(this.captions.currentTrack!==N){this.captions.currentTrack=N;let fe=k[N],{language:_e}=fe||{};this.captions.currentTrackNode=fe,ot.updateSetting.call(this,"captions"),re||(this.captions.language=_e,this.storage.set({language:_e})),this.isVimeo&&this.embed.enableTextTrack(_e),Ne.call(this,this.media,"languagechange")}pe.toggle.call(this,!0,re),this.isHTML5&&this.isVideo&&pe.updateCues.call(this)}else this.debug.warn("Track not found",N);else this.debug.warn("Invalid caption argument",N);else pe.toggle.call(this,!1,re)},setLanguage(N,re=!0){if(!j(N))return void this.debug.warn("Invalid language argument",N);let k=N.toLowerCase();this.captions.language=k;let fe=pe.getTracks.call(this),_e=pe.findTrack.call(this,[k]);pe.set.call(this,fe.indexOf(_e),re)},getTracks(N=!1){return Array.from((this.media||{}).textTracks||[]).filter(re=>!this.isHTML5||N||this.captions.meta.has(re)).filter(re=>["captions","subtitles"].includes(re.kind))},findTrack(N,re=!1){let k=pe.getTracks.call(this),fe=Le=>Number((this.captions.meta.get(Le)||{}).default),_e=Array.from(k).sort((Le,Ve)=>fe(Ve)-fe(Le)),Te;return N.every(Le=>(Te=_e.find(Ve=>Ve.language===Le),!Te)),Te||(re?_e[0]:void 0)},getCurrentTrack(){return pe.getTracks.call(this)[this.currentTrack]},getLabel(N){let re=N;return!ue(re)&&Fe.textTracks&&this.captions.toggled&&(re=pe.getCurrentTrack.call(this)),ue(re)?Z(re.label)?Z(re.language)?Xe.get("enabled",this.config):N.language.toUpperCase():re.label:Xe.get("disabled",this.config)},updateCues(N){if(!this.supported.ui)return;if(!ee(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!F(N)&&!Array.isArray(N))return void this.debug.warn("updateCues: Invalid input",N);let re=N;if(!re){let fe=pe.getCurrentTrack.call(this);re=Array.from((fe||{}).activeCues||[]).map(_e=>_e.getCueAsHTML()).map(Ie)}let k=re.map(fe=>fe.trim()).join(`
`);if(k!==this.elements.captions.innerHTML){ce(this.elements.captions);let fe=O("span",B(this.config.selectors.caption));fe.innerHTML=k,this.elements.captions.appendChild(fe),Ne.call(this,this.media,"cuechange")}}},Ye={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.3/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},lt="picture-in-picture",De="inline",je={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Ze="audio",ut="video",Ot=()=>{};class At{constructor(re=!1){this.enabled=window.console&&re,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):Ot}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):Ot}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):Ot}}class we{constructor(re){I(this,"onChange",()=>{if(!this.enabled)return;let k=this.player.elements.buttons.fullscreen;ee(k)&&(k.pressed=this.active);let fe=this.target===this.player.media?this.target:this.player.elements.container;Ne.call(this.player,fe,this.active?"enterfullscreen":"exitfullscreen",!0)}),I(this,"toggleFallback",(k=!1)=>{if(k?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=k?"hidden":"",q(this.target,this.player.config.classNames.fullscreen.fallback,k),z.isIos){let fe=document.head.querySelector('meta[name="viewport"]'),_e="viewport-fit=cover";fe||(fe=document.createElement("meta"),fe.setAttribute("name","viewport"));let Te=j(fe.content)&&fe.content.includes(_e);k?(this.cleanupViewport=!Te,Te||(fe.content+=`,${_e}`)):this.cleanupViewport&&(fe.content=fe.content.split(",").filter(Le=>Le.trim()!==_e).join(","))}this.onChange()}),I(this,"trapFocus",k=>{if(z.isIos||!this.active||k.key!=="Tab")return;let fe=document.activeElement,_e=ve.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[Te]=_e,Le=_e[_e.length-1];fe!==Le||k.shiftKey?fe===Te&&k.shiftKey&&(Le.focus(),k.preventDefault()):(Te.focus(),k.preventDefault())}),I(this,"update",()=>{if(this.enabled){let k;k=this.forceFallback?"Fallback (forced)":we.native?"Native":"Fallback",this.player.debug.log(`${k} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");q(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}),I(this,"enter",()=>{this.enabled&&(z.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!we.native||this.forceFallback?this.toggleFallback(!0):this.prefix?Z(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),I(this,"exit",()=>{if(this.enabled)if(z.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),tt(this.player.play());else if(!we.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!Z(this.prefix)){let k=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${k}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),I(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=re,this.prefix=we.prefix,this.property=we.property,this.scrollPosition={x:0,y:0},this.forceFallback=re.config.fullscreen.fallback==="force",this.player.elements.fullscreen=re.config.fullscreen.container&&function(k,fe){let{prototype:_e}=Element;return(_e.closest||function(){let Te=this;do{if(de.matches(Te,fe))return Te;Te=Te.parentElement||Te.parentNode}while(Te!==null&&Te.nodeType===1);return null}).call(k,fe)}(this.player.elements.container,re.config.fullscreen.container),Ue.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),Ue.call(this.player,this.player.elements.container,"dblclick",k=>{ee(this.player.elements.controls)&&this.player.elements.controls.contains(k.target)||this.player.listeners.proxy(k,this.toggle,"fullscreen")}),Ue.call(this,this.player.elements.container,"keydown",k=>this.trapFocus(k)),this.update()}static get native(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get usingNative(){return we.native&&!this.forceFallback}static get prefix(){if(Y(document.exitFullscreen))return"";let re="";return["webkit","moz","ms"].some(k=>!(!Y(document[`${k}ExitFullscreen`])&&!Y(document[`${k}CancelFullScreen`]))&&(re=k,!0)),re}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get enabled(){return(we.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}get active(){if(!this.enabled)return!1;if(!we.native||this.forceFallback)return me(this.target,this.player.config.classNames.fullscreen.fallback);let re=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return re&&re.shadowRoot?re===this.target.getRootNode().host:re===this.target}get target(){return z.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}function Oe(N,re=1){return new Promise((k,fe)=>{let _e=new Image,Te=()=>{delete _e.onload,delete _e.onerror,(_e.naturalWidth>=re?k:fe)(_e)};Object.assign(_e,{onload:Te,onerror:Te,src:N})})}let Be={addStyleHook(){q(this.elements.container,this.config.selectors.container.replace(".",""),!0),q(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(N=!1){N&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Be.toggleNativeControls.call(this,!0);ee(this.elements.controls)||(ot.inject.call(this),this.listeners.controls()),Be.toggleNativeControls.call(this),this.isHTML5&&pe.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,ot.updateVolume.call(this),ot.timeUpdate.call(this),ot.durationUpdate.call(this),Be.checkPlaying.call(this),q(this.elements.container,this.config.classNames.pip.supported,Fe.pip&&this.isHTML5&&this.isVideo),q(this.elements.container,this.config.classNames.airplay.supported,Fe.airplay&&this.isHTML5),q(this.elements.container,this.config.classNames.isIos,z.isIos),q(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{Ne.call(this,this.media,"ready")},0),Be.setTitle.call(this),this.poster&&Be.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&ot.durationUpdate.call(this),this.config.mediaMetadata&&ot.setMediaMetadata.call(this)},setTitle(){let N=Xe.get("play",this.config);if(j(this.config.title)&&!Z(this.config.title)&&(N+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(re=>{re.setAttribute("aria-label",N)}),this.isEmbed){let re=Se.call(this,"iframe");if(!ee(re))return;let k=Z(this.config.title)?"video":this.config.title,fe=Xe.get("frameTitle",this.config);re.setAttribute("title",fe.replace("{title}",k))}},togglePoster(N){q(this.elements.container,this.config.classNames.posterEnabled,N)},setPoster(N,re=!0){return re&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",N),this.elements.poster.removeAttribute("hidden"),$e.call(this).then(()=>Oe(N)).catch(k=>{throw N===this.poster&&Be.togglePoster.call(this,!1),k}).then(()=>{if(N!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${N}')`,backgroundSize:""}),Be.togglePoster.call(this,!0),N)))},checkPlaying(N){q(this.elements.container,this.config.classNames.playing,this.playing),q(this.elements.container,this.config.classNames.paused,this.paused),q(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(re=>{Object.assign(re,{pressed:this.playing}),re.setAttribute("aria-label",Xe.get(this.playing?"pause":"play",this.config))}),J(N)&&N.type==="timeupdate"||Be.toggleControls.call(this)},checkLoading(N){this.loading=["stalled","waiting"].includes(N.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{q(this.elements.container,this.config.classNames.loading,this.loading),Be.toggleControls.call(this)},this.loading?250:0)},toggleControls(N){let{controls:re}=this.elements;if(re&&this.config.hideControls){let k=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(N||this.loading||this.paused||re.pressed||re.hover||k))}},migrateStyles(){Object.values({...this.media.style}).filter(N=>!Z(N)&&j(N)&&N.startsWith("--plyr")).forEach(N=>{this.elements.container.style.setProperty(N,this.media.style.getPropertyValue(N)),this.media.style.removeProperty(N)}),Z(this.media.style)&&this.media.removeAttribute("style")}};class et{constructor(re){I(this,"firstTouch",()=>{let{player:k}=this,{elements:fe}=k;k.touch=!0,q(fe.container,k.config.classNames.isTouch,!0)}),I(this,"setTabFocus",k=>{let{player:fe}=this,{elements:_e}=fe,{key:Te,type:Le,timeStamp:Ve}=k;if(clearTimeout(this.focusTimer),Le==="keydown"&&Te!=="Tab")return;Le==="keydown"&&(this.lastKeyDown=Ve);let rt=Ve-this.lastKeyDown<=20;(Le!=="focus"||rt)&&((()=>{let st=fe.config.classNames.tabFocus;q(ve.call(fe,`.${st}`),st,!1)})(),Le!=="focusout"&&(this.focusTimer=setTimeout(()=>{let st=document.activeElement;_e.container.contains(st)&&q(document.activeElement,fe.config.classNames.tabFocus,!0)},10)))}),I(this,"global",(k=!0)=>{let{player:fe}=this;fe.config.keyboard.global&&Pe.call(fe,window,"keydown keyup",this.handleKey,k,!1),Pe.call(fe,document.body,"click",this.toggleMenu,k),Ke.call(fe,document.body,"touchstart",this.firstTouch),Pe.call(fe,document.body,"keydown focus blur focusout",this.setTabFocus,k,!1,!0)}),I(this,"container",()=>{let{player:k}=this,{config:fe,elements:_e,timers:Te}=k;!fe.keyboard.global&&fe.keyboard.focused&&Ue.call(k,_e.container,"keydown keyup",this.handleKey,!1),Ue.call(k,_e.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",rt=>{let{controls:st}=_e;st&&rt.type==="enterfullscreen"&&(st.pressed=!1,st.hover=!1);let It=0;["touchstart","touchmove","mousemove"].includes(rt.type)&&(Be.toggleControls.call(k,!0),It=k.touch?3e3:2e3),clearTimeout(Te.controls),Te.controls=setTimeout(()=>Be.toggleControls.call(k,!1),It)});let Le=()=>{if(!k.isVimeo||k.config.vimeo.premium)return;let rt=_e.wrapper,{active:st}=k.fullscreen,[It,Nt]=he.call(k),yt=Et(`aspect-ratio: ${It} / ${Nt}`);if(!st)return void(yt?(rt.style.width=null,rt.style.height=null):(rt.style.maxWidth=null,rt.style.margin=null));let[Ft,kt]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],Kt=Ft/kt>It/Nt;yt?(rt.style.width=Kt?"auto":"100%",rt.style.height=Kt?"100%":"auto"):(rt.style.maxWidth=Kt?kt/Nt*It+"px":null,rt.style.margin=Kt?"0 auto":null)},Ve=()=>{clearTimeout(Te.resized),Te.resized=setTimeout(Le,50)};Ue.call(k,_e.container,"enterfullscreen exitfullscreen",rt=>{let{target:st}=k.fullscreen;st===_e.container&&(!k.isEmbed&&Z(k.config.ratio)||(Le(),(rt.type==="enterfullscreen"?Ue:Re).call(k,window,"resize",Ve)))})}),I(this,"media",()=>{let{player:k}=this,{elements:fe}=k;if(Ue.call(k,k.media,"timeupdate seeking seeked",Te=>ot.timeUpdate.call(k,Te)),Ue.call(k,k.media,"durationchange loadeddata loadedmetadata",Te=>ot.durationUpdate.call(k,Te)),Ue.call(k,k.media,"ended",()=>{k.isHTML5&&k.isVideo&&k.config.resetOnEnd&&(k.restart(),k.pause())}),Ue.call(k,k.media,"progress playing seeking seeked",Te=>ot.updateProgress.call(k,Te)),Ue.call(k,k.media,"volumechange",Te=>ot.updateVolume.call(k,Te)),Ue.call(k,k.media,"playing play pause ended emptied timeupdate",Te=>Be.checkPlaying.call(k,Te)),Ue.call(k,k.media,"waiting canplay seeked playing",Te=>Be.checkLoading.call(k,Te)),k.supported.ui&&k.config.clickToPlay&&!k.isAudio){let Te=Se.call(k,`.${k.config.classNames.video}`);if(!ee(Te))return;Ue.call(k,fe.container,"click",Le=>{([fe.container,Te].includes(Le.target)||Te.contains(Le.target))&&(k.touch&&k.config.hideControls||(k.ended?(this.proxy(Le,k.restart,"restart"),this.proxy(Le,()=>{tt(k.play())},"play")):this.proxy(Le,()=>{tt(k.togglePlay())},"play")))})}k.supported.ui&&k.config.disableContextMenu&&Ue.call(k,fe.wrapper,"contextmenu",Te=>{Te.preventDefault()},!1),Ue.call(k,k.media,"volumechange",()=>{k.storage.set({volume:k.volume,muted:k.muted})}),Ue.call(k,k.media,"ratechange",()=>{ot.updateSetting.call(k,"speed"),k.storage.set({speed:k.speed})}),Ue.call(k,k.media,"qualitychange",Te=>{ot.updateSetting.call(k,"quality",null,Te.detail.quality)}),Ue.call(k,k.media,"ready qualitychange",()=>{ot.setDownloadUrl.call(k)});let _e=k.config.events.concat(["keyup","keydown"]).join(" ");Ue.call(k,k.media,_e,Te=>{let{detail:Le={}}=Te;Te.type==="error"&&(Le=k.media.error),Ne.call(k,fe.container,Te.type,!0,Le)})}),I(this,"proxy",(k,fe,_e)=>{let{player:Te}=this,Le=Te.config.listeners[_e],Ve=!0;Y(Le)&&(Ve=Le.call(Te,k)),Ve!==!1&&Y(fe)&&fe.call(Te,k)}),I(this,"bind",(k,fe,_e,Te,Le=!0)=>{let{player:Ve}=this,rt=Ve.config.listeners[Te],st=Y(rt);Ue.call(Ve,k,fe,It=>this.proxy(It,_e,Te),Le&&!st)}),I(this,"controls",()=>{let{player:k}=this,{elements:fe}=k,_e=z.isIE?"change":"input";if(fe.buttons.play&&Array.from(fe.buttons.play).forEach(Te=>{this.bind(Te,"click",()=>{tt(k.togglePlay())},"play")}),this.bind(fe.buttons.restart,"click",k.restart,"restart"),this.bind(fe.buttons.rewind,"click",()=>{k.lastSeekTime=Date.now(),k.rewind()},"rewind"),this.bind(fe.buttons.fastForward,"click",()=>{k.lastSeekTime=Date.now(),k.forward()},"fastForward"),this.bind(fe.buttons.mute,"click",()=>{k.muted=!k.muted},"mute"),this.bind(fe.buttons.captions,"click",()=>k.toggleCaptions()),this.bind(fe.buttons.download,"click",()=>{Ne.call(k,k.media,"download")},"download"),this.bind(fe.buttons.fullscreen,"click",()=>{k.fullscreen.toggle()},"fullscreen"),this.bind(fe.buttons.pip,"click",()=>{k.pip="toggle"},"pip"),this.bind(fe.buttons.airplay,"click",k.airplay,"airplay"),this.bind(fe.buttons.settings,"click",Te=>{Te.stopPropagation(),Te.preventDefault(),ot.toggleMenu.call(k,Te)},null,!1),this.bind(fe.buttons.settings,"keyup",Te=>{["Space","Enter"].includes(Te.key)&&(Te.key!=="Enter"?(Te.preventDefault(),Te.stopPropagation(),ot.toggleMenu.call(k,Te)):ot.focusFirstMenuItem.call(k,null,!0))},null,!1),this.bind(fe.settings.menu,"keydown",Te=>{Te.key==="Escape"&&ot.toggleMenu.call(k,Te)}),this.bind(fe.inputs.seek,"mousedown mousemove",Te=>{let Le=fe.progress.getBoundingClientRect(),Ve=100/Le.width*(Te.pageX-Le.left);Te.currentTarget.setAttribute("seek-value",Ve)}),this.bind(fe.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",Te=>{let Le=Te.currentTarget,Ve="play-on-seeked";if(ie(Te)&&!["ArrowLeft","ArrowRight"].includes(Te.key))return;k.lastSeekTime=Date.now();let rt=Le.hasAttribute(Ve),st=["mouseup","touchend","keyup"].includes(Te.type);rt&&st?(Le.removeAttribute(Ve),tt(k.play())):!st&&k.playing&&(Le.setAttribute(Ve,""),k.pause())}),z.isIos){let Te=ve.call(k,'input[type="range"]');Array.from(Te).forEach(Le=>this.bind(Le,_e,Ve=>le(Ve.target)))}this.bind(fe.inputs.seek,_e,Te=>{let Le=Te.currentTarget,Ve=Le.getAttribute("seek-value");Z(Ve)&&(Ve=Le.value),Le.removeAttribute("seek-value"),k.currentTime=Ve/Le.max*k.duration},"seek"),this.bind(fe.progress,"mouseenter mouseleave mousemove",Te=>ot.updateSeekTooltip.call(k,Te)),this.bind(fe.progress,"mousemove touchmove",Te=>{let{previewThumbnails:Le}=k;Le&&Le.loaded&&Le.startMove(Te)}),this.bind(fe.progress,"mouseleave touchend click",()=>{let{previewThumbnails:Te}=k;Te&&Te.loaded&&Te.endMove(!1,!0)}),this.bind(fe.progress,"mousedown touchstart",Te=>{let{previewThumbnails:Le}=k;Le&&Le.loaded&&Le.startScrubbing(Te)}),this.bind(fe.progress,"mouseup touchend",Te=>{let{previewThumbnails:Le}=k;Le&&Le.loaded&&Le.endScrubbing(Te)}),z.isWebkit&&Array.from(ve.call(k,'input[type="range"]')).forEach(Te=>{this.bind(Te,"input",Le=>ot.updateRangeFill.call(k,Le.target))}),k.config.toggleInvert&&!ee(fe.display.duration)&&this.bind(fe.display.currentTime,"click",()=>{k.currentTime!==0&&(k.config.invertTime=!k.config.invertTime,ot.timeUpdate.call(k))}),this.bind(fe.inputs.volume,_e,Te=>{k.volume=Te.target.value},"volume"),this.bind(fe.controls,"mouseenter mouseleave",Te=>{fe.controls.hover=!k.touch&&Te.type==="mouseenter"}),fe.fullscreen&&Array.from(fe.fullscreen.children).filter(Te=>!Te.contains(fe.container)).forEach(Te=>{this.bind(Te,"mouseenter mouseleave",Le=>{fe.controls&&(fe.controls.hover=!k.touch&&Le.type==="mouseenter")})}),this.bind(fe.controls,"mousedown mouseup touchstart touchend touchcancel",Te=>{fe.controls.pressed=["mousedown","touchstart"].includes(Te.type)}),this.bind(fe.controls,"focusin",()=>{let{config:Te,timers:Le}=k;q(fe.controls,Te.classNames.noTransition,!0),Be.toggleControls.call(k,!0),setTimeout(()=>{q(fe.controls,Te.classNames.noTransition,!1)},0);let Ve=this.touch?3e3:4e3;clearTimeout(Le.controls),Le.controls=setTimeout(()=>Be.toggleControls.call(k,!1),Ve)}),this.bind(fe.inputs.volume,"wheel",Te=>{let Le=Te.webkitDirectionInvertedFromDevice,[Ve,rt]=[Te.deltaX,-Te.deltaY].map(Nt=>Le?-Nt:Nt),st=Math.sign(Math.abs(Ve)>Math.abs(rt)?Ve:rt);k.increaseVolume(st/50);let{volume:It}=k.media;(st===1&&It<1||st===-1&&It>0)&&Te.preventDefault()},"volume",!1)}),this.player=re,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(re){let{player:k}=this,{elements:fe}=k,{key:_e,type:Te,altKey:Le,ctrlKey:Ve,metaKey:rt,shiftKey:st}=re,It=Te==="keydown",Nt=It&&_e===this.lastKey;if(!(Le||Ve||rt||st)&&_e){if(It){let Ft=document.activeElement;if(ee(Ft)){let{editable:kt}=k.config.selectors,{seek:Kt}=fe.inputs;if(Ft!==Kt&&de(Ft,kt)||re.key==="Space"&&de(Ft,'button, [role^="menuitem"]'))return}switch(["Space","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(_e)&&(re.preventDefault(),re.stopPropagation()),_e){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Nt||(yt=parseInt(_e,10),k.currentTime=k.duration/10*yt);break;case"Space":case"k":Nt||tt(k.togglePlay());break;case"ArrowUp":k.increaseVolume(.1);break;case"ArrowDown":k.decreaseVolume(.1);break;case"m":Nt||(k.muted=!k.muted);break;case"ArrowRight":k.forward();break;case"ArrowLeft":k.rewind();break;case"f":k.fullscreen.toggle();break;case"c":Nt||k.toggleCaptions();break;case"l":k.loop=!k.loop}_e==="Escape"&&!k.fullscreen.usingNative&&k.fullscreen.active&&k.fullscreen.toggle(),this.lastKey=_e}else this.lastKey=null;var yt}}toggleMenu(re){ot.toggleMenu.call(this.player,re)}}typeof globalThis<"u"||typeof window<"u"||(typeof global<"u"?global:typeof self<"u");var vt=function(N,re){return N(re={exports:{}},re.exports),re.exports}(function(N,re){N.exports=function(){var k=function(){},fe={},_e={},Te={};function Le(yt,Ft){yt=yt.push?yt:[yt];var kt,Kt,Xt,Bt=[],Qt=yt.length,Mt=Qt;for(kt=function(Ce,Je){Je.length&&Bt.push(Ce),--Mt||Ft(Bt)};Qt--;)Kt=yt[Qt],(Xt=_e[Kt])?kt(Kt,Xt):(Te[Kt]=Te[Kt]||[]).push(kt)}function Ve(yt,Ft){if(yt){var kt=Te[yt];if(_e[yt]=Ft,kt)for(;kt.length;)kt[0](yt,Ft),kt.splice(0,1)}}function rt(yt,Ft){yt.call&&(yt={success:yt}),Ft.length?(yt.error||k)(Ft):(yt.success||k)(yt)}function st(yt,Ft,kt,Kt){var Xt,Bt,Qt=document,Mt=kt.async,Ce=(kt.numRetries||0)+1,Je=kt.before||k,dt=yt.replace(/[\?|#].*$/,""),Pt=yt.replace(/^(css|img)!/,"");Kt=Kt||0,/(^css!|\.css$)/.test(dt)?((Bt=Qt.createElement("link")).rel="stylesheet",Bt.href=Pt,(Xt="hideFocus"in Bt)&&Bt.relList&&(Xt=0,Bt.rel="preload",Bt.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(dt)?(Bt=Qt.createElement("img")).src=Pt:((Bt=Qt.createElement("script")).src=yt,Bt.async=Mt===void 0||Mt),Bt.onload=Bt.onerror=Bt.onbeforeload=function(Dt){var xt=Dt.type[0];if(Xt)try{Bt.sheet.cssText.length||(xt="e")}catch(Ht){Ht.code!=18&&(xt="e")}if(xt=="e"){if((Kt+=1)<Ce)return st(yt,Ft,kt,Kt)}else if(Bt.rel=="preload"&&Bt.as=="style")return Bt.rel="stylesheet";Ft(yt,xt,Dt.defaultPrevented)},Je(yt,Bt)!==!1&&Qt.head.appendChild(Bt)}function It(yt,Ft,kt){var Kt,Xt,Bt=(yt=yt.push?yt:[yt]).length,Qt=Bt,Mt=[];for(Kt=function(Ce,Je,dt){if(Je=="e"&&Mt.push(Ce),Je=="b"){if(!dt)return;Mt.push(Ce)}--Bt||Ft(Mt)},Xt=0;Xt<Qt;Xt++)st(yt[Xt],Kt,kt)}function Nt(yt,Ft,kt){var Kt,Xt;if(Ft&&Ft.trim&&(Kt=Ft),Xt=(Kt?kt:Ft)||{},Kt){if(Kt in fe)throw"LoadJS";fe[Kt]=!0}function Bt(Qt,Mt){It(yt,function(Ce){rt(Xt,Ce),Qt&&rt({success:Qt,error:Mt},Ce),Ve(Kt,Ce)},Xt)}if(Xt.returnPromise)return new Promise(Bt);Bt()}return Nt.ready=function(yt,Ft){return Le(yt,function(kt){rt(Ft,kt)}),Nt},Nt.done=function(yt){Ve(yt,[])},Nt.reset=function(){fe={},_e={},Te={}},Nt.isDefined=function(yt){return yt in fe},Nt}()});function pt(N){return new Promise((re,k)=>{vt(N,{success:re,error:k})})}function xe(N){N&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===N&&(this.media.paused=!N,Ne.call(this,this.media,N?"play":"pause"))}let ct={setup(){let N=this;q(N.elements.wrapper,N.config.classNames.embed,!0),N.options.speed=N.config.speed.options,Ae.call(N),M(window.Vimeo)?ct.ready.call(N):pt(N.config.urls.vimeo.sdk).then(()=>{ct.ready.call(N)}).catch(re=>{N.debug.warn("Vimeo SDK (player.js) failed to load",re)})},ready(){let N=this,re=N.config.vimeo,{premium:k,referrerPolicy:fe,..._e}=re,Te=N.media.getAttribute("src"),Le="";Z(Te)?(Te=N.media.getAttribute(N.config.attributes.embed.id),Le=N.media.getAttribute(N.config.attributes.embed.hash)):Le=function(Mt){let Ce=Mt.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return Ce&&Ce.length===5?Ce[4]:null}(Te);let Ve=Le?{h:Le}:{};k&&Object.assign(_e,{controls:!1,sidedock:!1});let rt=$t({loop:N.config.loop.active,autoplay:N.autoplay,muted:N.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative,...Ve,..._e}),st=Z(It=Te)?null:U(Number(It))?It:It.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:It;var It;let Nt=O("iframe"),yt=Ge(N.config.urls.vimeo.iframe,st,rt);if(Nt.setAttribute("src",yt),Nt.setAttribute("allowfullscreen",""),Nt.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),Z(fe)||Nt.setAttribute("referrerPolicy",fe),k||!re.customControls)Nt.setAttribute("data-poster",N.poster),N.media=W(Nt,N.media);else{let Mt=O("div",{class:N.config.classNames.embedContainer,"data-poster":N.poster});Mt.appendChild(Nt),N.media=W(Mt,N.media)}re.customControls||mt(Ge(N.config.urls.vimeo.api,yt)).then(Mt=>{!Z(Mt)&&Mt.thumbnail_url&&Be.setPoster.call(N,Mt.thumbnail_url).catch(()=>{})}),N.embed=new window.Vimeo.Player(Nt,{autopause:N.config.autopause,muted:N.muted}),N.media.paused=!0,N.media.currentTime=0,N.supported.ui&&N.embed.disableTextTrack(),N.media.play=()=>(xe.call(N,!0),N.embed.play()),N.media.pause=()=>(xe.call(N,!1),N.embed.pause()),N.media.stop=()=>{N.pause(),N.currentTime=0};let{currentTime:Ft}=N.media;Object.defineProperty(N.media,"currentTime",{get:()=>Ft,set(Mt){let{embed:Ce,media:Je,paused:dt,volume:Pt}=N,Dt=dt&&!Ce.hasPlayed;Je.seeking=!0,Ne.call(N,Je,"seeking"),Promise.resolve(Dt&&Ce.setVolume(0)).then(()=>Ce.setCurrentTime(Mt)).then(()=>Dt&&Ce.pause()).then(()=>Dt&&Ce.setVolume(Pt)).catch(()=>{})}});let kt=N.config.speed.selected;Object.defineProperty(N.media,"playbackRate",{get:()=>kt,set(Mt){N.embed.setPlaybackRate(Mt).then(()=>{kt=Mt,Ne.call(N,N.media,"ratechange")}).catch(()=>{N.options.speed=[1]})}});let{volume:Kt}=N.config;Object.defineProperty(N.media,"volume",{get:()=>Kt,set(Mt){N.embed.setVolume(Mt).then(()=>{Kt=Mt,Ne.call(N,N.media,"volumechange")})}});let{muted:Xt}=N.config;Object.defineProperty(N.media,"muted",{get:()=>Xt,set(Mt){let Ce=!!X(Mt)&&Mt;N.embed.setVolume(Ce?0:N.config.volume).then(()=>{Xt=Ce,Ne.call(N,N.media,"volumechange")})}});let Bt,{loop:Qt}=N.config;Object.defineProperty(N.media,"loop",{get:()=>Qt,set(Mt){let Ce=X(Mt)?Mt:N.config.loop.active;N.embed.setLoop(Ce).then(()=>{Qt=Ce})}}),N.embed.getVideoUrl().then(Mt=>{Bt=Mt,ot.setDownloadUrl.call(N)}).catch(Mt=>{this.debug.warn(Mt)}),Object.defineProperty(N.media,"currentSrc",{get:()=>Bt}),Object.defineProperty(N.media,"ended",{get:()=>N.currentTime===N.duration}),Promise.all([N.embed.getVideoWidth(),N.embed.getVideoHeight()]).then(Mt=>{let[Ce,Je]=Mt;N.embed.ratio=ke(Ce,Je),Ae.call(this)}),N.embed.setAutopause(N.config.autopause).then(Mt=>{N.config.autopause=Mt}),N.embed.getVideoTitle().then(Mt=>{N.config.title=Mt,Be.setTitle.call(this)}),N.embed.getCurrentTime().then(Mt=>{Ft=Mt,Ne.call(N,N.media,"timeupdate")}),N.embed.getDuration().then(Mt=>{N.media.duration=Mt,Ne.call(N,N.media,"durationchange")}),N.embed.getTextTracks().then(Mt=>{N.media.textTracks=Mt,pe.setup.call(N)}),N.embed.on("cuechange",({cues:Mt=[]})=>{let Ce=Mt.map(Je=>function(dt){let Pt=document.createDocumentFragment(),Dt=document.createElement("div");return Pt.appendChild(Dt),Dt.innerHTML=dt,Pt.firstChild.innerText}(Je.text));pe.updateCues.call(N,Ce)}),N.embed.on("loaded",()=>{N.embed.getPaused().then(Mt=>{xe.call(N,!Mt),Mt||Ne.call(N,N.media,"playing")}),ee(N.embed.element)&&N.supported.ui&&N.embed.element.setAttribute("tabindex",-1)}),N.embed.on("bufferstart",()=>{Ne.call(N,N.media,"waiting")}),N.embed.on("bufferend",()=>{Ne.call(N,N.media,"playing")}),N.embed.on("play",()=>{xe.call(N,!0),Ne.call(N,N.media,"playing")}),N.embed.on("pause",()=>{xe.call(N,!1)}),N.embed.on("timeupdate",Mt=>{N.media.seeking=!1,Ft=Mt.seconds,Ne.call(N,N.media,"timeupdate")}),N.embed.on("progress",Mt=>{N.media.buffered=Mt.percent,Ne.call(N,N.media,"progress"),parseInt(Mt.percent,10)===1&&Ne.call(N,N.media,"canplaythrough"),N.embed.getDuration().then(Ce=>{Ce!==N.media.duration&&(N.media.duration=Ce,Ne.call(N,N.media,"durationchange"))})}),N.embed.on("seeked",()=>{N.media.seeking=!1,Ne.call(N,N.media,"seeked")}),N.embed.on("ended",()=>{N.media.paused=!0,Ne.call(N,N.media,"ended")}),N.embed.on("error",Mt=>{N.media.error=Mt,Ne.call(N,N.media,"error")}),re.customControls&&setTimeout(()=>Be.build.call(N),0)}};function Tt(N){N&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===N&&(this.media.paused=!N,Ne.call(this,this.media,N?"play":"pause"))}function Rt(N){return N.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}let jt={setup(){if(q(this.elements.wrapper,this.config.classNames.embed,!0),M(window.YT)&&Y(window.YT.Player))jt.ready.call(this);else{let N=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{Y(N)&&N(),jt.ready.call(this)},pt(this.config.urls.youtube.sdk).catch(re=>{this.debug.warn("YouTube API failed to load",re)})}},getTitle(N){mt(Ge(this.config.urls.youtube.api,N)).then(re=>{if(M(re)){let{title:k,height:fe,width:_e}=re;this.config.title=k,Be.setTitle.call(this),this.embed.ratio=ke(_e,fe)}Ae.call(this)}).catch(()=>{Ae.call(this)})},ready(){let N=this,re=N.config.youtube,k=N.media&&N.media.getAttribute("id");if(!Z(k)&&k.startsWith("youtube-"))return;let fe=N.media.getAttribute("src");Z(fe)&&(fe=N.media.getAttribute(this.config.attributes.embed.id));let _e=Z(Te=fe)?null:Te.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:Te;var Te;let Le=O("div",{id:`${N.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":re.customControls?N.poster:void 0});if(N.media=W(Le,N.media),re.customControls){let Ve=rt=>`https://i.ytimg.com/vi/${_e}/${rt}default.jpg`;Oe(Ve("maxres"),121).catch(()=>Oe(Ve("sd"),121)).catch(()=>Oe(Ve("hq"))).then(rt=>Be.setPoster.call(N,rt.src)).then(rt=>{rt.includes("maxres")||(N.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}N.embed=new window.YT.Player(N.media,{videoId:_e,host:Rt(re),playerVars:R({},{autoplay:N.config.autoplay?1:0,hl:N.config.hl,controls:N.supported.ui&&re.customControls?0:1,disablekb:1,playsinline:N.config.fullscreen.iosNative?0:1,cc_load_policy:N.captions.active?1:0,cc_lang_pref:N.config.captions.language,widget_referrer:window?window.location.href:null},re),events:{onError(Ve){if(!N.media.error){let rt=Ve.data,st={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[rt]||"An unknown error occured";N.media.error={code:rt,message:st},Ne.call(N,N.media,"error")}},onPlaybackRateChange(Ve){let rt=Ve.target;N.media.playbackRate=rt.getPlaybackRate(),Ne.call(N,N.media,"ratechange")},onReady(Ve){if(Y(N.media.play))return;let rt=Ve.target;jt.getTitle.call(N,_e),N.media.play=()=>{Tt.call(N,!0),rt.playVideo()},N.media.pause=()=>{Tt.call(N,!1),rt.pauseVideo()},N.media.stop=()=>{rt.stopVideo()},N.media.duration=rt.getDuration(),N.media.paused=!0,N.media.currentTime=0,Object.defineProperty(N.media,"currentTime",{get:()=>Number(rt.getCurrentTime()),set(yt){N.paused&&!N.embed.hasPlayed&&N.embed.mute(),N.media.seeking=!0,Ne.call(N,N.media,"seeking"),rt.seekTo(yt)}}),Object.defineProperty(N.media,"playbackRate",{get:()=>rt.getPlaybackRate(),set(yt){rt.setPlaybackRate(yt)}});let{volume:st}=N.config;Object.defineProperty(N.media,"volume",{get:()=>st,set(yt){st=yt,rt.setVolume(100*st),Ne.call(N,N.media,"volumechange")}});let{muted:It}=N.config;Object.defineProperty(N.media,"muted",{get:()=>It,set(yt){let Ft=X(yt)?yt:It;It=Ft,rt[Ft?"mute":"unMute"](),rt.setVolume(100*st),Ne.call(N,N.media,"volumechange")}}),Object.defineProperty(N.media,"currentSrc",{get:()=>rt.getVideoUrl()}),Object.defineProperty(N.media,"ended",{get:()=>N.currentTime===N.duration});let Nt=rt.getAvailablePlaybackRates();N.options.speed=Nt.filter(yt=>N.config.speed.options.includes(yt)),N.supported.ui&&re.customControls&&N.media.setAttribute("tabindex",-1),Ne.call(N,N.media,"timeupdate"),Ne.call(N,N.media,"durationchange"),clearInterval(N.timers.buffering),N.timers.buffering=setInterval(()=>{N.media.buffered=rt.getVideoLoadedFraction(),(N.media.lastBuffered===null||N.media.lastBuffered<N.media.buffered)&&Ne.call(N,N.media,"progress"),N.media.lastBuffered=N.media.buffered,N.media.buffered===1&&(clearInterval(N.timers.buffering),Ne.call(N,N.media,"canplaythrough"))},200),re.customControls&&setTimeout(()=>Be.build.call(N),50)},onStateChange(Ve){let rt=Ve.target;switch(clearInterval(N.timers.playing),N.media.seeking&&[1,2].includes(Ve.data)&&(N.media.seeking=!1,Ne.call(N,N.media,"seeked")),Ve.data){case-1:Ne.call(N,N.media,"timeupdate"),N.media.buffered=rt.getVideoLoadedFraction(),Ne.call(N,N.media,"progress");break;case 0:Tt.call(N,!1),N.media.loop?(rt.stopVideo(),rt.playVideo()):Ne.call(N,N.media,"ended");break;case 1:re.customControls&&!N.config.autoplay&&N.media.paused&&!N.embed.hasPlayed?N.media.pause():(Tt.call(N,!0),Ne.call(N,N.media,"playing"),N.timers.playing=setInterval(()=>{Ne.call(N,N.media,"timeupdate")},50),N.media.duration!==rt.getDuration()&&(N.media.duration=rt.getDuration(),Ne.call(N,N.media,"durationchange")));break;case 2:N.muted||N.embed.unMute(),Tt.call(N,!1);break;case 3:Ne.call(N,N.media,"waiting")}Ne.call(N,N.elements.container,"statechange",!1,{code:Ve.data})}}})}},zt={setup(){this.media?(q(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),q(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&q(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=O("div",{class:this.config.classNames.video}),L(this.media,this.elements.wrapper),this.elements.poster=O("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Qe.setup.call(this):this.isYouTube?jt.setup.call(this):this.isVimeo&&ct.setup.call(this)):this.debug.warn("No media element found!")}};class Vt{constructor(re){I(this,"load",()=>{this.enabled&&(M(window.google)&&M(window.google.ima)?this.ready():pt(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),I(this,"ready",()=>{var k;this.enabled||((k=this).manager&&k.manager.destroy(),k.elements.displayContainer&&k.elements.displayContainer.destroy(),k.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),I(this,"setupIMA",()=>{this.elements.container=O("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,k=>this.onAdsManagerLoaded(k),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,k=>this.onAdError(k),!1),this.requestAds()}),I(this,"requestAds",()=>{let{container:k}=this.player.elements;try{let fe=new google.ima.AdsRequest;fe.adTagUrl=this.tagUrl,fe.linearAdSlotWidth=k.offsetWidth,fe.linearAdSlotHeight=k.offsetHeight,fe.nonLinearAdSlotWidth=k.offsetWidth,fe.nonLinearAdSlotHeight=k.offsetHeight,fe.forceNonLinearFullSlot=!1,fe.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(fe)}catch(fe){this.onAdError(fe)}}),I(this,"pollCountdown",(k=!1)=>{if(!k)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{let fe=wt(Math.max(this.manager.getRemainingTime(),0)),_e=`${Xe.get("advertisement",this.player.config)} - ${fe}`;this.elements.container.setAttribute("data-badge-text",_e)},100)}),I(this,"onAdsManagerLoaded",k=>{if(!this.enabled)return;let fe=new google.ima.AdsRenderingSettings;fe.restoreCustomPlaybackStateOnAdBreakComplete=!0,fe.enablePreloading=!0,this.manager=k.getAdsManager(this.player,fe),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,_e=>this.onAdError(_e)),Object.keys(google.ima.AdEvent.Type).forEach(_e=>{this.manager.addEventListener(google.ima.AdEvent.Type[_e],Te=>this.onAdEvent(Te))}),this.trigger("loaded")}),I(this,"addCuePoints",()=>{Z(this.cuePoints)||this.cuePoints.forEach(k=>{if(k!==0&&k!==-1&&k<this.player.duration){let fe=this.player.elements.progress;if(ee(fe)){let _e=100/this.player.duration*k,Te=O("span",{class:this.player.config.classNames.cues});Te.style.left=`${_e.toString()}%`,fe.appendChild(Te)}}})}),I(this,"onAdEvent",k=>{let{container:fe}=this.player.elements,_e=k.getAd(),Te=k.getAdData();switch((Le=>{Ne.call(this.player,this.player.media,`ads${Le.replace(/_/g,"").toLowerCase()}`)})(k.type),k.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),_e.isLinear()||(_e.width=fe.offsetWidth,_e.height=fe.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:Te.adError&&this.player.debug.warn(`Non-fatal ad error: ${Te.adError.getMessage()}`)}}),I(this,"onAdError",k=>{this.cancel(),this.player.debug.warn("Ads error",k)}),I(this,"listeners",()=>{let{container:k}=this.player.elements,fe;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{fe=this.player.currentTime}),this.player.on("seeked",()=>{let _e=this.player.currentTime;Z(this.cuePoints)||this.cuePoints.forEach((Te,Le)=>{fe<Te&&Te<_e&&(this.manager.discardAdBreak(),this.cuePoints.splice(Le,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(k.offsetWidth,k.offsetHeight,google.ima.ViewMode.NORMAL)})}),I(this,"play",()=>{let{container:k}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(k.offsetWidth,k.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(fe){this.onAdError(fe)}}).catch(()=>{})}),I(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,tt(this.player.media.play())}),I(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),I(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),I(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(k=>{this.on("loaded",k),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),I(this,"trigger",(k,...fe)=>{let _e=this.events[k];se(_e)&&_e.forEach(Te=>{Y(Te)&&Te.apply(this,fe)})}),I(this,"on",(k,fe)=>(se(this.events[k])||(this.events[k]=[]),this.events[k].push(fe),this)),I(this,"startSafetyTimer",(k,fe)=>{this.player.debug.log(`Safety timer invoked from: ${fe}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},k)}),I(this,"clearSafetyTimer",k=>{F(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${k}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=re,this.config=re.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((k,fe)=>{this.on("loaded",k),this.on("error",fe)}),this.load()}get enabled(){let{config:re}=this;return this.player.isHTML5&&this.player.isVideo&&re.enabled&&(!Z(re.publisherId)||oe(re.tagUrl))}get tagUrl(){let{config:re}=this;return oe(re.tagUrl)?re.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${$t({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:re.publisherId})}`}}function Gt(N=0,re=0,k=255){return Math.min(Math.max(N,re),k)}let sr=N=>{let re=[];return N.split(/\r\n\r\n|\n\n|\r\r/).forEach(k=>{let fe={};k.split(/\r\n|\n|\r/).forEach(_e=>{if(U(fe.startTime)){if(!Z(_e.trim())&&Z(fe.text)){let Te=_e.trim().split("#xywh=");[fe.text]=Te,Te[1]&&([fe.x,fe.y,fe.w,fe.h]=Te[1].split(","))}}else{let Te=_e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);Te&&(fe.startTime=60*Number(Te[1]||0)*60+60*Number(Te[2])+Number(Te[3])+Number(`0.${Te[4]}`),fe.endTime=60*Number(Te[6]||0)*60+60*Number(Te[7])+Number(Te[8])+Number(`0.${Te[9]}`))}}),fe.text&&re.push(fe)}),re},gr=(N,re)=>{let k={};return N>re.width/re.height?(k.width=re.width,k.height=1/N*re.width):(k.height=re.height,k.width=N*re.height),k};class tr{constructor(re){I(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.loaded=!0)})}),I(this,"getThumbnails",()=>new Promise(k=>{let{src:fe}=this.player.config.previewThumbnails;if(Z(fe))throw new Error("Missing previewThumbnails.src config attribute");let _e=()=>{this.thumbnails.sort((Te,Le)=>Te.height-Le.height),this.player.debug.log("Preview thumbnails",this.thumbnails),k()};if(Y(fe))fe(Te=>{this.thumbnails=Te,_e()});else{let Te=(j(fe)?[fe]:fe).map(Le=>this.getThumbnail(Le));Promise.all(Te).then(_e)}})),I(this,"getThumbnail",k=>new Promise(fe=>{mt(k).then(_e=>{let Te={frames:sr(_e),height:null,urlPrefix:""};Te.frames[0].text.startsWith("/")||Te.frames[0].text.startsWith("http://")||Te.frames[0].text.startsWith("https://")||(Te.urlPrefix=k.substring(0,k.lastIndexOf("/")+1));let Le=new Image;Le.onload=()=>{Te.height=Le.naturalHeight,Te.width=Le.naturalWidth,this.thumbnails.push(Te),fe()},Le.src=Te.urlPrefix+Te.frames[0].text})})),I(this,"startMove",k=>{if(this.loaded&&J(k)&&["touchmove","mousemove"].includes(k.type)&&this.player.media.duration){if(k.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var fe,_e;let Te=this.player.elements.progress.getBoundingClientRect(),Le=100/Te.width*(k.pageX-Te.left);this.seekTime=this.player.media.duration*(Le/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=k.pageX,this.elements.thumb.time.innerText=wt(this.seekTime);let Ve=(fe=this.player.config.markers)===null||fe===void 0||(_e=fe.points)===null||_e===void 0?void 0:_e.find(({time:rt})=>rt===Math.round(this.seekTime));Ve&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${Ve.label}<br>`)}this.showImageAtCurrentTime()}}),I(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),I(this,"startScrubbing",k=>{(F(k.button)||k.button===!1||k.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),I(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):Ke.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),I(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),I(this,"render",()=>{this.elements.thumb.container=O("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=O("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);let k=O("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=O("span",{},"00:00"),k.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(k),ee(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=O("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),I(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),I(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();let k=this.thumbnails[0].frames.findIndex(Te=>this.seekTime>=Te.startTime&&this.seekTime<=Te.endTime),fe=k>=0,_e=0;this.mouseDown||this.toggleThumbContainer(fe),fe&&(this.thumbnails.forEach((Te,Le)=>{this.loadedImages.includes(Te.frames[k].text)&&(_e=Le)}),k!==this.showingThumb&&(this.showingThumb=k,this.loadImage(_e)))}),I(this,"loadImage",(k=0)=>{let fe=this.showingThumb,_e=this.thumbnails[k],{urlPrefix:Te}=_e,Le=_e.frames[fe],Ve=_e.frames[fe].text,rt=Te+Ve;if(this.currentImageElement&&this.currentImageElement.dataset.filename===Ve)this.showImage(this.currentImageElement,Le,k,fe,Ve,!1),this.currentImageElement.dataset.index=fe,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);let st=new Image;st.src=rt,st.dataset.index=fe,st.dataset.filename=Ve,this.showingThumbFilename=Ve,this.player.debug.log(`Loading image: ${rt}`),st.onload=()=>this.showImage(st,Le,k,fe,Ve,!0),this.loadingImage=st,this.removeOldImages(st)}}),I(this,"showImage",(k,fe,_e,Te,Le,Ve=!0)=>{this.player.debug.log(`Showing thumb: ${Le}. num: ${Te}. qual: ${_e}. newimg: ${Ve}`),this.setImageSizeAndOffset(k,fe),Ve&&(this.currentImageContainer.appendChild(k),this.currentImageElement=k,this.loadedImages.includes(Le)||this.loadedImages.push(Le)),this.preloadNearby(Te,!0).then(this.preloadNearby(Te,!1)).then(this.getHigherQuality(_e,k,fe,Le))}),I(this,"removeOldImages",k=>{Array.from(this.currentImageContainer.children).forEach(fe=>{if(fe.tagName.toLowerCase()!=="img")return;let _e=this.usingSprites?500:1e3;if(fe.dataset.index!==k.dataset.index&&!fe.dataset.deleting){fe.dataset.deleting=!0;let{currentImageContainer:Te}=this;setTimeout(()=>{Te.removeChild(fe),this.player.debug.log(`Removing thumb: ${fe.dataset.filename}`)},_e)}})}),I(this,"preloadNearby",(k,fe=!0)=>new Promise(_e=>{setTimeout(()=>{let Te=this.thumbnails[0].frames[k].text;if(this.showingThumbFilename===Te){let Le;Le=fe?this.thumbnails[0].frames.slice(k):this.thumbnails[0].frames.slice(0,k).reverse();let Ve=!1;Le.forEach(rt=>{let st=rt.text;if(st!==Te&&!this.loadedImages.includes(st)){Ve=!0,this.player.debug.log(`Preloading thumb filename: ${st}`);let{urlPrefix:It}=this.thumbnails[0],Nt=It+st,yt=new Image;yt.src=Nt,yt.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${st}`),this.loadedImages.includes(st)||this.loadedImages.push(st),_e()}}}),Ve||_e()}},300)})),I(this,"getHigherQuality",(k,fe,_e,Te)=>{if(k<this.thumbnails.length-1){let Le=fe.naturalHeight;this.usingSprites&&(Le=_e.h),Le<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===Te&&(this.player.debug.log(`Showing higher quality thumb for: ${Te}`),this.loadImage(k+1))},300)}}),I(this,"toggleThumbContainer",(k=!1,fe=!1)=>{let _e=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(_e,k),!k&&fe&&(this.showingThumb=null,this.showingThumbFilename=null)}),I(this,"toggleScrubbingContainer",(k=!1)=>{let fe=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(fe,k),k||(this.showingThumb=null,this.showingThumbFilename=null)}),I(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),I(this,"setThumbContainerSizeAndPos",()=>{let{imageContainer:k}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(k.clientHeight>20&&k.clientWidth<20){let fe=Math.floor(k.clientHeight*this.thumbAspectRatio);k.style.width=`${fe}px`}else if(k.clientHeight<20&&k.clientWidth>20){let fe=Math.floor(k.clientWidth/this.thumbAspectRatio);k.style.height=`${fe}px`}}else{let fe=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);k.style.height=`${this.thumbContainerHeight}px`,k.style.width=`${fe}px`}this.setThumbContainerPos()}),I(this,"setThumbContainerPos",()=>{let k=this.player.elements.progress.getBoundingClientRect(),fe=this.player.elements.container.getBoundingClientRect(),{container:_e}=this.elements.thumb,Te=fe.left-k.left+10,Le=fe.right-k.left-_e.clientWidth-10,Ve=this.mousePosX-k.left-_e.clientWidth/2,rt=Gt(Ve,Te,Le);_e.style.left=`${rt}px`,_e.style.setProperty("--preview-arrow-offset",Ve-rt+"px")}),I(this,"setScrubbingContainerSize",()=>{let{width:k,height:fe}=gr(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${k}px`,this.elements.scrubbing.container.style.height=`${fe}px`}),I(this,"setImageSizeAndOffset",(k,fe)=>{if(!this.usingSprites)return;let _e=this.thumbContainerHeight/fe.h;k.style.height=k.naturalHeight*_e+"px",k.style.width=k.naturalWidth*_e+"px",k.style.left=`-${fe.x*_e}px`,k.style.top=`-${fe.y*_e}px`}),this.player=re,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){let{height:re}=gr(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return re}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(re){this.mouseDown?this.currentScrubbingImageElement=re:this.currentThumbnailImageElement=re}}let lr={insertElements(N,re){j(re)?Q(N,this.media,{src:re}):se(re)&&re.forEach(k=>{Q(N,this.media,k)})},change(N){K(N,"sources.length")?(Qe.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],ne(this.media),this.media=null,ee(this.elements.container)&&this.elements.container.removeAttribute("class");let{sources:re,type:k}=N,[{provider:fe=je.html5,src:_e}]=re,Te=fe==="html5"?k:"div",Le=fe==="html5"?{}:{src:_e};Object.assign(this,{provider:fe,type:k,supported:Fe.check(k,fe,this.config.playsinline),media:O(Te,Le)}),this.elements.container.appendChild(this.media),X(N.autoplay)&&(this.config.autoplay=N.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),Z(N.poster)||(this.poster=N.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Be.addStyleHook.call(this),this.isHTML5&&lr.insertElements.call(this,"source",re),this.config.title=N.title,zt.setup.call(this),this.isHTML5&&Object.keys(N).includes("tracks")&&lr.insertElements.call(this,"track",N.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Be.build.call(this),this.isHTML5&&this.media.load(),Z(N.previewThumbnails)||(Object.assign(this.config.previewThumbnails,N.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new tr(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class ur{constructor(re,k){if(I(this,"play",()=>Y(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>tt(this.media.play())),this.media.play()):null),I(this,"pause",()=>this.playing&&Y(this.media.pause)?this.media.pause():null),I(this,"togglePlay",Ve=>(X(Ve)?Ve:!this.playing)?this.play():this.pause()),I(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):Y(this.media.stop)&&this.media.stop()}),I(this,"restart",()=>{this.currentTime=0}),I(this,"rewind",Ve=>{this.currentTime-=U(Ve)?Ve:this.config.seekTime}),I(this,"forward",Ve=>{this.currentTime+=U(Ve)?Ve:this.config.seekTime}),I(this,"increaseVolume",Ve=>{let rt=this.media.muted?0:this.volume;this.volume=rt+(U(Ve)?Ve:0)}),I(this,"decreaseVolume",Ve=>{this.increaseVolume(-Ve)}),I(this,"airplay",()=>{Fe.airplay&&this.media.webkitShowPlaybackTargetPicker()}),I(this,"toggleControls",Ve=>{if(this.supported.ui&&!this.isAudio){let rt=me(this.elements.container,this.config.classNames.hideControls),st=Ve===void 0?void 0:!Ve,It=q(this.elements.container,this.config.classNames.hideControls,st);if(It&&se(this.config.controls)&&this.config.controls.includes("settings")&&!Z(this.config.settings)&&ot.toggleMenu.call(this,!1),It!==rt){let Nt=It?"controlshidden":"controlsshown";Ne.call(this,this.media,Nt)}return!It}return!1}),I(this,"on",(Ve,rt)=>{Ue.call(this,this.elements.container,Ve,rt)}),I(this,"once",(Ve,rt)=>{Ke.call(this,this.elements.container,Ve,rt)}),I(this,"off",(Ve,rt)=>{Re(this.elements.container,Ve,rt)}),I(this,"destroy",(Ve,rt=!1)=>{if(!this.ready)return;let st=()=>{document.body.style.overflow="",this.embed=null,rt?(Object.keys(this.elements).length&&(ne(this.elements.buttons.play),ne(this.elements.captions),ne(this.elements.controls),ne(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),Y(Ve)&&Ve()):(ze.call(this),Qe.cancelRequests.call(this),W(this.elements.original,this.elements.container),Ne.call(this,this.elements.original,"destroyed",!0),Y(Ve)&&Ve.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Be.toggleNativeControls.call(this,!0),st()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&Y(this.embed.destroy)&&this.embed.destroy(),st()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(st),setTimeout(st,200))}),I(this,"supports",Ve=>Fe.mime.call(this,Ve)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=Fe.touch,this.media=re,j(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||G(this.media)||se(this.media))&&(this.media=this.media[0]),this.config=R({},Ye,ur.defaults,k||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new At(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",Fe),F(this.media)||!ee(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!Fe.check().api)return void this.debug.error("Setup failed: no support");let fe=this.media.cloneNode(!0);fe.autoplay=!1,this.elements.original=fe;let _e=this.media.tagName.toLowerCase(),Te=null,Le=null;switch(_e){case"div":if(Te=this.media.querySelector("iframe"),ee(Te)){if(Le=Wt(Te.getAttribute("src")),this.provider=function(Ve){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(Ve)?je.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(Ve)?je.vimeo:null}(Le.toString()),this.elements.container=this.media,this.media=Te,this.elements.container.className="",Le.search.length){let Ve=["1","true"];Ve.includes(Le.searchParams.get("autoplay"))&&(this.config.autoplay=!0),Ve.includes(Le.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=Ve.includes(Le.searchParams.get("playsinline")),this.config.youtube.hl=Le.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(Z(this.provider)||!Object.values(je).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=ut;break;case"video":case"audio":this.type=_e,this.provider=je.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=Fe.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new et(this),this.storage=new nt(this),this.media.plyr=this,ee(this.elements.container)||(this.elements.container=O("div",{tabindex:0}),L(this.media,this.elements.container)),Be.migrateStyles.call(this),Be.addStyleHook.call(this),zt.setup.call(this),this.config.debug&&Ue.call(this,this.elements.container,this.config.events.join(" "),Ve=>{this.debug.log(`event: ${Ve.type}`)}),this.fullscreen=new we(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Be.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Vt(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>tt(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new tr(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===je.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===je.youtube}get isVimeo(){return this.provider===je.vimeo}get isVideo(){return this.type===ut}get isAudio(){return this.type===Ze}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&this.currentTime===0)}get ended(){return Boolean(this.media.ended)}set currentTime(re){if(!this.duration)return;let k=U(re)&&re>0;this.media.currentTime=k?Math.min(re,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){let{buffered:re}=this.media;return U(re)?re:re&&re.length&&this.duration>0?re.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){let re=parseFloat(this.config.duration),k=(this.media||{}).duration,fe=U(k)&&k!==1/0?k:0;return re||fe}set volume(re){let k=re;j(k)&&(k=Number(k)),U(k)||(k=this.storage.get("volume")),U(k)||({volume:k}=this.config),k>1&&(k=1),k<0&&(k=0),this.config.volume=k,this.media.volume=k,!Z(re)&&this.muted&&k>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(re){let k=re;X(k)||(k=this.storage.get("muted")),X(k)||(k=this.config.muted),this.config.muted=k,this.media.muted=k}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}set speed(re){let k=null;U(re)&&(k=re),U(k)||(k=this.storage.get("speed")),U(k)||(k=this.config.speed.selected);let{minimumSpeed:fe,maximumSpeed:_e}=this;k=Gt(k,fe,_e),this.config.speed.selected=k,setTimeout(()=>{this.media&&(this.media.playbackRate=k)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(re){let k=this.config.quality,fe=this.options.quality;if(!fe.length)return;let _e=[!Z(re)&&Number(re),this.storage.get("quality"),k.selected,k.default].find(U),Te=!0;if(!fe.includes(_e)){let Le=bt(fe,_e);this.debug.warn(`Unsupported quality option: ${_e}, using ${Le} instead`),_e=Le,Te=!1}k.selected=_e,this.media.quality=_e,Te&&this.storage.set({quality:_e})}get quality(){return this.media.quality}set loop(re){let k=X(re)?re:this.config.loop.active;this.config.loop.active=k,this.media.loop=k}get loop(){return Boolean(this.media.loop)}set source(re){lr.change.call(this,re)}get source(){return this.media.currentSrc}get download(){let{download:re}=this.config.urls;return oe(re)?re:this.source}set download(re){oe(re)&&(this.config.urls.download=re,ot.setDownloadUrl.call(this))}set poster(re){this.isVideo?Be.setPoster.call(this,re,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;let re=ye(he.call(this));return se(re)?re.join(":"):re}set ratio(re){this.isVideo?j(re)&&Ct(re)?(this.config.ratio=ye(re),Ae.call(this)):this.debug.error(`Invalid aspect ratio specified (${re})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(re){this.config.autoplay=X(re)?re:this.config.autoplay}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(re){pe.toggle.call(this,re,!1)}set currentTrack(re){pe.set.call(this,re,!1),pe.setup.call(this)}get currentTrack(){let{toggled:re,currentTrack:k}=this.captions;return re?k:-1}set language(re){pe.setLanguage.call(this,re,!1)}get language(){return(pe.getCurrentTrack.call(this)||{}).language}set pip(re){if(!Fe.pip)return;let k=X(re)?re:!this.pip;Y(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(k?lt:De),Y(this.media.requestPictureInPicture)&&(!this.pip&&k?this.media.requestPictureInPicture():this.pip&&!k&&document.exitPictureInPicture())}get pip(){return Fe.pip?Z(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===lt:null}setPreviewThumbnails(re){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,re),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new tr(this))}static supported(re,k,fe){return Fe.check(re,k,fe)}static loadSprite(re,k){return ht(re,k)}static setup(re,k={}){let fe=null;return j(re)?fe=Array.from(document.querySelectorAll(re)):G(re)?fe=Array.from(re):se(re)&&(fe=re.filter(ee)),Z(fe)?null:fe.map(_e=>new ur(_e,k))}}var br;return ur.defaults=(br=Ye,JSON.parse(JSON.stringify(br))),ur})});var ea=fr((Nl,Zi)=>{Zi.exports=function I(g,r,o){return r===void 0?function(l,u){return I(g,l,u)}:(o===void 0&&(o="0"),g-=r.toString().length,g>0?new Array(g+(/\./.test(r)?2:1)).join(o)+r:r+"")}});var Ln=fr((wl,ia)=>{"use strict";ia.exports={fromMs:ra,fromS:Yo,toMs:na,toS:zo};var ln=ea(),On=36e5,Dn=6e4,Hr=1e3,ta="Time format error";function ra(I,g="mm:ss"){if(typeof I!="number"||Number.isNaN(I))throw new Error("NaN error");let r=Math.abs(I),o=I<0,l=Math.floor(r/On),u=Math.floor(r%On/Dn),m=Math.floor(r%Dn/Hr),y=Math.floor(r%Hr);return Xo({negative:o,hours:l,minutes:u,seconds:m,miliseconds:y},g)}function Yo(I,g="mm:ss"){if(typeof I!="number"||Number.isNaN(I))throw new Error("NaN error");let r=I*Hr;return ra(r,g)}function na(I,g="mm:ss"){let r;if(["mm:ss","mm:ss.sss","hh:mm:ss","hh:mm:ss.sss"].includes(g))r=/^(-)?(?:(\d\d+):)?(\d\d):(\d\d)(\.\d+)?$/;else if(g==="hh:mm")r=/^(-)?(\d\d):(\d\d)(?::(\d\d)(?:(\.\d+))?)?$/;else throw new Error(ta);let o=r.exec(I);if(!o)throw new Error;let l=o[1]==="-",u=o[2]|0,m=o[3]|0,y=o[4]|0,T=Math.floor(1e3*o[5]|0);if(m>60||y>60)throw new Error;return(l?-1:1)*(u*On+m*Dn+y*Hr+T)}function zo(I,g="mm:ss"){let r=na(I,g);return Math.floor(r/Hr)}function Xo(I,g){let r,o,l;switch(g.toLowerCase()){case"hh:mm:ss.sss":r=!0,o=!0,l=!0;break;case"hh:mm:ss":r=!!I.miliseconds,o=!0,l=!0;break;case"hh:mm":r=!!I.miliseconds,o=r||!!I.seconds,l=!0;break;case"mm:ss":r=!!I.miliseconds,o=!0,l=!!I.hours;break;case"mm:ss.sss":r=!0,o=!0,l=!!I.hours;break;default:throw new Error(ta)}let u=ln(2,I.hours),m=ln(2,I.minutes),y=ln(2,I.seconds),T=ln(3,I.miliseconds);return(I.negative?"-":"")+(l?r?`${u}:${m}:${y}.${T}`:o?`${u}:${m}:${y}`:`${u}:${m}`:r?`${m}:${y}.${T}`:`${m}:${y}`)}});var Qo={};ro(Qo,{default:()=>fn});module.exports=no(Qo);var ma=dr(jr()),ha=require("obsidian");var io="(v[h|w|min|max]|p[c|t|x]|[re|e|c|m]m|[l|c]h|%|in|Q|ex)",zn=new RegExp(io);var ao=["auto","revert","unset","inherit","initial","max-content","min-content","fit-content","-webkit-fill-available"];function Pr(I){return zn.test(Xn(I)[1])}function Xn(I,g={}){let{onlyValue:r=!1,onlyUnit:o=!1}=g;if(typeof I=="number")return r?I:o?"":[I,""];let l=[0,""];if(ao.includes(I))return[I,""];I=String(I);let u=parseFloat(I),m=I.match(/[\d.\-\+]*\s*(.*)/)[1];return l=[u,m],r?u:o?m:l}var Qn=Xn;var $n=Qn;var qn=require("obsidian");var Xr=I=>I.hash?I.href.slice(0,-I.hash.length):I.href,kr=(I,g,r)=>{let[o,l]=$n(g);I.style.setProperty("--max-ratio-width",o*r+l)},Qr=(I,g)=>{let{editor:r,app:o}=g,l=r.getCursor("to");r.replaceRange(I,l,l),o.isMobile&&r.setCursor(r.offsetToPos(r.posToOffset(l)+I.length))},Jn=I=>new Promise((g,r)=>{if(qn.Platform.isDesktopApp){let o=require("https").request({hostname:"b23.tv",port:443,path:"/"+I,method:"GET"},l=>l.headers.location?g(l.headers.location):r(new Error("No redirect location found")));o.on("error",l=>r(l)),o.end()}else r(new TypeError("Calling node https in non-electron environment"))});var pr=I=>I.plugins.plugins["mx-bili-plugin"]!==void 0,Zn=I=>{let g=I.plugins.plugins["mx-bili-plugin"];if(pr(I))return g.settings.port;throw new Error("bili plugin not available")},ei=I=>{let g=I.plugins.plugins["mx-bili-plugin"];if(pr(I))return g.portSetting;throw new Error("bili plugin not available")},ti=I=>{let g=I.plugins.plugins["mx-bili-plugin"];if(pr(I))return g.fetchPoster;throw new Error("bili plugin not available")};var ri=I=>createEl("iframe",{cls:"bili-iframe",attr:{src:I.iframe.toString(),scrolling:"no",border:"0",frameborder:"no",framespacing:"0",allowfullscreen:!1,sandbox:"allow-forms allow-presentation allow-same-origin allow-scripts allow-modals"}});var _r=require("obsidian"),_n=dr($r()),ki=dr(Ni());var Ro={aa:{name:"Afar",nativeName:"Afaraf"},ab:{name:"Abkhaz",nativeName:"\u0430\u04A7\u0441\u0443\u0430 \u0431\u044B\u0437\u0448\u04D9\u0430"},ae:{name:"Avestan",nativeName:"avesta"},af:{name:"Afrikaans",nativeName:"Afrikaans"},ak:{name:"Akan",nativeName:"Akan"},am:{name:"Amharic",nativeName:"\u12A0\u121B\u122D\u129B"},an:{name:"Aragonese",nativeName:"aragon\xE9s"},ar:{name:"Arabic",nativeName:"\u0627\u064E\u0644\u0652\u0639\u064E\u0631\u064E\u0628\u0650\u064A\u064E\u0651\u0629\u064F"},as:{name:"Assamese",nativeName:"\u0985\u09B8\u09AE\u09C0\u09AF\u09BC\u09BE"},av:{name:"Avaric",nativeName:"\u0430\u0432\u0430\u0440 \u043C\u0430\u0446\u04C0"},ay:{name:"Aymara",nativeName:"aymar aru"},az:{name:"Azerbaijani",nativeName:"az\u0259rbaycan dili"},ba:{name:"Bashkir",nativeName:"\u0431\u0430\u0448\u04A1\u043E\u0440\u0442 \u0442\u0435\u043B\u0435"},be:{name:"Belarusian",nativeName:"\u0431\u0435\u043B\u0430\u0440\u0443\u0441\u043A\u0430\u044F \u043C\u043E\u0432\u0430"},bg:{name:"Bulgarian",nativeName:"\u0431\u044A\u043B\u0433\u0430\u0440\u0441\u043A\u0438 \u0435\u0437\u0438\u043A"},bi:{name:"Bislama",nativeName:"Bislama"},bm:{name:"Bambara",nativeName:"bamanankan"},bn:{name:"Bengali",nativeName:"\u09AC\u09BE\u0982\u09B2\u09BE"},bo:{name:"Tibetan",nativeName:"\u0F56\u0F7C\u0F51\u0F0B\u0F61\u0F72\u0F42"},br:{name:"Breton",nativeName:"brezhoneg"},bs:{name:"Bosnian",nativeName:"bosanski jezik"},ca:{name:"Catalan",nativeName:"Catal\xE0"},ce:{name:"Chechen",nativeName:"\u043D\u043E\u0445\u0447\u0438\u0439\u043D \u043C\u043E\u0442\u0442"},ch:{name:"Chamorro",nativeName:"Chamoru"},co:{name:"Corsican",nativeName:"corsu"},cr:{name:"Cree",nativeName:"\u14C0\u1426\u1403\u152D\u140D\u140F\u1423"},cs:{name:"Czech",nativeName:"\u010De\u0161tina"},cu:{name:"Old Church Slavonic",nativeName:"\u0469\u0437\u044B\u043A\u044A \u0441\u043B\u043E\u0432\u0463\u043D\u044C\u0441\u043A\u044A"},cv:{name:"Chuvash",nativeName:"\u0447\u04D1\u0432\u0430\u0448 \u0447\u04D7\u043B\u0445\u0438"},cy:{name:"Welsh",nativeName:"Cymraeg"},da:{name:"Danish",nativeName:"dansk"},de:{name:"German",nativeName:"Deutsch"},dv:{name:"Divehi",nativeName:"\u078B\u07A8\u0788\u07AC\u0780\u07A8"},dz:{name:"Dzongkha",nativeName:"\u0F62\u0FAB\u0F7C\u0F44\u0F0B\u0F41"},ee:{name:"Ewe",nativeName:"E\u028Begbe"},el:{name:"Greek",nativeName:"\u0395\u03BB\u03BB\u03B7\u03BD\u03B9\u03BA\u03AC"},en:{name:"English",nativeName:"English"},eo:{name:"Esperanto",nativeName:"Esperanto"},es:{name:"Spanish",nativeName:"Espa\xF1ol"},et:{name:"Estonian",nativeName:"eesti"},eu:{name:"Basque",nativeName:"euskara"},fa:{name:"Persian",nativeName:"\u0641\u0627\u0631\u0633\u06CC"},ff:{name:"Fula",nativeName:"Fulfulde"},fi:{name:"Finnish",nativeName:"suomi"},fj:{name:"Fijian",nativeName:"vosa Vakaviti"},fo:{name:"Faroese",nativeName:"f\xF8royskt"},fr:{name:"French",nativeName:"Fran\xE7ais"},fy:{name:"Western Frisian",nativeName:"Frysk"},ga:{name:"Irish",nativeName:"Gaeilge"},gd:{name:"Scottish Gaelic",nativeName:"G\xE0idhlig"},gl:{name:"Galician",nativeName:"galego"},gn:{name:"Guaran\xED",nativeName:"Ava\xF1e'\u1EBD"},gu:{name:"Gujarati",nativeName:"\u0A97\u0AC1\u0A9C\u0AB0\u0ABE\u0AA4\u0AC0"},gv:{name:"Manx",nativeName:"Gaelg"},ha:{name:"Hausa",nativeName:"\u0647\u064E\u0648\u064F\u0633\u064E"},he:{name:"Hebrew",nativeName:"\u05E2\u05D1\u05E8\u05D9\u05EA"},hi:{name:"Hindi",nativeName:"\u0939\u093F\u0928\u094D\u0926\u0940"},ho:{name:"Hiri Motu",nativeName:"Hiri Motu"},hr:{name:"Croatian",nativeName:"Hrvatski"},ht:{name:"Haitian",nativeName:"Krey\xF2l ayisyen"},hu:{name:"Hungarian",nativeName:"magyar"},hy:{name:"Armenian",nativeName:"\u0540\u0561\u0575\u0565\u0580\u0565\u0576"},hz:{name:"Herero",nativeName:"Otjiherero"},ia:{name:"Interlingua",nativeName:"Interlingua"},id:{name:"Indonesian",nativeName:"Bahasa Indonesia"},ie:{name:"Interlingue",nativeName:"Interlingue"},ig:{name:"Igbo",nativeName:"As\u1EE5s\u1EE5 Igbo"},ii:{name:"Nuosu",nativeName:"\uA188\uA320\uA4BF Nuosuhxop"},ik:{name:"Inupiaq",nativeName:"I\xF1upiaq"},io:{name:"Ido",nativeName:"Ido"},is:{name:"Icelandic",nativeName:"\xCDslenska"},it:{name:"Italian",nativeName:"Italiano"},iu:{name:"Inuktitut",nativeName:"\u1403\u14C4\u1483\u144E\u1450\u1466"},ja:{name:"Japanese",nativeName:"\u65E5\u672C\u8A9E"},jv:{name:"Javanese",nativeName:"basa Jawa"},ka:{name:"Georgian",nativeName:"\u10E5\u10D0\u10E0\u10D7\u10E3\u10DA\u10D8"},kg:{name:"Kongo",nativeName:"Kikongo"},ki:{name:"Kikuyu",nativeName:"G\u0129k\u0169y\u0169"},kj:{name:"Kwanyama",nativeName:"Kuanyama"},kk:{name:"Kazakh",nativeName:"\u049B\u0430\u0437\u0430\u049B \u0442\u0456\u043B\u0456"},kl:{name:"Kalaallisut",nativeName:"kalaallisut"},km:{name:"Khmer",nativeName:"\u1781\u17C1\u1798\u179A\u1797\u17B6\u179F\u17B6"},kn:{name:"Kannada",nativeName:"\u0C95\u0CA8\u0CCD\u0CA8\u0CA1"},ko:{name:"Korean",nativeName:"\uD55C\uAD6D\uC5B4"},kr:{name:"Kanuri",nativeName:"Kanuri"},ks:{name:"Kashmiri",nativeName:"\u0915\u0936\u094D\u092E\u0940\u0930\u0940"},ku:{name:"Kurdish",nativeName:"Kurd\xEE"},kv:{name:"Komi",nativeName:"\u043A\u043E\u043C\u0438 \u043A\u044B\u0432"},kw:{name:"Cornish",nativeName:"Kernewek"},ky:{name:"Kyrgyz",nativeName:"\u041A\u044B\u0440\u0433\u044B\u0437\u0447\u0430"},la:{name:"Latin",nativeName:"latine"},lb:{name:"Luxembourgish",nativeName:"L\xEBtzebuergesch"},lg:{name:"Ganda",nativeName:"Luganda"},li:{name:"Limburgish",nativeName:"Limburgs"},ln:{name:"Lingala",nativeName:"Ling\xE1la"},lo:{name:"Lao",nativeName:"\u0E9E\u0EB2\u0EAA\u0EB2\u0EA5\u0EB2\u0EA7"},lt:{name:"Lithuanian",nativeName:"lietuvi\u0173 kalba"},lu:{name:"Luba-Katanga",nativeName:"Kiluba"},lv:{name:"Latvian",nativeName:"latvie\u0161u valoda"},mg:{name:"Malagasy",nativeName:"fiteny malagasy"},mh:{name:"Marshallese",nativeName:"Kajin M\u0327aje\u013C"},mi:{name:"M\u0101ori",nativeName:"te reo M\u0101ori"},mk:{name:"Macedonian",nativeName:"\u043C\u0430\u043A\u0435\u0434\u043E\u043D\u0441\u043A\u0438 \u0458\u0430\u0437\u0438\u043A"},ml:{name:"Malayalam",nativeName:"\u0D2E\u0D32\u0D2F\u0D3E\u0D33\u0D02"},mn:{name:"Mongolian",nativeName:"\u041C\u043E\u043D\u0433\u043E\u043B \u0445\u044D\u043B"},mr:{name:"Marathi",nativeName:"\u092E\u0930\u093E\u0920\u0940"},ms:{name:"Malay",nativeName:"Bahasa Melayu"},mt:{name:"Maltese",nativeName:"Malti"},my:{name:"Burmese",nativeName:"\u1017\u1019\u102C\u1005\u102C"},na:{name:"Nauru",nativeName:"Dorerin Naoero"},nb:{name:"Norwegian Bokm\xE5l",nativeName:"Norsk bokm\xE5l"},nd:{name:"Northern Ndebele",nativeName:"isiNdebele"},ne:{name:"Nepali",nativeName:"\u0928\u0947\u092A\u093E\u0932\u0940"},ng:{name:"Ndonga",nativeName:"Owambo"},nl:{name:"Dutch",nativeName:"Nederlands"},nn:{name:"Norwegian Nynorsk",nativeName:"Norsk nynorsk"},no:{name:"Norwegian",nativeName:"Norsk"},nr:{name:"Southern Ndebele",nativeName:"isiNdebele"},nv:{name:"Navajo",nativeName:"Din\xE9 bizaad"},ny:{name:"Chichewa",nativeName:"chiChe\u0175a"},oc:{name:"Occitan",nativeName:"occitan"},oj:{name:"Ojibwe",nativeName:"\u140A\u14C2\u1511\u14C8\u142F\u14A7\u140E\u14D0"},om:{name:"Oromo",nativeName:"Afaan Oromoo"},or:{name:"Oriya",nativeName:"\u0B13\u0B21\u0B3C\u0B3F\u0B06"},os:{name:"Ossetian",nativeName:"\u0438\u0440\u043E\u043D \xE6\u0432\u0437\u0430\u0433"},pa:{name:"Panjabi",nativeName:"\u0A2A\u0A70\u0A1C\u0A3E\u0A2C\u0A40"},pi:{name:"P\u0101li",nativeName:"\u092A\u093E\u0934\u093F"},pl:{name:"Polish",nativeName:"Polski"},ps:{name:"Pashto",nativeName:"\u067E\u069A\u062A\u0648"},pt:{name:"Portuguese",nativeName:"Portugu\xEAs"},qu:{name:"Quechua",nativeName:"Runa Simi"},rm:{name:"Romansh",nativeName:"rumantsch grischun"},rn:{name:"Kirundi",nativeName:"Ikirundi"},ro:{name:"Romanian",nativeName:"Rom\xE2n\u0103"},ru:{name:"Russian",nativeName:"\u0420\u0443\u0441\u0441\u043A\u0438\u0439"},rw:{name:"Kinyarwanda",nativeName:"Ikinyarwanda"},sa:{name:"Sanskrit",nativeName:"\u0938\u0902\u0938\u094D\u0915\u0943\u0924\u092E\u094D"},sc:{name:"Sardinian",nativeName:"sardu"},sd:{name:"Sindhi",nativeName:"\u0938\u093F\u0928\u094D\u0927\u0940"},se:{name:"Northern Sami",nativeName:"Davvis\xE1megiella"},sg:{name:"Sango",nativeName:"y\xE2ng\xE2 t\xEE s\xE4ng\xF6"},si:{name:"Sinhala",nativeName:"\u0DC3\u0DD2\u0D82\u0DC4\u0DBD"},sk:{name:"Slovak",nativeName:"sloven\u010Dina"},sl:{name:"Slovenian",nativeName:"sloven\u0161\u010Dina"},sm:{name:"Samoan",nativeName:"gagana fa'a Samoa"},sn:{name:"Shona",nativeName:"chiShona"},so:{name:"Somali",nativeName:"Soomaaliga"},sq:{name:"Albanian",nativeName:"Shqip"},sr:{name:"Serbian",nativeName:"\u0441\u0440\u043F\u0441\u043A\u0438 \u0458\u0435\u0437\u0438\u043A"},ss:{name:"Swati",nativeName:"SiSwati"},st:{name:"Southern Sotho",nativeName:"Sesotho"},su:{name:"Sundanese",nativeName:"Basa Sunda"},sv:{name:"Swedish",nativeName:"Svenska"},sw:{name:"Swahili",nativeName:"Kiswahili"},ta:{name:"Tamil",nativeName:"\u0BA4\u0BAE\u0BBF\u0BB4\u0BCD"},te:{name:"Telugu",nativeName:"\u0C24\u0C46\u0C32\u0C41\u0C17\u0C41"},tg:{name:"Tajik",nativeName:"\u0442\u043E\u04B7\u0438\u043A\u04E3"},th:{name:"Thai",nativeName:"\u0E44\u0E17\u0E22"},ti:{name:"Tigrinya",nativeName:"\u1275\u130D\u122D\u129B"},tk:{name:"Turkmen",nativeName:"T\xFCrkmen\xE7e"},tl:{name:"Tagalog",nativeName:"Wikang Tagalog"},tn:{name:"Tswana",nativeName:"Setswana"},to:{name:"Tonga",nativeName:"faka Tonga"},tr:{name:"Turkish",nativeName:"T\xFCrk\xE7e"},ts:{name:"Tsonga",nativeName:"Xitsonga"},tt:{name:"Tatar",nativeName:"\u0442\u0430\u0442\u0430\u0440 \u0442\u0435\u043B\u0435"},tw:{name:"Twi",nativeName:"Twi"},ty:{name:"Tahitian",nativeName:"Reo Tahiti"},ug:{name:"Uyghur",nativeName:"\u0626\u06C7\u064A\u063A\u06C7\u0631\u0686\u06D5\u200E"},uk:{name:"Ukrainian",nativeName:"\u0423\u043A\u0440\u0430\u0457\u043D\u0441\u044C\u043A\u0430"},ur:{name:"Urdu",nativeName:"\u0627\u0631\u062F\u0648"},uz:{name:"Uzbek",nativeName:"\u040E\u0437\u0431\u0435\u043A"},ve:{name:"Venda",nativeName:"Tshiven\u1E13a"},vi:{name:"Vietnamese",nativeName:"Ti\u1EBFng Vi\u1EC7t"},vo:{name:"Volap\xFCk",nativeName:"Volap\xFCk"},wa:{name:"Walloon",nativeName:"walon"},wo:{name:"Wolof",nativeName:"Wollof"},xh:{name:"Xhosa",nativeName:"isiXhosa"},yi:{name:"Yiddish",nativeName:"\u05D9\u05D9\u05B4\u05D3\u05D9\u05E9"},yo:{name:"Yoruba",nativeName:"Yor\xF9b\xE1"},za:{name:"Zhuang",nativeName:"Sa\u026F cue\u014B\u0185"},zh:{name:"Chinese",nativeName:"\u4E2D\u6587"},zu:{name:"Zulu",nativeName:"isiZulu"}},Ar=Ro;var hr=class{static getLanguages(g=[]){return g.map(r=>({code:r,name:hr.getName(r),nativeName:hr.getNativeName(r)}))}static getName(g){return hr.validate(g)?Ar[g].name:""}static getAllNames(){return Object.values(Ar).map(g=>g.name)}static getNativeName(g){return hr.validate(g)?Ar[g].nativeName:""}static getAllNativeNames(){return Object.values(Ar).map(g=>g.nativeName)}static getCode(g){return Object.keys(Ar).find(o=>{let l=Ar[o];return l.name.toLowerCase()===g.toLowerCase()||l.nativeName.toLowerCase()===g.toLowerCase()})||""}static getAllCodes(){return Object.keys(Ar)}static validate(g){return Ar.hasOwnProperty(g)}};var Kr=require("obsidian"),xi=dr(Bi());var Ui=I=>{let{basename:g,parent:r}=I,o=r.children.filter(l=>{if(!(l instanceof Kr.TFile))return!1;let u=l.extension==="srt"||l.extension==="vtt",m=l.basename.startsWith(g);return u&&m});if(o.length>1&&(o=o.filter(l=>{let u=l.basename.slice(g.length);return u.startsWith(".")&&hr.validate(u.substring(1))})),o.length===0)return null;{let l=o.filter(u=>u.extension==="vtt").map(u=>u.basename);for(let u=o.length-1;u>=0;u--){let m=o[u];m.extension===".srt"&&l.includes(m.basename)&&o.splice(u,1)}return console.log("found subtitle(s): %o",o.map(u=>u.name)),o}},Lo=(I,g)=>Ut(void 0,null,function*(){let r=yield g.read(I);return new xi.default(new Blob([r])).getURL()}),No=(I,g)=>Ut(void 0,null,function*(){let r=new Blob([yield g.read(I)],{type:"text/vtt"});return URL.createObjectURL(r)}),ji=(I,g)=>Ut(void 0,null,function*(){let r=new Map;for(let u of I){let m,y;if(typeof u=="string")if((y=g.getAbstractFileByPath(u))&&y instanceof Kr.TFile)m=y;else{console.warn("no subFile found for path: %s",u);continue}else m=u;m.extension==="srt"?r.set(m,yield Lo(m,g)):r.set(m,yield No(m,g))}let o=[],l=[];for(let u of r.keys()){let m=u.basename.split(".").pop(),y=null,T=null;if(r.size>1){if(!m||!hr.validate(m))throw new Error("languageCode unable to parse, problem with getSubtitles()? ");y=hr.getNativeName(m),T=m}let E={kind:"captions",label:y!=null?y:"default",srcLang:T!=null?T:void 0,src:r.get(u)},t=createEl("track",{attr:{kind:"captions",label:y,srclang:T,src:r.get(u)}},e=>{navigator.language.substring(0,2)===m&&e.setAttr("default","")});l.push(t),o.push(E)}return{objUrls:[...r.values()],trackEls:l,tracks:o}}),Jr=class extends Kr.MarkdownRenderChild{constructor(r,o,l){super(r);this.objectUrls=l!=null?l:[],this.player=o}unload(){this.objectUrls&&this.objectUrls.forEach(r=>URL.revokeObjectURL(r)),this.player.destroy()}};var Rr=(o=>(o[o.youtube=0]="youtube",o[o.bili=1]="bili",o[o.vimeo=2]="vimeo",o))(Rr||{}),Zr=new Map([["audio",["mp3","wav","m4a","ogg","3gp","flac"]],["video",["mp4","ogv"]],["media",["webm"]]]),wo=I=>{let g=/\.[^/]+?$/,r,o;if(I instanceof URL)r=I.pathname,o=(0,_n.parse)(I.search);else{let l=(0,ki.default)(I,!1);r=l.pathname,o=(0,_n.parse)(l.query)}return g.test(r)?r:r==="/api"&&o.raw==="true"&&typeof o.path=="string"&&g.test(o.path)?o.path:null},Tn=I=>{let g=null;if(I instanceof _r.TFile)g=I.extension;else{let o=wo(I);o&&(g=o.split(".").pop())}if(!g)return null;let r=null;for(let[o,l]of Zr)l.includes(g)&&(r=o);return r},nr=I=>Array.isArray(I.subtitles),Cr=I=>!nr(I)&&!ir(I),ir=I=>I.host!==void 0&&I.id!==void 0,Tr=(...I)=>Ut(void 0,null,function*(){var l;let[g,r]=I;if(typeof g=="string")try{g=new URL(g)}catch(u){return null}let o=Tn(g);if(o){if(g instanceof _r.TFile){r?r.startsWith("#")||(r="#"+r):r="";let m=Ui(g);return{type:o,filename:g.name,src:g.path,subtitles:m?m.map(y=>y.path):[],hash:r,updateTrackInfo:bn,getSrcFile:Sn}}let u=(l=decodeURI(g.pathname).split("/").pop())!=null?l:"";return{type:o,filename:decodeURI(u),src:g,hash:g.hash}}else if(g instanceof _r.TFile)return null;switch(g.hostname){case"b23.tv":try{if(!_r.Platform.isDesktopApp)return null;let y=yield Jn(g.pathname.split("/")[1]);g=new URL(y)}catch(y){return console.error(y),null}case"www.bilibili.com":if(g.pathname.startsWith("/video")){let y=g.pathname.replace("/video/",""),T;if(/^bv/i.test(y))T=`?bvid=${y}`;else if(/^av/i.test(y))y=y.substring(2),T=`?aid=${y}`;else return console.log(`invaild video id: ${y}`),null;let E=g.searchParams.get("p");return E&&(T+=`&page=${E}`),{host:1,id:y,src:g,iframe:new URL(`https://player.bilibili.com/player.html${T}&high_quality=1&danmaku=0`),hash:g.hash}}else return console.log("bilibili video url not supported or invalid"),null;break;case"youtube.com":case"www.youtube.com":case"youtu.be":if(g.pathname==="/watch"){let y=g.searchParams.get("v");return y?{host:0,id:y,iframe:new URL(`https://www.youtube.com/embed/${y}`),src:g,hash:g.hash}:(console.log(`invalid video id: ${g.toString()}`),null)}else if(g.host==="youtu.be")if(/^\/[^\/]+$/.test(g.pathname)){let y=g.pathname.substring(1);return{host:0,id:y,iframe:new URL(`https://www.youtube.com/embed/${y}`),src:g,hash:g.hash}}else return console.log(`invalid video id: ${g.toString()}`),null;else return console.log("youtube video url not supported or invalid"),null;break;case"vimeo.com":let u=g.pathname,m;if(m=u.match(/^\/(\d+)$/)){let y=m[1];return{host:2,id:y,iframe:new URL(`https://player.vimeo.com/video/${y}`),src:g,hash:g.hash}}else return console.log("vimeo video url not supported or invalid"),null;default:return null}}),Dr=(...I)=>{let[g,r]=I;if(nr(g)){if(!r)throw new Error("vault not provided");let{src:o,hash:l}=g,u=r.getAbstractFileByPath(o);if(u&&u instanceof _r.TFile){let m=r.getResourcePath(u);return new URL(m+l)}else throw new Error("no file found for path: "+o)}else{let{src:o}=g;return o.protocol==="file:"?new URL(o.href.replace(/^file:\/\/\//,"app://local/")):o}},en=(I,g,r,o)=>Ut(void 0,null,function*(){if(g==="internal"){let l=I instanceof HTMLAnchorElement?I.dataset.href:I.getAttr("src");if(!l)return console.error("no linktext in internal embed: %o, escaping",I),null;let{subpath:u,path:m}=(0,_r.parseLinktext)(l),y=r.metadataCache.getFirstLinkpathDest(m,o.sourcePath);return y?Tr(y,u):null}else{let l=I instanceof HTMLAnchorElement?I.href:I.getAttr("src");return l?Tr(l):(console.info("fail to get embed src: %o, escaping",I),null)}});function bn(I){return Ut(this,null,function*(){if(this.subtitles.length>0){let g=yield ji(this.subtitles,I);return this.trackInfo=g,g}else return null})}function Sn(I){let g=I.getAbstractFileByPath(this.src);if(g&&g instanceof _r.TFile)return g;throw new Error("src file not found for path: "+this.src)}var Ki=dr(jr());var Fo='<svg aria-hidden="true" focusable="false"> <svg id="plyr-play" viewBox="0 0 18 18"><path d="M15.562 8.1L3.87.225c-.818-.562-1.87 0-1.87.9v15.75c0 .9 1.052 1.462 1.87.9L15.563 9.9c.584-.45.584-1.35 0-1.8z"></path></svg></svg ><span class="plyr__sr-only">Play</span>',Wi=(I,g,r)=>Ut(void 0,null,function*(){let o=yield Bo(I),l=createDiv({cls:["placeholder","plyr plyr--full-ui plyr--video"]});return o&&(l.style.backgroundImage=`url("${o}")`),kr(l,g,16/9),l.createEl("button",{cls:"plyr__control plyr__control--overlaid",attr:{type:"button","data-plyr":"play","aria-label":"Play"}},u=>{u.innerHTML=Fo,u.onClickEvent(()=>Ut(void 0,null,function*(){return l.replaceWith(yield r())}))}),l}),Bo=I=>Ut(void 0,null,function*(){let{id:g}=I;switch(I.host){case 0:return`https://i.ytimg.com/vi/${g}/maxresdefault.jpg`;case 1:return null;case 2:return yield xo(I.src);default:(0,Ki.default)(I.host)}}),xo=I=>Ut(void 0,null,function*(){let g=new URL("https://vimeo.com/api/oembed.json");return typeof I=="string"?g.searchParams.append("url",I):g.searchParams.append("url",I.href),fetch(g.href).then(r=>{if(r.ok)return r.json();throw new Error(r.statusText)}).then(r=>{var o;return(o=r.thumbnail_url)!=null?o:null}).catch(r=>(console.error(r),null))});var dl=dr(Hi()),$i=dr(jr());function Lr(I,g){let r=Object.keys(g).map(o=>Uo(I,o,g[o]));return r.length===1?r[0]:function(){r.forEach(o=>o())}}function Uo(I,g,r){let o=I[g],l=I.hasOwnProperty(g),u=r(o);return o&&Object.setPrototypeOf(u,o),Object.setPrototypeOf(m,u),I[g]=m,y;function m(...T){return u===o&&I[g]===m&&y(),u.apply(this,T)}function y(){I[g]===m&&(l?I[g]=o:delete I[g]),u!==o&&(u=o,Object.setPrototypeOf(m,o||Function))}}var qi=dr(Gi()),Ji=dr($r());var ar=require("obsidian");var Vi=new Map([["restart",['<svg aria-hidden="true" focusable="false" id="plyr-restart" viewBox="0 0 18 18"><path d="M9.7 1.2l.7 6.4 2.1-2.1c1.9 1.9 1.9 5.1 0 7-.9 1-2.2 1.5-3.5 1.5-1.3 0-2.6-.5-3.5-1.5-1.9-1.9-1.9-5.1 0-7 .6-.6 1.4-1.1 2.3-1.3l-.6-1.9C6 2.6 4.9 3.2 4 4.1 1.3 6.8 1.3 11.2 4 14c1.3 1.3 3.1 2 4.9 2 1.9 0 3.6-.7 4.9-2 2.7-2.7 2.7-7.1 0-9.9L16 1.9l-6.3-.7z"></path></svg>',"Restart"]],["rewind",['<svg aria-hidden="true" focusable="false" id="plyr-rewind" viewBox="0 0 18 18"><path d="M10.125 1L0 9l10.125 8v-6.171L18 17V1l-7.875 6.171z"></path></svg>',"Rewind"]],["play",['<svg aria-hidden="true" focusable="false" id="plyr-play" viewBox="0 0 18 18"><path d="M15.562 8.1L3.87.225c-.818-.562-1.87 0-1.87.9v15.75c0 .9 1.052 1.462 1.87.9L15.563 9.9c.584-.45.584-1.35 0-1.8z"></path></svg>',"Play/Pause"]],["fast-forward",['<svg aria-hidden="true" focusable="false" id="plyr-fast-forward" viewBox="0 0 18 18"><path d="M7.875 7.171L0 1v16l7.875-6.171V17L18 9 7.875 1z"></path></svg>',"Fast forward"]],["mute",['<svg aria-hidden="true" focusable="false" id="plyr-muted" viewBox="0 0 18 18"><path d="M12.4 12.5l2.1-2.1 2.1 2.1 1.4-1.4L15.9 9 18 6.9l-1.4-1.4-2.1 2.1-2.1-2.1L11 6.9 13.1 9 11 11.1zM3.786 6.008H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"></path></svg>',"Mute"]],["volume",['<svg aria-hidden="true" focusable="false" id="plyr-volume" viewBox="0 0 18 18"><path d="M15.6 3.3c-.4-.4-1-.4-1.4 0-.4.4-.4 1 0 1.4C15.4 5.9 16 7.4 16 9c0 1.6-.6 3.1-1.8 4.3-.4.4-.4 1 0 1.4.2.2.5.3.7.3.3 0 .5-.1.7-.3C17.1 13.2 18 11.2 18 9s-.9-4.2-2.4-5.7z"></path><path d="M11.282 5.282a.909.909 0 000 1.316c.735.735.995 1.458.995 2.402 0 .936-.425 1.917-.995 2.487a.909.909 0 000 1.316c.145.145.636.262 1.018.156a.725.725 0 00.298-.156C13.773 11.733 14.13 10.16 14.13 9c0-.17-.002-.34-.011-.51-.053-.992-.319-2.005-1.522-3.208a.909.909 0 00-1.316 0zm-7.496.726H.714C.286 6.008 0 6.31 0 6.76v4.512c0 .452.286.752.714.752h3.072l4.071 3.858c.5.3 1.143 0 1.143-.602V2.752c0-.601-.643-.977-1.143-.601L3.786 6.008z"></path></svg>',"Volume bar"]],["captions",['<svg aria-hidden="true" focusable="false" id="plyr-captions-on" viewBox="0 0 18 18"><path d="M1 1c-.6 0-1 .4-1 1v11c0 .6.4 1 1 1h4.6l2.7 2.7c.2.2.4.3.7.3.3 0 .5-.1.7-.3l2.7-2.7H17c.6 0 1-.4 1-1V2c0-.6-.4-1-1-1H1zm4.52 10.15c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41C8.47 4.96 7.46 3.76 5.5 3.76c-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69zm7.57 0c1.99 0 3.01-1.32 3.28-2.41l-1.29-.39c-.19.66-.78 1.45-1.99 1.45-1.14 0-2.2-.83-2.2-2.34 0-1.61 1.12-2.37 2.18-2.37 1.23 0 1.78.75 1.95 1.43l1.3-.41c-.28-1.15-1.29-2.35-3.25-2.35-1.9 0-3.61 1.44-3.61 3.7 0 2.26 1.65 3.69 3.63 3.69z" fill-rule="evenodd"></path></svg>',"Caption"]],["settings",['<svg aria-hidden="true" focusable="false" id="plyr-settings" viewBox="0 0 18 18"><path d="M16.135 7.784a2 2 0 01-1.23-2.969c.322-.536.225-.998-.094-1.316l-.31-.31c-.318-.318-.78-.415-1.316-.094a2 2 0 01-2.969-1.23C10.065 1.258 9.669 1 9.219 1h-.438c-.45 0-.845.258-.997.865a2 2 0 01-2.969 1.23c-.536-.322-.999-.225-1.317.093l-.31.31c-.318.318-.415.781-.093 1.317a2 2 0 01-1.23 2.969C1.26 7.935 1 8.33 1 8.781v.438c0 .45.258.845.865.997a2 2 0 011.23 2.969c-.322.536-.225.998.094 1.316l.31.31c.319.319.782.415 1.316.094a2 2 0 012.969 1.23c.151.607.547.865.997.865h.438c.45 0 .845-.258.997-.865a2 2 0 012.969-1.23c.535.321.997.225 1.316-.094l.31-.31c.318-.318.415-.781.094-1.316a2 2 0 011.23-2.969c.607-.151.865-.547.865-.997v-.438c0-.451-.26-.846-.865-.997zM9 12a3 3 0 110-6 3 3 0 010 6z"></path></svg>',"Control speed/ select captions..."]],["pip",['<svg aria-hidden="true" focusable="false" id="plyr-settings" viewBox="0 0 18 18"><path d="M16.135 7.784a2 2 0 01-1.23-2.969c.322-.536.225-.998-.094-1.316l-.31-.31c-.318-.318-.78-.415-1.316-.094a2 2 0 01-2.969-1.23C10.065 1.258 9.669 1 9.219 1h-.438c-.45 0-.845.258-.997.865a2 2 0 01-2.969 1.23c-.536-.322-.999-.225-1.317.093l-.31.31c-.318.318-.415.781-.093 1.317a2 2 0 01-1.23 2.969C1.26 7.935 1 8.33 1 8.781v.438c0 .45.258.845.865.997a2 2 0 011.23 2.969c-.322.536-.225.998.094 1.316l.31.31c.319.319.782.415 1.316.094a2 2 0 012.969 1.23c.151.607.547.865.997.865h.438c.45 0 .845-.258.997-.865a2 2 0 012.969-1.23c.535.321.997.225 1.316-.094l.31-.31c.318-.318.415-.781.094-1.316a2 2 0 011.23-2.969c.607-.151.865-.547.865-.997v-.438c0-.451-.26-.846-.865-.997zM9 12a3 3 0 110-6 3 3 0 010 6z"></path></svg>',"Picture-in-Picture"]],["fullscreen",['<svg aria-hidden="true" focusable="false" id="plyr-enter-fullscreen" viewBox="0 0 18 18"><path d="M10 3h3.6l-4 4L11 8.4l4-4V8h2V1h-7zM7 9.6l-4 4V10H1v7h7v-2H4.4l4-4z"></path></svg>',"Fullscreen"]],["current-time",["current-time","Current time"]],["duration",["duration","Duration"]]]),Rn=(I,g,r)=>createEl("button",rr({cls:["plyr__control"],type:"button",attr:{"aria-label":I}},g),r),jo=(I,g,r,o)=>{let l=Vi.get(I);if(!l)throw new Error("Invaild id");return Rn(g,r,u=>{u.insertAdjacentHTML("beforeend",l[0]),o&&o(u)})},rn=class{constructor(g,r){this.buttonMap=new WeakMap;this.plugin=r,this.containerEl=g,this.regularContainer=this.containerEl.createDiv({cls:"plyr-controls-settings plyr__controls"}),this.progressContainer=this.containerEl.createDiv({cls:"plyr-controls-settings plyr__controls plyr-progress-setting"},o=>o.createEl("input",{type:"range",attr:{disabled:!0}})),this.addControls(),this.containerEl.on("click","button",o=>{let l,u=o.target;if(l=this.buttonMap.get(u)){let m=!this.plyrControls[l];this.plyrControls[l]=m,this.plugin.saveSettings(),u.toggleClass("checked",m)}else console.error("unknown click target: %o",o.target)})}get plyrControls(){return this.plugin.sizeSettings.plyrControls}addControls(){let g=(r,o)=>r.toggleClass("checked",this.plyrControls[o]);Vi.forEach(([,r],o)=>{o==="current-time"?this.buttonMap.set(this.progressContainer.appendChild(Rn(r,{cls:"plyr__controls__item plyr__time--current plyr__time",text:"05:00"},l=>g(l,o))),"current-time"):o==="duration"?this.buttonMap.set(this.progressContainer.appendChild(Rn(r,{cls:"plyr__controls__item plyr__time--duration plyr__time",text:"10:00"},l=>g(l,o))),o):this.buttonMap.set(this.regularContainer.appendChild(jo(o,r,{},l=>g(l,o))),o)})}};var Cn="alx-hide-ytb-recomm",Yi={mediaFragmentsEmbed:!0,timestampLink:!0,extendedImageEmbedSyntax:!0,thumbnailPlaceholder:!1,useYoutubeControls:!1,interalBiliPlayback:!0,hideYtbRecomm:!1,embedMaxHeight:"30vh",embedMinWidth:"400px",plyrControls:{restart:!1,rewind:!1,play:!0,"fast-forward":!1,progress:!0,"current-time":!0,duration:!0,mute:!1,volume:!0,captions:!0,settings:!0,pip:!1,fullscreen:!0},embedMaxHeightMobile:"20vh",embedMinWidthMobile:"200px",plyrControlsMobile:{restart:!1,rewind:!1,play:!0,"fast-forward":!1,progress:!0,"current-time":!1,duration:!1,mute:!1,volume:!0,captions:!0,settings:!0,pip:!1,fullscreen:!0},timestampTemplate:`
{{TIMESTAMP}}
`,timestampOffset:0,hideEmbedControls:!1},zi=I=>[...Object.entries(I)].filter(g=>g[1]).map(g=>g[0]),nn=class extends ar.PluginSettingTab{constructor(r,o){super(r,o);this.setToggle=({k:r,name:o,desc:l},u)=>{let{settings:m}=this.plugin;new ar.Setting(this.containerEl).setName(o).setDesc(typeof l=="string"?l:createFragment(l)).addToggle(y=>{let T=m[r];if(typeof T=="boolean")y.setValue(T).onChange(E=>Ut(this,null,function*(){u&&u(E),m[r]=E,this.plugin.saveData(m),this.display()}));else throw new TypeError("toggle not boolean")})};this.plugin=o}display(){let{containerEl:r}=this;r.empty(),this.general(),this.noteTaking(),this.player(),this.ytb(),this.bili()}general(){let{containerEl:r}=this,{setToggle:o}=this;r.createEl("h2",{text:"General"}),o({k:"mediaFragmentsEmbed",name:"Embed Media Fragments",desc:l=>{l.appendText("If enabled, you can write ![[demo.mp4#t=10]] to embed the specific fragment of video/audio. "),l.createEl("br"),l.appendText("Loop is also available by appending #loop or #t=...&loop to filename"),l.createEl("br"),l.appendText("Restart the app to take effects")}}),o({k:"timestampLink",name:"Timestamps for Media",desc:l=>{l.appendText("If enabled, you can write [[demo.mp4#t=10]] to create timestamp link to the video/audio. Click on the link would open the media file if it's not opened yet. "),l.createEl("br"),l.appendText("PS: Only works in preview mode, hover preview on link is not available"),l.createEl("br"),l.appendText("Restart the app to take effects")}}),o({k:"extendedImageEmbedSyntax",name:"Extended Image Embed Syntax",desc:l=>{l.appendText("If enabled, you can write ![](link/to/demo.mp4) to embed video and audio."),l.createEl("br"),l.appendText("Timestamps and fragments are also available"),l.createEl("br"),l.appendText("Support direct file links (local/remote) and videos from video hosts (Youtube, bilibili...)"),l.createEl("br"),l.appendText("Restart the app to take effects")}})}player(){let{containerEl:r}=this,{setToggle:o}=this;r.createEl("h2",{text:"Player"}),o({k:"thumbnailPlaceholder",name:"Placeholder in favor of full player",desc:u=>{u.appendText("If enabled, thumbnail placeholder will be used in favor of full player when page loads"),u.createEl("br"),u.appendText("Works with for Youtube/Vimeo/bilibili embeds"),u.createEl("br"),u.appendText("Helpful when numerous video from Youtube/Vimeo/... is embeded in one single file"),u.createEl("br"),u.appendText("Restart the app to take effects")}}),o({k:"hideEmbedControls",name:"Hide Embed Controls By Default",desc:u=>{u.appendText("If enabled, embeds are rendered similar to images with all controls hidden, click on embeds to play/pause"),u.createEl("br"),u.appendText("You can still enable controls manually by append #controls to link"),u.createEl("br"),u.appendText("Restart the app to take effects")}});let l=new ar.Setting(r).setName("Plyr Controls").setDesc(createFragment(u=>{u.appendText("Show or hide certain plyr controls"),u.createEl("br"),u.appendText("Restart the app to take effects")}));new rn(l.settingEl.createDiv({cls:"plyr-ctrls-container"}),this.plugin),new ar.Setting(r).setName("Maximum Player Height for Embeds").setDesc("Reload app to take effects").addText(u=>{let m=(0,ar.debounce)(y=>Ut(this,null,function*(){return yield this.plugin.setSizeSettings({embedMaxHeight:y})}),500,!0);u.setValue(this.plugin.sizeSettings.embedMaxHeight).onChange(y=>Ut(this,null,function*(){u.inputEl.toggleClass("incorrect",!Pr(y)),Pr(y)&&m(y)}))}),new ar.Setting(r).setName("Minimum Player Width for Embeds").addText(u=>{let m=(0,ar.debounce)(y=>Ut(this,null,function*(){this.plugin.setEmbedMinWidth(y),yield this.plugin.setSizeSettings({embedMinWidth:y})}),500,!0);u.setValue(this.plugin.sizeSettings.embedMinWidth).onChange(y=>Ut(this,null,function*(){u.inputEl.toggleClass("incorrect",!Pr(y)),Pr(y)&&m(y)}))})}noteTaking(){let{containerEl:r}=this;r.createEl("h2",{text:"Note Taking"}),new ar.Setting(r).setName("Timestamp Template").setDesc(createFragment(o=>{o.appendText("The template used to insert timestamps."),o.createEl("br"),o.appendText("Supported placeholders: {{TIMESTAMP}}")})).addTextArea(o=>{let l=u=>Ut(this,null,function*(){this.plugin.settings.timestampTemplate=u,yield this.plugin.saveSettings()});o.setValue(this.plugin.settings.timestampTemplate).onChange((0,ar.debounce)(l,500,!0)),o.inputEl.rows=5,o.inputEl.cols=20}),new ar.Setting(r).setName("Timestamp Offset").setDesc(createFragment(o=>{o.appendText("Amount of seconds to offset timestamps."),o.createEl("br"),o.appendText("Set postive value to offset time backward, vice versa")})).addText(o=>{let l=(0,ar.debounce)(u=>Ut(this,null,function*(){this.plugin.settings.timestampOffset=Number(u),yield this.plugin.saveSettings()}),500,!0);o.setValue(String(this.plugin.settings.timestampOffset)).onChange(u=>Ut(this,null,function*(){o.inputEl.toggleClass("incorrect",isNaN(Number(u))),isNaN(Number(u))||l(u)}))})}ytb(){let{containerEl:r}=this,{setToggle:o}=this;r.createEl("h2",{text:"Youtube"}),o({k:"useYoutubeControls",name:"Use Youtube Built-in Controls",desc:l=>{l.appendText("If enabled, Youtube's built-in Controls will be used in favor of Plyr controls"),l.createEl("br"),l.appendText("Useful when need access to CC (Closed Captioning) and chapters progress bar"),l.createEl("br"),l.appendText("Restart the app to take effects")}}),this.plugin.settings.useYoutubeControls||o({k:"hideYtbRecomm",name:"Hide Recommend Videos",desc:"Blur on pause to hide annoying recommend videos, ignored when Youtube Built-in Controls enabled"},l=>document.body.toggleClass(Cn,l))}bili(){let{containerEl:r}=this;r.createEl("h2",{text:"bilibili"});let o=new ar.Setting(r).setName("\u9AD8\u7EA7bilibili\u652F\u6301").setDesc(createFragment(l=>{l.appendText("\u66FF\u4EE3\u5D4C\u5165\u5F0Fiframe\u64AD\u653E\u5668\uFF0C\u652F\u6301\u65F6\u95F4\u6233\u3001\u64AD\u653E1080p\u89C6\u9891\u7B49"),l.createEl("br"),this.app.isMobile?l.appendText("\u79FB\u52A8\u7248\u5C1A\u4E0D\u652F\u6301"):pr(this.app)||(l.appendText("BiliBili Plugin\u5C1A\u672A\u542F\u7528\uFF0C"),l.createEl("a",{href:"https://github.com/aidenlx/mx-bili-plugin",text:"\u70B9\u6B64\u4E0B\u8F7D"}))}));!this.app.isMobile&&pr(this.app)&&(o.addToggle(l=>{let{settings:u}=this.plugin;l.setValue(u.interalBiliPlayback).onChange(m=>Ut(this,null,function*(){u.interalBiliPlayback=m,this.plugin.saveData(u),this.display()}))}),ei(this.app)(r))}};var Xi=dr($r());var on={tFrag:new RegExp("^(?<start>[\\w:\\.]*?)(?:,(?<end>[\\w:\\.]+?))?$"),npt_sec:/^\d+(?:\.\d+)?$/,npt_mmss:new RegExp("^(?<mm>[0-5]\\d):(?<ss>[0-5]\\d(?:\\.\\d+)?)$"),npt_hhmmss:new RegExp("^(?<hh>\\d+):(?<mm>[0-5]\\d):(?<ss>[0-5]\\d(?:\\.\\d+)?)$")},Qi=I=>{if(I){let r=(0,Xi.parse)(I).t,o;if(r&&typeof r=="string"&&(o=on.tFrag.exec(r))!==null){if(!o.groups)throw new Error("tFragRegex match error");let{start:l,end:u}=o.groups,m=ko(l,u);if(m)return Ur(rr({},m),{raw:r})}}return null},ko=(I,g)=>{let r=I||null,o=g!=null?g:null,l,u;if(r&&o)l=an(r),u=an(o);else if(r)l=an(r),u=1/0;else if(o)l=0,u=an(o);else throw console.error(I,g),new Error("Missing startTime and endTime");return l===null||u===null?null:{start:l,end:u}},an=I=>{let g=/^(?:npt:)?([\d\.:]+)$/;if(g.test(I)){let r=I.match(g)[1],o;if((o=on.npt_sec.exec(r))!==null)return+o[0];if((o=on.npt_mmss.exec(r))!==null){if(!o.groups)throw new Error("npt_mmss match error");let{mm:l,ss:u}=o.groups;return+l*60+ +u}else if((o=on.npt_hhmmss.exec(r))!==null){if(!o.groups)throw new Error("npt_hhmmss match error");let{hh:l,mm:u,ss:m}=o.groups;return+l*60*60+ +u*60+ +m}else return null}else return null};var Wr=I=>{let g=I?Qi(I):null,r=I?(0,Ji.parse)(I):null,o=u=>r?r[u]===null:!1,l=new Map([["loop","loop"],["mute","muted"],["play","autoplay"],["controls","controls"]]);return{timeSpan:g,is:u=>{if(!I)return!1;for(let[m,y]of l)if(u===y&&o(m))return!0;return!1},setPlayerTF:u=>{Ko(u,g)},setHashOpt:u=>l.forEach((m,y)=>{m==="controls"?u instanceof HTMLMediaElement&&o(y)&&(u[m]=!0):o(y)&&(u[m]=!0)})}},Ko=(I,g)=>{let r=I,o=u=>{if(!r.timeSpan)return;let{timeSpan:{start:m,end:y},currentTime:T}=r;(T>y||T<m)&&(r.currentTime=m)},l=u=>{if(!r.timeSpan)return;let{timeSpan:{start:m,end:y},currentTime:T}=r;T>y&&(r.loop?(r.currentTime=m,r.paused&&r.play()):r.pause())};r.setTimeSpan=u=>{var m;r.timeSpan=u,u?(r instanceof HTMLMediaElement&&!r.onplaying?(r.onplaying=o,r.ontimeupdate=l):(r.on("playing",o),r.on("timeupdate",l)),r.currentTime=(m=u.start)!=null?m:0):(r instanceof HTMLMediaElement?(r.onplaying=null,r.ontimeupdate=null):(r.off("playing",o),r.off("timeupdate",l)),r.currentTime=0)},r.setTimeSpan(g!=null?g:null)},Wo=(I,g)=>{let r={};return I&&I.start!==0&&(r.youtube||(r.youtube={}),r.youtube.start=I.start),g&&(r.youtube||(r.youtube={}),r.controls=["play-large"],r.youtube.controls=!0),r},sn=(I,g,r)=>{let{is:o,setHashOpt:l,setPlayerTF:u,timeSpan:m}=Wr(I.hash),{app:y}=g,{useYoutubeControls:T}=g.settings,E=ir(I)&&I.host===0,t=E?Wo(m,T):null,e={invertTime:!1,controls:zi(g.sizeSettings.plyrControls)},n=rr(rr({},e),t);r&&r(n),n.autoplay=o("autoplay");let i=createDiv().appendChild(createEl("video")),d=new qi.default(i,n);if(ir(I)&&I.host===1){let b=I.iframe.searchParams.has("aid")?"av"+I.id:I.id,A=I.src.searchParams.get("p"),_=dashjs.MediaPlayer().create(),h=new URL("http://localhost/geturl/"+b);h.port=Zn(y).toString(),A&&h.searchParams.append("page",A),_.initialize(i,h.toString(),!1),Lr(d,{destroy(c){return function(){_.destroy(),c.call(this)}}});let f=ti(y);(()=>Ut(void 0,null,function*(){let c=I.iframe.searchParams.has("aid")?yield f(+I.id):yield f(I.id);c?d.poster=c:console.error("unable to fetch poster")}))()}else{let b=Go(I,y.vault);d.source=b,d.sourceBak=b}if(l(d),u(d),nr(I)&&I.subtitles.length>0){let b=d.elements.poster;b?b.addClass("visuallyhidden"):console.error("unable to find posterEl from",d.elements),d.once("ready",()=>d.toggleCaptions())}Ho(I,d);let P=Ir(d);return T&&P.classList.add("yt-controls"),E&&T&&d.on("ready",()=>Ut(void 0,null,function*(){yield d.play(),d.pause()})),d},Ho=(I,g)=>{if(!ir(I)&&I.type==="media"&&g.isHTML5){let r=0,o=()=>{let l=g.media;if(l&&l instanceof HTMLVideoElement)if(r===0)l.videoHeight!==0||l.videoWidth!==0?(g.off("loadedmetadata",o),g.sourceBak.type="video"):r++;else if(g.off("loadedmetadata",o),l.videoHeight===0&&l.videoWidth===0){g.sourceBak.type="audio",console.log("media is audio, switching...");let u=g.playing;g.source=g.sourceBak,u&&g.once("canplay",()=>g.play()),Ir(g).style.height=null}else g.sourceBak.type="video"};g.on("loadedmetadata",o)}},Go=(I,g)=>{if(ir(I)){if(I.host===1)throw new Error("Bilibili not supported in Plyr");return{type:"video",sources:[{src:I.id,provider:Rr[I.host]}]}}else{let r=I.type==="media"?"video":I.type;if(Cr(I))return{type:r,sources:[{src:Dr(I).href}]};if(nr(I)){if(I.subtitles.length>0&&I.trackInfo===void 0)throw new Error("trackInfo not updated");return{type:r,sources:[{src:Dr(I,g).href}],tracks:I.trackInfo?I.trackInfo.tracks:void 0}}else(0,$i.default)(I)}},Ir=I=>{let g=I.elements.container;if(g)return g;throw new Error("Plyr container null")};var In=(I,g)=>{let r=g==="internal"?"span.internal-embed, div.internal-embed":"img[referrerpolicy]";return(o,l)=>{o.querySelectorAll(r).forEach(u=>Ut(void 0,null,function*(){let m=yield en(u,g,I.app,l);if(!m)return;let{is:y}=Wr(m.hash),T=null,E=I.sizeSettings.embedMaxHeight,t=n=>Vo(n,E),e=(n=!1)=>Ut(void 0,null,function*(){let i;if(nr(m)){let b=yield m.updateTrackInfo(I.app.vault);b&&(i=b.objUrls)}let d=sn(m,I,b=>{I.settings.hideEmbedControls&&!y("controls")&&(b.controls=["play-large"])});t(d),n&&d.once("ready",function(b){this.play()});let P=Ir(d);return l.addChild(new Jr(P,d,i)),P});if(ir(m)){let{thumbnailPlaceholder:n,interalBiliPlayback:i}=I.settings,d=m.host===1&&(!pr(I.app)||!i),P=n&&m.host!==1,b=()=>Ut(void 0,null,function*(){return d?ri(m):yield e(P)});P&&!d?T=yield Wi(m,E,b):T=yield b()}else T=yield e();if(T){let n=u.getAttr("width");n&&(T.style.width=n+"px",T.style.minWidth="0px");let i=u.getAttr("height");i&&(T.style.height=i+"px",T.style.minHeight="0px"),u.replaceWith(T)}}))}},Vo=(I,g)=>{if(!Pr(g))throw new TypeError("maxHeight not css value");let r=Ir(I);if(!I.isVideo)return;let o="mx-default-height";r.style.setProperty("--"+o,g),I.isHTML5?(r.addClass(o),I.once("canplay",()=>{let l=m=>{let[y,T]=m.split(":");if(!Number.isInteger(+y)||!Number.isInteger(+T)){console.error("invaild ratio",m);return}r.removeClass(o),kr(r,g,+y/+T)},u=(m,y,T)=>{let E=0,t=window.setInterval(()=>{I.isVideo?I.ratio?(window.clearInterval(t),l(I.ratio)):E>m?(T(),window.clearInterval(t)):E++:window.clearInterval(t)},y)};u(10,100,()=>{console.log("fail to get ratio within 1s, fallback to 16:9"),l("16:9"),u(4,1e3,()=>console.warn("no ratio for video: ",I.source))})})):I.once("ready",()=>{kr(r,g,16/9)})};var un=require("obsidian");var aa=dr(jr()),oa=dr(Ln());var or=require("obsidian");var wr="media-view",Nn=!1,Mr=class extends or.FileView{constructor(r,o,l){super(r);this.allowNoFile=!0;this.core=null;this.togglePip=()=>{if(!this.player)throw new Error("no media");this.player.pip=!this.player.pip};this.addToDoc=()=>{if(this.leaf.group){let r=this.app.workspace.getGroupLeaves(this.leaf.group);for(let o of r)if(o.view instanceof or.MarkdownView){this.addTimeStampToMDView(o.view),Nn=!0;return}}else console.error("no group for leaf: %o",this.leaf)};this.addTimeStampToMDView=r=>{let o=this.getTimeStamp();if(!o)return;let{timestampTemplate:l}=this.plugin.settings;Qr(l.replace(/{{TIMESTAMP}}/g,o),r)};this.plugin=o,this.emptyEl=this.setEmpty(),this.playerEl=this.contentEl.createDiv({cls:"media-view-player"}),this.app.isMobile&&this.addAction("cross","Close",()=>this.leaf.detach()),this.controls=this.getControls();let u=Lr(r,{open(m){let{containerEl:y}=app.workspace;return y.onClickEvent(T=>{T.targetNode.ariaLabel&&T.targetNode.ariaLabel.substring(0,5)=="\u8BE5\u9762\u677F\u5904\u4E8E"&&(Nn=!1)}),function(T){if(this.group){if(Nn&&app.workspace.getLeaf().view.getMode()!="source"&&app.workspace.getLeaf().view.toggleMode(),T instanceof Mr)return m.call(this,T);T instanceof or.MarkdownView&&this.containerEl.childNodes.length==3&&this.containerEl.removeChild(this.containerEl.lastChild)}else return m.call(this,T)}}});this.register(u),this.setInfo(l!=null?l:null)}get player(){var r,o;return(o=(r=this.core)==null?void 0:r.player)!=null?o:null}onLoadFile(r){return Ut(this,null,function*(){let o=yield Tr(r,"");o?this.setInfo(o):new or.Notice("Fail to open file")})}onRename(r){return Ut(this,null,function*(){if(this.file&&this.file===r&&this.core){let{info:o}=this.core,{currentTime:l}=this.core.player;yield this.setInfo(yield Tr(r,o.hash)),this.player&&this.player.once("canplay",function(){window.setTimeout(()=>this.currentTime=l,200)})}hn(Mr.prototype,this,"onRename").call(this,r)})}onDelete(r){super.onDelete(r),this.file&&this.file===r&&this.leaf.detach()}get info(){var r,o;return(o=(r=this.core)==null?void 0:r.info)!=null?o:null}setInfo(r){return Ut(this,null,function*(){if(r===null)this.showEmpty(),r&&this.unloadCore(),this.file=null;else if(this.isEqual(r))this.hash=r.hash;else{this.showEmpty(!0),r&&this.unloadCore(),nr(r)&&(this.file=r.getSrcFile(this.app.vault),yield r.updateTrackInfo(this.app.vault));let o=sn(r,this.plugin);if(this.playerEl.appendChild(Ir(o)),o.isHTML5?this.showControl("pip"):this.hideControl("pip"),this.core={info:r,player:o},this.load(),o.isYouTube){let l=u=>{u.detail.code===1&&(this.load(),o.off("statechange",l))};o.on("statechange",l)}}})}showEmpty(r=!1){this.emptyEl.style.display=r?"none":null,this.playerEl.style.display=r?null:"none",r?this.showControls():this.hideControls()}getState(){let r=super.getState();return r.info=Ur(rr({},this.info),{trackInfo:void 0}),r.currentTime=this.core?this.core.player.currentTime:0,r}setState(r,o){return Ut(this,null,function*(){let l=r.info,u=r.currentTime,m=()=>{u&&window.setTimeout(()=>{if(this.core){let{player:y}=this.core;y.once("playing",()=>{y.currentTime=u,y.pause()}),y.play()}else console.error("fail to set currentTime: media view empty")},1e3)};try{l?ir(l)?(l.src=new URL(l.src),l.iframe=new URL(l.iframe),yield this.setInfo(l),m()):Cr(l)?(l.src=new URL(l.src),yield this.setInfo(l),m()):nr(l)?(yield this.setInfo(Ur(rr({},l),{updateTrackInfo:bn,getSrcFile:Sn})),m()):(0,aa.default)(l):l===null&&(yield this.setInfo(l))}catch(y){console.error(y),yield this.setInfo(null)}yield hn(Mr.prototype,this,"setState").call(this,r,o)})}onMoreOptionsMenu(r){let o=l=>{let u=new Map([["0.5\xD7","0.5"],["0.75\xD7","0.75"],["Normal","1"],["1.25\xD7","1.25"],["1.5\xD7","1.5"],["1.75\xD7","1.75"],["2\xD7","2"],["4\xD7","4"]]),m=new or.Menu;for(let[y,T]of u)m.addItem(E=>E.setTitle(y).setChecked(Boolean(this.player&&this.player.speed===+T)).onClick(()=>{this.player&&(this.player.speed=+T)}));return m};r.addItem(l=>l.setTitle("Speed Control").onClick(u=>o(this.app).showAtMouseEvent(u)))}getControls(){return new Map([["get-timestamp",this.addAction("star","Get current Timestamp",this.addToDoc)],["pip",this.addAction("popup-open","Toggle Picture-in-Picture",this.togglePip)],["open-link",this.addAction("go-to-file","Open Media from link",()=>new Nr(this.plugin,this).open())]])}setEmpty(){let{contentEl:r}=this,o=r.createDiv({cls:"empty-state"});return o.createDiv({cls:"empty-state-container"},l=>{l.createDiv({cls:"empty-state-title",text:"No Media"}),l.createDiv({cls:"empty-state-action-list"},u=>{((y,T)=>{u.createDiv({cls:"empty-state-action",text:y},E=>E.onClickEvent(T))})("Open Media from Link",()=>{let y=new Nr(this.plugin,this).open()})})}),o}get timeSpan(){var r,o;return(o=(r=this.player)==null?void 0:r.timeSpan)!=null?o:null}set timeSpan(r){if(this.player)this.player.setTimeSpan(r);else throw new Error("trying to set timeSpan on empty media view")}set hash(r){if(!this.player)throw new Error("trying to set timeSpan on empty media view");let{timeSpan:o,is:l}=Wr(r);this.player.setTimeSpan(o),this.player.autoplay=l("autoplay"),this.player.loop=l("loop"),this.player.muted=l("muted")}unloadCore(){if(this.core){let{info:r,player:o}=this.core;nr(r)&&r.trackInfo&&r.trackInfo.objUrls.forEach(l=>URL.revokeObjectURL(l)),o.pip&&(o.pip=!1),o.destroy(),this.updatePlayerEl(),this.core=null}else console.warn("core already destoryed")}updatePlayerEl(){let r=createDiv({cls:"media-view-player"});this.playerEl.replaceWith(r),this.playerEl=r}unload(){this.unloadCore()}getViewType(){return wr}getDisplayText(){let r=o=>{let l=o.split(".");return l.pop(),l.join(".")};if(this.core){let{info:o,player:l}=this.core;if(nr(o)||Cr(o))return r(o.filename);if(o.host===0||o.host===2){let u=()=>{var y;return(y=l==null?void 0:l.config)==null?void 0:y.title},m;if(m=u())return m;{let y=0,T=window.setInterval(()=>{let E=u();E&&this.load(),(E||y>10)&&window.clearInterval(T),y++},200)}}return Rr[o.host]+": "+o.id}else return""}isEqual(r){return this.info===null?!1:nr(r)&&nr(this.info)?r.src===this.info.src:Cr(r)&&Cr(this.info)?Xr(Dr(r))===Xr(Dr(this.info)):ir(r)&&ir(this.info)?r.host===this.info.host&&r.id===this.info.id&&!(r.host===1&&r.src.searchParams.get("p")!==this.info.src.searchParams.get("p")):!1}getTimeStamp(r){if(!this.info)return null;if(!this.player)throw new Error("no media");let o=this.player.currentTime,{timestampOffset:l}=this.plugin.settings,u=o-l;o-l<0?u=0:o-l>this.player.duration&&(u=this.player.duration);let m=oa.default.fromS(u,"hh:mm:ss").replace(/^00:/g,"");return nr(this.info)?`[[${this.app.metadataCache.fileToLinktext(this.info.getSrcFile(this.app.vault),r!=null?r:"",!0)}#t=${m}]]`:`[${m.replace(/\.\d+$/,"")}](${Xr(this.info.src)}#t=${u})`}showControls(){this.controls.forEach(r=>{r.style.display==="none"&&(r.style.display=null)})}showControl(r){let o=this.controls.get(r);o?o.style.display==="none"&&(o.style.display=""):console.error(`control named ${r} not found in %o`,this.controls)}hideControls(){this.controls.forEach(r=>r.style.display="none")}hideControl(r){let o=this.controls.get(r);o?o.style.display="none":console.error(`control named ${r} not found in %o`,this.controls)}},Nr=class extends or.Modal{constructor(r,o){super(r.app);this.view=o,this.plugin=r}onOpen(){let{contentEl:r,titleEl:o,modalEl:l}=this;o.setText("Enter Link to Media");let u=r.createEl("input",{type:"text"},m=>m.style.width="100%");l.createDiv({cls:"modal-button-container"},m=>{m.createEl("button",{cls:"mod-cta",text:"Open"},y=>y.onClickEvent(()=>Ut(this,null,function*(){var E;let T=yield Tr(u.value);T?this.view?(yield this.view.setInfo(T),(E=this.view.player)==null||E.once("ready",function(){this.play()}),this.close()):this.app.workspace.activeLeaf?(wn(T,this.app.workspace.activeLeaf,this.plugin),this.close()):new or.Notice("No activeLeaf found"):new or.Notice("Link not supported")}))),m.createEl("button",{text:"Cancel"},y=>y.onClickEvent(()=>this.close()))})}onClose(){let{contentEl:r}=this;r.empty()}},wn=(I,g,r)=>{let{workspace:o}=r.app;if(!(g.view instanceof or.MarkdownView)){new or.Notice("No MarkdownView active, open new markdown file or click on opened md file");return}let l=()=>{var E,t;let y=(E=o.rootSplit.containerEl)==null?void 0:E.clientWidth,T=(t=o.rootSplit.containerEl)==null?void 0:t.clientHeight;return T&&y?T<y?"vertical":"horizontal":(console.error("no containerEl for rootSplit, fallback to horizontal",o.rootSplit),"horizontal")},u=o.createLeafBySplit(g,l());g.setGroupMember(u);let m=new Mr(u,r,I);if(u.open(m),m.core){let{player:y}=m.core;y.once("ready",function(){this.play()})}};var sa=(I,g)=>{let{workspace:r}=g.app;return o=>{if(ir(I)&&I.host===1&&(!pr(g.app)||!g.settings.interalBiliPlayback))return;if(o.stopPropagation(),o.preventDefault(),!r.activeLeaf){console.error("no active leaf");return}let l=r.activeLeaf.group,u=null;if(l){let m=r.getLeavesOfType(wr).filter(y=>y.group===l);m.length>0&&(u=m[0]);for(let y=1;y<m.length;y++)m[y].detach()}if(u){let m=u.view,y=m.isEqual(I);m.setInfo(I).then(()=>{if(!m.core)return;let{player:T}=m.core;y?T.play():!ir(I)&&I.type==="media"&&T.isHTML5?T.once("ready",function(){let E=this.play(),t=0;E&&E.catch(e=>{var i;let n="The play() request was interrupted by a new load request";t===0&&((i=e.message)!=null&&i.includes(n))?(console.warn(e),t++):console.error(e)})}):T.once("ready",function(){this.play()})})}else r.activeLeaf&&wn(I,r.activeLeaf,g)}},Fn=(I,g)=>{let r=g==="internal"?"a.internal-link":"a.external-link";return(o,l)=>{o.querySelectorAll(r).forEach(u=>Ut(void 0,null,function*(){let m=u,y=yield en(m,g,I.app,l);y&&I.registerDomEvent(m,"click",sa(y,I))}))}},la=I=>{let{workspace:g,metadataCache:r,vault:o}=I.app;return(l,u)=>Ut(void 0,null,function*(){let m=u.innerText;if(/Macintosh|iPhone/.test(navigator.userAgent)?l.metaKey:l.ctrlKey){let E;if(u.hasClass("cm-hmd-internal-link")){let{path:t,subpath:e}=(0,un.parseLinktext)(m);if(Tn(t))l.stopPropagation();else return;let n=g.getActiveViewOfType(un.MarkdownView);if(!n){console.error("no MarkdownView activeLeaf found");return}let i=r.getFirstLinkpathDest(t,n.file.path);if(!i)return;E=yield Tr(i,e)}else if(u.hasClass("cm-formatting")&&u.hasClass("cm-formatting-link-string")){let t;if(m==="("?t=u.nextElementSibling:m===")"?t=u.previousElementSibling:t=null,t===null||!(t instanceof HTMLElement)){console.error("unable to get url from: %o",u);return}E=yield Tr(t.innerText)}else E=yield Tr(m);try{E&&sa(E,I)(l)}catch(t){console.error(t)}}})};var ua=dr(Ln());var Gr=require("obsidian");function fa(){let{vault:I,fileManager:g,workspace:r}=this.app,o=this,l=this.app.internalPlugins.plugins["audio-recorder"];if(!l)return;let u=y=>{let T=o.recStartTime;o.recStartTime=null;let E=t=>Ut(this,null,function*(){let e=yield I.read(t);return I.modify(t,e.replace(new RegExp(`%%REC_${T}#t=([\\d.]+?)%%`,"g"),(n,i)=>{let d=ua.default.fromS(+i,"hh:mm:ss").replace(/^00:/g,""),P=g.generateMarkdownLink(y,t.path,"#t="+i,d).substring(1);return P.startsWith("[]")?P.replace(/^\[\]/,`[${d}]`):P}))});r.getLeavesOfType("markdown").forEach(t=>{t.view instanceof Gr.MarkdownView&&(t!==r.activeLeaf?E(t.view.file):window.setTimeout(()=>{t.view instanceof Gr.MarkdownView&&E(t.view.file)},500))})};this.addCommand({id:"take-rec-timestamp",name:"Get Current Timestamp of Recording",editorCheckCallback:(y,T,E)=>{if(y)return typeof this.recStartTime=="number";{let t=this.recStartTime;if(t){let{timestampTemplate:e}=this.settings,n=`%%REC_${this.recStartTime}#t=${(Date.now()-t)/1e3}%%`;Qr(e.replace(/{{TIMESTAMP}}/g,n),E)}}}});let m=Lr(l.instance,{saveRecording(y){return function(...T){let E=y.apply(this,T),t=()=>I.off("create",n),e=window.setTimeout(t,3e5),n=i=>{i instanceof Gr.TFile?u(i):console.error("unexpected folder"),t(),window.clearTimeout(e)};return I.on("create",n),E}},startRecording(y){return function(...T){let E=y.apply(this,T),t=this.recorder;return o.recStartTime=Date.now(),t&&t instanceof MediaRecorder&&t.addEventListener("start",()=>{o.recStartTime=Date.now()}),E}}});this.register(m)}var ca="span.cm-url, span.cm-hmd-internal-link",fn=class extends ha.Plugin{constructor(){super(...arguments);this.settings=Yi;this.recStartTime=null;this.cmLinkHandler=la(this);this.setEmbedMinWidth=r=>document.documentElement.style.setProperty("--plyr-min-width",r!=null?r:this.sizeSettings.embedMinWidth);this.setSizeSettings=r=>Ut(this,null,function*(){let o;this.app.isMobile?o={embedMaxHeightMobile:r.embedMaxHeight,embedMinWidthMobile:r.embedMinWidth,plyrControlsMobile:r.plyrControls}:o=r;let l=(u,m)=>{let y={};return Object.keys(rr(rr({},u),m)).map(T=>{y[T]=m[T]||u[T]}),y};this.settings=l(this.settings,o),yield this.saveSettings()})}loadSettings(){return Ut(this,null,function*(){this.settings=rr(rr({},this.settings),yield this.loadData())})}saveSettings(){return Ut(this,null,function*(){yield this.saveData(this.settings)})}get sizeSettings(){return{embedMaxHeight:this.app.isMobile?this.settings.embedMaxHeightMobile:this.settings.embedMaxHeight,embedMinWidth:this.app.isMobile?this.settings.embedMinWidthMobile:this.settings.embedMinWidth,plyrControls:this.app.isMobile?this.settings.plyrControlsMobile:this.settings.plyrControls}}onload(){return Ut(this,null,function*(){console.log("loading media-extended"),yield this.loadSettings(),fa.call(this),document.body.toggleClass(Cn,this.settings.hideYtbRecomm),this.setEmbedMinWidth(),this.addSettingTab(new nn(this.app,this)),this.settings.mediaFragmentsEmbed&&this.registerMarkdownPostProcessor(In(this,"internal")),this.settings.timestampLink&&this.registerMarkdownPostProcessor(Fn(this,"internal")),this.settings.extendedImageEmbedSyntax&&this.registerMarkdownPostProcessor(In(this,"external")),this.registerMarkdownPostProcessor(Fn(this,"external")),this.app.isMobile||this.registerCodeMirror(r=>{let o=r.getWrapperElement();o.on("mousedown",ca,this.cmLinkHandler),this.register(()=>o.off("mousedown",ca,this.cmLinkHandler))}),this.registerExtensions(),this.addCommand({id:"get-timestamp",name:"Get timestamp from player",editorCheckCallback:(r,o,l)=>{var y;let u=T=>{var E;return(E=this.app.workspace.getGroupLeaves(T).find(t=>t.view.getTimeStamp!==void 0))==null?void 0:E.view},m=l.leaf.group;if(r){if(m){let T=u(m);if(T&&T.getTimeStamp())return!0}return!1}else m&&((y=u(m))==null||y.addTimeStampToMDView(l))}}),this.addCommand({id:"open-media-link",name:"Open Media from Link",callback:()=>{new Nr(this).open()}})})}registerExtensions(){let r=da();this.app.viewRegistry.unregisterExtensions(r),this.registerView(wr,o=>new Mr(o,this)),this.app.viewRegistry.registerExtensions(r,wr)}unregisterExtensions(){this.app.viewRegistry.unregisterExtensions(da());for(let[r,o]of Zr)switch(r){case"audio":case"video":this.app.viewRegistry.registerExtensions(o,r);break;case"media":this.app.viewRegistry.registerExtensions(o,"video");break;default:(0,ma.default)(r)}}onunload(){console.log("unloading media-extended"),this.unregisterExtensions()}},da=()=>[...Zr.values()].reduce((I,g)=>I.concat(g),[]);
/*! Bundled license information:

dashjs/dist/dash.all.debug.js:
  (*!
  * The buffer module from node.js, for the browser.
  *
  * @author   Feross Aboukhadijeh <http://feross.org>
  * @license  MIT
  *)
  (*! codem-isoboxer v0.3.6 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt *)
  (*!
  * @overview es6-promise - a tiny implementation of Promises/A+.
  * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
  * @license   Licensed under MIT license
  *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
  * @version   v4.2.8+1e68dce6
  *)
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
  (*! http://mths.be/fromcodepoint v0.1.0 by @mathias *)

zero-fill/index.js:
  (*! zero-fill. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
